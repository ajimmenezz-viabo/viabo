import{a8 as u,ac as y,d as N,g as k,C as n,a9 as j,ab as l,r as P,j as a,B as R,S as v,p as A,H as L,Z as M,aA as D,P as w,l as G}from"./index-6d885c9c.js";import{s as z}from"./build-9563ddbe.js";import{a as s}from"./build-bf16cd7e.js";import{G as S}from"./build-1be04a1c.js";const V={TOKEN_COMMERCE:"tokenCommerce",VALIDATION_CODE:"validationCode",COMMERCE_PROCESS:"commerceProcess"},B=e=>{const{id:o,fiscalPersonType:t,taxName:r,tradeName:m,rfc:d,employees:E,branchOffices:g,paymentAPI:x,registerStep:_,legalRepresentative:f,services:p,pointSaleTerminal:C,documents:c}=e,i=p==null?void 0:p.find(O=>O.type==="2"),b=(i==null?void 0:i.cardNumbers)||0,h=(i==null?void 0:i.cardUse)||"",T=(i==null?void 0:i.personalized)==="1"||!1;return{id:o,idUser:f,services:p,fiscalTypePerson:t,fiscalName:r,rfc:d,commercialName:m,employeesNumber:Number(E),branchesNumber:Number(g),tpvsNumber:Number(C),apiRequired:x==="1",cardsNumber:Number(b),cardsUse:h,customCardsRequired:T,files:c,step:Number(_)}},te=async e=>{const{data:o}=await u.post("/api/security/legalRepresentative/new",e);return o},se=async e=>{const{data:o}=await u.get("/api/legal-representative/verificate",{headers:{Username:`${e}`}});return o},U=async()=>{const{data:e}=await u.get("/api/commerce/legal-representative");return B(e)},oe=async e=>{const{data:o}=await u.put("/api/commerce/update",e);return o},ae=async e=>{const{data:o}=await u.post("/api/commerce/documents/create",e);return o},re=async e=>{const{data:o}=await u.post("/api/commerce/documents/delete",e);return o},F=(e={})=>{const{enqueueSnackbar:o}=y();return N([V.COMMERCE_PROCESS],U,{staleTime:60*5e3,onError:t=>{const r=k(t,"ðŸ˜Ÿ Error al obtener el proceso del comercio");o(r,{variant:"error",autoHideDuration:5e3})},...e})},ne={actualProcess:n.string,token:n.string,resume:n.object,lastProcess:n.shape({name:n.any,info:n.any}),getComponent:n.func,getBackProcess:n.func,setLastProcess:n.func,setActualProcess:n.func,setToken:n.func,setResume:n.func},H={actualProcess:s.REGISTER,token:null,resume:null,lastProcess:{name:null,info:null},processList:[{name:s.REGISTER,component:()=>l(()=>import("./build-ebc56d3a.js"),["assets/js/build-ebc56d3a.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-8e91e4fb.js","assets/js/build-2c1894a6.js","assets/js/build-eab39792.js","assets/js/build-707ab60f.js","assets/js/build-cdcae220.js","assets/js/build-bf16cd7e.js","assets/js/build-675387a5.js","assets/js/build-91991cd4.js","assets/js/build-7542e9d9.js","assets/js/build-9c58681c.js","assets/js/build-3c5032db.js","assets/js/build-5683891b.js","assets/js/build-92798b6a.js","assets/js/build-a15cc5cf.js","assets/js/build-9563ddbe.js","assets/js/build-1be04a1c.js"]),backProcess:s.REGISTER},{name:s.CONTINUE_PROCESS,component:()=>l(()=>import("./build-eb39ad0d.js"),["assets/js/build-eb39ad0d.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-8e91e4fb.js","assets/js/build-675387a5.js","assets/js/build-bf16cd7e.js","assets/js/build-163a2567.js","assets/js/build-eb45b3f9.js","assets/js/build-eab39792.js","assets/js/build-707ab60f.js","assets/js/build-cdcae220.js","assets/js/build-7542e9d9.js","assets/js/build-9563ddbe.js","assets/js/build-1be04a1c.js"]),backProcess:s.REGISTER},{name:s.VALIDATION_CODE,component:()=>l(()=>import("./build-221fb985.js"),["assets/js/build-221fb985.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-2e11d2fb.js","assets/js/build-eab39792.js","assets/js/build-707ab60f.js","assets/js/build-bf16cd7e.js","assets/js/build-163a2567.js","assets/js/build-da45dfd0.js","assets/js/build-eb45b3f9.js","assets/js/build-94eac2fe.js","assets/js/build-a15cc5cf.js","assets/js/build-9563ddbe.js","assets/js/build-1be04a1c.js"]),backProcess:s.REGISTER},{name:s.SERVICES_SELECTION,component:()=>l(()=>import("./build-146c9c59.js"),["assets/js/build-146c9c59.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-4032112d.js","assets/js/build-bf16cd7e.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-91991cd4.js","assets/js/build-4ad234a2.js","assets/js/build-9563ddbe.js","assets/js/build-1be04a1c.js"]),backProcess:s.REGISTER},{name:s.COMMERCE_INFO,component:()=>l(()=>import("./build-0ad00b80.js"),["assets/js/build-0ad00b80.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-8e91e4fb.js","assets/js/build-4032112d.js","assets/js/build-bf16cd7e.js","assets/js/build-675387a5.js","assets/js/build-eab39792.js","assets/js/build-707ab60f.js","assets/js/build-5683891b.js","assets/js/build-92798b6a.js","assets/js/build-9563ddbe.js","assets/js/build-1be04a1c.js"]),backProcess:s.SERVICES_SELECTION},{name:s.COMMERCE_DOCUMENTATION,component:()=>l(()=>import("./build-2587a868.js"),["assets/js/build-2587a868.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-8e91e4fb.js","assets/js/build-4032112d.js","assets/js/build-6a767468.js","assets/js/build-bee6630b.js","assets/js/build-707ab60f.js","assets/js/build-bf16cd7e.js","assets/js/build-c7c48e82.js","assets/js/build-1be04a1c.js","assets/js/build-4ad234a2.js","assets/js/build-a15cc5cf.js","assets/js/build-9563ddbe.js"]),backProcess:s.COMMERCE_INFO},{name:s.FINISHED_PROCESS,component:()=>l(()=>import("./build-292568f1.js"),["assets/js/build-292568f1.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-bf16cd7e.js","assets/js/build-9563ddbe.js","assets/js/build-1be04a1c.js"]),backProcess:s.COMMERCE_DOCUMENTATION}]},q=(e,o)=>({...H,getComponent:()=>{const{processList:t,actualProcess:r}=o(),m=()=>l(()=>import("./build-221fb985.js"),["assets/js/build-221fb985.js","assets/js/index-6d885c9c.js","assets/css/build-f63bc8fe.css","assets/js/build-2e11d2fb.js","assets/js/build-eab39792.js","assets/js/build-707ab60f.js","assets/js/build-bf16cd7e.js","assets/js/build-163a2567.js","assets/js/build-da45dfd0.js","assets/js/build-eb45b3f9.js","assets/js/build-94eac2fe.js","assets/js/build-a15cc5cf.js","assets/js/build-9563ddbe.js","assets/js/build-1be04a1c.js"]);return t.find(d=>d.name===r).component??m},getBackProcess:()=>{const{processList:t,actualProcess:r}=o();return t.find(m=>m.name===r).backProcess??s.REGISTER},setLastProcess:t=>{e(r=>({lastProcess:{name:(t==null?void 0:t.name)||null,info:(t==null?void 0:t.info)||null}}))},setActualProcess:t=>{e(r=>({actualProcess:t})),t===s.REGISTER&&(localStorage.removeItem("token"),delete u.defaults.headers.common.Authorization)},setToken:t=>{e(r=>({token:t})),localStorage.setItem("token",t),u.defaults.headers.common.Authorization=`Bearer ${t}`},setResume:t=>{e(r=>({resume:t}))}}),I=j(q),$=()=>{const e=I(c=>c.getComponent),o=I(c=>c.getBackProcess),t=I(c=>c,z),{actualProcess:r,setToken:m,setActualProcess:d,setResume:E,token:g,resume:x}=t,{data:_,isSuccess:f}=F({enabled:!!g});P.useEffect(()=>{E(_&&f?_:null)},[_,f]),P.useEffect(()=>{r===s.REGISTER&&(m(null),E(null))},[r,m]);const p=()=>{const c=o();d(c)},C=P.useMemo(()=>P.lazy(e()),[r]);return a.jsx(R,{sx:{height:{xs:"100%",sm:"100%",md:"100%",lg:"100vh",xl:"100vh"},display:"flex",flexDirection:"column",overflow:"auto",zIndex:1},children:a.jsxs(P.Suspense,{fallback:a.jsx(K,{}),children:[r!==s.REGISTER&&a.jsx(v,{m:5,mb:0,direction:"row",children:a.jsx(A,{onClick:p,children:"< Regresar"})}),a.jsx(R,{m:5,height:1,children:a.jsx(C,{store:t})})]})})},K=()=>a.jsx(R,{sx:{position:"relative",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(1px)",zIndex:e=>e.zIndex.modal-1},children:a.jsx(L,{})}),Q="/react/assets/img/integracion-tecnologica.png",Y=M("div")(({theme:e})=>({top:0,left:0,right:0,bottom:0,zIndex:8,position:"absolute",backgroundColor:D(e.palette.grey[900],.1)}));function Z(){return a.jsx(w,{title:"Registro Comercio",children:a.jsxs(S,{container:!0,spacing:0,component:"main",justifyContent:"center",height:"100vH",children:[a.jsx(S,{item:!0,elevation:0,xs:!1,sm:!1,md:6,xl:7,children:a.jsxs(R,{sx:{position:"relative",display:{xs:"none",md:"flex"},height:1,backgroundColor:"#161C24"},children:[a.jsx(Y,{}),a.jsx(R,{component:G.LazyLoadImage,wrapperClassName:"wrapper",effect:"blur",placeholderSrc:"https://zone-assets-api.vercel.app/assets/img_placeholder.svg",sx:{width:1,height:1,objectFit:"cover"},src:Q})]})}),a.jsx(S,{item:!0,xs:12,sm:12,md:6,xl:5,alignItems:"center",justify:"center",sx:{overflow:"auto"},children:a.jsx($,{})})]})})}const ce=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{V as C,ae as a,ce as b,te as c,re as d,se as g,ne as p,oe as u};
