import{t as y,j as e,u as T,n as E,g as I,o as k,r as N,S as s,T as u,B as R,$ as A,L as D}from"./build-7f26f9ca.js";import{u as F}from"./build-1442fb25.js";import{c as M,a as _}from"./build-38142a14.js";import{u as o,C as w}from"./build-bdda7ab5.js";import{v as P}from"./build-7829488d.js";import{c as V}from"./build-ce399990.js";import{R as z}from"./build-e1125ef8.js";import{F as H,M as q}from"./build-bfec3b8f.js";import{I as B}from"./build-8ee9e1f7.js";import{C as L}from"./build-07a32a61.js";import"./build-3c5effeb.js";import"./build-f7a5a130.js";import"./build-fb36d713.js";import"./build-bee6630b.js";import"./build-b2ad78ab.js";const G=y([e.jsx("path",{d:"M4 4h16v6H4zm0 9h16v2H4z",opacity:".3"},"0"),e.jsx("path",{d:"M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z"},"1")],"CardMembershipTwoTone"),$=(i={})=>{const{enqueueSnackbar:n}=T();return E({mutationFn:P,onError:a=>{const c=I(a,"No se puede validar la tarjeta.");n(c,{variant:k(a),autoHideDuration:5e3})},...i})};function ie(){const i=o(r=>r.setToken),n=o(r=>r.setStepAssignRegister),a=o(r=>r.setCard),c=o(r=>r.resetState),{mutate:h,isLoading:x}=$(),f=M().shape({cardNumber:_().transform((r,t)=>t.replace(/\s/g,"")).min(8,"Debe contener los últimos 8 dígitos").required("El número de la tarjeta es requerido")}),m=F({initialValues:{cardNumber:""},validationSchema:f,onSubmit:(r,{setSubmitting:t})=>{var l;h({cardNumber:(l=r==null?void 0:r.cardNumber)==null?void 0:l.replace(/\s+/g,"")},{onSuccess:v=>{const{token:p,...b}=v;p&&(i(p),a(b),n(w.USER_REGISTER)),t(!1)},onError:()=>{t(!1)}})}}),{isSubmitting:g,values:j,setFieldValue:S,handleSubmit:C}=m,d=g||x;return N.useEffect(()=>{c()},[]),e.jsxs(s,{sx:{display:"flex",overflow:"hidden"},children:[e.jsxs(s,{direction:"column",width:1,spacing:1,children:[e.jsx(u,{variant:"h4",color:"textPrimary",align:"center",children:"Registrar Tarjeta"}),e.jsx(u,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Ingrese los 8 últimos dígitos de la tarjeta para iniciar con el proceso de asociación de la misma."}),e.jsx(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4},children:e.jsx("img",{className:"animate__animated animate__pulse",src:V,width:"25%",alt:"Sent Mail"})})]}),e.jsx(A,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:e.jsx(H,{formik:m,children:e.jsx(s,{spacing:2,p:3,children:e.jsx(z,{name:"cardNumber",required:!0,placeholder:"9717 8968",fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(L,{})}),inputComponent:q,inputProps:{mask:"0000 0000",value:j.cardNumber,onAccept:r=>{S("cardNumber",r)}}},disabled:d})})})}),e.jsx(s,{spacing:3,px:3,children:e.jsx(D,{loading:d,variant:"contained",color:"primary",fullWidth:!0,type:"submit",onClick:C,disabled:d,startIcon:e.jsx(G,{}),children:"Validar"})})]})}export{ie as default};
