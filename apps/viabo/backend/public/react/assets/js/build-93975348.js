import{g as D}from"./build-cc42fa56.js";import{as as I,at as g}from"./index-6a8fe1ba.js";import{f as s}from"./build-808afb1b.js";import{f as h}from"./build-6dac182c.js";const L=c=>{const l=D(c==null?void 0:c.ciphertext,c==null?void 0:c.iv);let f=0,u=0;return{movements:(l==null?void 0:l.map(a=>{var M,x;const d=parseFloat((a==null?void 0:a.amount)||"0");(a==null?void 0:a.type.toLowerCase())==="gasto"?f+=d:u+=d;const w=a!=null&&a.date?I(new Date(a==null?void 0:a.date),"dd MMM yyyy",{locale:g}):"",N=a!=null&&a.date?I(new Date(a==null?void 0:a.date),"p"):"",p=a!=null&&a.receiptFiles?(M=a==null?void 0:a.receiptFiles)==null?void 0:M.split(","):[],r=p==null?void 0:p.reduce((C,i)=>(i.endsWith(".xml")?C.xml=i:i.endsWith(".pdf")&&(C.pdf=i),C),{xml:null,pdf:null}),y=(r==null?void 0:r.xml)!==null&&(r==null?void 0:r.pdf)!==null;return{id:a==null?void 0:a.transactionId,serverDate:a==null?void 0:a.date,fullDate:h(a==null?void 0:a.date),date:w,time:N,description:a==null?void 0:a.description,amount:d,amountFormat:s(d),type:a==null?void 0:a.type.toLowerCase(),concept:(a==null?void 0:a.concept)??"",operationType:(x=a==null?void 0:a.operationType)==null?void 0:x.toUpperCase(),cardId:a==null?void 0:a.cardId,commerceId:a==null?void 0:a.cardCommerceId,ownerCard:a!=null&&a.cardMain?a==null?void 0:a.cardCommerceName:(a==null?void 0:a.cardOwnerName)===""?"Sin Asignar":a==null?void 0:a.cardOwnerName,cardNumber:a!=null&&a.cardMain?"Cuenta Maestra":a==null?void 0:a.cardNumber,cardCommerceName:a==null?void 0:a.cardCommerceName,verified:!!(a!=null&&a.checked),isMainCard:!!(a!=null&&a.cardMain),expensesControl:{id:a==null?void 0:a.receiptId,isInvoice:y,invoiceFiles:r,otherFiles:y?[]:p},original:a}}))??[],income:s(u),expenses:s(f),balanceMovements:s(u-f)}};export{L as C};
