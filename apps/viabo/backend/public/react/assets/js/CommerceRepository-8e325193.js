import{a1 as b,_ as m,ae as R,ab as h,ac as y,O as l,af as O,R as g,a2 as M}from"./index-21571737.js";import{P as S,b as c}from"./CommerceRegister-43a2c944.js";var C=function(r){b(s,r);function s(n,e){var t;return t=r.call(this)||this,t.client=n,t.setOptions(e),t.bindMethods(),t.updateResult(),t}var a=s.prototype;return a.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},a.setOptions=function(e){this.options=this.client.defaultMutationOptions(e)},a.onUnsubscribe=function(){if(!this.listeners.length){var e;(e=this.currentMutation)==null||e.removeObserver(this)}},a.onMutationUpdate=function(e){this.updateResult();var t={listeners:!0};e.type==="success"?t.onSuccess=!0:e.type==="error"&&(t.onError=!0),this.notify(t)},a.getCurrentResult=function(){return this.currentResult},a.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},a.mutate=function(e,t){return this.mutateOptions=t,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,m({},this.options,{variables:typeof e<"u"?e:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},a.updateResult=function(){var e=this.currentMutation?this.currentMutation.state:R(),t=m({},e,{isLoading:e.status==="loading",isSuccess:e.status==="success",isError:e.status==="error",isIdle:e.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=t},a.notify=function(e){var t=this;h.batch(function(){t.mutateOptions&&(e.onSuccess?(t.mutateOptions.onSuccess==null||t.mutateOptions.onSuccess(t.currentResult.data,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(t.currentResult.data,null,t.currentResult.variables,t.currentResult.context)):e.onError&&(t.mutateOptions.onError==null||t.mutateOptions.onError(t.currentResult.error,t.currentResult.variables,t.currentResult.context),t.mutateOptions.onSettled==null||t.mutateOptions.onSettled(void 0,t.currentResult.error,t.currentResult.variables,t.currentResult.context))),e.listeners&&t.listeners.forEach(function(u){u(t.currentResult)})})},s}(y);function w(r,s,a){return typeof s=="function"?s.apply(void 0,a):typeof s=="boolean"?s:!!r}function P(r,s,a){var n=l.useRef(!1),e=l.useState(0),t=e[1],u=O(r,s,a),f=g(),i=l.useRef();i.current?i.current.setOptions(u):i.current=new C(f,u);var o=i.current.getCurrentResult();l.useEffect(function(){n.current=!0;var d=i.current.subscribe(h.batchCalls(function(){n.current&&t(function(p){return p+1})}));return function(){n.current=!1,d()}},[]);var v=l.useCallback(function(d,p){i.current.mutate(d,p).catch(M)},[]);if(o.error&&w(void 0,i.current.options.useErrorBoundary,[o.error]))throw o.error;return m({},o,{mutate:v,mutateAsync:o.mutate})}const E=r=>{const{type:s,taxName:a,tradeName:n,rfc:e,employees:t,branchOffices:u,paymentApi:f,registerStep:i,register:o}=r;return{services:[],fiscalTypePerson:s,fiscalName:a,rfc:e,commercialName:n,employeesNumber:t,branchesNumber:u,tpvsNumber:"",apiRequired:!!f,cardsNumber:"",cardsUse:"",customCardsRequired:!1,files:[],step:i==="1"||i===""?S.SERVICES_SELECTION:i}},T=async r=>{const{data:s}=await c.post("/api/security/legalRepresentative/new",r);return s},U=async r=>{const{data:s}=await c.get(`/api/register/commerce/legalRepresentative/find/${r}`);return s},I=async r=>{const{data:s}=await c.post("/api/code/verification/resend",r);return s},A=async r=>{const{data:s}=await c.post("/api/code/verificate",r);return s},L=async r=>{const{data:s}=await c.get(`/api/commerce/${r}`);return E(s)},_=async r=>{const{data:s}=await c.post("/api/business/commerce/addServices",r);return s};export{_ as a,U as b,T as c,I as d,L as g,w as s,P as u,A as v};
