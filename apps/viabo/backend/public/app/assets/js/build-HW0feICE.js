import{k as E,a as R,Q as F,g as L,b as f,j as s,S as a,T as l,L as w,O as i}from"./index-x-tL3MOy.js";import{u as X}from"./build-RTCxoqUU.js";import{c as I,a as S,d as T}from"./build-Nd1r18oH.js";import{a as O,M as _}from"./build-skNL5sbC.js";import{F as k,c as q}from"./build-eCwt9U-A.js";import{R as G}from"./build-7Rmqxzyl.js";import{R as t}from"./build-LZHsYRLc.js";import{i as z}from"./build-XMbFjTpc.js";import{F as $,q as B}from"./build-mZf3ZGCw.js";import{R as D}from"./build-A7tjs9HB.js";import{F as P}from"./build-Pt2-zlVs.js";import{R as A}from"./build-yw6dnA5g.js";import"./build-GMGSYTt0.js";import"./build-ee8L5M-j.js";import"./build-EckPbxwb.js";import"./build-D1gP2gt3.js";import"./build-zH8OCAbq.js";import"./build-zEF68lUW.js";import"./build-A0pkRIS4.js";import"./build-Dae5ZSnf.js";import"./build-TmPCBBAV.js";import"./build-aXq1ykHm.js";import"./build-3JmeY1AD.js";import"./build-Kbx5ZuUJ.js";import"./build-Uc7vb3zK.js";import"./build-Q1bOWlNZ.js";import"./build-rDZAP2eW.js";import"./build-fO9Z8l-Y.js";import"./build-WksAqt8r.js";import"./build-P_JIiLI3.js";import"./build-YUdFPXK7.js";const Q=(e,o)=>{var n,d;const p=new FormData,x={commerceId:o==null?void 0:o.id,fiscalPersonType:e==null?void 0:e.fiscalTypePerson,taxName:e==null?void 0:e.fiscalName,tradeName:e==null?void 0:e.commercialName,rfc:e==null?void 0:e.rfc,employees:e==null?void 0:e.employeesNumber,branchOffices:e==null?void 0:e.branchesNumber,postalAddress:e==null?void 0:e.postalAddress,phonesNumbers:e==null?void 0:e.phonesNumbers,slug:(n=e==null?void 0:e.terminalCommerceSlug)==null?void 0:n.toLowerCase(),publicTerminal:((d=e==null?void 0:e.publicTerminal)==null?void 0:d.value)||null,logo:e==null?void 0:e.commerceLogo};return Object.entries(x).forEach(([c,m])=>{p.append(c,m)}),p},V=(e={})=>{const o=E(),p=R(O,e);return{...p,mutate:async(n,d)=>{const{onSuccess:c,onError:m,mutationOptions:b}=d;try{await F.promise(p.mutateAsync(n,b),{pending:"Actualizando Comercio ...",success:{render({data:r}){return o.invalidateQueries([_.COMMERCE_LIST]),z(c)&&c(r),"Se actualizo la información del comercio con éxito"}}})}catch(r){const u=L(r,"No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas");z(m)&&m(u),F.error(u,{type:f(r)})}}}};function U({commerce:e,onSuccess:o}){var u,g,j,N,y,v;const{mutate:p,isLoading:x}=V(),n=I().shape({commercialName:S().trim().required("El nombre comercial es requerido"),employeesNumber:T().min(1,"Al menos debe existir un empleado"),branchesNumber:T().min(1,"Al menos debe existir una sucursal"),terminalCommerceSlug:S().trim().matches(/^[a-zA-Z]+([_][a-zA-Z]+)*$/,{message:"Solo se permiten letras y los espacios se deben convertir en guion bajo (_).",excludeEmptyString:!0})}),d=X({initialValues:{commercialName:((u=e==null?void 0:e.information)==null?void 0:u.commercialName)||"",fiscalName:((g=e==null?void 0:e.information)==null?void 0:g.fiscalName)||"",fiscalTypePerson:((j=e==null?void 0:e.information)==null?void 0:j.fiscalTypePerson)||"Moral",rfc:((N=e==null?void 0:e.information)==null?void 0:N.rfc)||"",employeesNumber:((y=e==null?void 0:e.information)==null?void 0:y.employeesNumber)||"",branchesNumber:((v=e==null?void 0:e.information)==null?void 0:v.branchesNumber)||"",postalAddress:"",phonesNumbers:"",terminalCommerceSlug:"",publicTerminal:null,commerceLogo:null},enableReinitialize:!0,validationSchema:n,onSubmit:(h,{setSubmitting:C,setFieldTouched:W})=>{const M=Q(h,e);p(M,{onSuccess:()=>{o(),C(!1)},onError:()=>{C(!1)}})}}),{isSubmitting:c,setFieldValue:m,values:b}=d,r=c||x;return s.jsx(k,{formik:d,children:s.jsxs(a,{spacing:2,p:3,children:[s.jsxs(a,{spacing:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Nombre Comercial *"}),s.jsx(t,{size:"small",name:"commercialName",disabled:r,required:!0,placeholder:"Comercio ..."})]}),s.jsxs(a,{spacing:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Nombre Fiscal"}),s.jsx(t,{size:"small",name:"fiscalName",disabled:r,placeholder:"Comercio S.A. de C.V. ..."})]}),s.jsxs(a,{flexDirection:{xs:"column",md:"row"},gap:3,children:[s.jsxs(a,{spacing:1,flex:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"RFC"}),s.jsx(t,{size:"small",name:"rfc",disabled:r,placeholder:"XXXXXXXXX ..."})]}),s.jsx(a,{flex:1,children:s.jsxs($,{disabled:r,children:[s.jsx(B,{id:"fiscal-type-person-group-label",sx:{color:"text.disabled",typography:"overline"},children:"Tipo de Persona"}),s.jsxs(D,{value:b.fiscalTypePerson,onChange:h=>{m("fiscalTypePerson",h.target.value)},row:!0,"aria-labelledby":"fiscal-type-person-group-label",name:"fiscalTypePerson",children:[s.jsx(P,{value:"Física",control:s.jsx(A,{}),label:"Física"}),s.jsx(P,{value:"Moral",control:s.jsx(A,{}),label:"Moral"})]})]})})]}),s.jsxs(a,{direction:{xs:"column",md:"row"},spacing:3,children:[s.jsxs(a,{spacing:1,flex:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Número de empleados"}),s.jsx(t,{size:"small",name:"employeesNumber",type:"number",inputProps:{inputMode:"numeric",min:"1"},disabled:r,placeholder:"0"})]}),s.jsxs(a,{spacing:1,flex:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Número de sucursales"}),s.jsx(t,{size:"small",name:"branchesNumber",disabled:r,placeholder:"0",type:"number",inputProps:{inputMode:"numeric",min:"1"}})]})]}),s.jsxs(a,{spacing:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Dirección Postal"}),s.jsx(t,{size:"small",name:"postalAddress",multiline:!0,disabled:r,rows:2,placeholder:"..."})]}),s.jsxs(a,{spacing:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Números Telefónicos"}),s.jsx(t,{size:"small",name:"phonesNumbers",disabled:r,placeholder:"(00)-0000 000... , (00) 0000 000..."})]}),s.jsxs(a,{spacing:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Liga de cobro (Slug)"}),s.jsx(t,{size:"small",name:"terminalCommerceSlug",disabled:r,placeholder:"mi_comercio ..."})]}),s.jsxs(a,{flex:1,spacing:1,children:[s.jsx(l,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Terminal Cobro Pública *"}),s.jsx(G,{size:"small",name:"publicTerminal",disabled:r,options:[],textFieldParams:{placeholder:"Seleccionar ...",size:"small"}})]}),s.jsxs(a,{spacing:1,children:[s.jsx(l,{variant:"overline",sx:{color:"text.disabled",width:1},children:"Logo (Max - 3MB):"}),s.jsx(q,{name:"commerceLogo",maxSize:3145728,accept:{"image/*":[".svg",".webp",".png"]}})]}),s.jsx(a,{pt:2,children:s.jsx(w,{loading:c,variant:"contained",color:"primary",fullWidth:!0,type:"submit",sx:{fontWeight:"bold"},children:"Guardar"})})]})})}U.propTypes={commerce:i.shape({information:i.shape({branchesNumber:i.string,commercialName:i.string,employeesNumber:i.string,fiscalName:i.string,fiscalTypePerson:i.string,rfc:i.string})}),onSuccess:i.func};export{U as default};
