import{ad as Ke,ae as Xe,Z as Y,af as mt,ag as Et,ah as v,r as h,ai as Ue,aj as Oe,ak as Z,j as s,al as Qe,am as ss,an as Mt,ao as It,n as Bt,ap as Ie,aq as ke,ar as ns,y as re,as as ie,at as pt,a8 as de,k as vt,a as os,Y as ce,g as Pe,b as qe,d as Ze,a9 as Lt,au as rs,av as as,S as m,a2 as Ot,B as k,T as B,Q as Je,U as Pt,C as O,aw as Be,ax as is,$ as At,L as xt,I as We,G as $e,N as ls,p as ve,ay as cs,m as fe,ab as et,az as ds,aA as us,O as hs,K as ps,W as xs,a1 as fs,a3 as bs,aB as gs,aa as ys,P as Ss,a4 as Cs,aC as js,aD as Ts}from"./index-66cb75df.js";import{f as be,A as Le,L as ws}from"./build-6421e956.js";import{C as ms}from"./build-33d27e57.js";import{n as Te,m as He,b as Es,H as Ms}from"./build-f58640b5.js";import{K as Is,c as Bs,T as Me,d as vs,e as Ls,f as Os,g as V,h as Ps,M as Rt,S as zt,i as As,F as Rs,a as zs,b as _s}from"./build-708407b9.js";import{M as ks}from"./build-2883e9ba.js";import{G as we}from"./build-7226c475.js";import{g as Fs,B as Ns,a as Ds,b as Ws}from"./build-a6202e80.js";import{A as $s,C as Hs}from"./build-e41c3de6.js";import{C as Vs}from"./build-8268194d.js";import{F as Ys,g as Gs}from"./build-48fe95c1.js";import{F as Ks,S as Ve,O as Xs,a as Us}from"./build-b463c8f6.js";import{C as Qs}from"./build-1ee72508.js";import{L as qs,I as Zs}from"./build-8a357111.js";import{C as Ye}from"./build-722d29d2.js";import{A as Js}from"./build-7d149954.js";import{v as Q,a as q}from"./build-bee6630b.js";import{C as Ge}from"./build-d3ce059c.js";import{L as en,S as tn,a as sn,b as nn,c as Fe,d as ft}from"./build-77b26c96.js";import{E as on}from"./build-23c3baee.js";import{I as rn}from"./build-27a4b8f9.js";import{S as an}from"./build-5a361063.js";import{D as bt}from"./build-fa44b97f.js";let ae;function _t(){if(ae)return ae;const e=document.createElement("div"),t=document.createElement("div");return t.style.width="10px",t.style.height="1px",e.appendChild(t),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),ae="reverse",e.scrollLeft>0?ae="default":(e.scrollLeft=1,e.scrollLeft===0&&(ae="negative")),document.body.removeChild(e),ae}function ln(e,t){const n=e.scrollLeft;if(t!=="rtl")return n;switch(_t()){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n;default:return n}}function cn(e){return Xe("MuiTab",e)}const dn=Ke("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),ne=dn,un=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],hn=e=>{const{classes:t,textColor:n,fullWidth:r,wrapped:o,icon:i,label:l,selected:c,disabled:d}=e,f={root:["root",i&&l&&"labelIcon",`textColor${Et(n)}`,r&&"fullWidth",o&&"wrapped",c&&"selected",d&&"disabled"],iconWrapper:["iconWrapper"]};return Qe(f,cn,t)},pn=Y(mt,{name:"MuiTab",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.label&&n.icon&&t.labelIcon,t[`textColor${Et(n.textColor)}`],n.fullWidth&&t.fullWidth,n.wrapped&&t.wrapped]}})(({theme:e,ownerState:t})=>v({},e.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},t.label&&{flexDirection:t.iconPosition==="top"||t.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},t.icon&&t.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${ne.iconWrapper}`]:v({},t.iconPosition==="top"&&{marginBottom:6},t.iconPosition==="bottom"&&{marginTop:6},t.iconPosition==="start"&&{marginRight:e.spacing(1)},t.iconPosition==="end"&&{marginLeft:e.spacing(1)})},t.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${ne.selected}`]:{opacity:1},[`&.${ne.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.textColor==="primary"&&{color:(e.vars||e).palette.text.secondary,[`&.${ne.selected}`]:{color:(e.vars||e).palette.primary.main},[`&.${ne.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.textColor==="secondary"&&{color:(e.vars||e).palette.text.secondary,[`&.${ne.selected}`]:{color:(e.vars||e).palette.secondary.main},[`&.${ne.disabled}`]:{color:(e.vars||e).palette.text.disabled}},t.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},t.wrapped&&{fontSize:e.typography.pxToRem(12)})),xn=h.forwardRef(function(t,n){const r=Ue({props:t,name:"MuiTab"}),{className:o,disabled:i=!1,disableFocusRipple:l=!1,fullWidth:c,icon:d,iconPosition:f="top",indicator:a,label:T,onChange:E,onClick:y,onFocus:w,selected:b,selectionFollowsFocus:x,textColor:M="inherit",value:I,wrapped:g=!1}=r,z=Oe(r,un),P=v({},r,{disabled:i,disableFocusRipple:l,selected:b,icon:!!d,iconPosition:f,label:!!T,fullWidth:c,textColor:M,wrapped:g}),W=hn(P),G=d&&T&&h.isValidElement(d)?h.cloneElement(d,{className:Z(W.iconWrapper,d.props.className)}):d,S=R=>{!b&&E&&E(R,I),y&&y(R)},A=R=>{x&&!b&&E&&E(R,I),w&&w(R)};return s.jsxs(pn,v({focusRipple:!l,className:Z(W.root,o),ref:n,role:"tab","aria-selected":b,disabled:i,onClick:S,onFocus:A,ownerState:P,tabIndex:b?0:-1},z,{children:[f==="top"||f==="start"?s.jsxs(h.Fragment,{children:[G,T]}):s.jsxs(h.Fragment,{children:[T,G]}),a]}))}),fn=xn;function bn(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2}function gn(e,t,n,r={},o=()=>{}){const{ease:i=bn,duration:l=300}=r;let c=null;const d=t[e];let f=!1;const a=()=>{f=!0},T=E=>{if(f){o(new Error("Animation cancelled"));return}c===null&&(c=E);const y=Math.min(1,(E-c)/l);if(t[e]=i(y)*(n-d)+d,y>=1){requestAnimationFrame(()=>{o(null)});return}requestAnimationFrame(T)};return d===n?(o(new Error("Element already at target position")),a):(requestAnimationFrame(T),a)}const yn=["onChange"],Sn={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function Cn(e){const{onChange:t}=e,n=Oe(e,yn),r=h.useRef(),o=h.useRef(null),i=()=>{r.current=o.current.offsetHeight-o.current.clientHeight};return ss(()=>{const l=Mt(()=>{const d=r.current;i(),d!==r.current&&t(r.current)}),c=It(o.current);return c.addEventListener("resize",l),()=>{l.clear(),c.removeEventListener("resize",l)}},[t]),h.useEffect(()=>{i(),t(r.current)},[t]),s.jsx("div",v({style:Sn,ref:o},n))}function jn(e){return Xe("MuiTabScrollButton",e)}const Tn=Ke("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),wn=Tn,mn=["className","slots","slotProps","direction","orientation","disabled"],En=e=>{const{classes:t,orientation:n,disabled:r}=e;return Qe({root:["root",n,r&&"disabled"]},jn,t)},Mn=Y(mt,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.orientation&&t[n.orientation]]}})(({ownerState:e})=>v({width:40,flexShrink:0,opacity:.8,[`&.${wn.disabled}`]:{opacity:0}},e.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${e.isRtl?-90:90}deg)`}})),In=h.forwardRef(function(t,n){var r,o;const i=Ue({props:t,name:"MuiTabScrollButton"}),{className:l,slots:c={},slotProps:d={},direction:f}=i,a=Oe(i,mn),E=Bt().direction==="rtl",y=v({isRtl:E},i),w=En(y),b=(r=c.StartScrollButtonIcon)!=null?r:Is,x=(o=c.EndScrollButtonIcon)!=null?o:Bs,M=Ie({elementType:b,externalSlotProps:d.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y}),I=Ie({elementType:x,externalSlotProps:d.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:y});return s.jsx(Mn,v({component:"div",className:Z(w.root,l),ref:n,role:null,ownerState:y,tabIndex:null},a,{children:f==="left"?s.jsx(b,v({},M)):s.jsx(x,v({},I))}))}),Bn=In;function vn(e){return Xe("MuiTabs",e)}const Ln=Ke("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),Ne=Ln,On=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],gt=(e,t)=>e===t?e.firstChild:t&&t.nextElementSibling?t.nextElementSibling:e.firstChild,yt=(e,t)=>e===t?e.lastChild:t&&t.previousElementSibling?t.previousElementSibling:e.lastChild,me=(e,t,n)=>{let r=!1,o=n(e,t);for(;o;){if(o===e.firstChild){if(r)return;r=!0}const i=o.disabled||o.getAttribute("aria-disabled")==="true";if(!o.hasAttribute("tabindex")||i)o=n(e,o);else{o.focus();return}}},Pn=e=>{const{vertical:t,fixed:n,hideScrollbar:r,scrollableX:o,scrollableY:i,centered:l,scrollButtonsHideMobile:c,classes:d}=e;return Qe({root:["root",t&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",o&&"scrollableX",i&&"scrollableY"],flexContainer:["flexContainer",t&&"flexContainerVertical",l&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",c&&"scrollButtonsHideMobile"],scrollableX:[o&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},vn,d)},An=Y("div",{name:"MuiTabs",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Ne.scrollButtons}`]:t.scrollButtons},{[`& .${Ne.scrollButtons}`]:n.scrollButtonsHideMobile&&t.scrollButtonsHideMobile},t.root,n.vertical&&t.vertical]}})(({ownerState:e,theme:t})=>v({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},e.vertical&&{flexDirection:"column"},e.scrollButtonsHideMobile&&{[`& .${Ne.scrollButtons}`]:{[t.breakpoints.down("sm")]:{display:"none"}}})),Rn=Y("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.scroller,n.fixed&&t.fixed,n.hideScrollbar&&t.hideScrollbar,n.scrollableX&&t.scrollableX,n.scrollableY&&t.scrollableY]}})(({ownerState:e})=>v({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},e.fixed&&{overflowX:"hidden",width:"100%"},e.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},e.scrollableX&&{overflowX:"auto",overflowY:"hidden"},e.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),zn=Y("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.flexContainer,n.vertical&&t.flexContainerVertical,n.centered&&t.centered]}})(({ownerState:e})=>v({display:"flex"},e.vertical&&{flexDirection:"column"},e.centered&&{justifyContent:"center"})),_n=Y("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(e,t)=>t.indicator})(({ownerState:e,theme:t})=>v({position:"absolute",height:2,bottom:0,width:"100%",transition:t.transitions.create()},e.indicatorColor==="primary"&&{backgroundColor:(t.vars||t).palette.primary.main},e.indicatorColor==="secondary"&&{backgroundColor:(t.vars||t).palette.secondary.main},e.vertical&&{height:"100%",width:2,right:0})),kn=Y(Cn)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),St={},Fn=h.forwardRef(function(t,n){const r=Ue({props:t,name:"MuiTabs"}),o=Bt(),i=o.direction==="rtl",{"aria-label":l,"aria-labelledby":c,action:d,centered:f=!1,children:a,className:T,component:E="div",allowScrollButtonsMobile:y=!1,indicatorColor:w="primary",onChange:b,orientation:x="horizontal",ScrollButtonComponent:M=Bn,scrollButtons:I="auto",selectionFollowsFocus:g,slots:z={},slotProps:P={},TabIndicatorProps:W={},TabScrollButtonProps:G={},textColor:S="primary",value:A,variant:R="standard",visibleScrollbar:J=!1}=r,ge=Oe(r,On),D=R==="scrollable",$=x==="vertical",ue=$?"scrollTop":"scrollLeft",ye=$?"top":"left",Se=$?"bottom":"right",Ae=$?"clientHeight":"clientWidth",he=$?"height":"width",ee=v({},r,{component:E,allowScrollButtonsMobile:y,indicatorColor:w,orientation:x,vertical:$,scrollButtons:I,textColor:S,variant:R,visibleScrollbar:J,fixed:!D,hideScrollbar:D&&!J,scrollableX:D&&!$,scrollableY:D&&$,centered:f&&!D,scrollButtonsHideMobile:!y}),X=Pn(ee),Ht=Ie({elementType:z.StartScrollButtonIcon,externalSlotProps:P.startScrollButtonIcon,ownerState:ee}),Vt=Ie({elementType:z.EndScrollButtonIcon,externalSlotProps:P.endScrollButtonIcon,ownerState:ee}),[tt,Yt]=h.useState(!1),[te,st]=h.useState(St),[nt,Gt]=h.useState(!1),[ot,Kt]=h.useState(!1),[rt,Xt]=h.useState(!1),[at,Ut]=h.useState({overflow:"hidden",scrollbarWidth:0}),it=new Map,K=h.useRef(null),se=h.useRef(null),lt=()=>{const u=K.current;let p;if(u){const C=u.getBoundingClientRect();p={clientWidth:u.clientWidth,scrollLeft:u.scrollLeft,scrollTop:u.scrollTop,scrollLeftNormalized:ln(u,o.direction),scrollWidth:u.scrollWidth,top:C.top,bottom:C.bottom,left:C.left,right:C.right}}let j;if(u&&A!==!1){const C=se.current.children;if(C.length>0){const L=C[it.get(A)];j=L?L.getBoundingClientRect():null}}return{tabsMeta:p,tabMeta:j}},pe=ke(()=>{const{tabsMeta:u,tabMeta:p}=lt();let j=0,C;if($)C="top",p&&u&&(j=p.top-u.top+u.scrollTop);else if(C=i?"right":"left",p&&u){const F=i?u.scrollLeftNormalized+u.clientWidth-u.scrollWidth:u.scrollLeft;j=(i?-1:1)*(p[C]-u[C]+F)}const L={[C]:j,[he]:p?p[he]:0};if(isNaN(te[C])||isNaN(te[he]))st(L);else{const F=Math.abs(te[C]-L[C]),H=Math.abs(te[he]-L[he]);(F>=1||H>=1)&&st(L)}}),Re=(u,{animation:p=!0}={})=>{p?gn(ue,K.current,u,{duration:o.transitions.duration.standard}):K.current[ue]=u},ct=u=>{let p=K.current[ue];$?p+=u:(p+=u*(i?-1:1),p*=i&&_t()==="reverse"?-1:1),Re(p)},dt=()=>{const u=K.current[Ae];let p=0;const j=Array.from(se.current.children);for(let C=0;C<j.length;C+=1){const L=j[C];if(p+L[Ae]>u){C===0&&(p=u);break}p+=L[Ae]}return p},Qt=()=>{ct(-1*dt())},qt=()=>{ct(dt())},Zt=h.useCallback(u=>{Ut({overflow:null,scrollbarWidth:u})},[]),Jt=()=>{const u={};u.scrollbarSizeListener=D?s.jsx(kn,{onChange:Zt,className:Z(X.scrollableX,X.hideScrollbar)}):null;const j=D&&(I==="auto"&&(nt||ot)||I===!0);return u.scrollButtonStart=j?s.jsx(M,v({slots:{StartScrollButtonIcon:z.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:Ht},orientation:x,direction:i?"right":"left",onClick:Qt,disabled:!nt},G,{className:Z(X.scrollButtons,G.className)})):null,u.scrollButtonEnd=j?s.jsx(M,v({slots:{EndScrollButtonIcon:z.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:Vt},orientation:x,direction:i?"left":"right",onClick:qt,disabled:!ot},G,{className:Z(X.scrollButtons,G.className)})):null,u},ut=ke(u=>{const{tabsMeta:p,tabMeta:j}=lt();if(!(!j||!p)){if(j[ye]<p[ye]){const C=p[ue]+(j[ye]-p[ye]);Re(C,{animation:u})}else if(j[Se]>p[Se]){const C=p[ue]+(j[Se]-p[Se]);Re(C,{animation:u})}}}),Ce=ke(()=>{D&&I!==!1&&Xt(!rt)});h.useEffect(()=>{const u=Mt(()=>{K.current&&pe()});let p;const j=F=>{F.forEach(H=>{H.removedNodes.forEach(xe=>{var U;(U=p)==null||U.unobserve(xe)}),H.addedNodes.forEach(xe=>{var U;(U=p)==null||U.observe(xe)})}),u(),Ce()},C=It(K.current);C.addEventListener("resize",u);let L;return typeof ResizeObserver<"u"&&(p=new ResizeObserver(u),Array.from(se.current.children).forEach(F=>{p.observe(F)})),typeof MutationObserver<"u"&&(L=new MutationObserver(j),L.observe(se.current,{childList:!0})),()=>{var F,H;u.clear(),C.removeEventListener("resize",u),(F=L)==null||F.disconnect(),(H=p)==null||H.disconnect()}},[pe,Ce]),h.useEffect(()=>{const u=Array.from(se.current.children),p=u.length;if(typeof IntersectionObserver<"u"&&p>0&&D&&I!==!1){const j=u[0],C=u[p-1],L={root:K.current,threshold:.99},F=_e=>{Gt(!_e[0].isIntersecting)},H=new IntersectionObserver(F,L);H.observe(j);const xe=_e=>{Kt(!_e[0].isIntersecting)},U=new IntersectionObserver(xe,L);return U.observe(C),()=>{H.disconnect(),U.disconnect()}}},[D,I,rt,a==null?void 0:a.length]),h.useEffect(()=>{Yt(!0)},[]),h.useEffect(()=>{pe()}),h.useEffect(()=>{ut(St!==te)},[ut,te]),h.useImperativeHandle(d,()=>({updateIndicator:pe,updateScrollButtons:Ce}),[pe,Ce]);const ht=s.jsx(_n,v({},W,{className:Z(X.indicator,W.className),ownerState:ee,style:v({},te,W.style)}));let je=0;const es=h.Children.map(a,u=>{if(!h.isValidElement(u))return null;const p=u.props.value===void 0?je:u.props.value;it.set(p,je);const j=p===A;return je+=1,h.cloneElement(u,v({fullWidth:R==="fullWidth",indicator:j&&!tt&&ht,selected:j,selectionFollowsFocus:g,onChange:b,textColor:S,value:p},je===1&&A===!1&&!u.props.tabIndex?{tabIndex:0}:{}))}),ts=u=>{const p=se.current,j=ns(p).activeElement;if(j.getAttribute("role")!=="tab")return;let L=x==="horizontal"?"ArrowLeft":"ArrowUp",F=x==="horizontal"?"ArrowRight":"ArrowDown";switch(x==="horizontal"&&i&&(L="ArrowRight",F="ArrowLeft"),u.key){case L:u.preventDefault(),me(p,j,yt);break;case F:u.preventDefault(),me(p,j,gt);break;case"Home":u.preventDefault(),me(p,null,gt);break;case"End":u.preventDefault(),me(p,null,yt);break}},ze=Jt();return s.jsxs(An,v({className:Z(X.root,T),ownerState:ee,ref:n,as:E},ge,{children:[ze.scrollButtonStart,ze.scrollbarSizeListener,s.jsxs(Rn,{className:X.scroller,ownerState:ee,style:{overflow:at.overflow,[$?`margin${i?"Left":"Right"}`:"marginBottom"]:J?void 0:-at.scrollbarWidth},ref:K,children:[s.jsx(zn,{"aria-label":l,"aria-labelledby":c,"aria-orientation":x==="vertical"?"vertical":null,className:X.flexContainer,ownerState:ee,onKeyDown:ts,ref:se,role:"tablist",children:es}),tt&&ht]}),ze.scrollButtonEnd]}))}),Nn=Fn;function Dn(e){const[t,n]=h.useState(e||"");return{currentTab:t,onChangeTab:(r,o)=>{n(o)},setCurrentTab:n}}const Wn=re(s.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),$n=re(s.jsx("path",{d:"M9.01 14H3c-.55 0-1 .45-1 1s.45 1 1 1h6.01v1.79c0 .45.54.67.85.35l2.78-2.79c.19-.2.19-.51 0-.71l-2.78-2.79c-.31-.32-.85-.09-.85.35V14zm5.98-2.21V10H21c.55 0 1-.45 1-1s-.45-1-1-1h-6.01V6.21c0-.45-.54-.67-.85-.35l-2.78 2.79c-.19.2-.19.51 0 .71l2.78 2.79c.31.31.85.09.85-.36z"}),"CompareArrowsRounded"),kt=re(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.46 14.45l-1.36-.62c.28-.61.41-1.24.4-1.86-.01-.63-.14-1.24-.4-1.8l1.36-.63c.35.75.53 1.56.54 2.4.01.86-.17 1.7-.54 2.51zm3.07 1.56-1.3-.74c.52-.92.78-1.98.78-3.15 0-1.19-.27-2.33-.8-3.4l1.34-.67c.64 1.28.96 2.65.96 4.07 0 1.43-.33 2.74-.98 3.89zm3.14 1.32-1.35-.66c.78-1.6 1.18-3.18 1.18-4.69 0-1.51-.4-3.07-1.18-4.64l1.34-.67c.9 1.78 1.34 3.56 1.34 5.31 0 1.74-.44 3.54-1.33 5.35z"}),"ContactlessSharp"),Ct=re(s.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeft"),jt=re(s.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),Hn=re(s.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"Link"),Vn=re(s.jsx("path",{d:"M17 2H7c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 4H7V4h10v2zm3 16H4c-1.1 0-2-.9-2-2v-1h20v1c0 1.1-.9 2-2 2zm-1.47-11.81C18.21 9.47 17.49 9 16.7 9H7.3c-.79 0-1.51.47-1.83 1.19L2 18h20l-3.47-7.81zM9.5 16h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5z"}),"PointOfSale"),Yn=e=>{const t=(e==null?void 0:e.distance)||160,n=e==null?void 0:e.durationIn,r=e==null?void 0:e.durationOut,o=e==null?void 0:e.easeIn,i=e==null?void 0:e.easeOut;return{inUp:{initial:{y:t},animate:{y:0,transition:Q({durationIn:n,easeIn:o})},exit:{y:t,transition:q({durationOut:r,easeOut:i})}},inDown:{initial:{y:-t},animate:{y:0,transition:Q({durationIn:n,easeIn:o})},exit:{y:-t,transition:q({durationOut:r,easeOut:i})}},inLeft:{initial:{x:-t},animate:{x:0,transition:Q({durationIn:n,easeIn:o})},exit:{x:-t,transition:q({durationOut:r,easeOut:i})}},inRight:{initial:{x:t},animate:{x:0,transition:Q({durationIn:n,easeIn:o})},exit:{x:t,transition:q({durationOut:r,easeOut:i})}},outUp:{initial:{y:0},animate:{y:-t,transition:Q({durationIn:n,easeIn:o})},exit:{y:0,transition:q({durationOut:r,easeOut:i})}},outDown:{initial:{y:0},animate:{y:t,transition:Q({durationIn:n,easeIn:o})},exit:{y:0,transition:q({durationOut:r,easeOut:i})}},outLeft:{initial:{x:0},animate:{x:-t,transition:Q({durationIn:n,easeIn:o})},exit:{x:0,transition:q({durationOut:r,easeOut:i})}},outRight:{initial:{x:0},animate:{x:t,transition:Q({durationIn:n,easeIn:o})},exit:{x:0,transition:q({durationOut:r,easeOut:i})}}}},oe={LIST:"commerce-terminals",MOVEMENTS:"terminal-movements",CONCILIATE_MOVEMENTS:"conciliate-movements"},Gn=e=>(e==null?void 0:e.map(t=>{var n,r,o,i;return{id:t==null?void 0:t.id,commerceId:t==null?void 0:t.commerceId,terminalId:t==null?void 0:t.terminalId,terminalON:((n=t==null?void 0:t.apiData)==null?void 0:n.status)===1,country:(r=t==null?void 0:t.apiData)==null?void 0:r.country,date:{created:(o=t==null?void 0:t.apiData)==null?void 0:o.created_at,updated:(i=t==null?void 0:t.apiData)==null?void 0:i.updated_at,register:t==null?void 0:t.registerDate},isVirtual:(t==null?void 0:t.typeId)==="1",name:(t==null?void 0:t.name)!==""?t==null?void 0:t.name.toString().toUpperCase():`TERMINAL-${t==null?void 0:t.terminalId}`,active:(t==null?void 0:t.active)==="1",isExternalConciliation:!!(t!=null&&t.isConciliationExternal)}}))||[],Kn=(e,t,n)=>{var o,i;const r=(t==null?void 0:t.map(l=>{var c,d;return{transactionId:(c=l==null?void 0:l.id)==null?void 0:c.toString(),amount:(d=l==null?void 0:l.amount)==null?void 0:d.toString()}}))??[];return{terminalId:e==null?void 0:e.terminalId,speiCardTransactionId:(o=n==null?void 0:n.id)==null?void 0:o.toString(),speiCardTransactionAmount:(i=n==null?void 0:n.amount)==null?void 0:i.toString(),transactions:r}},Xn=e=>ms(e),Un=e=>{var o,i,l,c,d,f;const t=((o=e==null?void 0:e.movements)==null?void 0:o.map(a=>{const T=parseFloat((a==null?void 0:a.amount)||"0"),E=a!=null&&a.transaction_date?ie(Te(a==null?void 0:a.transaction_date),"dd MMM yyyy",{locale:pt}):"",y=a!=null&&a.transaction_date?ie(Te(a==null?void 0:a.transaction_date),"p"):"";return{id:a==null?void 0:a.id,terminalName:a==null?void 0:a.terminal_name,amount:T,amountFormat:be(T),approved:a==null?void 0:a.approved,cardType:a==null?void 0:a.card_brand,cardNumber:a==null?void 0:a.card_number,cardBank:a==null?void 0:a.issuer,transactionDate:{fullDate:ie(Te(a==null?void 0:a.transaction_date),"dd MMM yyyy HH:mm",{locale:pt}),date:E,time:y},date:Te(a==null?void 0:a.transaction_date),description:`${(a==null?void 0:a.issuer)===""?a==null?void 0:a.card_brand:a==null?void 0:a.issuer}-${a==null?void 0:a.card_number}`.toUpperCase(),transactionMessage:a==null?void 0:a.result_message,conciliated:!!(a!=null&&a.conciliated),conciliatedName:a!=null&&a.conciliated?"Conciliada":"Sin Conciliar"}}))??[],n={amount:be((i=e==null?void 0:e.balance)==null?void 0:i.amount),month:(c=(l=e==null?void 0:e.balance)==null?void 0:l.month)==null?void 0:c.toLowerCase()},r={status:{all:(t==null?void 0:t.length)||0,approved:((d=t==null?void 0:t.filter(a=>a==null?void 0:a.approved))==null?void 0:d.length)||0,rejected:((f=t==null?void 0:t.filter(a=>!(a!=null&&a.approved)))==null?void 0:f.length)||0}};return{movements:t,balance:n,filters:r}},Qn=async()=>{const{data:e}=await de.get("/api/commerces/terminals");return Gn(e)},Jo=async e=>{const{data:t}=await de.post("/api/commerce/pay/new",e);return t},er=async e=>{const{data:t}=await de.post("/api/commerce/virtual/pay",e);return t},qn=async(e,t,n)=>{const r=e?`?fromDate=${t}&toDate=${n}&terminalId=${e}`:`?fromDate=${t}&toDate=${n}`,{data:o}=await de.get(`/api/commerces-pay/transactions/all${r}`);return Un(o)},Zn=async(e,t)=>{const{data:n}=await de.get(`/api/card/movements/${e}/consolidated/${t}`);return Xn(n)},Jn=async e=>{const{data:t}=await de.post("/api/commerce/terminal/consolidation/create",e);return t},eo=(e={})=>{const t=vt(),n=os(Jn,e);return{...n,mutate:async(o,i)=>{const{onSuccess:l,onError:c,mutationOptions:d}=i;try{await ce.promise(n.mutateAsync(o,d),{pending:"Conciliando movimientos de la terminal ...",success:{render({data:f}){return t.invalidateQueries([oe.MOVEMENTS,o==null?void 0:o.terminalId]),l(f),"Se creó la conciliación con éxito"}}})}catch(f){const a=Pe(f,"No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas");c(a),ce.error(a,{type:qe(f)})}}}},to=(e={})=>{const[t,n]=h.useState(null);return{...Ze([oe.LIST],Qn,{staleTime:6e4,refetchOnMount:"always",onError:o=>{const i=Pe(o,"No se puede obtener la lista de terminales del comercio. Intente nuevamente o reporte a sistemas");n(i)},...e}),error:t||null}},so=(e,t,n={})=>{const r=ie(t,"yyyy-MM-dd"),[o,i]=h.useState(null),l=e?[oe.CONCILIATE_MOVEMENTS,e]:[oe.MOVEMENTS,"global"];return{...Ze(l,({signal:d})=>Zn(e,r),{staleTime:6e4,refetchOnWindowFocus:!1,onError:d=>{const f=Pe(d,"No se puede obtener la lista de movimientos para conciliar la terminal. Intente nuevamente o reporte a sistemas");i(f),ce.error(f,{type:qe(d)})},...n}),error:o||null}},Ee={terminal:null,conciliateInfo:{movements:null,total:0,date:null},openConciliate:!1},no=(e,t)=>({...Ee,setTerminal:n=>{const{terminal:r}=t();e(o=>({terminal:{...r,...n}}),!1,"SET_TERMINAL_SELECTED")},resetTerminal:()=>{e(n=>({terminal:null}),!1,"RESET_TERMINAL_SELECTED")},addTerminalInfo:n=>{const{terminal:r}=t();e(o=>({terminal:{...r,...n}}),!1,"SET_TERMINAL_INFO")},setOpenConciliate:n=>{e(r=>({openConciliate:n}),!1,"SET_OPEN_CONCILIATE")},setConciliateMovements:n=>{let r=Ee==null?void 0:Ee.conciliateInfo;if(n){n==null||n.sort((l,c)=>l.date-c.date);const o=(n==null?void 0:n.length)>0&&n[0],i=n.reduce((l,c)=>l+(c==null?void 0:c.amount),0);r={movements:n,total:i,date:o==null?void 0:o.date}}e(o=>({conciliateInfo:r}),!1,"SET_CONCILIATE_MOVEMENTS")}}),N=Lt(no),De={terminals:[],isOpenList:!1,isCollapse:!1,balance:{amount:"$0.00",month:null},globalBalance:{amount:"$0.00",month:null}},oo=(e,t)=>({...De,setTerminals:n=>{e(r=>({terminals:n}),!1,"SET_TERMINALS")},setOpenList:n=>{e(r=>({isOpenList:n}),!1,"SET_OPEN_LIST")},setCollapse:n=>{e(r=>({isCollapse:n}),!1,"SET_COLLAPSE")},setBalance:n=>{e(r=>({balance:n}),!1,"SET_BALANCE")},setGlobalBalance:n=>{e(r=>({globalBalance:n}),!1,"SET_GLOBAL_BALANCE")},resetBalance:()=>{e(n=>({balance:De.balance}),!1,"RESET_BALANCE")},resetGlobalBalance:()=>{e(n=>({globalBalance:De.globalBalance}),!1,"RESET_BALANCE")}}),_=Lt(oo),ro=(e,t,n={})=>{const r=_(y=>y.resetBalance),o=_(y=>y.resetGlobalBalance),i=rs(t),l=as(t),c=ie(i,"yyyy-MM-dd"),d=ie(l,"yyyy-MM-dd"),[f,a]=h.useState(null),T=e?[oe.MOVEMENTS,e]:[oe.MOVEMENTS,"global"];return{...Ze(T,({signal:y})=>qn(e,c,d),{staleTime:6e4,retry:!1,refetchOnWindowFocus:!1,onError:y=>{const w=Pe(y,"No se puede obtener la lista de movimientos de la terminal. Intente nuevamente o reporte a sistemas");a(w),ce.error(w,{type:qe(y)}),e?r():o()},...n}),error:f||null}},ao=Y(Me)(({theme:e})=>({"& td":{paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5),backgroundColor:e.palette.background.neutral}})),io=()=>{const e=N(g=>g.setOpenConciliate),t=N(g=>g.openConciliate),n=N(g=>g.setConciliateMovements),{movements:r,total:o,date:i}=N(g=>g.conciliateInfo),l=N(g=>g.terminal),c=h.useRef(null),{data:d,error:f,isError:a,isFetching:T,isLoading:E}=so(l==null?void 0:l.terminalId,i,{enabled:!!(l&&i)}),{mutate:y,isLoading:w}=eo(),b=vt(),x=()=>{e(!1),n(null),b.removeQueries([oe.CONCILIATE_MOVEMENTS,l==null?void 0:l.terminalId])},M=()=>{var z,P;const g=(z=c.current)==null?void 0:z.getSelectedRowModel().flatRows;if((g==null?void 0:g.length)>0){const W=Kn(l,r,(P=g[0])==null?void 0:P.original);y(W,{onSuccess:()=>{x()},onError:()=>{}})}else ce.warn("Debe seleccionar un movimiento de la tarjeta para conciliar los movimientos de la terminal")},I=[{id:"card",header:"Movimientos Tarjeta Asociada",columns:[{accessorKey:"description",header:"Movimiento",size:100},{accessorKey:"date",header:"Fecha",size:130},{accessorKey:"amountFormat",header:"Monto",size:100}]}];return s.jsx(ks,{onClose:x,onSuccess:M,isSubmitting:w,fullWidth:!0,scrollType:"body",title:`Conciliar Movimientos ${l==null?void 0:l.name}`,textButtonSuccess:"Conciliar",maxWidth:"md",open:t,children:s.jsx(m,{pt:3,children:s.jsxs(we,{container:!0,spacing:{xs:2},children:[s.jsx(we,{item:!0,xs:12,md:5,children:s.jsx(Ot,{children:s.jsx(vs,{sx:{minWidth:200},children:s.jsxs(Ls,{size:"small",children:[s.jsxs(Os,{sx:{borderBottom:g=>`solid 1px ${g.palette.divider}`},children:[s.jsx(Me,{children:s.jsx(V,{align:"center",colSpan:3,children:"Movimientos Terminal"})}),s.jsxs(Me,{children:[s.jsx(V,{width:40,children:"#"}),s.jsx(V,{align:"left",children:"Descripción"}),s.jsx(V,{align:"right",children:"Monto"})]})]}),s.jsxs(Ps,{children:[r==null?void 0:r.map((g,z)=>{var P;return s.jsxs(Me,{sx:{borderBottom:W=>`solid 1px ${W.palette.divider}`},children:[s.jsx(V,{children:z+1}),s.jsx(V,{align:"left",children:s.jsxs(k,{sx:{maxWidth:180},children:[s.jsx(B,{variant:"subtitle2",children:g==null?void 0:g.description}),s.jsx(B,{variant:"body2",sx:{color:"text.secondary"},noWrap:!0,children:(P=g==null?void 0:g.transactionDate)==null?void 0:P.fullDate})]})}),s.jsx(V,{align:"right",children:be(g==null?void 0:g.amount)})]},z)}),s.jsxs(ao,{children:[s.jsx(V,{colSpan:1}),s.jsx(V,{align:"right",children:s.jsx(B,{variant:"h6",children:"Total"})}),s.jsx(V,{align:"right",width:140,children:s.jsx(B,{variant:"h6",children:be(o)})})]})]})]})})})}),s.jsx(we,{item:!0,xs:12,md:1,sx:{display:"flex",alignItems:"center",justifyContent:"center"},children:s.jsx(k,{display:"flex",alignItems:"center",justifyContent:"center",children:s.jsx($n,{fontSize:"large",color:"primary"})})}),s.jsx(we,{item:!0,xs:12,md:6,children:s.jsx(Rt,{enablePinning:!0,enableStickyHeader:!0,enableRowVirtualization:!0,enableFacetedValues:!0,enableRowSelection:!0,enableMultiRowSelection:!1,positionActionsColumn:"last",enableDensityToggle:!1,columns:I||[],data:(d==null?void 0:d.movements)||[],isError:a,textError:f,tableInstanceRef:c,initialState:{density:"compact",sorting:[{id:"date",desc:!0}]},state:{isLoading:E,showAlertBanner:a,showProgressBars:T},muiTablePaperProps:{elevation:0,sx:g=>({borderRadius:0,backgroundColor:g.palette.background.neutral})},muiBottomToolbarProps:{sx:g=>({backgroundColor:g.palette.background.neutral})},muiTopToolbarProps:{sx:g=>({backgroundColor:g.palette.background.neutral})},displayColumnDefOptions:{"mrt-row-select":{size:12,header:""}},renderToolbarInternalActions:({table:g})=>s.jsx(k,{children:s.jsx(zt,{table:g})}),muiTableContainerProps:{sx:{maxHeight:"md"}}})})]})})})},lo=Object.freeze(Object.defineProperty({__proto__:null,default:io},Symbol.toStringTag,{value:"Module"})),co=e=>[{id:"terminal",header:`${e?e==null?void 0:e.name:"Global"}`,columns:[{accessorKey:"description",header:"Movimiento",enableHiding:!1,size:200,Cell:({cell:t,column:n,row:r})=>{const{original:o}=r,i=o==null?void 0:o.approved,l=Fs(o==null?void 0:o.cardType),c=l==null?void 0:l.component;return s.jsxs(k,{sx:{display:"flex",alignItems:"center"},children:[s.jsxs(k,{sx:{position:"relative"},children:[s.jsx(Je,{title:o==null?void 0:o.cardType,children:s.jsx(Pt,{sx:{width:40,height:40,color:"text.secondary",bgcolor:"background.neutral"},children:l?s.jsx(c,{sx:{width:25,height:25}}):s.jsx($s,{width:25,height:25})})}),s.jsx(k,{sx:{right:0,bottom:0,width:15,height:15,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",color:"common.white",bgcolor:"error.main",justifyContent:"center",...i&&{bgcolor:"success.main"}},children:i?s.jsx(Vs,{sx:{width:12,height:12}}):s.jsx(Wn,{sx:{width:12,height:12}})})]}),s.jsxs(k,{sx:{ml:2},children:[s.jsx(B,{variant:"subtitle2",sx:{textWrap:"wrap"},children:o==null?void 0:o.description}),s.jsx(B,{variant:"body2",textTransform:"capitalize",sx:{color:i?"success.main":"error.main",textWrap:"wrap"},children:o==null?void 0:o.transactionMessage})]})]})}},...e?[]:[{accessorKey:"terminalName",header:"Terminal",size:100,Cell:({cell:t,column:n,row:r,renderedCellValue:o})=>{const{original:i}=r;return s.jsx(B,{variant:"subtitle2",fontWeight:"bold",children:i==null?void 0:i.terminalName})}}],{accessorKey:"date",header:"Fecha",size:100,Cell:({cell:t,column:n,row:r,renderedCellValue:o})=>{var l,c;const{original:i}=r;return s.jsxs(m,{children:[s.jsx(B,{variant:"subtitle2",children:(l=i==null?void 0:i.transactionDate)==null?void 0:l.date}),s.jsx(B,{variant:"body2",sx:{color:"text.secondary"},children:(c=i==null?void 0:i.transactionDate)==null?void 0:c.time})]})}},{accessorKey:"amountFormat",header:"Monto",size:100,Cell:({cell:t,column:n,row:r})=>{const{original:o}=r;return s.jsx(B,{variant:"subtitle2",fontWeight:"bold",children:o==null?void 0:o.amountFormat})}},{accessorKey:"conciliatedName",header:"¿Conciliada?",filterVariant:"multi-select",size:110,Cell:({cell:t,column:n,row:r})=>{const{original:o}=r;return s.jsx(m,{flexDirection:"row",gap:1,color:"primary",children:o!=null&&o.conciliated?s.jsx(Ns,{color:"green",fontWeight:"bold",fontSize:"20px"}):s.jsx(Ds,{fontSize:"20px",color:"red"})})}}]}],uo=48,ho=8,po={PaperProps:{style:{maxHeight:uo*4.5+ho,width:250}}},xo=Ws(),Ft=({cardType:e,handleChangeCardType:t,isLoading:n})=>s.jsx(Ks,{sx:{minWidth:240},disabled:!!n,children:s.jsxs(Ve,{fullWidth:!0,multiple:!0,displayEmpty:!0,disabled:!!n,size:"small",value:e,onChange:t,input:s.jsx(Xs,{}),renderValue:r=>r.length===0?s.jsx(s.Fragment,{children:"Tarjeta"}):r.join(", "),MenuProps:po,inputProps:{"aria-label":"Without label"},children:[s.jsx(Be,{disabled:!0,value:"",children:s.jsx("em",{children:" Seleccionar Tarjeta"})}),xo.map(r=>s.jsxs(Be,{value:r,sx:{mx:1,my:.5,p:0,borderRadius:.75,typography:"body2",textTransform:"capitalize",fontWeight:o=>e.indexOf(name)===-1?o.typography.fontWeightRegular:o.typography.fontWeightMedium},children:[s.jsx(Qs,{checked:e.indexOf(r)>-1}),s.jsx(is,{primary:r})]},r))]})}),fo=h.memo(Ft);Ft.propTypes={cardType:O.array,handleChangeCardType:O.func,isLoading:O.any};const le=[{name:"Todos",id:"all",color:"primary"},{name:"Aprobado",id:"approved",color:"success"},{name:"Rechazado",id:"rejected",color:"error"}],bo=e=>le==null?void 0:le.find(t=>t.name===e),Nt=({filterStatus:e,onChangeFilterStatus:t,filters:n})=>{const r=h.useMemo(()=>le==null?void 0:le.map(o=>o.name),[]);return s.jsx(Nn,{allowScrollButtonsMobile:!0,variant:"scrollable",scrollButtons:"auto",value:e,onChange:t,sx:{px:2},children:r.map(o=>{const i=bo(o),l=i&&(n==null?void 0:n.status[i==null?void 0:i.id])||0;return s.jsx(fn,{icon:s.jsx(qs,{color:i==null?void 0:i.color,children:l}),iconPosition:"end",disableRipple:!0,label:o,value:o},o)})})},go=h.memo(Nt);Nt.propTypes={filterStatus:O.any,filters:O.shape({status:O.any}),onChangeFilterStatus:O.func};const Tt=Y(Us)(({theme:e})=>({"label + &":{marginTop:e.spacing(3)},"& .MuiInputBase-input":{borderRadius:4,position:"relative",border:"none",outline:"none"}}));function yo({setCurrentMonth:e,currentMonth:t,isLoading:n}){const o=new Date().getFullYear(),i=At("up","lg"),l=Array.from({length:o-2020+1},(b,x)=>2020+x).reverse(),c=n,d=()=>{e(b=>{const x=new Date(b);return x.setMonth(x.getMonth()-1),x})},f=()=>{e(b=>{const x=new Date(b);return x.setMonth(x.getMonth()+1),x})},a=()=>{const b=new Date;return t.getMonth()===b.getMonth()&&t.getFullYear()===b.getFullYear()},T=(b,x)=>{const M=new Date,I=M.getFullYear(),g=M.getMonth();return x>I||x===I&&b>g},E=b=>{const x=new Date(t);x.setMonth(b.target.value),e(x)},y=b=>{const x=new Date(t);x.setFullYear(b.target.value),e(x)},w={PaperProps:{style:{maxHeight:200,overflowY:"auto"}}};return s.jsxs(m,{spacing:2,direction:"row",justifyContent:"space-between",sx:{py:2.5,px:3},children:[i?s.jsx(xt,{loading:c,variant:"outlined",startIcon:s.jsx(Ct,{}),onClick:d,children:"anterior"}):s.jsx(We,{disabled:c,variant:"outlined",onClick:d,children:s.jsx(Ct,{})}),s.jsxs(k,{display:"flex",alignItems:"center",justifyContent:"center",spacing:1,gap:1,children:[s.jsx(Ve,{size:"small",value:t.getMonth(),onChange:E,disabled:c,input:s.jsx(Tt,{}),children:He.map((b,x)=>{const M=t.getFullYear();return T(x,M)?null:s.jsx(Be,{value:x,disabled:T(x,M),children:b},x)})}),s.jsx(Ve,{size:"small",value:t.getFullYear(),onChange:y,input:s.jsx(Tt,{}),MenuProps:w,disabled:c,children:l.map(b=>s.jsx(Be,{value:b,children:b},b))})]}),i?s.jsx(xt,{loading:c,variant:"outlined",endIcon:s.jsx(jt,{}),disabled:a(),onClick:f,children:"siguiente"}):s.jsx(We,{disabled:c,variant:"outlined",onClick:f,children:s.jsx(jt,{})})]})}const wt=()=>{const[e,t]=h.useState(new Date),n=N(S=>S.terminal),r=N(S=>S.setConciliateMovements),o=N(S=>S.setOpenConciliate),i=_(S=>S.setBalance),l=_(S=>S.setGlobalBalance),{data:c,isFetching:d,refetch:f,isError:a,error:T,isLoading:E}=ro(n==null?void 0:n.terminalId,e,{enabled:!!(n!=null&&n.terminalId&&e)}),{currentTab:y,onChangeTab:w}=Dn("Todos"),[b,x]=h.useState([]),[M,I]=h.useState({}),{movements:g,amount:z}=h.useMemo(()=>So({movements:(c==null?void 0:c.movements)||[],filterCardType:b,filterStatus:y}),[c==null?void 0:c.movements,b,y]),P=h.useMemo(()=>co(n),[n]),W=S=>{const{target:{value:A}}=S;x(typeof A=="string"?A.split(","):A)};h.useEffect(()=>{f(),I({})},[e]),h.useEffect(()=>{t(new Date)},[n]),h.useEffect(()=>{z&&n&&e&&i({month:He[e.getMonth()],amount:z}),z&&!n&&e&&l({month:He[e.getMonth()],amount:z})},[z,n,e]);const G=S=>{try{const A=S.getSortedRowModel().rows.map(R=>(P==null?void 0:P.map(J=>R.getValue(J.accessorKey)))||[])??[];Gs((P==null?void 0:P.map(R=>R.header))||[],A,"Movimientos Terminales")}catch{}};return s.jsx(Ye,{children:s.jsx(Rt,{enablePinning:!0,enableColumnFilterModes:!0,enableStickyHeader:!0,enableRowVirtualization:!0,enableFacetedValues:!0,enableRowSelection:S=>{const{conciliated:A}=S.original;return!A||!n},enableDensityToggle:!1,columns:P,data:g||[],isError:a,textError:T,selectAllMode:"all",onRowSelectionChange:I,initialState:{density:"compact",sorting:[{id:"date",desc:!0}]},state:{isLoading:E,showAlertBanner:a,showProgressBars:d,rowSelection:M??{}},displayColumnDefOptions:{"mrt-row-select":{size:10}},muiTableContainerProps:{sx:{maxHeight:{md:"350px",lg:"450px",xl:"700px"}}},renderTopToolbar:({table:S})=>{var R;const A=()=>{var ge;const J=(ge=S.getSelectedRowModel().flatRows)==null?void 0:ge.map(D=>D==null?void 0:D.original);n!=null&&n.isExternalConciliation?ce.info("Conciliación Externa: En etapa de desarrollo 🧑🏻‍💻🚀!!"):(r(J),o(!0))};return s.jsxs(m,{children:[s.jsx(go,{filterStatus:y,onChangeFilterStatus:w,filters:c==null?void 0:c.filters}),s.jsx($e,{sx:{borderStyle:"dashed"}}),a&&!d&&s.jsx(ls,{severity:"error",sx:{width:1,borderRadius:0},action:s.jsx(ve,{color:"inherit",size:"small",onClick:f,children:"Recargar"}),children:T}),s.jsxs(m,{direction:"row",alignItems:"center",flexWrap:"wrap",justifyContent:"center",flex:1,spacing:2,px:2,py:1,children:[s.jsx(fo,{cardType:b,handleChangeCardType:W,isLoading:d}),s.jsx(m,{flexGrow:1,children:s.jsx(yo,{currentMonth:e,setCurrentMonth:t,isLoading:d})})]}),s.jsx($e,{sx:{borderStyle:"dashed"}}),s.jsxs(m,{px:2,py:1,direction:"row",justifyContent:"space-between",alignItems:"center",children:[n?s.jsx(m,{children:s.jsx(ve,{color:"info",onClick:A,disabled:((R=S.getSelectedRowModel().flatRows)==null?void 0:R.length)===0,variant:"contained",children:"Conciliar"})}):s.jsx(k,{display:"flex"}),s.jsx(As,{table:S}),s.jsxs(k,{children:[s.jsx(zt,{table:S}),s.jsx(Je,{title:"Descargar",children:s.jsx(We,{disabled:S.getPrePaginationRowModel().rows.length===0,onClick:()=>G(S),children:s.jsx(Ys,{})})}),s.jsx(Rs,{table:S}),s.jsx(zs,{table:S}),s.jsx(_s,{table:S})]})]})]})},muiSelectCheckboxProps:({row:S})=>{const{approved:A,conciliated:R}=S.original;return{sx:{disabled:!!(!A&&n)||R&&n,display:!A&&n||R&&n?"none":"flex"}}}})})};function So({movements:e,filterCardType:t,filterStatus:n}){const r=(e==null?void 0:e.map((l,c)=>[l,c]))||[];let o=0,i=r.map(l=>l[0]);return n!=="Todos"&&(i=i.filter(l=>l.approved===(n==="Aprobado"))),cs.isArray(t)&&(t==null?void 0:t.length)>0&&(i=i.filter(l=>{var c;return t.includes((c=l==null?void 0:l.cardType)==null?void 0:c.toUpperCase())})),o=i.reduce((l,c)=>{if(c.approved){const d=parseFloat(c.amount);return l+d}return l},0),{movements:i??[],amount:be(o.toFixed(2))}}const Co=()=>{const e=N(t=>t.terminal);return s.jsx(m,{sx:t=>({pl:{xs:0,sm:2,lg:2},overflow:"hidden",flexDirection:"column",flexGrow:1,transition:t.transitions.create(["width","flexGrow"])}),children:s.jsx(Le,{children:s.jsxs(k,{sx:{overflowY:"auto"},children:[e&&s.jsx(fe.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:s.jsx(m,{p:2,children:s.jsx(wt,{})})}),!e&&s.jsx(fe.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:s.jsx(m,{p:2,children:s.jsx(wt,{})})})]})})})},jo=h.lazy(()=>et(()=>import("./build-cd4b43c1.js"),["assets/js/build-cd4b43c1.js","assets/js/index-66cb75df.js","assets/css/build-f63bc8fe.css","assets/js/build-906e76fb.js","assets/js/build-f58640b5.js","assets/js/build-9d3fe41c.js","assets/js/build-7b5d6586.js","assets/js/build-1f27af78.js","assets/js/build-bd32fad9.js","assets/js/build-72adeabc.js","assets/js/build-b463c8f6.js","assets/js/build-27a4b8f9.js","assets/js/build-66bff701.js","assets/js/build-6d8fb990.js","assets/js/build-8a357111.js","assets/js/build-8fb582f0.js","assets/js/build-6421e956.js","assets/js/build-bee6630b.js","assets/js/build-f0053943.js","assets/js/build-bc20b3c6.js","assets/js/build-b61c5e4f.js","assets/js/build-05abe1bc.js","assets/js/build-722d29d2.js","assets/js/build-fa44b97f.js","assets/js/build-23c3baee.js","assets/js/build-8268194d.js","assets/js/build-4c6c54ad.js","assets/js/build-33d27e57.js","assets/js/build-708407b9.js","assets/js/build-1ee72508.js","assets/js/build-7226c475.js","assets/js/build-2883e9ba.js","assets/js/build-a6202e80.js","assets/js/build-0e88a906.js","assets/js/build-ac9daf3f.js","assets/js/build-888818c8.js","assets/js/build-e41c3de6.js","assets/js/build-48fe95c1.js","assets/js/build-7d149954.js","assets/js/build-d3ce059c.js","assets/js/build-77b26c96.js","assets/js/build-5a361063.js"])),To=h.lazy(()=>et(()=>import("./build-b002e642.js"),["assets/js/build-b002e642.js","assets/js/index-66cb75df.js","assets/css/build-f63bc8fe.css","assets/js/build-bd32fad9.js","assets/js/build-66bff701.js","assets/js/build-f58640b5.js","assets/js/build-9d3fe41c.js","assets/js/build-7b5d6586.js","assets/js/build-1f27af78.js","assets/js/build-6d8fb990.js","assets/js/build-8a357111.js","assets/js/build-8fb582f0.js","assets/js/build-b463c8f6.js","assets/js/build-6421e956.js","assets/js/build-bee6630b.js","assets/js/build-f0053943.js","assets/js/build-ac9daf3f.js","assets/js/build-888818c8.js","assets/js/build-27a4b8f9.js","assets/js/build-0f1fec62.js","assets/js/build-4b5934de.js","assets/js/build-bc20b3c6.js","assets/js/build-b61c5e4f.js","assets/js/build-b1d6794c.js","assets/js/build-05abe1bc.js","assets/js/build-722d29d2.js","assets/js/build-fa44b97f.js","assets/js/build-23c3baee.js","assets/js/build-33d27e57.js","assets/js/build-708407b9.js","assets/js/build-1ee72508.js","assets/js/build-7226c475.js","assets/js/build-2883e9ba.js","assets/js/build-a6202e80.js","assets/js/build-0e88a906.js","assets/js/build-e41c3de6.js","assets/js/build-8268194d.js","assets/js/build-48fe95c1.js","assets/js/build-7d149954.js","assets/js/build-d3ce059c.js","assets/js/build-77b26c96.js","assets/js/build-5a361063.js"])),wo=()=>{const[e,t]=h.useState(!1),[n,r]=h.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx($e,{sx:{borderStyle:"dashed"}}),s.jsxs(m,{px:2,py:1,flexDirection:"row",justifyContent:"space-between",children:[s.jsx(ve,{startIcon:s.jsx(Hn,{}),onClick:()=>t(!0),children:"Liga de Pago"}),s.jsx(ve,{startIcon:s.jsx(Js,{}),sx:{textWrap:"nowrap"},onClick:()=>r(!0),children:"Terminal Virtual"})]}),s.jsx(h.Suspense,{children:s.jsx(jo,{open:e,setOpen:t})}),s.jsx(h.Suspense,{children:s.jsx(To,{open:n,setOpen:r})})]})},mo=()=>{const e=N(r=>r.terminal),t=_(r=>r.balance),n=e?e==null?void 0:e.name:"Global";return s.jsx(Le,{children:!!(e!=null&&e.id)&&s.jsx(fe.div,{...Yn().inLeft,children:s.jsxs(ds,{sx:{boxShadow:r=>`0px 0px 15px 2px ${us(r.palette.primary.main,.4)}`},children:[s.jsx(Ge,{title:s.jsx(m,{flexDirection:"column",gap:1,children:s.jsx(B,{variant:"subtitle1",children:n})}),sx:{px:2,py:2}}),s.jsxs(m,{alignItems:"center",pb:2,px:2,children:[s.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[s.jsx(B,{variant:"h3",children:t.amount}),s.jsx(B,{variant:"caption",children:"MXN"})]}),(t==null?void 0:t.month)&&s.jsxs(B,{variant:"subtitle2",children:["Balance de ",t.month]})]}),(e==null?void 0:e.isVirtual)&&s.jsx(wo,{})]})})})},Eo=()=>{const e=_(o=>o.globalBalance),t=N(o=>o.resetTerminal),n=N(o=>o.terminal),r=()=>{t()};return n?s.jsx(Le,{children:s.jsx(fe.div,{onClick:r,whileHover:{scale:1.03},whileTap:{scale:.8},children:s.jsx(Ye,{sx:o=>({cursor:"pointer","& :hover":{color:"primary.main"}}),children:s.jsx(Ge,{title:s.jsxs(m,{flexDirection:"row",gap:1,justifyContent:"space-between",children:[s.jsx(B,{variant:"subtitle1",children:"Global"}),s.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[s.jsx(B,{variant:"caption",children:e.amount}),s.jsx(B,{variant:"caption",children:"MXN"})]})]}),sx:{px:2,py:2}})})})}):s.jsx(Le,{children:s.jsx(fe.div,{onClick:r,whileHover:{scale:1.03},whileTap:{scale:.8},children:s.jsxs(Ye,{sx:o=>({cursor:"pointer",backgroundColor:{xs:"background.neutral",md:"background.paper"},"& :hover":{color:"primary.main"}}),children:[s.jsx(Ge,{title:s.jsx(m,{flexDirection:"column",gap:1,children:s.jsx(B,{variant:"subtitle1",children:"Global"})}),sx:{px:2,py:2}}),s.jsxs(m,{alignItems:"center",pb:2,px:2,children:[s.jsxs(m,{direction:"row",spacing:1,alignItems:"center",children:[s.jsx(B,{variant:"h3",children:e.amount}),s.jsx(B,{variant:"caption",children:"MXN"})]}),(e==null?void 0:e.month)&&s.jsxs(B,{variant:"subtitle2",children:["Balance de ",e.month]})]})]})})})},Mo=Y(hs)(({theme:e})=>({borderRadius:"8px!important",width:1,justifyContent:"center",display:"flex",alignItems:"center",mb:1})),Dt=({terminal:e})=>{const t=_(l=>l.isOpenList);_(l=>l.setOpenList);const n=N(l=>l.setTerminal),r=N(l=>l.terminal);(e==null?void 0:e.id)===(r==null?void 0:r.id)&&r&&(r==null||r.cardON);const o=(e==null?void 0:e.id)===(r==null?void 0:r.id),i=l=>{var d;!((d=l.target)==null?void 0:d.type)&&!o&&n(e)};return s.jsx(Je,{title:e==null?void 0:e.name,arrow:!0,placement:"right",children:s.jsx(ws,{sx:{mb:1,padding:0,borderRadius:1,"& :hover":{color:"text.primary"}},disablePadding:!0,children:s.jsxs(Mo,{onClick:i,sx:{...o&&{bgcolor:"secondary.light",color:"black","& :hover":{color:"text.primary"}},"& :hover":{color:"text.primary"},width:1,py:1,gap:1},children:[s.jsx(en,{sx:{ml:2,m:0},children:s.jsx(k,{sx:{position:"relative"},children:s.jsx(Pt,{sx:l=>({width:32,height:32,m:0,backgroundColor:l.palette.primary.main,"& :hover":{color:"white"}}),children:e!=null&&e.isVirtual?s.jsx(kt,{sx:{width:20,height:20,color:"white"}}):s.jsx(Vn,{sx:{width:16,height:16,color:"white"}})})})}),t&&s.jsx(s.Fragment,{children:s.jsx(m,{sx:{width:1},children:s.jsx(B,{noWrap:!0,variant:"subtitle2",children:e==null?void 0:e.name})})})]})})})};Dt.propTypes={terminal:O.shape({alias:O.any,id:O.any,isVirtual:O.any,name:O.any})};const Wt=({terminalsQuery:e,sx:t,...n})=>{const{isLoading:r,data:o,error:i,isError:l,refetch:c}=e,d=_(a=>a.isOpenList),f=_(a=>a.terminals);return l&&d&&!o&&!r?s.jsx(ps,{errorMessage:i,handleButton:c}):o&&d&&(o==null?void 0:o.length)===0&&!r?s.jsx(on,{pt:2.5,message:"No hay terminales activas para este comercio"}):s.jsx(xs,{disablePadding:!0,sx:t,...n,children:(r?[...Array(12)]:f).map((a,T)=>a!=null&&a.id?s.jsx(Dt,{terminal:a},a==null?void 0:a.id):s.jsx(tn,{isOpenSideBar:d},T))})};Wt.propTypes={sx:O.any,terminalsQuery:O.shape({data:O.array,error:O.any,isError:O.any,isLoading:O.any,refetch:O.any})};const $t=({commerceTerminals:e=[]})=>{const t=_(w=>w.isOpenList),n=_(w=>w.setOpenList),r=_(w=>w.setTerminals),o=_(w=>w.terminals),i=_(w=>w.isCollapse),[l,c]=h.useState(""),[d,f]=h.useState(!1),a=async w=>{try{const{value:b}=w.target;if(c(b),b){const x=(e==null?void 0:e.filter(M=>{var I;return(M==null?void 0:M.name)&&((I=M==null?void 0:M.name)==null?void 0:I.toLowerCase().indexOf(b.toLowerCase()))!==-1}))||[];r(x)}else r(e)}catch(b){console.error(b)}},T=()=>{t&&(c(""),r(e)),n(!t)},E=()=>{f(!0)},y=()=>{f(!1)};return h.useEffect(()=>{e&&r(e)},[e]),h.useEffect(()=>{if(!t)return f(!1)},[t]),s.jsxs(s.Fragment,{children:[s.jsx(k,{sx:{p:2,px:0},children:s.jsxs(m,{direction:"row",justifyContent:t?"flex-end":"center",alignItems:"center",spacing:2,children:[!i&&s.jsx(Hs,{onClickAway:y,children:s.jsx(Zs,{fullWidth:!0,size:"small",value:l,onFocus:E,onChange:a,placeholder:"Buscar Terminales...",InputProps:{startAdornment:s.jsx(rn,{position:"start",children:s.jsx(an,{sx:{color:"text.disabled",width:20,height:20}})})}})}),s.jsx(m,{direction:"row",alignItems:"center",justifyContent:"center",children:s.jsx(sn,{size:"small",sx:{...!t&&{transform:"rotate(180deg)"}},onClick:T,children:fs})})]})}),(o==null?void 0:o.length)===0&&(e==null?void 0:e.length)>0&&s.jsx(bs,{sx:{p:1,display:"flex",flexDirection:"column",alignItems:"center"},searchQuery:l})]})};$t.propTypes={commerceTerminals:O.array};const Io=()=>{const e=_(a=>a.setOpenList),t=_(a=>a.setCollapse),n=_(a=>a.isOpenList),r=to(),o=gs(),i=At("up","md"),l=i&&!n,c=()=>{e(!1)},d=()=>{e(!n)};h.useEffect(()=>{i&&e(!0)},[i]),h.useEffect(()=>{t(l)},[l]);const f=s.jsxs(s.Fragment,{children:[n&&s.jsxs(m,{spacing:2,p:2,children:[s.jsx(Eo,{}),s.jsx(mo,{})]}),s.jsx(m,{children:s.jsx($t,{commerceTerminals:(r==null?void 0:r.data)||[]})}),s.jsx(Ot,{sx:{height:.98},children:s.jsx(m,{children:s.jsx(Wt,{terminalsQuery:r})})})]});return s.jsxs(s.Fragment,{children:[!i&&!n&&s.jsx(nn,{onClick:d,children:s.jsx(kt,{sx:{width:20,height:20}})}),i?s.jsx(bt,{open:n,variant:"persistent",PaperProps:{sx:{height:1,borderRightStyle:"none",bgcolor:"background.default"}},sx:{height:1,width:Fe,transition:o.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",backgroundColor:"transparent!important",width:Fe},...l&&{width:ft,"& .MuiDrawer-paper":{width:ft,backgroundColor:"transparent!important",position:"static",transform:"none !important",visibility:"visible !important"}}},children:f}):s.jsx(bt,{ModalProps:{keepMounted:!0},open:n,onClose:c,sx:{height:1,"& .MuiDrawer-paper":{width:Fe,p:2}},children:f})]})},Bo=ys(h.lazy(()=>et(()=>Promise.resolve().then(()=>lo),void 0))),vo=()=>{const e=N(t=>t.openConciliate);return s.jsx(Ss,{title:"Lista de Terminales Punto de Venta",children:s.jsxs(Es,{children:[s.jsxs(k,{display:"flex",overflow:"hidden",sx:{height:"100vH",maxHeight:"100%",flexDirection:"column"},children:[s.jsx(k,{px:1,children:s.jsx(Ms,{name:"Terminales Punto de Venta",links:[{name:"Inicio",href:Cs.root},{name:"Administración",href:js.terminals},{name:Ts.terminals.name}]})}),s.jsxs(k,{display:"flex",overflow:"hidden",flex:1,children:[s.jsx(Io,{}),s.jsx(Co,{})]})]}),!!e&&s.jsx(Bo,{})]})})},tr=Object.freeze(Object.defineProperty({__proto__:null,default:vo},Symbol.toStringTag,{value:"Module"}));export{Hn as L,tr as P,oe as T,Jo as c,er as g,N as u};
