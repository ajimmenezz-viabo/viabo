{"version":3,"mappings":"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","names":["SpeiOutForm","Lodable","lazy","SpeiOutResume","SpeiOutSuccess","SpeiOutDrawer","twoAuth","useUser","data","accounts","isLoading","isError","error","refetch","useFindSpeiThirdAccountsList","enabled","setOpenSpeiOut","openSpeiOut","stpAccount","useAdminDashboardSpeiStore","currentBalance","setCurrentBalance","useState","transactionForm","setTransactionForm","balance","useMemo","showResume","setShowResume","transactionData","setTransactionData","successTransaction","setSuccessTransaction","transactionLoading","setTransactionLoading","insufficient","parseFloat","toFixed","handleClose","handleSuccessForm","values","transactions","concept","handleBackResume","handleSuccess","transaction","titleTransaction","jsx","Typography","renderContentTransaction","RightPanel","RequestLoadingComponent","ErrorRequestPage","m","varFade","in","display","flex","overflow","flexDirection","Stack","TwoAuthDisabled"],"sources":["../../../../../frontend/src/app/business/viabo-spei/dashboard/admin-stp/components/spei-out/SpeiOutDrawer.jsx"],"sourcesContent":["import { lazy, useMemo, useState } from 'react'\r\n\r\nimport { Stack, Typography } from '@mui/material'\r\nimport { m } from 'framer-motion'\r\n\r\nimport { useAdminDashboardSpeiStore } from '../../store'\r\n\r\nimport { useFindSpeiThirdAccountsList } from '@/app/business/viabo-spei/third-accounts/hooks'\r\nimport { RightPanel } from '@/app/shared/components'\r\nimport { varFade } from '@/shared/components/animate'\r\nimport { RequestLoadingComponent } from '@/shared/components/loadings'\r\nimport { Lodable } from '@/shared/components/lodables'\r\nimport { ErrorRequestPage, TwoAuthDisabled } from '@/shared/components/notifications'\r\nimport { useUser } from '@/shared/hooks'\r\n\r\nconst SpeiOutForm = Lodable(lazy(() => import('./SpeiOutForm')))\r\nconst SpeiOutResume = Lodable(lazy(() => import('./SpeiOutResume')))\r\nconst SpeiOutSuccess = Lodable(lazy(() => import('./SpeiOutSuccess')))\r\n\r\nconst SpeiOutDrawer = () => {\r\n  const { twoAuth } = useUser()\r\n  const { data: accounts, isLoading, isError, error, refetch } = useFindSpeiThirdAccountsList({ enabled: !!twoAuth })\r\n  const { setOpenSpeiOut, openSpeiOut, stpAccount } = useAdminDashboardSpeiStore()\r\n\r\n  const [currentBalance, setCurrentBalance] = useState(0)\r\n  const [transactionForm, setTransactionForm] = useState(null)\r\n  const balance = useMemo(() => stpAccount?.balance, [stpAccount?.balance])\r\n  const [showResume, setShowResume] = useState(false)\r\n  const [transactionData, setTransactionData] = useState(null)\r\n  const [successTransaction, setSuccessTransaction] = useState(null)\r\n  const [transactionLoading, setTransactionLoading] = useState(false)\r\n\r\n  const insufficient = useMemo(\r\n    () => Boolean((parseFloat(balance) - currentBalance).toFixed(2) < 0),\r\n    [currentBalance, balance]\r\n  )\r\n\r\n  const handleClose = () => {\r\n    setOpenSpeiOut(false)\r\n    setCurrentBalance(0)\r\n    setShowResume(false)\r\n    setTransactionData(null)\r\n    setTransactionLoading(false)\r\n    setTransactionForm(null)\r\n    setSuccessTransaction(null)\r\n  }\r\n\r\n  const handleSuccessForm = values => {\r\n    setTransactionForm(values)\r\n\r\n    setTransactionData({\r\n      transactions: values?.transactions || [],\r\n      concept: values?.concept,\r\n      balance,\r\n      currentBalance\r\n    })\r\n    setShowResume(true)\r\n  }\r\n\r\n  const handleBackResume = () => {\r\n    setShowResume(false)\r\n  }\r\n\r\n  const handleSuccess = transaction => {\r\n    setShowResume(false)\r\n    setSuccessTransaction(transaction)\r\n  }\r\n\r\n  const titleTransaction = <Typography variant=\"h6\">SPEI Out</Typography>\r\n\r\n  const renderContentTransaction = (\r\n    <SpeiOutForm\r\n      accounts={accounts || []}\r\n      insufficient={insufficient}\r\n      onSuccess={handleSuccessForm}\r\n      setCurrentBalance={setCurrentBalance}\r\n      initialValues={transactionForm}\r\n    />\r\n  )\r\n\r\n  if (!twoAuth) {\r\n    return (\r\n      <RightPanel open={openSpeiOut} handleClose={handleClose} titleElement={titleTransaction}>\r\n        <Stack p={3}>\r\n          <TwoAuthDisabled\r\n            titleMessage={'Google Authenticator'}\r\n            errorMessage={\r\n              'Para realizar esta operación debe activar y configurar el Doble Factor de Autentificación (2FA) desde su perfil.'\r\n            }\r\n          />\r\n        </Stack>\r\n      </RightPanel>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <RightPanel open={openSpeiOut} handleClose={handleClose} titleElement={titleTransaction}>\r\n      {isLoading && <RequestLoadingComponent />}\r\n\r\n      {isError && !isLoading && (\r\n        <ErrorRequestPage errorMessage={error} titleMessage={'Lista de Cuentas'} handleButton={() => refetch()} />\r\n      )}\r\n\r\n      {!isError && !isLoading && openSpeiOut && !showResume && !successTransaction && (\r\n        <m.div\r\n          variants={varFade().in}\r\n          style={{\r\n            display: showResume ? 'none' : 'flex',\r\n            flex: 1,\r\n            overflow: 'hidden',\r\n            flexDirection: 'column'\r\n          }}\r\n        >\r\n          {renderContentTransaction}\r\n        </m.div>\r\n      )}\r\n\r\n      {!isError && !isLoading && openSpeiOut && showResume && !successTransaction && (\r\n        <m.div variants={varFade().in}>\r\n          <SpeiOutResume\r\n            data={transactionData}\r\n            onBack={handleBackResume}\r\n            setTransactionLoading={setTransactionLoading}\r\n            transactionLoading={transactionLoading}\r\n            onSuccess={handleSuccess}\r\n          />\r\n        </m.div>\r\n      )}\r\n\r\n      {!isError && !isLoading && openSpeiOut && !showResume && successTransaction && (\r\n        <m.div variants={varFade().in}>\r\n          <SpeiOutSuccess transactions={successTransaction} onFinish={handleClose} />\r\n        </m.div>\r\n      )}\r\n    </RightPanel>\r\n  )\r\n}\r\n\r\nexport default SpeiOutDrawer\r\n"],"file":"assets/js/SpeiOutDrawer-D9MGIpQm.js"}