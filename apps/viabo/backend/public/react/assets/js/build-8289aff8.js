import{j as e,B as j,t as C,S as r,i as g,T as a,E as L,F as f,G as I,H as w,J as v,K as y,L as q,a as V,r as M,b as E,g as k,N as A,f as F,R as N,O as D}from"./build-64a25fd4.js";import{V as T}from"./build-899176f2.js";import{u as S}from"./build-0a1457f9.js";import{L as z,F as R,M as b}from"./build-81b4defd.js";import{f as H}from"./build-977b7120.js";import{a as B}from"./build-395776f7.js";import{c as O,a as p}from"./build-43ec3615.js";import{R as h}from"./build-6e98428f.js";import{M as $}from"./build-bf78b615.js";import{I as x}from"./build-8fe9665e.js";import{C as W}from"./build-92464c69.js";import{V as _}from"./build-275e6c6c.js";import{P as K}from"./build-29655094.js";import{E as X}from"./build-3077ef03.js";import{D as G}from"./build-1765426c.js";import"./build-9cd5ca94.js";import"./build-bee6630b.js";import"./build-e303152c.js";import"./build-ab3ce0c4.js";const J=({sx:n,color:i})=>e.jsx(j,{sx:{display:"flex",width:50,height:50,alignItems:"center",...n},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 999 323.68",children:e.jsx("path",{d:"M651.185.5c-70.933 0-134.322 36.766-134.322 104.694 0 77.9 112.423 83.28 112.423 122.415 0 16.478-18.884 31.229-51.137 31.229-45.773 0-79.984-20.611-79.984-20.611l-14.638 68.547s39.41 17.41 91.734 17.41c77.552 0 138.576-38.572 138.576-107.66 0-82.316-112.89-87.537-112.89-123.86 0-12.91 15.501-27.053 47.662-27.053 36.286 0 65.892 14.99 65.892 14.99l14.326-66.204S696.614.5 651.185.5zM2.218 5.497.5 15.49s29.842 5.461 56.719 16.356c34.606 12.492 37.072 19.765 42.9 42.353l63.51 244.832h85.138L379.927 5.497h-84.942L210.707 218.67l-34.39-180.696c-3.154-20.68-19.13-32.477-38.685-32.477H2.218zm411.865 0L347.449 319.03h80.999l66.4-313.534h-80.765zm451.759 0c-19.532 0-29.88 10.457-37.474 28.73L709.699 319.03h84.942l16.434-47.468h103.483l9.994 47.468H999.5L934.115 5.497h-68.273zm11.047 84.707 25.178 117.653h-67.454L876.89 90.204z",style:{fill:"#1434cb",fillOpacity:1,stroke:"none"}})})}),Q=C(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"}),"Lock"),U=C(e.jsx("path",{d:"M18.39 14.56C16.71 13.7 14.53 13 12 13s-4.71.7-6.39 1.56C4.61 15.07 4 16.1 4 17.22V18c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-.78c0-1.12-.61-2.15-1.61-2.66zM9.78 12h4.44c1.21 0 2.14-1.06 1.98-2.26l-.32-2.45C15.57 5.39 13.92 4 12 4S8.43 5.39 8.12 7.29L7.8 9.74c-.16 1.2.77 2.26 1.98 2.26z"}),"Person2Rounded"),Y=()=>{const n={amount:133,name:"Test",description:"Pago de prueba"};return e.jsx(r,{children:e.jsxs(g,{sx:{width:1,p:3,position:"relative"},elevation:0,children:[e.jsx(j,{sx:{textAlign:"center",display:"flex",position:"absolute",top:8,left:8,justifyContent:"center",width:100},children:e.jsx("img",{src:T,alt:"viabo-logo"})}),e.jsxs(r,{alignItems:"center",justifyContent:"center",spacing:3,children:[e.jsx(z,{variant:"ghost",color:"warning",sx:{textTransform:"uppercase"},children:"Pendiente"}),e.jsxs(r,{alignItems:"center",justifyContent:"center",children:[e.jsxs(r,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(a,{variant:"h2",children:[" ",H(n.amount)]}),e.jsx(a,{variant:"caption",children:"MXN"})]}),e.jsxs(r,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(U,{}),e.jsx(a,{variant:"subtitle1",children:n.name})]})]}),e.jsx(a,{textAlign:"center",variant:"body2",children:n.description})]})]})})},Z=()=>{const n=O().shape({cardNumber:p().transform((t,d)=>d.replace(/\s/g,"")).min(16,"Debe contener 16 digitos").required("El número de la tarjeta es requerido"),cvv:p().min(3,"Debe contener 3 digitos").required("El CVV es requerido"),expiration:p().required("La fecha de vencimiento es requerida").test("is-future-date","La fecha  debe ser mayor que la fecha actual",function(t){const d=L(`01/${t}`,"dd/MM/yyyy",new Date),P=new Date;return f(d)&&I(d,P)}),name:p().required("El nombre es requerido"),email:p().email("Ingresa un correo valido").required("El correo es requerido"),phone:p().test("longitud","El telefono es muy corto",t=>!(t&&t.replace(/[\s+]/g,"").length<10)).required("El telefono es requerido")}),i=S({initialValues:{cardNumber:"",expiration:"",cvv:"",name:"",email:"",phone:""},validationSchema:n,onSubmit:(t,{setSubmitting:d})=>{}}),{errors:s,touched:l,isSubmitting:u,setFieldValue:c,values:o}=i,m=u;return e.jsx(R,{formik:i,children:e.jsxs(r,{spacing:3,children:[e.jsxs(r,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(a,{variant:"h6",children:"Forma de Pago"}),e.jsx(g,{sx:{px:1},children:e.jsx($,{sx:{width:30,height:30}})}),e.jsx(g,{sx:{px:1},children:e.jsx(J,{sx:{width:30,height:30}})})]}),e.jsxs(r,{spacing:1,children:[e.jsx(a,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Número de Tarjeta *"}),e.jsx(h,{autoFocus:!0,name:"cardNumber",required:!0,placeholder:"5254 2700 9717 8968",fullWidth:!0,InputProps:{startAdornment:e.jsx(x,{position:"start",children:e.jsx(W,{})}),inputComponent:b,inputProps:{mask:"0000 0000 0000 0000",value:o.cardNumber,onAccept:t=>{c("cardNumber",t)}}},disabled:m})]}),e.jsxs(r,{direction:{xs:"column",lg:"row"},spacing:3,display:"flex",children:[e.jsxs(r,{flex:1,spacing:1,children:[e.jsx(a,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Vence"}),e.jsx(G,{disabled:m,views:["year","month"],name:"expiration",value:o!=null&&o.expiration?new Date(o.expiration):null,required:!0,onChange:t=>f(t)?i.setFieldValue("expiration",w(t,"MM/yyyy")):i.setFieldValue("expiration",""),slotProps:{textField:{fullWidth:!0,error:!!(l.expiration&&s.expiration),required:!0,helperText:l.expiration&&s.expiration?s.expiration:""}},disablePast:!0,minDate:new Date,format:"MM/yy"})]}),e.jsxs(r,{spacing:1,children:[e.jsx(a,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"CVV"}),e.jsx(h,{name:"cvv",required:!0,placeholder:"123",InputProps:{startAdornment:e.jsx(x,{position:"start",children:e.jsx(_,{})}),inputComponent:b,inputProps:{mask:"000",onAccept:t=>{c("cvv",t)},value:o.cvv}},disabled:m})]})]}),e.jsxs(r,{spacing:1,children:[e.jsx(a,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Tarjetahabiente *"}),e.jsx(h,{name:"name",required:!0,placeholder:"Nombre del Titular de la Tarjeta",disabled:m,InputProps:{startAdornment:e.jsx(x,{position:"start",children:e.jsx(K,{})})}})]}),e.jsxs(r,{spacing:1,children:[e.jsx(a,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Correo Electrónico *"}),e.jsx(h,{name:"email",required:!0,placeholder:"usuario@dominio.com",disabled:m,InputProps:{startAdornment:e.jsx(x,{position:"start",children:e.jsx(X,{})})}})]}),e.jsxs(r,{spacing:1,children:[e.jsx(a,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Telefono *"}),e.jsx(B,{name:"phone",fullWidth:!0,langOfCountryName:"es",defaultCountry:"MX",preferredCountries:["MX","US"],continents:["NA","SA"],forceCallingCode:!0,value:o.phone,disabled:m,required:!0,onChange:(t,d)=>{c("phone",t)},error:l.phone&&!!s.phone,helperText:l.phone&&s.phone})]}),e.jsxs(a,{variant:"body2",align:"center",sx:{color:"text.secondary"},children:["Al hacer clic en el botón de Pagar, accedo a los  ",e.jsx(v,{component:y,underline:"always",target:"_blank",color:"info.main",children:"Terminos y condiciones"}),"  &  ",e.jsx(v,{component:y,underline:"always",target:"_blank",color:"info.main",children:"Acuerdos de privacidad"}),"."]}),e.jsx(r,{children:e.jsx(q,{loading:u,variant:"contained",color:"primary",fullWidth:!0,type:"submit",startIcon:e.jsx(Q,{}),children:"Pagar"})})]})})},ee={INFO:"payment-link-info"},re=async n=>{const{data:i}=await V.get(`/api/commerces/pay/${n}`);return i},te=(n,i={})=>{const[s,l]=M.useState(null);return{...E([ee.INFO],()=>re(n),{staleTime:6e4,onError:c=>{const o=k(c,"No se puede obtener la informacion de la liga de pago");l(o)},...i}),error:s||null}},Pe=()=>{const{paymentId:n}=A(),{data:i,isLoading:s,error:l,isError:u,refetch:c}=te(n,{enabled:!!n});return e.jsx(F,{title:"Cobro",children:e.jsx(j,{component:"main",height:1,m:0,p:0,children:e.jsxs(r,{p:4,alignItems:"center",justifyContent:"center",minHeight:"100vH",children:[s&&e.jsx(N,{}),!s&&i&&e.jsxs(r,{width:{xs:1,sm:.5,md:"0.4"},spacing:3,children:[e.jsx(Y,{}),e.jsx(Z,{})]}),u&&!s&&e.jsx(D,{width:1,errorMessage:l,handleButton:()=>c()})]})})})};export{Pe as default};
