import{c as k,f as j,a9 as C,r as E,i as n,V as S,X as b,B as A,P as e}from"./vendor-pMbAJ2vN.js";import{u as I}from"./formik.esm-EswYUHaB.js";import{c as M,M as P}from"./ManagementCommerces-JBcirb5o.js";import{g as B,a as T,C as z}from"./index-4lAQqZtp.js";import{g as F}from"./operationTypes-VmAUECk3.js";import{F as O,a as N}from"./TextMaxLine-EkO8Go0i.js";import{i as V}from"./matchTypes-oh7PAwYC.js";import"./managementCommercesAdapter-JWtwPOBI.js";import"./processList-0DUGlmod.js";import"./crypto-8PBvuXzj.js";import"./formatTime-xZzlPLSN.js";import"./MaterialDataTable-ZB7ihhUq.js";import"./useMaterialTable-sgChlG6I.js";import"./HeaderPage-i9JTae45.js";import"./fade-HpdRXKiE.js";import"./transition-Uc7vb3zK.js";import"./viabo-card-zH8OCAbq.js";import"./viabo-pay-zEF68lUW.js";import"./UploadSingleFile-IYzOW8Uc.js";import"./formatNumber-MXwvW5Fn.js";const w=(a={})=>{const f=k(),s=j(M,a);return{...s,mutate:async(i,o)=>{const{onSuccess:l,onError:u,mutationOptions:m}=o;try{await C.promise(s.mutateAsync(i,m),{pending:"Actualizando Servicio ...",success:{render({data:r}){return f.invalidateQueries([P.COMMERCE_LIST]),V(l)&&l(r),"Se actualizo el servicio del comercio con éxito"}}})}catch(r){const d=B(r,"No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas");V(u)&&u(d),C.error(d,{type:T(r)})}}}},y=[{name:"VIABO CARD",type:"2",formikValue:"viaboCard"},{name:"VIABO PAY",type:"1",formikValue:"viaboPay"},{name:"NUBE",type:"3",formikValue:"cloud"}],R=({commerce:a})=>{var g;const{mutate:f,isLoading:s}=w(),[x,i]=E.useState(null),o=(g=a==null?void 0:a.services)==null?void 0:g.catalog,l=E.useMemo(()=>y==null?void 0:y.map(t=>{const p=F(t==null?void 0:t.name);return{...t,logo:p==null?void 0:p.component}}),[y]),u=I({initialValues:{viaboPay:(o==null?void 0:o.some(t=>(t==null?void 0:t.type)==="1"))||!1,viaboCard:(o==null?void 0:o.some(t=>(t==null?void 0:t.type)==="2"))||!1,cloud:(o==null?void 0:o.some(t=>(t==null?void 0:t.type)==="3"))||!1},enableReinitialize:!0}),{values:m,setFieldValue:r}=u,d=t=>p=>{i(t==null?void 0:t.type);const h=!m[t==null?void 0:t.formikValue];f({commerceId:a==null?void 0:a.id,type:t==null?void 0:t.type,active:h?"1":"0"},{onSuccess:()=>{r(t==null?void 0:t.formikValue,h),i(null)},onError:()=>{i(null)}})};return n.jsx(O,{formik:u,children:n.jsx(S,{spacing:2,p:5,divider:n.jsx(b,{orientation:"horizontal",flexItem:!0,sx:{borderStyle:"dashed"}}),children:l==null?void 0:l.map(t=>{const p=t.logo;return n.jsxs(S,{justifyContent:"space-between",flexDirection:"row",alignItems:"center",children:[p&&n.jsx(A,{py:1,children:n.jsx(p,{sx:{width:35,height:35}})}),x===(t==null?void 0:t.type)?n.jsx(z,{size:30,containerProps:{display:"flex",ml:1}}):n.jsx(N,{disabled:s,size:"md",color:m[t==null?void 0:t.formikValue]?"success":"error",checked:!!m[t==null?void 0:t.formikValue]||!1,inputProps:{"aria-label":"controlled"},onChange:d(t)})]},t==null?void 0:t.name)})})})};R.propTypes={commerce:e.shape({id:e.any,services:e.shape({catalog:e.array})})};export{R as default};
//# sourceMappingURL=ServicesForm-Rl-Jm42X.js.map
