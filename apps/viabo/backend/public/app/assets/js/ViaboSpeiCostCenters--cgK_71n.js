import{q as b,g as x,a as g,r as E,L as _,_ as f,P as T}from"./index-IncEwUKO.js";import{i as r,B as p,I as u,bP as w,r as l,e as h,a9 as A,T as c,x as N,bk as j,a3 as R,bw as I}from"./vendor-X9cKXa3I.js";import{u as y}from"./useViaboSpeiBreadCrumbs-_KtiQNgU.js";import{_ as P,f as i}from"./index-bT7c8_vF.js";import{a as M,g as O}from"./crypto-DLV5sXJi.js";import{c as k}from"./matchTypes-ev-w7Wi9.js";import{M as v,C as z,H as D}from"./HeaderPage-V_w2vjBb.js";import{u as L}from"./useMaterialTable-N56kn-M3.js";function V(e){const{row:o}=e,{original:s}=o,{status:t}=s;return r.jsx(p,{sx:{display:"flex",flex:1,justifyContent:"flex-start",alignItems:"center",flexWrap:"nowrap",gap:"8px"},children:t&&r.jsx(u,{size:"small",color:"primary",onClick:n=>{n.stopPropagation()},children:r.jsx(w,{size:"small",fontSize:"16px"})})})}const B=M([...Array(5)].map((e,o)=>({id:P.id(o),name:i.person.fullName(),status:i.datatype.boolean({probability:.8})}))),F=[...Array(5)].map((e,o)=>({id:i.string.numeric(6),name:i.company.name(),active:i.datatype.boolean({probability:.8}),companies:i.string.numeric(2)})),H=e=>{const o=O(e==null?void 0:e.ciphertext,e==null?void 0:e.iv);if(!o)throw new Error("No se pueden obtener los usuarios administradores de centros de costos");const s=o==null?void 0:o.map(t=>({id:t==null?void 0:t.id,name:t==null?void 0:t.name,status:!!(t!=null&&t.status)}));return k(s,"id","name","status")},W={COST_CENTERS_LIST:"spei-cost-centers-list",USERS_ADMIN_COST_CENTER_LIST:"spei-admin-cost-center-users-list"},le={ADMIN_USERS:"users",NEW_ADMIN_USER:"new-user"},U=e=>(e==null?void 0:e.map(s=>({id:s==null?void 0:s.id,name:s==null?void 0:s.name,status:!!(s!=null&&s.active),companies:s==null?void 0:s.companies})))||[],K=async()=>U(F),ce=async e=>{const{data:o}=await b.post("/api/spei/cost-centers/new",e);return o},de=async()=>H(B),q=(e={})=>{const[o,s]=l.useState(null),t=h({queryKey:[W.COST_CENTERS_LIST],queryFn:K,refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...e});return l.useEffect(()=>{if(t!=null&&t.isError){const n=x(t.error,"No se puede obtener la lista de empresas. Intente nuevamente o reporte a sistemas");s(n),A.error(n,{type:g(t.error)})}},[t.isError,t.error]),{...t,error:o||null}},Q=()=>l.useMemo(()=>[{id:"id",accessorKey:"id",header:"ID",enableHiding:!1,maxSize:40,Cell:({cell:e,column:o,row:s,renderedCellValue:t})=>r.jsx(c,{variant:"subtitle2",children:t})},{id:"name",accessorKey:"name",header:"Nombre",enableHiding:!1,Cell:({cell:e,column:o,row:s,renderedCellValue:t})=>r.jsx(c,{textTransform:"capitalize",fontWeight:"bold",variant:"subtitle2",children:t})},{id:"companies",header:"Empresas",accessorKey:"companies",Cell:({cell:e,column:o,row:s,renderedCellValue:t})=>r.jsx(c,{variant:"subtitle2",children:t})}],[]),$={costCenter:null,openNewCostCenter:!1},Y=(e,o)=>({...$,setSpeiCostCenter:s=>{e(t=>({costCenter:s}),!1,"SET_SPEI_COST_CENTER")},setOpenNewSpeiCostCenter:s=>{e(t=>({openNewCostCenter:s}),!1,"SET_OPEN_SPEI_NEW_COST_CENTER")}}),G=E(Y),J=()=>{const{data:e,isLoading:o,isError:s,error:t,isFetching:n}=q(),{setOpenNewSpeiCostCenter:m}=G(),S=Q(),d=L(s,t,{columns:S,data:e||[],enableColumnPinning:!0,enableColumnFilterModes:!0,enableStickyHeader:!0,enableRowVirtualization:!0,enableFacetedValues:!0,enableRowActions:!0,enableRowSelection:!0,enableDensityToggle:!1,positionActionsColumn:"last",selectAllMode:"all",initialState:{density:"compact",sorting:[{id:"id",desc:!1}]},state:{isLoading:o,showAlertBanner:s,showProgressBars:n},displayColumnDefOptions:{"mrt-row-select":{maxSize:10},"mrt-row-actions":{header:"Acciones",maxSize:80}},muiTableContainerProps:{sx:{maxHeight:{md:"350px",lg:"450px",xl:"700px"}}},muiTableBodyRowProps:({row:a})=>({sx:C=>({backgroundColor:"inherit","&.Mui-selected":{backgroundColor:C.palette.action.selected,"&:hover":{backgroundColor:C.palette.action.hover}}})}),enableColumnResizing:!0,layoutMode:"grid",renderTopToolbarCustomActions:()=>r.jsx(p,{}),renderRowActions:a=>V(a)});return r.jsxs(N,{variant:"outlined",sx:a=>d.getState().isFullScreen?{}:{boxShadow:a.customShadows.z24,backgroundColor:a.palette.mode==="light"?"inherit":a.palette.grey[50012],backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)"},children:[r.jsx(j,{sx:a=>({pb:2}),title:"Lista de Centros de Costos",subheader:`Tienes ${(e==null?void 0:e.length)||0} centros de costos dados de alta`,action:r.jsx(R,{title:"Nueva Centro de Costos",children:r.jsx(u,{color:"primary",size:"large",onClick:()=>m(!0),children:r.jsx(I,{})})})}),r.jsx(v,{table:d})]})},X=_(l.lazy(()=>f(()=>import("./SpeiNewCostCenterDrawer-ZIs4Pz5P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11])))),Z=()=>{const{costCenters:e}=y();return r.jsx(T,{title:"Centro de Costos - Viabo Spei",children:r.jsxs(z,{sx:{pb:3},children:[r.jsx(D,{name:"Centro de Costos",links:e}),r.jsx(J,{}),r.jsx(X,{})]})})},Ce=Object.freeze(Object.defineProperty({__proto__:null,ViaboSpeiCostCenters:Z},Symbol.toStringTag,{value:"Module"}));export{le as M,W as S,Ce as V,de as g,ce as n,G as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/SpeiNewCostCenterDrawer-ZIs4Pz5P.js","assets/js/index-IncEwUKO.js","assets/js/vendor-X9cKXa3I.js","assets/css/build-K0YT2apu.css","assets/js/useViaboSpeiBreadCrumbs-_KtiQNgU.js","assets/js/index-bT7c8_vF.js","assets/js/matchTypes-ev-w7Wi9.js","assets/js/crypto-DLV5sXJi.js","assets/js/HeaderPage-V_w2vjBb.js","assets/js/fade-HpdRXKiE.js","assets/js/transition-Uc7vb3zK.js","assets/js/useMaterialTable-N56kn-M3.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=ViaboSpeiCostCenters--cgK_71n.js.map
