import{q as y,j as e,u as T,m as E,g as I,n as k,r as N,S as s,T as u,B as R,X as A,L as D}from"./build-34d4d483.js";import{R as F}from"./build-a16b502a.js";import{u as M}from"./build-170b63b6.js";import{F as _,M as w}from"./build-892c0580.js";import{c as P,a as V}from"./build-c1670f83.js";import{u as o,C as z}from"./build-5e768f67.js";import{c as H}from"./build-ce399990.js";import{v as q}from"./build-fe7391ec.js";import{I as B}from"./build-0c2dc063.js";import{C as L}from"./build-2203328a.js";import"./build-34ba9f86.js";import"./build-47f482cf.js";import"./build-bee6630b.js";import"./build-29a3d3af.js";import"./build-3e6b3c55.js";import"./build-9206015e.js";const G=y([e.jsx("path",{d:"M4 4h16v6H4zm0 9h16v2H4z",opacity:".3"},"0"),e.jsx("path",{d:"M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z"},"1")],"CardMembershipTwoTone"),U=(i={})=>{const{enqueueSnackbar:n}=T();return E({mutationFn:q,onError:a=>{const c=I(a,"No se puede validar la tarjeta.");n(c,{variant:k(a),autoHideDuration:5e3})},...i})};function ne(){const i=o(r=>r.setToken),n=o(r=>r.setStepAssignRegister),a=o(r=>r.setCard),c=o(r=>r.resetState),{mutate:h,isLoading:x}=U(),f=P().shape({cardNumber:V().transform((r,t)=>t.replace(/\s/g,"")).min(8,"Debe contener los últimos 8 dígitos").required("El número de la tarjeta es requerido")}),m=M({initialValues:{cardNumber:""},validationSchema:f,onSubmit:(r,{setSubmitting:t})=>{var l;h({cardNumber:(l=r==null?void 0:r.cardNumber)==null?void 0:l.replace(/\s+/g,"")},{onSuccess:v=>{const{token:p,...b}=v;p&&(i(p),a(b),n(z.USER_REGISTER)),t(!1)},onError:()=>{t(!1)}})}}),{isSubmitting:g,values:j,setFieldValue:S,handleSubmit:C}=m,d=g||x;return N.useEffect(()=>{c()},[]),e.jsxs(s,{sx:{display:"flex",overflow:"hidden"},children:[e.jsxs(s,{direction:"column",width:1,spacing:1,children:[e.jsx(u,{variant:"h4",color:"textPrimary",align:"center",children:"Registrar Tarjeta"}),e.jsx(u,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Ingrese los 8 últimos dígitos de la tarjeta para iniciar con el proceso de asociación de la misma."}),e.jsx(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4},children:e.jsx("img",{className:"animate__animated animate__pulse",src:H,width:"25%",alt:"Sent Mail"})})]}),e.jsx(A,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:e.jsx(_,{formik:m,children:e.jsx(s,{spacing:2,p:3,children:e.jsx(F,{name:"cardNumber",required:!0,placeholder:"9717 8968",fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(L,{})}),inputComponent:w,inputProps:{mask:"0000 0000",value:j.cardNumber,onAccept:r=>{S("cardNumber",r)}}},disabled:d})})})}),e.jsx(s,{spacing:3,px:3,children:e.jsx(D,{loading:d,variant:"contained",color:"primary",fullWidth:!0,type:"submit",onClick:C,disabled:d,startIcon:e.jsx(G,{}),children:"Validar"})})]})}export{ne as default};
