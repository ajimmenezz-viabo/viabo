import{k as is,j as e,B as S,t as _,au as $,r as f,_ as W,ah as G,S as d,O as U,L as N,F as I,aw as F,a as A,b as Q,g as X,c as Y,aA as rs,aB as os,aC as cs,Q as ls,o as hs,aa as q,ac as K,T as p,a6 as v,i as J,e as ds,Z as xs,a8 as us,P as j,a5 as ps,ae as fs,ag as ys,ai as gs,aO as js,l as bs,aj as z,f as Ss,ak as Ts,al as Cs,am as Es}from"./index-66295b8b.js";import{A as ws}from"./build-55d3ef48.js";import{n as B,m as Ls,C as Ms,b as ss,E as Is,a as Os,H as vs}from"./build-c76b601a.js";import{f as P,A as k,L as _s}from"./build-50e962e0.js";import{b as As,A as Bs,a as ms,C as Ds}from"./build-ea70ab27.js";import{D as Ps}from"./build-89fac6af.js";import{M as Rs}from"./build-c9726c35.js";import{V as ks}from"./build-b0d60dee.js";import{C as Hs}from"./build-5c5dd2f4.js";import{v as C,a as E}from"./build-bee6630b.js";import{L as Ns,S as Fs,a as zs,b as Vs,c as m,d as V}from"./build-a825b64a.js";import{I as Zs}from"./build-10d10d69.js";import"./build-32f64c1a.js";import{I as $s}from"./build-100194d5.js";import{S as Ws}from"./build-3a14c8c0.js";function Gs({sx:s,color:t}){return is(),e.jsx(S,{sx:{width:50,height:50,display:"flex",alignItems:"center",...s},children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -9 58 58",children:[e.jsx("rect",{width:57,height:39,x:.5,y:.5,fill:"#006FCF",stroke:"#F3F3F3",rx:3.5}),e.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M11.863 28.894v-8.235h9.324l1 1.22 1.034-1.22h33.842v7.667s-.885.56-1.908.568h-18.74l-1.128-1.298v1.298h-3.695v-2.216s-.505.31-1.597.31h-1.258v1.906h-5.595l-1-1.246-1.014 1.246h-9.265ZM1 14.453l2.098-4.584h3.628l1.19 2.568V9.869h4.51l.709 1.856.687-1.856h20.244v.933s1.064-.933 2.813-.933l6.568.022 1.17 2.534V9.869h3.774l1.039 1.456V9.869h3.809v8.235H49.43l-.995-1.46v1.46H42.89l-.558-1.298h-1.49l-.549 1.298h-3.76c-1.505 0-2.467-.914-2.467-.914v.914h-5.67l-1.125-1.298v1.298H6.188l-.557-1.298H4.145l-.553 1.298H1v-3.651Zm.01 2.597 2.83-6.166h2.145l2.827 6.166H6.929l-.519-1.235H3.375l-.522 1.235H1.01Zm4.802-2.573-.925-2.158-.928 2.158h1.853Zm3.195 2.572v-6.166l2.617.01 1.523 3.975 1.486-3.985h2.597v6.166h-1.645v-4.543l-1.743 4.543H12.4l-1.749-4.543v4.543H9.007Zm9.348 0v-6.166h5.367v1.38h-3.705v1.054h3.618v1.298h-3.618v1.095h3.705v1.339h-5.367Zm6.319.001v-6.166h3.66c1.213 0 2.3.703 2.3 2 0 1.11-.917 1.824-1.805 1.894l2.164 2.272h-2.01l-1.972-2.19h-.692v2.19h-1.645Zm3.525-4.787h-1.88v1.299h1.904c.33 0 .755-.24.755-.65 0-.318-.328-.649-.78-.649Zm4.785 4.786h-1.68v-6.166h1.68v6.166Zm3.981 0h-.362c-1.754 0-2.819-1.295-2.819-3.057 0-1.807 1.053-3.109 3.268-3.109h1.818v1.46h-1.884c-.9 0-1.535.658-1.535 1.664 0 1.194.727 1.695 1.774 1.695h.433l-.693 1.347Zm.75.001 2.83-6.166h2.144l2.827 6.166h-1.883l-.52-1.235H40.08l-.522 1.235h-1.842Zm4.801-2.573-.925-2.158-.928 2.158h1.853Zm3.192 2.572v-6.166h2.09l2.67 3.874v-3.874h1.645v6.166H50.09l-2.737-3.975v3.975h-1.645Zm-32.72 10.79v-6.166h5.367v1.38H14.65v1.054h3.619v1.298H14.65V26.5h3.705v1.34h-5.367Zm26.297 0v-6.166h5.367v1.38h-3.705v1.054h3.601v1.298h-3.6V26.5h3.704v1.34h-5.367Zm-20.721 0 2.613-3.045-2.676-3.12h2.072l1.593 1.929 1.6-1.93h1.99l-2.64 3.083 2.618 3.083h-2.072l-1.547-1.899-1.51 1.9h-2.041Zm7.365.001v-6.166h3.633c1.49 0 2.361.9 2.361 2.074 0 1.417-1.11 2.145-2.575 2.145h-1.731v1.947h-1.688Zm3.511-4.771h-1.823v1.42h1.818c.48 0 .817-.299.817-.71 0-.438-.339-.71-.812-.71Zm3.198 4.77v-6.166h3.66c1.212 0 2.299.703 2.299 2 0 1.11-.916 1.824-1.805 1.895l2.164 2.271h-2.01l-1.971-2.19h-.693v2.19h-1.644Zm3.524-4.787h-1.88v1.299h1.904c.33 0 .755-.24.755-.65 0-.318-.328-.649-.779-.649Zm9.252 4.787v-1.338h3.291c.487 0 .698-.247.698-.518 0-.259-.21-.521-.698-.521h-1.487c-1.293 0-2.013-.738-2.013-1.847 0-.988.66-1.942 2.58-1.942h3.203l-.692 1.388h-2.77c-.53 0-.693.26-.693.509 0 .255.202.537.606.537h1.558c1.441 0 2.067.766 2.067 1.77 0 1.079-.697 1.962-2.145 1.962h-3.505Zm5.795 0v-1.338H54.5c.487 0 .698-.247.698-.518 0-.259-.21-.521-.698-.521h-1.487c-1.293 0-2.013-.738-2.013-1.847 0-.988.66-1.942 2.58-1.942h3.203l-.692 1.388h-2.77c-.53 0-.693.26-.693.509 0 .255.202.537.606.537h1.558c1.442 0 2.067.766 2.067 1.77 0 1.079-.697 1.962-2.145 1.962h-3.505Z",clipRule:"evenodd"})]})})}const Us=_(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),es=_(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.46 14.45l-1.36-.62c.28-.61.41-1.24.4-1.86-.01-.63-.14-1.24-.4-1.8l1.36-.63c.35.75.53 1.56.54 2.4.01.86-.17 1.7-.54 2.51zm3.07 1.56-1.3-.74c.52-.92.78-1.98.78-3.15 0-1.19-.27-2.33-.8-3.4l1.34-.67c.64 1.28.96 2.65.96 4.07 0 1.43-.33 2.74-.98 3.89zm3.14 1.32-1.35-.66c.78-1.6 1.18-3.18 1.18-4.69 0-1.51-.4-3.07-1.18-4.64l1.34-.67c.9 1.78 1.34 3.56 1.34 5.31 0 1.74-.44 3.54-1.33 5.35z"}),"ContactlessSharp"),Qs=_(e.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"Link"),Xs=_(e.jsx("path",{d:"M17 2H7c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 4H7V4h10v2zm3 16H4c-1.1 0-2-.9-2-2v-1h20v1c0 1.1-.9 2-2 2zm-1.47-11.81C18.21 9.47 17.49 9 16.7 9H7.3c-.79 0-1.51.47-1.83 1.19L2 18h20l-3.47-7.81zM9.5 16h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5z"}),"PointOfSale"),Ys=s=>{const t=(s==null?void 0:s.distance)||160,i=s==null?void 0:s.durationIn,n=s==null?void 0:s.durationOut,o=s==null?void 0:s.easeIn,c=s==null?void 0:s.easeOut;return{inUp:{initial:{y:t},animate:{y:0,transition:C({durationIn:i,easeIn:o})},exit:{y:t,transition:E({durationOut:n,easeOut:c})}},inDown:{initial:{y:-t},animate:{y:0,transition:C({durationIn:i,easeIn:o})},exit:{y:-t,transition:E({durationOut:n,easeOut:c})}},inLeft:{initial:{x:-t},animate:{x:0,transition:C({durationIn:i,easeIn:o})},exit:{x:-t,transition:E({durationOut:n,easeOut:c})}},inRight:{initial:{x:t},animate:{x:0,transition:C({durationIn:i,easeIn:o})},exit:{x:t,transition:E({durationOut:n,easeOut:c})}},outUp:{initial:{y:0},animate:{y:-t,transition:C({durationIn:i,easeIn:o})},exit:{y:0,transition:E({durationOut:n,easeOut:c})}},outDown:{initial:{y:0},animate:{y:t,transition:C({durationIn:i,easeIn:o})},exit:{y:0,transition:E({durationOut:n,easeOut:c})}},outLeft:{initial:{x:0},animate:{x:-t,transition:C({durationIn:i,easeIn:o})},exit:{x:0,transition:E({durationOut:n,easeOut:c})}},outRight:{initial:{x:0},animate:{x:t,transition:C({durationIn:i,easeIn:o})},exit:{x:0,transition:E({durationOut:n,easeOut:c})}}}},qs=$(f.lazy(()=>W(()=>import("./build-a5c89206.js"),["assets/js/build-a5c89206.js","assets/js/index-66295b8b.js","assets/css/build-f63bc8fe.css","assets/js/build-384108df.js","assets/js/build-32f64c1a.js","assets/js/build-64f71063.js","assets/js/build-43bcfde5.js","assets/js/build-100194d5.js","assets/js/build-f8e2190b.js","assets/js/build-8b48bdca.js","assets/js/build-10d10d69.js","assets/js/build-50e962e0.js","assets/js/build-bee6630b.js","assets/js/build-ef958374.js","assets/js/build-83d292c8.js","assets/js/build-39508b97.js","assets/js/build-81f70b7f.js","assets/js/build-5c5dd2f4.js","assets/js/build-c76b601a.js","assets/js/build-66b880ea.js","assets/js/build-ea70ab27.js","assets/js/build-55d3ef48.js","assets/js/build-89fac6af.js","assets/js/build-35e58f35.js","assets/js/build-beef059d.js","assets/js/build-b5fa9823.js","assets/js/build-c9726c35.js","assets/js/build-b0d60dee.js","assets/js/build-a825b64a.js","assets/js/build-3a14c8c0.js"]))),Ks=$(f.lazy(()=>W(()=>import("./build-0f735f04.js"),["assets/js/build-0f735f04.js","assets/js/index-66295b8b.js","assets/css/build-f63bc8fe.css","assets/js/build-32f64c1a.js","assets/js/build-f8e2190b.js","assets/js/build-c76b601a.js","assets/js/build-66b880ea.js","assets/js/build-8b48bdca.js","assets/js/build-10d10d69.js","assets/js/build-43bcfde5.js","assets/js/build-50e962e0.js","assets/js/build-bee6630b.js","assets/js/build-ef958374.js","assets/js/build-c9726c35.js","assets/js/build-b0d60dee.js","assets/js/build-100194d5.js","assets/js/build-74860e86.js","assets/js/build-2b44d82c.js","assets/js/build-83d292c8.js","assets/js/build-39508b97.js","assets/js/build-f7e8ba50.js","assets/js/build-81f70b7f.js","assets/js/build-5c5dd2f4.js","assets/js/build-55d3ef48.js","assets/js/build-ea70ab27.js","assets/js/build-89fac6af.js","assets/js/build-35e58f35.js","assets/js/build-beef059d.js","assets/js/build-b5fa9823.js","assets/js/build-a825b64a.js","assets/js/build-3a14c8c0.js"]))),Js=()=>{const[s,t]=f.useState(!1),[i,n]=f.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsx(G,{children:e.jsxs(d,{direction:"row",divider:e.jsx(U,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{pb:3},spacing:1,children:[e.jsx(d,{direction:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:e.jsx(N,{startIcon:e.jsx(Qs,{}),variant:"contained",color:"info",onClick:()=>t(!0),children:"Liga de Pago"})}),e.jsx(d,{direction:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:e.jsx(N,{startIcon:e.jsx(ws,{}),color:"info",variant:"contained",sx:{textWrap:"nowrap"},onClick:()=>n(!0),children:"Terminal Virtual"})})]})})}),e.jsx(qs,{open:s,setOpen:t}),e.jsx(Ks,{open:i,setOpen:n})]})},R={LIST:"commerce-terminals",MOVEMENTS:"terminal-movements"},se=s=>(s==null?void 0:s.map(t=>{var i,n,o,c;return{id:t==null?void 0:t.id,commerceId:t==null?void 0:t.commerceId,terminalId:t==null?void 0:t.terminalId,terminalON:((i=t==null?void 0:t.apiData)==null?void 0:i.status)===1,country:(n=t==null?void 0:t.apiData)==null?void 0:n.country,date:{created:(o=t==null?void 0:t.apiData)==null?void 0:o.created_at,updated:(c=t==null?void 0:t.apiData)==null?void 0:c.updated_at,register:t==null?void 0:t.registerDate},isVirtual:(t==null?void 0:t.typeId)==="1",name:(t==null?void 0:t.name)!==""?t==null?void 0:t.name.toString().toUpperCase():`TERMINAL-${t==null?void 0:t.terminalId}`,active:(t==null?void 0:t.active)==="1",balanceFormatted:P("0")}}))||[],ee=s=>{var o,c,l,y;const t=((o=s==null?void 0:s.movements)==null?void 0:o.map(a=>{const u=parseFloat((a==null?void 0:a.amount)||"0"),r=a!=null&&a.transaction_date?I(B(a==null?void 0:a.transaction_date),"dd MMM yyyy",{locale:F}):"",g=a!=null&&a.transaction_date?I(B(a==null?void 0:a.transaction_date),"p"):"";return{id:a==null?void 0:a.id,terminalName:a==null?void 0:a.terminal_name,amount:u,amountFormat:P(u),approved:a==null?void 0:a.approved,cardType:a==null?void 0:a.card_brand,cardNumber:a==null?void 0:a.card_number,cardBank:a==null?void 0:a.issuer,transactionDate:{fullDate:I(B(a==null?void 0:a.transaction_date),"dd MMM yyyy HH:mm",{locale:F}),date:r,time:g},description:`${(a==null?void 0:a.issuer)===""?a==null?void 0:a.card_brand:a==null?void 0:a.issuer}-${a==null?void 0:a.card_number}`.toUpperCase(),transactionMessage:a==null?void 0:a.result_message}}))??[],i={amount:P((c=s==null?void 0:s.balance)==null?void 0:c.amount),month:(y=(l=s==null?void 0:s.balance)==null?void 0:l.month)==null?void 0:y.toLowerCase()},n=s==null?void 0:s.tags;return{movements:t,balance:i,tags:n}},te=async()=>{const{data:s}=await A.get("/api/commerces/terminals");return se(s)},Be=async s=>{const{data:t}=await A.post("/api/commerce/pay/new",s);return t},me=async s=>{const{data:t}=await A.post("/api/commerce/virtual/pay",s);return t},ae=async(s,t,i)=>{const n=s?`?fromDate=${t}&toDate=${i}&terminalId=${s}`:`?fromDate=${t}&toDate=${i}`,{data:o}=await A.get(`/api/commerces-pay/transactions/all${n}`);return ee(o)},ne=(s={})=>{const[t,i]=f.useState(null);return{...Q([R.LIST],te,{staleTime:6e4,refetchOnMount:"always",onError:o=>{const c=X(o,"No se puede obtener la lista de terminales del comercio. Intente nuevamente o reporte a sistemas");i(c)},...s}),error:t||null}},ie={terminal:null},re=(s,t)=>({...ie,setTerminal:i=>{const{terminal:n}=t();s(o=>({terminal:{...n,...i}}),!1,"SET_TERMINAL_SELECTED")},resetTerminal:()=>{s(i=>({terminal:null}),!1,"RESET_TERMINAL_SELECTED")},addTerminalInfo:i=>{const{terminal:n}=t();s(o=>({terminal:{...n,...i}}),!1,"SET_TERMINAL_INFO")}}),L=Y(re),D={terminals:[],isOpenList:!1,isCollapse:!1,balance:{amount:"$0.00",month:null},globalBalance:{amount:"$0.00",month:null}},oe=(s,t)=>({...D,setTerminals:i=>{s(n=>({terminals:i}),!1,"SET_TERMINALS")},setOpenList:i=>{s(n=>({isOpenList:i}),!1,"SET_OPEN_LIST")},setCollapse:i=>{s(n=>({isCollapse:i}),!1,"SET_COLLAPSE")},setBalance:i=>{s(n=>({balance:i}),!1,"SET_BALANCE")},setGlobalBalance:i=>{s(n=>({globalBalance:i}),!1,"SET_GLOBAL_BALANCE")},resetBalance:()=>{s(i=>({balance:D.balance}),!1,"RESET_BALANCE")},resetGlobalBalance:()=>{s(i=>({globalBalance:D.globalBalance}),!1,"RESET_BALANCE")}}),x=Y(oe),ce=(s,t,i={})=>{const n=x(h=>h.setBalance),o=x(h=>h.setGlobalBalance),c=x(h=>h.resetBalance),l=x(h=>h.resetGlobalBalance);Ls[rs(t)];const y=os(t),a=cs(t),u=I(y,"yyyy-MM-dd"),r=I(a,"yyyy-MM-dd"),[g,T]=f.useState(null),M=s?[R.MOVEMENTS,s]:[R.MOVEMENTS,"global"];return{...Q(M,({signal:h})=>ae(s,u,r),{staleTime:6e4,retry:!1,refetchOnWindowFocus:!1,onSuccess:h=>{s?n(h==null?void 0:h.balance):o(h==null?void 0:h.balance)},onError:h=>{const O=X(h,"No se puede obtener la lista de movimientos de la terminal. Intente nuevamente o reporte a sistemas");T(O),ls.error(O,{type:hs(h)}),s?c():l()},...i}),error:g||null}},le=[{name:"MASTER CARD",component:Rs},{name:"CARNET",component:Ms},{name:"VISA",component:ks},{name:"AMEX",component:Gs}],he=s=>le.find(t=>(t==null?void 0:t.name)===(s==null?void 0:s.toUpperCase().trim())),Z=()=>{const[s,t]=f.useState(new Date),i=L(a=>a.terminal),{data:n,isFetching:o,refetch:c}=ce(i==null?void 0:i.terminalId,s,{enabled:!1}),l=n==null?void 0:n.movements;f.useEffect(()=>{c()},[s]),f.useEffect(()=>{t(new Date)},[i]);const y=[{name:"description",label:"Descripción",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(a,u)=>{const r=l[a],g=r==null?void 0:r.approved,T=he(r==null?void 0:r.cardType),M=T==null?void 0:T.component;return e.jsxs(S,{sx:{display:"flex",alignItems:"center"},children:[e.jsxs(S,{sx:{position:"relative"},children:[e.jsx(q,{title:r==null?void 0:r.cardType,children:e.jsx(K,{sx:{width:40,height:40,color:"text.secondary",bgcolor:"background.neutral"},children:T?e.jsx(M,{sx:{width:25,height:25}}):e.jsx(Bs,{width:25,height:25})})}),e.jsx(S,{sx:{right:0,bottom:0,width:15,height:15,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",color:"common.white",bgcolor:"error.main",justifyContent:"center",...g&&{bgcolor:"success.main"}},children:g?e.jsx(ms,{sx:{width:12,height:12}}):e.jsx(Us,{sx:{width:12,height:12}})})]}),e.jsxs(S,{sx:{ml:2},children:[e.jsxs(p,{variant:"subtitle2",children:[" ",r==null?void 0:r.description]}),e.jsx(p,{variant:"body2",textTransform:"capitalize",sx:{color:g?"success.main":"error.main"},children:r==null?void 0:r.transactionMessage})]})]})}}},...i?[]:[{name:"terminalName",label:"Terminal",options:{filterOptions:{fullWidth:!0},customBodyRenderLite:(a,u)=>{const r=l[a];return e.jsx(p,{variant:"subtitle2",fontWeight:"bold",children:r==null?void 0:r.terminalName})}}}],{name:"transactionDate.fullDate",label:"Fecha",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(a,u)=>{var g,T;const r=l[a];return e.jsxs(d,{children:[e.jsx(p,{variant:"subtitle2",children:(g=r==null?void 0:r.transactionDate)==null?void 0:g.date}),e.jsx(p,{variant:"body2",sx:{color:"text.secondary"},children:(T=r==null?void 0:r.transactionDate)==null?void 0:T.time})]})}}},{name:"amountFormat",label:"Cantidad",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(a,u)=>{const r=l[a];return e.jsx(p,{variant:"subtitle2",fontWeight:"bold",children:r==null?void 0:r.amountFormat})}}}];return e.jsxs(Hs,{children:[e.jsx(As,{currentMonth:s,setCurrentMonth:t,isLoading:o}),e.jsx(U,{sx:{borderStyle:"dashed"}}),e.jsx(Ps,{title:`${i?i==null?void 0:i.name:"Global"}`,data:l||[],columns:y,isLoading:o,options:{responsive:"simple",rowHover:!0,selectableRows:"none",selectableRowsOnClick:!1,selectToolbarPlacement:"replace",rowsPerPage:100,sortOrder:{name:"date",direction:"desc"},downloadOptions:{filename:`movimientos_terminal_${i==null?void 0:i.name}.csv`,filterOptions:{useDisplayedColumnsOnly:!1}}}})]})},de=()=>{const s=L(t=>t.terminal);return e.jsx(d,{sx:t=>({pl:{xs:0,sm:2,lg:2},overflow:"hidden",flexDirection:"column",flexGrow:1,transition:t.transitions.create(["width","flexGrow"])}),children:e.jsx(k,{children:e.jsxs(S,{sx:{overflowY:"auto"},children:[s&&e.jsx(v.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:e.jsxs(d,{pt:0,pb:4,px:2,children:[(s==null?void 0:s.isVirtual)&&e.jsx(Js,{}),e.jsx(Z,{})]})}),!s&&e.jsx(v.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:e.jsx(d,{pt:0,pb:4,px:2,children:e.jsx(Z,{})})})]})})})},xe=()=>{const s=L(n=>n.terminal),t=x(n=>n.balance),i=s?s==null?void 0:s.name:"Global";return e.jsx(k,{children:!!(s!=null&&s.id)&&e.jsx(v.div,{...Ys().inLeft,children:e.jsxs(J,{sx:{boxShadow:n=>`0px 0px 15px 2px ${ds(n.palette.primary.main,.4)}`},children:[e.jsx(ss,{title:e.jsx(d,{flexDirection:"column",gap:1,children:e.jsx(p,{variant:"subtitle1",children:i})}),sx:{px:2,py:2}}),e.jsxs(d,{alignItems:"center",pb:2,px:2,children:[e.jsxs(d,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(p,{variant:"h3",children:t.amount}),e.jsx(p,{variant:"caption",children:"MXN"})]}),(t==null?void 0:t.month)&&e.jsxs(p,{variant:"subtitle2",children:["Balance de ",t.month]})]})]})})})},ue=()=>{const s=x(n=>n.globalBalance),t=L(n=>n.resetTerminal),i=()=>{t()};return e.jsx(k,{children:e.jsx(v.div,{onClick:i,whileTap:{scale:.8},children:e.jsxs(J,{sx:n=>({cursor:"pointer",backgroundColor:{sm:"background.neutral",md:"background.paper"},"& :hover":{color:"primary.main"}}),children:[e.jsx(ss,{title:e.jsx(d,{flexDirection:"column",gap:1,children:e.jsx(p,{variant:"subtitle1",children:"Global"})}),sx:{px:2,py:2}}),e.jsxs(d,{alignItems:"center",pb:2,px:2,children:[e.jsxs(d,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(p,{variant:"h3",children:s.amount}),e.jsx(p,{variant:"caption",children:"MXN"})]}),(s==null?void 0:s.month)&&e.jsxs(p,{variant:"subtitle2",children:["Balance de ",s.month]})]})]})})})},pe=xs(us)(({theme:s})=>({borderRadius:"8px!important",width:1,justifyContent:"center",display:"flex",alignItems:"center",mb:1})),ts=({terminal:s})=>{const t=x(l=>l.isOpenList);x(l=>l.setOpenList);const i=L(l=>l.setTerminal),n=L(l=>l.terminal);(s==null?void 0:s.id)===(n==null?void 0:n.id)&&n&&(n==null||n.cardON);const o=(s==null?void 0:s.id)===(n==null?void 0:n.id),c=l=>{var a;!((a=l.target)==null?void 0:a.type)&&!o&&i(s)};return e.jsx(q,{title:s==null?void 0:s.name,arrow:!0,placement:"right",children:e.jsx(_s,{sx:{mb:1,padding:0,borderRadius:1,"& :hover":{color:"text.primary"}},disablePadding:!0,children:e.jsxs(pe,{onClick:c,sx:{...o&&{bgcolor:"secondary.light",color:"black","& :hover":{color:"text.primary"}},"& :hover":{color:"text.primary"},width:1,py:1,gap:1},children:[e.jsx(Ns,{sx:{ml:2,m:0},children:e.jsx(S,{sx:{position:"relative"},children:e.jsx(K,{sx:l=>({width:32,height:32,m:0,backgroundColor:l.palette.primary.main,"& :hover":{color:"white"}}),children:s!=null&&s.isVirtual?e.jsx(es,{sx:{width:20,height:20,color:"white"}}):e.jsx(Xs,{sx:{width:16,height:16,color:"white"}})})})}),t&&e.jsx(e.Fragment,{children:e.jsx(d,{sx:{width:1},children:e.jsx(p,{noWrap:!0,variant:"subtitle2",children:s==null?void 0:s.name})})})]})})})};ts.propTypes={terminal:j.shape({alias:j.any,id:j.any,isVirtual:j.any,name:j.any})};const as=({terminalsQuery:s,sx:t,...i})=>{const{isLoading:n,data:o,error:c,isError:l,refetch:y}=s,a=x(r=>r.isOpenList),u=x(r=>r.terminals);return l&&a&&!o&&!n?e.jsx(ps,{errorMessage:c,handleButton:y}):o&&a&&(o==null?void 0:o.length)===0&&!n?e.jsx(Is,{pt:2.5,message:"No hay terminales activas para este comercio"}):e.jsx(fs,{disablePadding:!0,sx:t,...i,children:(n?[...Array(12)]:u).map((r,g)=>r!=null&&r.id?e.jsx(ts,{terminal:r},r==null?void 0:r.id):e.jsx(Fs,{isOpenSideBar:a},g))})};as.propTypes={sx:j.any,terminalsQuery:j.shape({data:j.array,error:j.any,isError:j.any,isLoading:j.any,refetch:j.any})};const ns=({commerceTerminals:s=[]})=>{const t=x(b=>b.isOpenList),i=x(b=>b.setOpenList),n=x(b=>b.setTerminals),o=x(b=>b.terminals),c=x(b=>b.isCollapse),[l,y]=f.useState(""),[a,u]=f.useState(!1),r=async b=>{try{const{value:h}=b.target;if(y(h),h){const O=(s==null?void 0:s.filter(w=>{var H;return(w==null?void 0:w.name)&&((H=w==null?void 0:w.name)==null?void 0:H.toLowerCase().indexOf(h.toLowerCase()))!==-1}))||[];n(O)}else n(s)}catch(h){console.error(h)}},g=()=>{t&&(y(""),n(s)),i(!t)},T=()=>{u(!0)},M=()=>{u(!1)};return f.useEffect(()=>{s&&n(s)},[s]),f.useEffect(()=>{if(!t)return u(!1)},[t]),e.jsxs(e.Fragment,{children:[e.jsx(S,{sx:{p:2,px:0},children:e.jsxs(d,{direction:"row",justifyContent:t?"flex-end":"center",alignItems:"center",spacing:2,children:[!c&&e.jsx(Ds,{onClickAway:M,children:e.jsx(Zs,{fullWidth:!0,size:"small",value:l,onFocus:T,onChange:r,placeholder:"Buscar Terminales...",InputProps:{startAdornment:e.jsx($s,{position:"start",children:e.jsx(Ws,{sx:{color:"text.disabled",width:20,height:20}})})}})}),e.jsx(d,{direction:"row",alignItems:"center",justifyContent:"center",children:e.jsx(zs,{size:"small",sx:{...!t&&{transform:"rotate(180deg)"}},onClick:g,children:ys})})]})}),(o==null?void 0:o.length)===0&&(s==null?void 0:s.length)>0&&e.jsx(gs,{sx:{p:1,display:"flex",flexDirection:"column",alignItems:"center"},searchQuery:l})]})};ns.propTypes={commerceTerminals:j.array};const fe=()=>{const s=x(r=>r.setOpenList),t=x(r=>r.setCollapse),i=x(r=>r.isOpenList),n=ne(),o=js(),c=bs("up","md"),l=c&&!i,y=()=>{s(!1)},a=()=>{s(!i)};f.useEffect(()=>{c&&s(!0)},[c]),f.useEffect(()=>{t(l)},[l]);const u=e.jsxs(e.Fragment,{children:[i&&e.jsxs(d,{spacing:2,p:2,children:[e.jsx(ue,{}),e.jsx(xe,{})]}),e.jsx(d,{children:e.jsx(ns,{commerceTerminals:(n==null?void 0:n.data)||[]})}),e.jsx(G,{sx:{height:.98},children:e.jsx(d,{children:e.jsx(as,{terminalsQuery:n})})})]});return e.jsxs(e.Fragment,{children:[!c&&!i&&e.jsx(Vs,{onClick:a,children:e.jsx(es,{sx:{width:20,height:20}})}),c?e.jsx(z,{open:i,variant:"persistent",PaperProps:{sx:{height:1,borderRightStyle:"none",bgcolor:"background.default"}},sx:{height:1,width:m,transition:o.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",backgroundColor:"transparent!important",width:m},...l&&{width:V,"& .MuiDrawer-paper":{width:V,backgroundColor:"transparent!important",position:"static",transform:"none !important",visibility:"visible !important"}}},children:u}):e.jsx(z,{ModalProps:{keepMounted:!0},open:i,onClose:y,sx:{height:1,"& .MuiDrawer-paper":{width:m,p:2}},children:u})]})},ye=()=>e.jsx(Ss,{title:"Lista de Terminales Punto de Venta",children:e.jsx(Os,{children:e.jsxs(S,{display:"flex",overflow:"hidden",sx:{height:"100vH",maxHeight:"100%",flexDirection:"column"},children:[e.jsx(S,{px:1,children:e.jsx(vs,{name:"Terminales Punto de Venta",links:[{name:"Inicio",href:Ts.root},{name:"Administración",href:Cs.terminals},{name:Es.terminals.name}]})}),e.jsxs(S,{display:"flex",overflow:"hidden",flex:1,children:[e.jsx(fe,{}),e.jsx(de,{})]})]})})}),De=Object.freeze(Object.defineProperty({__proto__:null,default:ye},Symbol.toStringTag,{value:"Module"}));export{Qs as L,De as P,R as T,Be as c,me as g,L as u};
