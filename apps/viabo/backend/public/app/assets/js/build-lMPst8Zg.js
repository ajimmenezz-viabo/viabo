import{a7 as X,aV as K,r as i,j as e,T as r,B as Q,S as x,b4 as Y,m as M,C as g,_ as E,O as y}from"./index-y5qwZYHa.js";import{C as q}from"./build-qjKQWaxY.js";import{f as L}from"./build-Rz0-vvWC.js";import{u as O}from"./build-J_p2Sqo7.js";import{L as H}from"./build-SDHWuAcQ.js";import{T as J,a as C}from"./build-TWOoOba2.js";import"./build-EPVZwbdT.js";import"./build-kN1LN86M.js";import"./build-DDLRhngI.js";import"./build-G8ad7rbY.js";import"./build-LWINOuLY.js";import"./build-cS6dMXZY.js";import"./build-0goDGXFO.js";import"./build-8X4s3jOI.js";import"./build-SRt7phYD.js";import"./build-Uc7vb3zK.js";import"./build-1tNQEUgO.js";import"./build-aFgRP2iM.js";import"./build-lxkDiRmu.js";import"./build-opCDIkM4.js";import"./build-QtGFkQWE.js";import"./build-JW4Zm_e-.js";import"./build-yK9xw9pv.js";import"./build-fxHra5tZ.js";import"./build-iz_J-lP_.js";import"./build-yf-Tt6eY.js";import"./build-Yn4D2ea6.js";import"./build-PJPIYBgW.js";import"./build-EAyDWSNT.js";import"./build-fXFIKW8c.js";import"./build-y_Xl7D_I.js";import"./build-U7ksRwdl.js";import"./build-BezCRUW3.js";import"./build-a2usd7M3.js";import"./build-Oyvi9aeC.js";import"./build-ZJzPV2Tj.js";import"./build-Nhin3O3V.js";import"./build-Hg_uYomY.js";const S=g(i.lazy(()=>E(()=>import("./build-zrCSgtTw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38])))),W=g(i.lazy(()=>E(()=>import("./build-XkG7ToPu.js"),__vite__mapDeps([39,1,2,30,14,15,40,29,31,22,23,18,19,24,25,26,17,27,20,32,33,7,8,9,10])))),Z=g(i.lazy(()=>E(()=>import("./build-cRiXWKDQ.js"),__vite__mapDeps([41,1,2,3,4,16,17,18,19,15,12,13,14,20,35,25,26,42,38]))));function $({open:P,setOpen:A,isFundingCard:s}){var w;const f=X(),t=O(o=>o.card),n=O(o=>o.mainCard),a=K([q.CARDS_COMMERCE_LIST,t==null?void 0:t.cardTypeId])||[],[h,c]=i.useState(0),u=i.useMemo(()=>s?n==null?void 0:n.balance:t==null?void 0:t.balance,[n==null?void 0:n.balance,t==null?void 0:t.balance]),[m,z]=i.useState("1"),[d,b]=i.useState(!1),[G,v]=i.useState(null),[R,B]=i.useState(!1),p=i.useMemo(()=>(parseFloat(u)-h).toFixed(2)<0,[h,u]),T=i.useMemo(()=>{var o;return((o=f==null?void 0:f.profile)==null?void 0:o.toLowerCase())==="representante legal"},[f]),_=i.useMemo(()=>a==null?void 0:a.filter(o=>o.id!==(t==null?void 0:t.id)),[a,t==null?void 0:t.id]),D=()=>{A(!1),c(0),b(!1),v(null),B(!1)},V=(o,l)=>{l&&z(l)};i.useEffect(()=>{c(0)},[m]);const j=o=>{const l=m==="2";let I=s?n==null?void 0:n.id:t==null?void 0:t.id;l&&(I=t==null?void 0:t.id),v({cardOriginId:I,isGlobal:l,transactions:l?o:(o==null?void 0:o.transactions)||[],concept:o==null?void 0:o.concept,balance:u,currentBalance:h}),b(!0)},k=()=>{b(!1)},N=e.jsx(e.Fragment,{children:s?e.jsx(r,{variant:"h6",children:"Fondear"}):e.jsxs(Q,{children:[e.jsxs(x,{spacing:1,alignItems:"center",direction:"row",mb:.5,children:[e.jsx(r,{variant:"subtitle2",children:"Origen: "}),e.jsxs(r,{variant:"subtitle2",children:[t==null?void 0:t.cardNumberMoreDigits," "]})]}),e.jsx(H,{color:"info",children:(w=t==null?void 0:t.assignUser)==null?void 0:w.name})]})}),U=e.jsxs(e.Fragment,{children:[!s&&T&&e.jsx(x,{alignItems:"flex-end",sx:{py:1,px:3},children:e.jsxs(J,{size:"small",color:"primary",value:m,exclusive:!0,onChange:V,"aria-label":"Platform",disabled:R,children:[e.jsx(C,{value:"1",children:"Tarjetas"}),e.jsx(C,{value:"2",children:"Global"})]})}),e.jsxs(x,{flexDirection:"column",alignItems:"center",justifyContent:"space-between",spacing:0,px:3,pt:s?2:1,children:[e.jsx(r,{variant:"subtitle1",children:"Saldo"}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(r,{variant:"h3",color:"success.main",children:L(u)}),e.jsx(r,{variant:"caption",color:"success.main",children:"MXN"})]}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(r,{variant:"subtitle1",color:"error",children:["- ",L(h)]}),e.jsx(r,{variant:"caption",color:"error",children:"MXN"})]}),p&&e.jsx(r,{variant:"caption",color:"warning.main",textAlign:"center",children:"Saldo insuficiente para realizar la(s) operacion(es)"})]}),s&&e.jsx(S,{cards:s?a:_,setCurrentBalance:c,insufficient:p,isBinCard:s,onSuccess:j}),!s&&T&&e.jsxs(e.Fragment,{children:[m==="1"&&e.jsx(S,{cards:s?a:_,setCurrentBalance:c,insufficient:p,isBinCard:s,onSuccess:j}),m==="2"&&e.jsx(Z,{mainCard:n,setCurrentBalance:c,insufficient:p,onSuccess:j})]}),!s&&!T&&e.jsx(S,{cards:s?a:_,setCurrentBalance:c,insufficient:p,isBinCard:s,onSuccess:j})]});return e.jsxs(Y,{open:P,handleClose:D,titleElement:N,children:[e.jsx(M.div,{initial:{opacity:1},animate:{opacity:d?0:1},transition:{duration:.5},style:{display:d?"none":"flex",flex:1,overflow:"hidden",flexDirection:"column"},children:U}),e.jsx(M.div,{initial:{opacity:0},animate:{opacity:d?1:0},transition:{duration:.5},style:{display:d?"flex":"none",flexDirection:"column",flex:1,overflow:"hidden"},children:e.jsx(W,{data:G,onBack:k,setTransactionLoading:B,transactionLoading:R,onClose:D})})]})}$.propTypes={isFundingCard:y.bool,open:y.bool,setOpen:y.func};export{$ as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/build-zrCSgtTw.js","assets/js/index-y5qwZYHa.js","assets/css/build-pvjN466W.css","assets/js/build-PJPIYBgW.js","assets/js/build-8X4s3jOI.js","assets/js/build-J_p2Sqo7.js","assets/js/build-kN1LN86M.js","assets/js/build-DDLRhngI.js","assets/js/build-G8ad7rbY.js","assets/js/build-LWINOuLY.js","assets/js/build-cS6dMXZY.js","assets/js/build-0goDGXFO.js","assets/js/build-SRt7phYD.js","assets/js/build-Uc7vb3zK.js","assets/js/build-Rz0-vvWC.js","assets/js/build-EPVZwbdT.js","assets/js/build-SDHWuAcQ.js","assets/js/build-iz_J-lP_.js","assets/js/build-QtGFkQWE.js","assets/js/build-1tNQEUgO.js","assets/js/build-Yn4D2ea6.js","assets/js/build-aFgRP2iM.js","assets/js/build-lxkDiRmu.js","assets/js/build-opCDIkM4.js","assets/js/build-JW4Zm_e-.js","assets/js/build-yK9xw9pv.js","assets/js/build-fxHra5tZ.js","assets/js/build-yf-Tt6eY.js","assets/js/build-EAyDWSNT.js","assets/js/build-fXFIKW8c.js","assets/js/build-y_Xl7D_I.js","assets/js/build-U7ksRwdl.js","assets/js/build-BezCRUW3.js","assets/js/build-a2usd7M3.js","assets/js/build-Oyvi9aeC.js","assets/js/build-ZJzPV2Tj.js","assets/js/build-Nhin3O3V.js","assets/js/build-Hg_uYomY.js","assets/js/build-i6u2TTTo.js","assets/js/build-XkG7ToPu.js","assets/js/build-qjKQWaxY.js","assets/js/build-cRiXWKDQ.js","assets/js/build-yc4r4FsI.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}