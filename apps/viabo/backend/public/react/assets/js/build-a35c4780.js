import{k as X,j as s,B as y,t as E,au as H,r as d,_ as R,ag as k,S as g,O as F,L as v,F as T,aw as A,a as I,b as z,g as V,aA as J,aB as m,aC as ss,Q as es,o as ts,c as B,a9 as N,ab as Z,T as C,a6 as as,Z as rs,a7 as ns,P as u,a5 as os,ad as is,ah as cs,ai as ls,aO as ds,l as hs,aj as D,f as ps,ak as us,al as xs,am as fs}from"./index-6ad460b4.js";import{A as ys}from"./build-617ee888.js";import{n as M,m as gs,C as js,E as Ss,a as Cs,H as bs}from"./build-2ccf16cb.js";import{f as W,L as Ts}from"./build-0a64cac0.js";import{b as ws,A as Es,a as Is,C as Ls}from"./build-47365e4f.js";import{D as Ms}from"./build-b079eafd.js";import{M as Os}from"./build-59732c7e.js";import{V as _s}from"./build-3780f7f9.js";import{C as vs}from"./build-37cbbe5d.js";import{S as As}from"./build-607ef328.js";import{L as Ds,S as Ps,a as Hs,b as Rs,c as O,d as P}from"./build-88f9a9a9.js";import{I as ks}from"./build-437622c8.js";import"./build-154de2c9.js";import{I as Fs}from"./build-062e0ba8.js";import{S as zs}from"./build-2fd73a42.js";function Vs({sx:a,color:t}){return X(),s.jsx(y,{sx:{width:50,height:50,display:"flex",alignItems:"center",...a},children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -9 58 58",children:[s.jsx("rect",{width:57,height:39,x:.5,y:.5,fill:"#006FCF",stroke:"#F3F3F3",rx:3.5}),s.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M11.863 28.894v-8.235h9.324l1 1.22 1.034-1.22h33.842v7.667s-.885.56-1.908.568h-18.74l-1.128-1.298v1.298h-3.695v-2.216s-.505.31-1.597.31h-1.258v1.906h-5.595l-1-1.246-1.014 1.246h-9.265ZM1 14.453l2.098-4.584h3.628l1.19 2.568V9.869h4.51l.709 1.856.687-1.856h20.244v.933s1.064-.933 2.813-.933l6.568.022 1.17 2.534V9.869h3.774l1.039 1.456V9.869h3.809v8.235H49.43l-.995-1.46v1.46H42.89l-.558-1.298h-1.49l-.549 1.298h-3.76c-1.505 0-2.467-.914-2.467-.914v.914h-5.67l-1.125-1.298v1.298H6.188l-.557-1.298H4.145l-.553 1.298H1v-3.651Zm.01 2.597 2.83-6.166h2.145l2.827 6.166H6.929l-.519-1.235H3.375l-.522 1.235H1.01Zm4.802-2.573-.925-2.158-.928 2.158h1.853Zm3.195 2.572v-6.166l2.617.01 1.523 3.975 1.486-3.985h2.597v6.166h-1.645v-4.543l-1.743 4.543H12.4l-1.749-4.543v4.543H9.007Zm9.348 0v-6.166h5.367v1.38h-3.705v1.054h3.618v1.298h-3.618v1.095h3.705v1.339h-5.367Zm6.319.001v-6.166h3.66c1.213 0 2.3.703 2.3 2 0 1.11-.917 1.824-1.805 1.894l2.164 2.272h-2.01l-1.972-2.19h-.692v2.19h-1.645Zm3.525-4.787h-1.88v1.299h1.904c.33 0 .755-.24.755-.65 0-.318-.328-.649-.78-.649Zm4.785 4.786h-1.68v-6.166h1.68v6.166Zm3.981 0h-.362c-1.754 0-2.819-1.295-2.819-3.057 0-1.807 1.053-3.109 3.268-3.109h1.818v1.46h-1.884c-.9 0-1.535.658-1.535 1.664 0 1.194.727 1.695 1.774 1.695h.433l-.693 1.347Zm.75.001 2.83-6.166h2.144l2.827 6.166h-1.883l-.52-1.235H40.08l-.522 1.235h-1.842Zm4.801-2.573-.925-2.158-.928 2.158h1.853Zm3.192 2.572v-6.166h2.09l2.67 3.874v-3.874h1.645v6.166H50.09l-2.737-3.975v3.975h-1.645Zm-32.72 10.79v-6.166h5.367v1.38H14.65v1.054h3.619v1.298H14.65V26.5h3.705v1.34h-5.367Zm26.297 0v-6.166h5.367v1.38h-3.705v1.054h3.601v1.298h-3.6V26.5h3.704v1.34h-5.367Zm-20.721 0 2.613-3.045-2.676-3.12h2.072l1.593 1.929 1.6-1.93h1.99l-2.64 3.083 2.618 3.083h-2.072l-1.547-1.899-1.51 1.9h-2.041Zm7.365.001v-6.166h3.633c1.49 0 2.361.9 2.361 2.074 0 1.417-1.11 2.145-2.575 2.145h-1.731v1.947h-1.688Zm3.511-4.771h-1.823v1.42h1.818c.48 0 .817-.299.817-.71 0-.438-.339-.71-.812-.71Zm3.198 4.77v-6.166h3.66c1.212 0 2.299.703 2.299 2 0 1.11-.916 1.824-1.805 1.895l2.164 2.271h-2.01l-1.971-2.19h-.693v2.19h-1.644Zm3.524-4.787h-1.88v1.299h1.904c.33 0 .755-.24.755-.65 0-.318-.328-.649-.779-.649Zm9.252 4.787v-1.338h3.291c.487 0 .698-.247.698-.518 0-.259-.21-.521-.698-.521h-1.487c-1.293 0-2.013-.738-2.013-1.847 0-.988.66-1.942 2.58-1.942h3.203l-.692 1.388h-2.77c-.53 0-.693.26-.693.509 0 .255.202.537.606.537h1.558c1.441 0 2.067.766 2.067 1.77 0 1.079-.697 1.962-2.145 1.962h-3.505Zm5.795 0v-1.338H54.5c.487 0 .698-.247.698-.518 0-.259-.21-.521-.698-.521h-1.487c-1.293 0-2.013-.738-2.013-1.847 0-.988.66-1.942 2.58-1.942h3.203l-.692 1.388h-2.77c-.53 0-.693.26-.693.509 0 .255.202.537.606.537h1.558c1.442 0 2.067.766 2.067 1.77 0 1.079-.697 1.962-2.145 1.962h-3.505Z",clipRule:"evenodd"})]})})}const Bs=E(s.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),$=E(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.46 14.45l-1.36-.62c.28-.61.41-1.24.4-1.86-.01-.63-.14-1.24-.4-1.8l1.36-.63c.35.75.53 1.56.54 2.4.01.86-.17 1.7-.54 2.51zm3.07 1.56-1.3-.74c.52-.92.78-1.98.78-3.15 0-1.19-.27-2.33-.8-3.4l1.34-.67c.64 1.28.96 2.65.96 4.07 0 1.43-.33 2.74-.98 3.89zm3.14 1.32-1.35-.66c.78-1.6 1.18-3.18 1.18-4.69 0-1.51-.4-3.07-1.18-4.64l1.34-.67c.9 1.78 1.34 3.56 1.34 5.31 0 1.74-.44 3.54-1.33 5.35z"}),"ContactlessSharp"),Ns=E(s.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"Link"),Zs=E(s.jsx("path",{d:"M17 2H7c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 4H7V4h10v2zm3 16H4c-1.1 0-2-.9-2-2v-1h20v1c0 1.1-.9 2-2 2zm-1.47-11.81C18.21 9.47 17.49 9 16.7 9H7.3c-.79 0-1.51.47-1.83 1.19L2 18h20l-3.47-7.81zM9.5 16h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5z"}),"PointOfSale"),Ws=H(d.lazy(()=>R(()=>import("./build-0367b084.js"),["assets/js/build-0367b084.js","assets/js/index-6ad460b4.js","assets/css/build-f63bc8fe.css","assets/js/build-8a8411e2.js","assets/js/build-154de2c9.js","assets/js/build-ebcfb744.js","assets/js/build-636787f0.js","assets/js/build-062e0ba8.js","assets/js/build-74deba51.js","assets/js/build-5e714fdb.js","assets/js/build-437622c8.js","assets/js/build-0a64cac0.js","assets/js/build-bee6630b.js","assets/js/build-e822f479.js","assets/js/build-7845a4db.js","assets/js/build-93e23aed.js","assets/js/build-d7137d46.js","assets/js/build-37cbbe5d.js","assets/js/build-2ccf16cb.js","assets/js/build-caf88c1a.js","assets/js/build-47365e4f.js","assets/js/build-617ee888.js","assets/js/build-b079eafd.js","assets/js/build-aafae676.js","assets/js/build-4d96ee10.js","assets/js/build-af45772f.js","assets/js/build-59732c7e.js","assets/js/build-3780f7f9.js","assets/js/build-607ef328.js","assets/js/build-88f9a9a9.js","assets/js/build-2fd73a42.js"]))),$s=H(d.lazy(()=>R(()=>import("./build-3bf3204a.js"),["assets/js/build-3bf3204a.js","assets/js/index-6ad460b4.js","assets/css/build-f63bc8fe.css","assets/js/build-154de2c9.js","assets/js/build-74deba51.js","assets/js/build-2ccf16cb.js","assets/js/build-caf88c1a.js","assets/js/build-5e714fdb.js","assets/js/build-437622c8.js","assets/js/build-636787f0.js","assets/js/build-0a64cac0.js","assets/js/build-bee6630b.js","assets/js/build-e822f479.js","assets/js/build-59732c7e.js","assets/js/build-3780f7f9.js","assets/js/build-062e0ba8.js","assets/js/build-01244a73.js","assets/js/build-50a5e040.js","assets/js/build-7845a4db.js","assets/js/build-93e23aed.js","assets/js/build-2b83ebac.js","assets/js/build-d7137d46.js","assets/js/build-37cbbe5d.js","assets/js/build-617ee888.js","assets/js/build-47365e4f.js","assets/js/build-b079eafd.js","assets/js/build-aafae676.js","assets/js/build-4d96ee10.js","assets/js/build-af45772f.js","assets/js/build-607ef328.js","assets/js/build-88f9a9a9.js","assets/js/build-2fd73a42.js"]))),Us=()=>{const[a,t]=d.useState(!1),[e,r]=d.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(y,{children:s.jsx(k,{children:s.jsxs(g,{direction:"row",divider:s.jsx(F,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:3},spacing:1,children:[s.jsx(g,{direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:s.jsx(v,{startIcon:s.jsx(Ns,{}),variant:"contained",color:"info",onClick:()=>t(!0),children:"Liga de Pago"})}),s.jsx(g,{direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:s.jsx(v,{startIcon:s.jsx(ys,{}),color:"info",variant:"contained",onClick:()=>r(!0),children:"Terminal Virtual"})})]})})}),s.jsx(Ws,{open:a,setOpen:t}),s.jsx($s,{open:e,setOpen:r})]})},U={LIST:"commerce-terminals",MOVEMENTS:"terminal-movements"},Qs=a=>(a==null?void 0:a.map(t=>{var e,r,o,l;return{id:t==null?void 0:t.id,commerceId:t==null?void 0:t.commerceId,terminalId:t==null?void 0:t.terminalId,terminalON:((e=t==null?void 0:t.apiData)==null?void 0:e.status)===1,country:(r=t==null?void 0:t.apiData)==null?void 0:r.country,date:{created:(o=t==null?void 0:t.apiData)==null?void 0:o.created_at,updated:(l=t==null?void 0:t.apiData)==null?void 0:l.updated_at,register:t==null?void 0:t.registerDate},isVirtual:(t==null?void 0:t.typeId)==="1",name:(t==null?void 0:t.name)!==""?t==null?void 0:t.name.toString().toUpperCase():`TERMINAL-${t==null?void 0:t.terminalId}`,active:(t==null?void 0:t.active)==="1",balanceFormatted:W("0")}}))||[],Ys=a=>{var t;return((t=a==null?void 0:a.movements)==null?void 0:t.map(e=>{const r=parseFloat((e==null?void 0:e.amount)||"0"),o=e!=null&&e.transaction_date?T(M(e==null?void 0:e.transaction_date),"dd MMM yyyy",{locale:A}):"",l=e!=null&&e.transaction_date?T(M(e==null?void 0:e.transaction_date),"p"):"";return{id:e==null?void 0:e.id,amount:r,amountFormat:W(r),approved:e==null?void 0:e.approved,cardType:e==null?void 0:e.card_brand,cardNumber:e==null?void 0:e.card_number,cardBank:e==null?void 0:e.issuer,transactionDate:{fullDate:T(M(e==null?void 0:e.transaction_date),"dd MMM yyyy HH:mm",{locale:A}),date:o,time:l},description:`${(e==null?void 0:e.issuer)===""?e==null?void 0:e.card_brand:e==null?void 0:e.issuer}-${e==null?void 0:e.card_number}`.toUpperCase(),transactionMessage:e==null?void 0:e.result_message}}))??[]},qs=async()=>{const{data:a}=await I.get("/api/commerces/terminals");return Qs(a)},Ee=async a=>{const{data:t}=await I.post("/api/commerce/pay/new",a);return t},Ie=async a=>{const{data:t}=await I.post("/api/commerce/virtual/pay",a);return t},Gs=async(a,t,e)=>{const{data:r}=await I.get(`/api/commerces-pay/transactions?fromDate=${t}&toDate=${e}&terminalId=${a}`);return Ys(r)},Ks=(a={})=>{const[t,e]=d.useState(null);return{...z([U.LIST],qs,{staleTime:6e4,refetchOnMount:"always",onError:o=>{const l=V(o,"No se puede obtener la lista de terminales del comercio. Intente nuevamente o reporte a sistemas");e(l)},...a}),error:t||null}},Xs=(a,t,e={})=>{gs[J(t)];const r=m(t),o=ss(t),l=T(r,"yyyy-MM-dd"),h=T(o,"yyyy-MM-dd"),[c,x]=d.useState(null);return{...z([U.MOVEMENTS,a],({signal:i})=>Gs(a,l,h),{staleTime:6e4,retry:!1,refetchOnWindowFocus:!1,onError:i=>{const p=V(i,"No se puede obtener la lista de movimientos de la terminal. Intente nuevamente o reporte a sistemas");x(p),es.error(p,{type:ts(i)})},...e}),error:c||null}},Js={terminal:null},ms=(a,t)=>({...Js,setTerminal:e=>{const{terminal:r}=t();a(o=>({terminal:{...r,...e}}),!1,"SET_TERMINAL_SELECTED")},resetTerminal:()=>{a(e=>({pos:null}),!1,"RESET_TERMINAL_SELECTED")},addTerminalInfo:e=>{const{terminal:r}=t();a(o=>({terminal:{...r,...e}}),!1,"SET_TERMINAL_INFO")}}),w=B(ms),se={terminals:[],isOpenList:!1,isCollapse:!1},ee=(a,t)=>({...se,setTerminals:e=>{a(r=>({terminals:e}),!1,"SET_TERMINAL")},setOpenList:e=>{a(r=>({isOpenList:e}),!1,"SET_OPEN_LIST")},setCollapse:e=>{a(r=>({isCollapse:e}),!1,"SET_COLLAPSE")}}),f=B(ee),te=[{name:"MASTER CARD",component:Os},{name:"CARNET",component:js},{name:"VISA",component:_s},{name:"AMEX",component:Vs}],ae=a=>te.find(t=>(t==null?void 0:t.name)===a.toUpperCase().trim()),re=()=>{const[a,t]=d.useState(new Date),e=w(c=>c.terminal),{data:r,isFetching:o,refetch:l}=Xs(e==null?void 0:e.terminalId,a,{enabled:!!(e!=null&&e.terminalId)});d.useEffect(()=>{l()},[a]),d.useEffect(()=>{t(new Date)},[e==null?void 0:e.id]);const h=[{name:"description",label:"Descripción",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(c,x)=>{const n=r[c],i=n==null?void 0:n.approved,p=ae(n==null?void 0:n.cardType),L=p==null?void 0:p.component;return s.jsxs(y,{sx:{display:"flex",alignItems:"center"},children:[s.jsxs(y,{sx:{position:"relative"},children:[s.jsx(N,{title:n==null?void 0:n.cardType,children:s.jsx(Z,{sx:{width:40,height:40,color:"text.secondary",bgcolor:"background.neutral"},children:p?s.jsx(L,{sx:{width:25,height:25}}):s.jsx(Es,{width:25,height:25})})}),s.jsx(y,{sx:{right:0,bottom:0,width:15,height:15,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",color:"common.white",bgcolor:"error.main",justifyContent:"center",...i&&{bgcolor:"success.main"}},children:i?s.jsx(Is,{sx:{width:12,height:12}}):s.jsx(Bs,{sx:{width:12,height:12}})})]}),s.jsxs(y,{sx:{ml:2},children:[s.jsxs(C,{variant:"subtitle2",children:[" ",n==null?void 0:n.description]}),s.jsx(C,{variant:"body2",textTransform:"capitalize",sx:{color:i?"success.main":"error.main"},children:n==null?void 0:n.transactionMessage})]})]})}}},{name:"transactionDate.fullDate",label:"Fecha",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(c,x)=>{var i,p;const n=r[c];return s.jsxs(g,{children:[s.jsx(C,{variant:"subtitle2",children:(i=n==null?void 0:n.transactionDate)==null?void 0:i.date}),s.jsx(C,{variant:"body2",sx:{color:"text.secondary"},children:(p=n==null?void 0:n.transactionDate)==null?void 0:p.time})]})}}},{name:"amountFormat",label:"Cantidad",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(c,x)=>{const n=r[c];return s.jsx(C,{variant:"subtitle2",fontWeight:"bold",children:n==null?void 0:n.amountFormat})}}}];return s.jsxs(vs,{children:[s.jsx(ws,{currentMonth:a,setCurrentMonth:t,isLoading:o}),s.jsx(F,{sx:{borderStyle:"dashed"}}),s.jsx(Ms,{title:"Movimientos",data:r||[],columns:h,isLoading:o,options:{responsive:"simple",rowHover:!0,selectableRows:"none",selectableRowsOnClick:!1,selectToolbarPlacement:"replace",sortOrder:{name:"date",direction:"desc"},downloadOptions:{filename:`movimientos_terminal_${e==null?void 0:e.name}.csv`,filterOptions:{useDisplayedColumnsOnly:!1}}}})]})},ne=()=>{const a=w(t=>t.terminal);return s.jsxs(g,{sx:t=>({pl:{xs:0,lg:2},overflow:"hidden",flexDirection:"column",flexGrow:1}),children:[a&&s.jsxs(y,{sx:{overflowY:"auto"},children:[(a==null?void 0:a.isVirtual)&&s.jsx(Us,{}),s.jsx(g,{pt:0,pb:4,px:2,children:s.jsx(re,{})})]}),!a&&s.jsxs(g,{spacing:3,sx:{height:"100%",width:"100%"},children:[s.jsx(as,{variant:"filled",severity:"info",children:"Debe seleccionar una terminal para ver sus detalles!"}),s.jsx(g,{alignItems:"center",children:s.jsx(As,{sx:{width:"30%"}})})]})]})},oe=rs(ns)(({theme:a})=>({borderRadius:"8px!important",width:1,justifyContent:"center",display:"flex",alignItems:"center",mb:1})),Q=({terminal:a})=>{const t=f(c=>c.isOpenList),e=f(c=>c.setOpenList),r=w(c=>c.setTerminal),o=w(c=>c.terminal);(a==null?void 0:a.id)===(o==null?void 0:o.id)&&o&&(o==null||o.cardON);const l=(a==null?void 0:a.id)===(o==null?void 0:o.id),h=c=>{var n;!((n=c.target)==null?void 0:n.type)&&!l&&(r(a),e(!1))};return s.jsx(N,{title:a==null?void 0:a.name,arrow:!0,placement:"right",children:s.jsx(Ts,{sx:{mb:1,padding:0,borderRadius:1,"& :hover":{color:"text.primary"}},disablePadding:!0,children:s.jsxs(oe,{onClick:h,sx:{...l&&{bgcolor:"secondary.light",color:"black","& :hover":{color:"text.primary"}},"& :hover":{color:"text.primary"},width:1,py:1,gap:1},children:[s.jsx(Ds,{sx:{ml:2,m:0},children:s.jsx(y,{sx:{position:"relative"},children:s.jsx(Z,{sx:c=>({width:32,height:32,m:0,backgroundColor:c.palette.primary.main,"& :hover":{color:"white"}}),children:a!=null&&a.isVirtual?s.jsx($,{sx:{width:20,height:20,color:"white"}}):s.jsx(Zs,{sx:{width:16,height:16,color:"white"}})})})}),t&&s.jsx(s.Fragment,{children:s.jsx(g,{sx:{width:1},children:s.jsx(C,{noWrap:!0,variant:"subtitle2",children:a==null?void 0:a.name})})})]})})})};Q.propTypes={terminal:u.shape({alias:u.any,id:u.any,isVirtual:u.any,name:u.any})};const Y=({terminalsQuery:a,sx:t,...e})=>{const{isLoading:r,data:o,error:l,isError:h,refetch:c}=a,x=f(i=>i.isOpenList),n=f(i=>i.terminals);return h&&x&&!o&&!r?s.jsx(os,{errorMessage:l,handleButton:c}):o&&x&&(o==null?void 0:o.length)===0&&!r?s.jsx(Ss,{pt:2.5,message:"No hay terminales activas para este comercio"}):s.jsx(is,{disablePadding:!0,sx:t,...e,children:(r?[...Array(12)]:n).map((i,p)=>i!=null&&i.id?s.jsx(Q,{terminal:i},i==null?void 0:i.id):s.jsx(Ps,{isOpenSideBar:x},p))})};Y.propTypes={sx:u.any,terminalsQuery:u.shape({data:u.array,error:u.any,isError:u.any,isLoading:u.any,refetch:u.any})};const q=({commerceTerminals:a=[]})=>{const t=f(j=>j.isOpenList),e=f(j=>j.setOpenList),r=f(j=>j.setTerminals),o=f(j=>j.terminals),l=f(j=>j.isCollapse),[h,c]=d.useState(""),[x,n]=d.useState(!1),i=async j=>{try{const{value:b}=j.target;if(c(b),b){const K=(a==null?void 0:a.filter(S=>{var _;return(S==null?void 0:S.name)&&((_=S==null?void 0:S.name)==null?void 0:_.toLowerCase().indexOf(b.toLowerCase()))!==-1}))||[];r(K)}else r(a)}catch(b){console.error(b)}},p=()=>{t&&(c(""),r(a)),e(!t)},L=()=>{n(!0)},G=()=>{n(!1)};return d.useEffect(()=>{a&&r(a)},[a]),d.useEffect(()=>{if(!t)return n(!1)},[t]),s.jsxs(s.Fragment,{children:[s.jsx(y,{sx:{p:2,px:0},children:s.jsxs(g,{direction:"row",justifyContent:t?"flex-end":"center",alignItems:"center",spacing:2,children:[!l&&s.jsx(Ls,{onClickAway:G,children:s.jsx(ks,{fullWidth:!0,size:"small",value:h,onFocus:L,onChange:i,placeholder:"Buscar Terminales...",InputProps:{startAdornment:s.jsx(Fs,{position:"start",children:s.jsx(zs,{sx:{color:"text.disabled",width:20,height:20}})})}})}),s.jsx(g,{direction:"row",alignItems:"center",justifyContent:"center",children:s.jsx(Hs,{size:"small",sx:{...!t&&{transform:"rotate(180deg)"}},onClick:p,children:cs})})]})}),(o==null?void 0:o.length)===0&&(a==null?void 0:a.length)>0&&s.jsx(ls,{sx:{p:1,display:"flex",flexDirection:"column",alignItems:"center"},searchQuery:h})]})};q.propTypes={commerceTerminals:u.array};const ie=()=>{const a=f(i=>i.setOpenList),t=f(i=>i.setCollapse),e=f(i=>i.isOpenList),r=Ks(),o=ds(),l=hs("up","md"),h=l&&!e,c=()=>{a(!1)},x=()=>{a(!e)};d.useEffect(()=>{l&&a(!0)},[l]),d.useEffect(()=>{t(h)},[h]);const n=s.jsx(k,{sx:{height:.98},children:s.jsxs(g,{px:e?1:0,children:[s.jsx(q,{commerceTerminals:(r==null?void 0:r.data)||[]}),s.jsx(Y,{terminalsQuery:r})]})});return s.jsxs(s.Fragment,{children:[!l&&!e&&s.jsx(Rs,{onClick:x,children:s.jsx($,{sx:{width:20,height:20}})}),l?s.jsx(D,{open:e,variant:"persistent",PaperProps:{sx:{height:1,borderRightStyle:"none",bgcolor:"background.default"}},sx:{height:1,width:O,transition:o.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",backgroundColor:"transparent!important",width:O},...h&&{width:P,"& .MuiDrawer-paper":{width:P,backgroundColor:"transparent!important",position:"static",transform:"none !important",visibility:"visible !important"}}},children:n}):s.jsx(D,{ModalProps:{keepMounted:!0},open:e,onClose:c,sx:{height:1,"& .MuiDrawer-paper":{width:O,p:2}},children:n})]})},ce=()=>s.jsx(ps,{title:"Lista de Terminales Punto de Venta",children:s.jsx(Cs,{children:s.jsxs(y,{display:"flex",overflow:"hidden",sx:{height:"100vH",maxHeight:"100%",flexDirection:"column"},children:[s.jsx(y,{px:1,children:s.jsx(bs,{name:"Terminales Punto de Venta",links:[{name:"Inicio",href:us.root},{name:"Administración",href:xs.terminals},{name:fs.terminals.name}]})}),s.jsxs(y,{display:"flex",overflow:"hidden",flex:1,children:[s.jsx(ie,{}),s.jsx(ne,{})]})]})})}),Le=Object.freeze(Object.defineProperty({__proto__:null,default:ce},Symbol.toStringTag,{value:"Module"}));export{Ns as L,Le as P,U as T,Ee as c,Ie as g,w as u};
