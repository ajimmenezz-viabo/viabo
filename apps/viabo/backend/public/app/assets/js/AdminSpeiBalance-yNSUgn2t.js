import{aH as E,aI as P,aJ as z,r as o,e as O,U as H,P as y,i as e,B as x,S as c,T as i,aK as N,s as M,a as f,bg as B,A as L,br as V,dX as k,I as W,u as _,y as $,bm as g,by as K,bz as U}from"./vendor-B39b6gT1.js";import{V as G,g as Y,C as I,u,B as D}from"./DashboardViaboSpeiByProfile-DwKkdrW4.js";import{g as q,b as J,F as Q}from"./index-Kl2QvVyT.js";import"./viabo-spei-paths-D6KJcfc8.js";import{b as X}from"./TextMaxLine-BvJpBV6_.js";import{a as Z,b as ee}from"./index-CreHyv2Z.js";import{f as te}from"./formatNumber-Byfz8vD2.js";import"./formatTime-DnNoLFDr.js";import"./filterSearch-NGUmCbyG.js";import"./fade-CViozI82.js";import"./transition-anLY3gj9.js";import"./usePagination-Bk1liHqP.js";import"./spei-third-accounts-store-CxAZWAjk.js";import"./matchTypes-E5vQDj-t.js";import"./HeaderPage-CoeRaeoE.js";import"./formik.esm-CRn2DIxC.js";import"./UploadSingleFile-BV6pleIy.js";import"./iconBase-Bx2LR7oe.js";const se=(t,r,s={})=>{if(!t||!r)return null;const a=E(P(t),"yyyy-MM-dd"),h=E(z(r),"yyyy-MM-dd"),[m,d]=o.useState(null),n=O({queryKey:[G.BALANCE_RESUME],queryFn:({signal:l})=>Y(a,h),refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...s});return o.useEffect(()=>{if(n!=null&&n.isError){const l=q(n.error,"No se puede obtener el resumen del balance de la cuenta stp. Intente nuevamente o reporte a sistemas");d(l),H.error(l,{type:J(n.error)})}},[n.isError,n.error]),{...n,error:m||null}},b=({title:t,value:r,transactions:s,icon:a})=>e.jsxs(x,{display:"flex",component:I,variant:"outlined",flexDirection:"column",p:3,children:[e.jsxs(c,{justifyContent:"space-between",flexDirection:"row",children:[e.jsx(i,{variant:"subtitle1",color:"text.secondary",children:t}),a]}),e.jsx(i,{sx:{typography:"h4"},children:r}),e.jsxs(i,{sx:{typography:"subtitle2",fontWeight:500},children:[s," Transacciones"]})]});b.propTypes={icon:y.any,title:y.any,transactions:y.any,value:y.any};const re=()=>{const t=u(p=>p.setBalanceFilter),r=u(p=>p.setBalanceResume),s=u(p=>p.balanceFilter),a=new Date,h=o.useMemo(()=>s!=null&&s.startDate?new Date(s==null?void 0:s.startDate):N(a,{days:30}),[s==null?void 0:s.startDate]),m=o.useMemo(()=>s!=null&&s.endDate?new Date(s==null?void 0:s.endDate):a,[s==null?void 0:s.endDate]),[d,n]=o.useState(h),[l,R]=o.useState(m),{data:j,refetch:A,isError:S}=se(d,l);o.useEffect(()=>{d&&l&&(A(),t({startDate:d,endDate:l}))},[d,l]),o.useEffect(()=>{j&&r(j)},[j]),o.useEffect(()=>{S&&r(null)},[S]);const F=p=>{const{startDate:v,endDate:w}=p;w!==null&&v!==null&&(R(w),n(v))};return e.jsx(X,{startDate:d,endDate:l,onSubmit:F})},T=250,ae=M("div")(({theme:t})=>({position:"relative",height:T,borderRadius:Number(t.shape.borderRadius)*2})),ne=M("div")(({theme:t})=>({position:"relative",height:T-16,padding:t.spacing(3),display:"flex",flexDirection:"column",justifyContent:"space-between",background:`linear-gradient(to right, ${f(t.palette.mode==="dark"?t.palette.secondary.dark:t.palette.primary.lighter,.7)}, 
  ${t.palette.mode==="light"?f(t.palette.info.light,.7):"rgba(22, 28, 36, 0.4)"}
  )`,backgroundRepeat:"no-repeat",backdropFilter:"blur(40px)",borderRadius:Number(t.shape.borderRadius)*2,boxShadow:t.customShadows.card})),C={mx:"auto",width:"calc(100% - 16px)",borderRadius:2,position:"absolute",height:200,zIndex:8,bottom:8,left:0,right:0,bgcolor:"grey.500",backdropFilter:"blur(40px)",opacity:.32},oe=()=>{const t=u(a=>a.stpAccount),[r,s]=o.useState(!1);return e.jsxs(ae,{children:[e.jsx(x,{sx:{position:"relative",zIndex:9},children:e.jsxs(ne,{children:[e.jsx(B,{sx:{p:0,pb:3},avatar:e.jsx(L,{sx:{backgroundColor:a=>a.palette.background.default,width:35,height:35},children:e.jsx(V,{color:"primary",sx:{width:25,height:25}})}),title:e.jsx(i,{sx:{typography:"subtitle1"},children:"TOP SYSTEM"}),subheader:"Administrador STP"}),e.jsx(k,{sx:{p:0,display:"flex"},children:e.jsxs(c,{gap:3,flex:1,children:[e.jsxs(c,{gap:0,children:[e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(i,{sx:{typography:"h6"},children:r?t==null?void 0:t.accountNumber:t==null?void 0:t.accountNumberHidden}),e.jsx(x,{children:e.jsx(W,{size:"small",color:"inherit",onClick:()=>s(!r),sx:{opacity:.7},children:r?e.jsx(Z,{}):e.jsx(ee,{})})})]}),e.jsx(i,{color:"primary.main",sx:{typography:"subtitle2"},children:"Cuenta Origen | STP"})]}),e.jsxs(c,{gap:0,justifyContent:"space-between",flexDirection:"row",children:[e.jsxs(c,{flex:1,children:[e.jsx(i,{sx:{typography:"h6"},children:te(t==null?void 0:t.balance)}),e.jsx(i,{color:"primary.main",sx:{typography:"subtitle2"},children:"Balance Total"})]}),e.jsx(c,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",justifyContent:"center",children:[e.jsx(Q,{sx:{width:50}}),e.jsx(i,{variant:"h5",color:"primary.main",children:"|"}),e.jsx(i,{variant:"h6",color:"primary.main",children:"spei"})]})})]})]})})]})}),e.jsx(x,{sx:{...C}}),e.jsx(x,{sx:{...C,opacity:.16,bottom:0,zIndex:7,width:"calc(100% - 40px)"}})]})},ie=()=>{const{setOpenSpeiOut:t,setOpenTransactions:r}=u(),s=_();return e.jsxs(x,{display:"flex",component:I,variant:"outlined",flexDirection:"column",children:[e.jsx(B,{sx:{p:2},title:"Mis cuentas"}),e.jsx($,{sx:{borderColor:f("#CFDBD5",.7)}}),e.jsxs(k,{sx:{p:4,display:"flex",flexDirection:"column",gap:2},children:[e.jsx(x,{mb:2,children:e.jsx(oe,{})}),e.jsx(D,{size:"large",variant:"outlined",sx:{color:"text.primary"},onClick:()=>t(!0),startIcon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",stroke:s.palette.text.primary,strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M12 19h-6a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v4.5"}),e.jsx("path",{d:"M3 10h18"}),e.jsx("path",{d:"M16 19h6"}),e.jsx("path",{d:"M19 16l3 3l-3 3"}),e.jsx("path",{d:"M7.005 15h.005"}),e.jsx("path",{d:"M11 15h2"})]}),children:"SPEI OUT"}),e.jsx(D,{size:"large",variant:"outlined",sx:{color:"text.primary"},onClick:()=>r(!0),startIcon:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:s.palette.text.primary,fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[e.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),e.jsx("path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2"}),e.jsx("path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z"}),e.jsx("path",{d:"M9 17v-5"}),e.jsx("path",{d:"M12 17v-1"}),e.jsx("path",{d:"M15 17v-3"})]}),children:"Detalles Movimientos"})]})]})},Ce=()=>{var r,s,a,h;const t=u(m=>m.balanceResume);return e.jsxs(c,{gap:3,children:[e.jsx(re,{}),e.jsxs(g,{container:!0,spacing:3,children:[e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(b,{title:"Dep√≥sitos",value:((r=t==null?void 0:t.deposits)==null?void 0:r.currency)||"$0.00",transactions:((s=t==null?void 0:t.deposits)==null?void 0:s.count)||0,icon:e.jsx(K,{color:"success"})})}),e.jsx(g,{item:!0,xs:12,md:6,children:e.jsx(b,{title:"Transferencias",value:((a=t==null?void 0:t.transfers)==null?void 0:a.currency)||"$0.00",transactions:((h=t==null?void 0:t.transfers)==null?void 0:h.count)||0,icon:e.jsx(U,{color:"error"})})})]}),e.jsx(ie,{})]})};export{Ce as default};
//# sourceMappingURL=AdminSpeiBalance-yNSUgn2t.js.map
