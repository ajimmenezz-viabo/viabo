import{k,a as j,Q as h,g as V,b,r as E,j as n,S as C,E as A,B as I,U as M,O as e}from"./index-31hWdJRI.js";import{u as T}from"./build-gnF2i0Ts.js";import{c as B,M as O}from"./build-5zzn2hmE.js";import{g as P}from"./build-Lnhcivis.js";import{F as z,a as F}from"./build-DdoBiVJn.js";import{i as S}from"./build-sfA6zjcU.js";import"./build-zI298dqM.js";import"./build-cNcI_6aC.js";import"./build-nC7ityK5.js";import"./build-A0pkRIS4.js";import"./build-v_AWlcrf.js";import"./build-I_rlT2xt.js";import"./build-nZbDWYvm.js";import"./build-bWikoT0N.js";import"./build-JN0lDpws.js";import"./build-7KkBoi30.js";import"./build-BqYt--9V.js";import"./build-Rh4qk5tL.js";import"./build-j8prt7ez.js";import"./build-d41d2PYV.js";import"./build-5CuV96L_.js";import"./build-qExbJD52.js";import"./build-zH8OCAbq.js";import"./build-zEF68lUW.js";import"./build-o4hv-yMn.js";import"./build-Uc7vb3zK.js";const N=(a={})=>{const f=k(),s=j(B,a);return{...s,mutate:async(i,t)=>{const{onSuccess:r,onError:m,mutationOptions:u}=t;try{await h.promise(s.mutateAsync(i,u),{pending:"Actualizando Servicio ...",success:{render({data:l}){return f.invalidateQueries([O.COMMERCE_LIST]),S(r)&&r(l),"Se actualizo el servicio del comercio con éxito"}}})}catch(l){const d=V(l,"No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas");S(m)&&m(d),h.error(d,{type:b(l)})}}}},y=[{name:"VIABO CARD",type:"2",formikValue:"viaboCard"},{name:"VIABO PAY",type:"1",formikValue:"viaboPay"},{name:"NUBE",type:"3",formikValue:"cloud"}],w=({commerce:a})=>{var g;const{mutate:f,isLoading:s}=N(),[x,i]=E.useState(null),t=(g=a==null?void 0:a.services)==null?void 0:g.catalog,r=E.useMemo(()=>y==null?void 0:y.map(o=>{const p=P(o==null?void 0:o.name);return{...o,logo:p==null?void 0:p.component}}),[y]),m=T({initialValues:{viaboPay:(t==null?void 0:t.some(o=>(o==null?void 0:o.type)==="1"))||!1,viaboCard:(t==null?void 0:t.some(o=>(o==null?void 0:o.type)==="2"))||!1,cloud:(t==null?void 0:t.some(o=>(o==null?void 0:o.type)==="3"))||!1},enableReinitialize:!0}),{values:u,setFieldValue:l}=m,d=o=>p=>{i(o==null?void 0:o.type),f({commerceId:a==null?void 0:a.id,serviceType:o==null?void 0:o.type},{onSuccess:()=>{l(o==null?void 0:o.formikValue,!u[o==null?void 0:o.formikValue]),i(null)},onError:()=>{i(null)}})};return n.jsx(z,{formik:m,children:n.jsx(C,{spacing:2,p:5,divider:n.jsx(A,{orientation:"horizontal",flexItem:!0,sx:{borderStyle:"dashed"}}),children:r==null?void 0:r.map(o=>{const p=o.logo;return n.jsxs(C,{justifyContent:"space-between",flexDirection:"row",alignItems:"center",children:[p&&n.jsx(I,{py:1,children:n.jsx(p,{sx:{width:35,height:35}})}),x===(o==null?void 0:o.type)?n.jsx(M,{size:30,containerProps:{display:"flex",ml:1}}):n.jsx(F,{disabled:s,size:"md",color:u[o==null?void 0:o.formikValue]?"success":"error",checked:!!u[o==null?void 0:o.formikValue]||!1,inputProps:{"aria-label":"controlled"},onChange:d(o)})]},o==null?void 0:o.name)})})})};w.propTypes={commerce:e.shape({id:e.any,services:e.shape({catalog:e.array})})};export{w as default};
