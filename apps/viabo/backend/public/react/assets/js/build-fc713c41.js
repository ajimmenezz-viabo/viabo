import{_ as X,aN as K,r as i,j as e,T as n,B as Q,S as x,m as M,aa as v,ab as g,D as y}from"./index-23408dd2.js";import{C as Y}from"./build-5f0084a1.js";import{f as L}from"./build-a1ec3a2c.js";import{u as O}from"./build-eb506f09.js";import{a as q}from"./build-c8d964db.js";import"./build-86cd2417.js";import{L as H}from"./build-99db375a.js";import{T as J,a as P}from"./build-94846bb6.js";import"./build-26fbb83b.js";import"./build-dedb6d40.js";import"./build-74a1b13a.js";import"./build-c875c593.js";import"./build-2f111781.js";import"./build-f2ae8137.js";import"./build-bfb17aff.js";import"./build-4ba3cb14.js";import"./build-9b1f8f5b.js";import"./build-a63161e6.js";import"./build-0d19139b.js";import"./build-84a54290.js";import"./build-d00cf9da.js";import"./build-0354e1de.js";import"./build-cb395694.js";import"./build-9cdd5450.js";import"./build-70633a7e.js";import"./build-980fd41b.js";import"./build-54e0e54c.js";import"./build-2876f46a.js";import"./build-67a8e4e9.js";import"./build-e79ac7d8.js";import"./build-12c2fd0e.js";import"./build-79b895ac.js";import"./build-72154ec5.js";import"./build-c2dda577.js";import"./build-84b07bd3.js";import"./build-83d17a75.js";import"./build-899176f2.js";import"./build-1d5bebd4.js";import"./build-bb977102.js";import"./build-68d1d76d.js";import"./build-bee6630b.js";import"./build-6966c02a.js";import"./build-36c692ea.js";import"./build-53b28d89.js";import"./build-1fe99d79.js";import"./build-7ab93eab.js";const S=v(i.lazy(()=>g(()=>import("./build-e1753367.js"),["assets/js/build-e1753367.js","assets/js/index-23408dd2.js","assets/css/build-f63bc8fe.css","assets/js/build-0d19139b.js","assets/js/build-84a54290.js","assets/js/build-eb506f09.js","assets/js/build-5f0084a1.js","assets/js/build-26fbb83b.js","assets/js/build-dedb6d40.js","assets/js/build-a1ec3a2c.js","assets/js/build-c875c593.js","assets/js/build-74a1b13a.js","assets/js/build-2f111781.js","assets/js/build-f2ae8137.js","assets/js/build-bfb17aff.js","assets/js/build-4ba3cb14.js","assets/js/build-9b1f8f5b.js","assets/js/build-a63161e6.js","assets/js/build-99db375a.js","assets/js/build-2876f46a.js","assets/js/build-9cdd5450.js","assets/js/build-70633a7e.js","assets/js/build-68d1d76d.js","assets/js/build-bee6630b.js","assets/js/build-d00cf9da.js","assets/js/build-0354e1de.js","assets/js/build-cb395694.js","assets/js/build-980fd41b.js","assets/js/build-54e0e54c.js","assets/js/build-67a8e4e9.js","assets/js/build-e79ac7d8.js","assets/js/build-12c2fd0e.js","assets/js/build-79b895ac.js","assets/js/build-72154ec5.js","assets/js/build-c2dda577.js","assets/js/build-84b07bd3.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-1d5bebd4.js","assets/js/build-bb977102.js","assets/js/build-6966c02a.js","assets/js/build-c8d964db.js","assets/js/build-7ab93eab.js","assets/js/build-86cd2417.js","assets/js/build-36c692ea.js","assets/js/build-53b28d89.js","assets/js/build-1fe99d79.js","assets/js/build-ef517207.js"]))),W=v(i.lazy(()=>g(()=>import("./build-5e630f2e.js"),["assets/js/build-5e630f2e.js","assets/js/index-23408dd2.js","assets/css/build-f63bc8fe.css","assets/js/build-26fbb83b.js","assets/js/build-a1ec3a2c.js","assets/js/build-c875c593.js","assets/js/build-5f0084a1.js","assets/js/build-dedb6d40.js","assets/js/build-74a1b13a.js","assets/js/build-2f111781.js","assets/js/build-f2ae8137.js","assets/js/build-bfb17aff.js","assets/js/build-4ba3cb14.js","assets/js/build-0354e1de.js","assets/js/build-cb395694.js","assets/js/build-9cdd5450.js","assets/js/build-70633a7e.js","assets/js/build-980fd41b.js","assets/js/build-54e0e54c.js","assets/js/build-2876f46a.js","assets/js/build-316bee8e.js"]))),Z=v(i.lazy(()=>g(()=>import("./build-bc262c38.js"),["assets/js/build-bc262c38.js","assets/js/index-23408dd2.js","assets/css/build-f63bc8fe.css","assets/js/build-0d19139b.js","assets/js/build-84a54290.js","assets/js/build-99db375a.js","assets/js/build-2876f46a.js","assets/js/build-9cdd5450.js","assets/js/build-70633a7e.js","assets/js/build-c875c593.js","assets/js/build-68d1d76d.js","assets/js/build-bee6630b.js","assets/js/build-a1ec3a2c.js","assets/js/build-f2ae8137.js","assets/js/build-53b28d89.js","assets/js/build-26fbb83b.js","assets/js/build-2f03ce3e.js","assets/js/build-ef517207.js"])));function $({open:A,setOpen:C,isFundingCard:o}){var w;const f=X(),t=O(s=>s.card),r=O(s=>s.mainCard),a=K([Y.CARDS_COMMERCE_LIST,t==null?void 0:t.cardTypeId])||[],[u,l]=i.useState(0),h=i.useMemo(()=>o?r==null?void 0:r.balance:t==null?void 0:t.balance,[r==null?void 0:r.balance,t==null?void 0:t.balance]),[m,z]=i.useState("1"),[d,b]=i.useState(!1),[G,E]=i.useState(null),[D,R]=i.useState(!1),p=i.useMemo(()=>(parseFloat(h)-u).toFixed(2)<0,[u,h]),T=i.useMemo(()=>{var s;return((s=f==null?void 0:f.profile)==null?void 0:s.toLowerCase())==="representante legal"},[f]),_=i.useMemo(()=>a==null?void 0:a.filter(s=>s.id!==(t==null?void 0:t.id)),[a,t==null?void 0:t.id]),B=()=>{C(!1),l(0),b(!1),E(null),R(!1)},N=(s,c)=>{c&&z(c)};i.useEffect(()=>{l(0)},[m]);const j=s=>{const c=m==="2";let I=o?r==null?void 0:r.id:t==null?void 0:t.id;c&&(I=t==null?void 0:t.id),E({cardOriginId:I,isGlobal:c,transactions:c?s:(s==null?void 0:s.transactions)||[],balance:h,currentBalance:u}),b(!0)},V=()=>{b(!1)},k=e.jsx(e.Fragment,{children:o?e.jsx(n,{variant:"h6",children:"Fondear"}):e.jsxs(Q,{children:[e.jsxs(x,{spacing:1,alignItems:"center",direction:"row",mb:.5,children:[e.jsx(n,{variant:"subtitle2",children:"Origen: "}),e.jsxs(n,{variant:"subtitle2",children:[t==null?void 0:t.cardNumberMoreDigits," "]})]}),e.jsx(H,{color:"info",children:(w=t==null?void 0:t.assignUser)==null?void 0:w.name})]})}),U=e.jsxs(e.Fragment,{children:[!o&&T&&e.jsx(x,{alignItems:"flex-end",sx:{py:1,px:3},children:e.jsxs(J,{size:"small",color:"primary",value:m,exclusive:!0,onChange:N,"aria-label":"Platform",disabled:D,children:[e.jsx(P,{value:"1",children:"Tarjetas"}),e.jsx(P,{value:"2",children:"Global"})]})}),e.jsxs(x,{flexDirection:"column",alignItems:"center",justifyContent:"space-between",spacing:0,px:3,pt:o?2:1,children:[e.jsx(n,{variant:"subtitle1",children:"Saldo"}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(n,{variant:"h3",color:"success.main",children:L(h)}),e.jsx(n,{variant:"caption",color:"success.main",children:"MXN"})]}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(n,{variant:"subtitle1",color:"error",children:["- ",L(u)]}),e.jsx(n,{variant:"caption",color:"error",children:"MXN"})]}),p&&e.jsx(n,{variant:"caption",color:"warning.main",textAlign:"center",children:"Saldo insuficiente para realizar la(s) operacion(es)"})]}),o&&e.jsx(S,{cards:o?a:_,setCurrentBalance:l,insufficient:p,isBinCard:o,onSuccess:j}),!o&&T&&e.jsxs(e.Fragment,{children:[m==="1"&&e.jsx(S,{cards:o?a:_,setCurrentBalance:l,insufficient:p,isBinCard:o,onSuccess:j}),m==="2"&&e.jsx(Z,{mainCard:r,setCurrentBalance:l,insufficient:p,onSuccess:j})]}),!o&&!T&&e.jsx(S,{cards:o?a:_,setCurrentBalance:l,insufficient:p,isBinCard:o,onSuccess:j})]});return e.jsxs(q,{open:A,handleClose:B,titleElement:k,children:[e.jsx(M.div,{initial:{opacity:1},animate:{opacity:d?0:1},transition:{duration:.5},style:{display:d?"none":"flex",flex:1,overflow:"hidden",flexDirection:"column"},children:U}),e.jsx(M.div,{initial:{opacity:0},animate:{opacity:d?1:0},transition:{duration:.5},style:{display:d?"flex":"none",flexDirection:"column",flex:1,overflow:"hidden"},children:e.jsx(W,{data:G,onBack:V,setTransactionLoading:R,transactionLoading:D,onClose:B})})]})}$.propTypes={isFundingCard:y.bool,open:y.bool,setOpen:y.func};export{$ as default};
