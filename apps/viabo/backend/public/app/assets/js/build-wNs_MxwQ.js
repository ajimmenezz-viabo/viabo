import{an as c,am as o}from"./index-EHCGdQqa.js";import{g as d}from"./build-Wa6kpvgH.js";import{a as m,b as l}from"./build-3xVnG2m1.js";import{f as C}from"./build-G-VE9h_k.js";import{C as f}from"./build-jVKbR__F.js";const F=(a,t)=>{var r,s;const e=(r=a==null?void 0:a.processorTypes)==null?void 0:r.find(i=>i==="1"),n=(s=a==null?void 0:a.processorTypes)==null?void 0:s.find(i=>i==="2");return{cardId:t==null?void 0:t.id,amount:a==null?void 0:a.amount.toString(),spei:e?t==null?void 0:t.SPEI:"",payCash:n?"1":""}},g=a=>{const t=d(a==null?void 0:a.ciphertext,a==null?void 0:a.iv);if(t)return{id:t==null?void 0:t.id,reference:t==null?void 0:t.referenceNumber};throw new Error("Algo fallo al obtener la informaciÃ³n")},u=a=>{const t=d(a==null?void 0:a.ciphertext,a==null?void 0:a.iv);return(t==null?void 0:t.map(n=>{var r;return{id:n==null?void 0:n.id,name:(r=n==null?void 0:n.name)==null?void 0:r.toUpperCase()}}))||[]},E={card:null,isMainCardSelected:!1,cardTypeSelected:null,mainCard:null,selectedCards:[],openFundingOrder:!1,fundingCard:null},S=(a,t)=>({...E,setCard:e=>{const{card:n}=t();a(r=>({card:{...n,...e}}),!1,"SET_CARD")},resetCard:()=>{a(e=>({card:null}),!1,"RESET_CARD")},setSelectedCards:e=>{t(),a(n=>({selectedCards:e}),!1,"SET_SELECTED_CARDS")},addInfoCard:e=>{const{card:n}=t();a(r=>({card:{...n,...e}}),!1,"SET_INFO_CARD")},setMainCard:e=>{a(n=>({mainCard:e}),!1,"SET_MAIN_CARD")},setSelectedMainCard:e=>{a(n=>({isMainCardSelected:e}),!1,"SET_IS_MAIN_CARD_SELECTED")},setOpenFundingOrder:e=>{a(n=>({openFundingOrder:e}),!1,"SET_OPEN_FUNDING_ORDER")},setFundingCard:e=>{a(n=>({fundingCard:e}),!1,"SET_FUNDING_CARD")},resetFundingOrder:()=>{a(e=>({fundingCard:null,openFundingOrder:!1}),!1,"RESET_FUNDING_ORDER")},setCardTypeSelected:e=>{a(n=>({cardTypeSelected:e}),!1,"SET_CARD_TYPE_SELECTED")}}),O=c(S),A=a=>{const t=d(a==null?void 0:a.ciphertext,a==null?void 0:a.iv),e=parseFloat((t==null?void 0:t.balance)===""?"0":t==null?void 0:t.balance.replace(/,/g,""));if(t)return{id:t==null?void 0:t.cardId,SPEI:t==null?void 0:t.spei,balance:e,balanceFormatted:C(e),cardNumberHidden:"GLOBAL"};throw new Error("Algo fallo al obtenerla informacion")},b=async()=>{const{data:a}=await o.get("/api/payment-processors/of/commerce");return u(a)},h=async a=>{const{data:t}=await o.get(`/api/enabled-cards/commerce?paymentProcessorId=${a}`);return m(t)},R=async(a,t)=>{const{data:e}=await o.get(`/api/card/information/${a}`,{signal:t});return l(e)},N=async a=>(await o.put(`/api/card/${a==null?void 0:a.id}/block/${a!=null&&a.cardON?"unblocked":"blocked"}`),a),P=async a=>(await o.post("/api/card/transactions",a==null?void 0:a.data),a),M=async(a,t,e,n)=>{const r=new URL("/api/card/movements",window.location.origin);r.searchParams.set("cardId",a),r.searchParams.set("startDate",t),r.searchParams.set("endDate",e);const{data:s}=await o.get(r.href,{timeout:3e4,signal:n});return f(s)},L=async(a,t)=>{const{data:e}=await o.get(`/api/main-card/information?paymentProcessorId=${a}`,{signal:t});return A(e)},U=async a=>{const{data:t}=await o.post("/api/funding-order/new",a);return g(t)},x=async a=>{const{data:t}=await o.post("/api/funding-order/send",a);return t};export{F as C,M as a,b,h as c,L as d,N as e,U as f,R as g,x as s,P as t,O as u};
