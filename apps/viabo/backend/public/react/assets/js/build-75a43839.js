import{k as ss,j as s,B as S,t as M,au as V,r as f,_ as m,ah as Z,S as p,O as W,L as B,F as L,aw as H,a as I,b as $,g as U,c as G,aA as es,aB as ts,aC as as,Q as rs,o as ns,aa as P,ac as Q,T as b,a6 as R,I as os,aH as is,i as cs,Z as ls,a8 as hs,P as j,a5 as ds,ae as ps,ag as xs,ai as us,aO as fs,l as ys,aj as k,f as gs,ak as js,al as Ss,am as bs}from"./index-23ec28e1.js";import{A as Cs}from"./build-a7defbcd.js";import{n as O,m as Ts,C as ws,b as Es,E as Ls,a as Ms,H as Is}from"./build-a67802f5.js";import{f as A,A as Os,L as _s}from"./build-8ab16f05.js";import{b as As,A as vs,a as Ps,C as Ds}from"./build-bc2c5e34.js";import{D as Bs}from"./build-8fd84771.js";import{M as Hs}from"./build-60193303.js";import{V as Rs}from"./build-88fbe48e.js";import{C as ks}from"./build-73909af0.js";import{L as Fs,S as zs,a as Ns,b as Vs,c as _,d as F}from"./build-25569222.js";import{I as ms}from"./build-c616c612.js";import"./build-5f2543fb.js";import{I as Zs}from"./build-79fb9ca8.js";import{S as Ws}from"./build-addf1bbe.js";function $s({sx:e,color:t}){return ss(),s.jsx(S,{sx:{width:50,height:50,display:"flex",alignItems:"center",...e},children:s.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:800,height:800,fill:"none",viewBox:"0 -9 58 58",children:[s.jsx("rect",{width:57,height:39,x:.5,y:.5,fill:"#006FCF",stroke:"#F3F3F3",rx:3.5}),s.jsx("path",{fill:"#fff",fillRule:"evenodd",d:"M11.863 28.894v-8.235h9.324l1 1.22 1.034-1.22h33.842v7.667s-.885.56-1.908.568h-18.74l-1.128-1.298v1.298h-3.695v-2.216s-.505.31-1.597.31h-1.258v1.906h-5.595l-1-1.246-1.014 1.246h-9.265ZM1 14.453l2.098-4.584h3.628l1.19 2.568V9.869h4.51l.709 1.856.687-1.856h20.244v.933s1.064-.933 2.813-.933l6.568.022 1.17 2.534V9.869h3.774l1.039 1.456V9.869h3.809v8.235H49.43l-.995-1.46v1.46H42.89l-.558-1.298h-1.49l-.549 1.298h-3.76c-1.505 0-2.467-.914-2.467-.914v.914h-5.67l-1.125-1.298v1.298H6.188l-.557-1.298H4.145l-.553 1.298H1v-3.651Zm.01 2.597 2.83-6.166h2.145l2.827 6.166H6.929l-.519-1.235H3.375l-.522 1.235H1.01Zm4.802-2.573-.925-2.158-.928 2.158h1.853Zm3.195 2.572v-6.166l2.617.01 1.523 3.975 1.486-3.985h2.597v6.166h-1.645v-4.543l-1.743 4.543H12.4l-1.749-4.543v4.543H9.007Zm9.348 0v-6.166h5.367v1.38h-3.705v1.054h3.618v1.298h-3.618v1.095h3.705v1.339h-5.367Zm6.319.001v-6.166h3.66c1.213 0 2.3.703 2.3 2 0 1.11-.917 1.824-1.805 1.894l2.164 2.272h-2.01l-1.972-2.19h-.692v2.19h-1.645Zm3.525-4.787h-1.88v1.299h1.904c.33 0 .755-.24.755-.65 0-.318-.328-.649-.78-.649Zm4.785 4.786h-1.68v-6.166h1.68v6.166Zm3.981 0h-.362c-1.754 0-2.819-1.295-2.819-3.057 0-1.807 1.053-3.109 3.268-3.109h1.818v1.46h-1.884c-.9 0-1.535.658-1.535 1.664 0 1.194.727 1.695 1.774 1.695h.433l-.693 1.347Zm.75.001 2.83-6.166h2.144l2.827 6.166h-1.883l-.52-1.235H40.08l-.522 1.235h-1.842Zm4.801-2.573-.925-2.158-.928 2.158h1.853Zm3.192 2.572v-6.166h2.09l2.67 3.874v-3.874h1.645v6.166H50.09l-2.737-3.975v3.975h-1.645Zm-32.72 10.79v-6.166h5.367v1.38H14.65v1.054h3.619v1.298H14.65V26.5h3.705v1.34h-5.367Zm26.297 0v-6.166h5.367v1.38h-3.705v1.054h3.601v1.298h-3.6V26.5h3.704v1.34h-5.367Zm-20.721 0 2.613-3.045-2.676-3.12h2.072l1.593 1.929 1.6-1.93h1.99l-2.64 3.083 2.618 3.083h-2.072l-1.547-1.899-1.51 1.9h-2.041Zm7.365.001v-6.166h3.633c1.49 0 2.361.9 2.361 2.074 0 1.417-1.11 2.145-2.575 2.145h-1.731v1.947h-1.688Zm3.511-4.771h-1.823v1.42h1.818c.48 0 .817-.299.817-.71 0-.438-.339-.71-.812-.71Zm3.198 4.77v-6.166h3.66c1.212 0 2.299.703 2.299 2 0 1.11-.916 1.824-1.805 1.895l2.164 2.271h-2.01l-1.971-2.19h-.693v2.19h-1.644Zm3.524-4.787h-1.88v1.299h1.904c.33 0 .755-.24.755-.65 0-.318-.328-.649-.779-.649Zm9.252 4.787v-1.338h3.291c.487 0 .698-.247.698-.518 0-.259-.21-.521-.698-.521h-1.487c-1.293 0-2.013-.738-2.013-1.847 0-.988.66-1.942 2.58-1.942h3.203l-.692 1.388h-2.77c-.53 0-.693.26-.693.509 0 .255.202.537.606.537h1.558c1.441 0 2.067.766 2.067 1.77 0 1.079-.697 1.962-2.145 1.962h-3.505Zm5.795 0v-1.338H54.5c.487 0 .698-.247.698-.518 0-.259-.21-.521-.698-.521h-1.487c-1.293 0-2.013-.738-2.013-1.847 0-.988.66-1.942 2.58-1.942h3.203l-.692 1.388h-2.77c-.53 0-.693.26-.693.509 0 .255.202.537.606.537h1.558c1.442 0 2.067.766 2.067 1.77 0 1.079-.697 1.962-2.145 1.962h-3.505Z",clipRule:"evenodd"})]})})}const Us=M(s.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),Y=M(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.46 14.45l-1.36-.62c.28-.61.41-1.24.4-1.86-.01-.63-.14-1.24-.4-1.8l1.36-.63c.35.75.53 1.56.54 2.4.01.86-.17 1.7-.54 2.51zm3.07 1.56-1.3-.74c.52-.92.78-1.98.78-3.15 0-1.19-.27-2.33-.8-3.4l1.34-.67c.64 1.28.96 2.65.96 4.07 0 1.43-.33 2.74-.98 3.89zm3.14 1.32-1.35-.66c.78-1.6 1.18-3.18 1.18-4.69 0-1.51-.4-3.07-1.18-4.64l1.34-.67c.9 1.78 1.34 3.56 1.34 5.31 0 1.74-.44 3.54-1.33 5.35z"}),"ContactlessSharp"),Gs=M(s.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"Link"),Qs=M(s.jsx("path",{d:"M17 2H7c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 4H7V4h10v2zm3 16H4c-1.1 0-2-.9-2-2v-1h20v1c0 1.1-.9 2-2 2zm-1.47-11.81C18.21 9.47 17.49 9 16.7 9H7.3c-.79 0-1.51.47-1.83 1.19L2 18h20l-3.47-7.81zM9.5 16h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5z"}),"PointOfSale"),Ys=V(f.lazy(()=>m(()=>import("./build-325534b8.js"),["assets/js/build-325534b8.js","assets/js/index-23ec28e1.js","assets/css/build-f63bc8fe.css","assets/js/build-f4b9149c.js","assets/js/build-5f2543fb.js","assets/js/build-7a57c9bd.js","assets/js/build-488f3cd2.js","assets/js/build-79fb9ca8.js","assets/js/build-23530379.js","assets/js/build-4e68fd35.js","assets/js/build-c616c612.js","assets/js/build-8ab16f05.js","assets/js/build-bee6630b.js","assets/js/build-ba4202b0.js","assets/js/build-1db7ad67.js","assets/js/build-b6087623.js","assets/js/build-bcba88f3.js","assets/js/build-73909af0.js","assets/js/build-a67802f5.js","assets/js/build-4572f792.js","assets/js/build-bc2c5e34.js","assets/js/build-a7defbcd.js","assets/js/build-8fd84771.js","assets/js/build-cd43da46.js","assets/js/build-f728c994.js","assets/js/build-ece7c255.js","assets/js/build-60193303.js","assets/js/build-88fbe48e.js","assets/js/build-25569222.js","assets/js/build-addf1bbe.js"]))),Xs=V(f.lazy(()=>m(()=>import("./build-a0e59da4.js"),["assets/js/build-a0e59da4.js","assets/js/index-23ec28e1.js","assets/css/build-f63bc8fe.css","assets/js/build-5f2543fb.js","assets/js/build-23530379.js","assets/js/build-a67802f5.js","assets/js/build-4572f792.js","assets/js/build-4e68fd35.js","assets/js/build-c616c612.js","assets/js/build-488f3cd2.js","assets/js/build-8ab16f05.js","assets/js/build-bee6630b.js","assets/js/build-ba4202b0.js","assets/js/build-60193303.js","assets/js/build-88fbe48e.js","assets/js/build-79fb9ca8.js","assets/js/build-12f241c7.js","assets/js/build-21aac1f7.js","assets/js/build-1db7ad67.js","assets/js/build-b6087623.js","assets/js/build-bd1eb26c.js","assets/js/build-bcba88f3.js","assets/js/build-73909af0.js","assets/js/build-a7defbcd.js","assets/js/build-bc2c5e34.js","assets/js/build-8fd84771.js","assets/js/build-cd43da46.js","assets/js/build-f728c994.js","assets/js/build-ece7c255.js","assets/js/build-25569222.js","assets/js/build-addf1bbe.js"]))),qs=()=>{const[e,t]=f.useState(!1),[r,o]=f.useState(!1);return s.jsxs(s.Fragment,{children:[s.jsx(S,{children:s.jsx(Z,{children:s.jsxs(p,{direction:"row",divider:s.jsx(W,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{pb:3},spacing:1,children:[s.jsx(p,{direction:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:s.jsx(B,{startIcon:s.jsx(Gs,{}),variant:"contained",color:"info",onClick:()=>t(!0),children:"Liga de Pago"})}),s.jsx(p,{direction:"row",flexWrap:"nowrap",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:s.jsx(B,{startIcon:s.jsx(Cs,{}),color:"info",variant:"contained",sx:{textWrap:"nowrap"},onClick:()=>o(!0),children:"Terminal Virtual"})})]})})}),s.jsx(Ys,{open:e,setOpen:t}),s.jsx(Xs,{open:r,setOpen:o})]})},v={LIST:"commerce-terminals",MOVEMENTS:"terminal-movements"},Ks=e=>(e==null?void 0:e.map(t=>{var r,o,i,l;return{id:t==null?void 0:t.id,commerceId:t==null?void 0:t.commerceId,terminalId:t==null?void 0:t.terminalId,terminalON:((r=t==null?void 0:t.apiData)==null?void 0:r.status)===1,country:(o=t==null?void 0:t.apiData)==null?void 0:o.country,date:{created:(i=t==null?void 0:t.apiData)==null?void 0:i.created_at,updated:(l=t==null?void 0:t.apiData)==null?void 0:l.updated_at,register:t==null?void 0:t.registerDate},isVirtual:(t==null?void 0:t.typeId)==="1",name:(t==null?void 0:t.name)!==""?t==null?void 0:t.name.toString().toUpperCase():`TERMINAL-${t==null?void 0:t.terminalId}`,active:(t==null?void 0:t.active)==="1",balanceFormatted:A("0")}}))||[],Js=e=>{var i,l,h,c;const t=((i=e==null?void 0:e.movements)==null?void 0:i.map(a=>{const d=parseFloat((a==null?void 0:a.amount)||"0"),n=a!=null&&a.transaction_date?L(O(a==null?void 0:a.transaction_date),"dd MMM yyyy",{locale:H}):"",y=a!=null&&a.transaction_date?L(O(a==null?void 0:a.transaction_date),"p"):"";return{id:a==null?void 0:a.id,terminalName:a==null?void 0:a.terminal_name,amount:d,amountFormat:A(d),approved:a==null?void 0:a.approved,cardType:a==null?void 0:a.card_brand,cardNumber:a==null?void 0:a.card_number,cardBank:a==null?void 0:a.issuer,transactionDate:{fullDate:L(O(a==null?void 0:a.transaction_date),"dd MMM yyyy HH:mm",{locale:H}),date:n,time:y},description:`${(a==null?void 0:a.issuer)===""?a==null?void 0:a.card_brand:a==null?void 0:a.issuer}-${a==null?void 0:a.card_number}`.toUpperCase(),transactionMessage:a==null?void 0:a.result_message}}))??[],r={amount:A((l=e==null?void 0:e.balance)==null?void 0:l.amount),month:(c=(h=e==null?void 0:e.balance)==null?void 0:h.month)==null?void 0:c.toLowerCase()},o=e==null?void 0:e.tags;return{movements:t,balance:r,tags:o}},se=async()=>{const{data:e}=await I.get("/api/commerces/terminals");return Ks(e)},Oe=async e=>{const{data:t}=await I.post("/api/commerce/pay/new",e);return t},_e=async e=>{const{data:t}=await I.post("/api/commerce/virtual/pay",e);return t},ee=async(e,t,r)=>{const o=e?`?fromDate=${t}&toDate=${r}&terminalId=${e}`:`?fromDate=${t}&toDate=${r}`,{data:i}=await I.get(`/api/commerces-pay/transactions/all${o}`);return Js(i)},te=(e={})=>{const[t,r]=f.useState(null);return{...$([v.LIST],se,{staleTime:6e4,refetchOnMount:"always",onError:i=>{const l=U(i,"No se puede obtener la lista de terminales del comercio. Intente nuevamente o reporte a sistemas");r(l)},...e}),error:t||null}},ae={terminal:null},re=(e,t)=>({...ae,setTerminal:r=>{const{terminal:o}=t();e(i=>({terminal:{...o,...r}}),!1,"SET_TERMINAL_SELECTED")},resetTerminal:()=>{e(r=>({terminal:null}),!1,"RESET_TERMINAL_SELECTED")},addTerminalInfo:r=>{const{terminal:o}=t();e(i=>({terminal:{...o,...r}}),!1,"SET_TERMINAL_INFO")}}),w=G(re),z={terminals:[],isOpenList:!1,isCollapse:!1,balance:{amount:"$0.00",month:null}},ne=(e,t)=>({...z,setTerminals:r=>{e(o=>({terminals:r}),!1,"SET_TERMINALS")},setOpenList:r=>{e(o=>({isOpenList:r}),!1,"SET_OPEN_LIST")},setCollapse:r=>{e(o=>({isCollapse:r}),!1,"SET_COLLAPSE")},setBalance:r=>{e(o=>({balance:r}),!1,"SET_BALANCE")},resetBalance:()=>{e(r=>({balance:z.balance}),!1,"RESET_BALANCE")}}),u=G(ne),oe=(e,t,r={})=>{const o=u(x=>x.setBalance),i=u(x=>x.resetBalance);Ts[es(t)];const l=ts(t),h=as(t),c=L(l,"yyyy-MM-dd"),a=L(h,"yyyy-MM-dd"),[d,n]=f.useState(null),y=e?[v.MOVEMENTS,e]:[v.MOVEMENTS,"global"];return{...$(y,({signal:x})=>ee(e,c,a),{staleTime:6e4,retry:!1,refetchOnWindowFocus:!1,onSuccess:x=>{o(x==null?void 0:x.balance)},onError:x=>{const g=U(x,"No se puede obtener la lista de movimientos de la terminal. Intente nuevamente o reporte a sistemas");n(g),rs.error(g,{type:ns(x)}),i()},...r}),error:d||null}},ie=[{name:"MASTER CARD",component:Hs},{name:"CARNET",component:ws},{name:"VISA",component:Rs},{name:"AMEX",component:$s}],ce=e=>ie.find(t=>(t==null?void 0:t.name)===(e==null?void 0:e.toUpperCase().trim())),N=()=>{const[e,t]=f.useState(new Date),r=w(a=>a.terminal),{data:o,isFetching:i,refetch:l}=oe(r==null?void 0:r.terminalId,e,{enabled:!1}),h=o==null?void 0:o.movements;f.useEffect(()=>{l()},[e]),f.useEffect(()=>{t(new Date)},[r]);const c=[{name:"description",label:"Descripción",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(a,d)=>{const n=h[a],y=n==null?void 0:n.approved,C=ce(n==null?void 0:n.cardType),x=C==null?void 0:C.component;return s.jsxs(S,{sx:{display:"flex",alignItems:"center"},children:[s.jsxs(S,{sx:{position:"relative"},children:[s.jsx(P,{title:n==null?void 0:n.cardType,children:s.jsx(Q,{sx:{width:40,height:40,color:"text.secondary",bgcolor:"background.neutral"},children:C?s.jsx(x,{sx:{width:25,height:25}}):s.jsx(vs,{width:25,height:25})})}),s.jsx(S,{sx:{right:0,bottom:0,width:15,height:15,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",color:"common.white",bgcolor:"error.main",justifyContent:"center",...y&&{bgcolor:"success.main"}},children:y?s.jsx(Ps,{sx:{width:12,height:12}}):s.jsx(Us,{sx:{width:12,height:12}})})]}),s.jsxs(S,{sx:{ml:2},children:[s.jsxs(b,{variant:"subtitle2",children:[" ",n==null?void 0:n.description]}),s.jsx(b,{variant:"body2",textTransform:"capitalize",sx:{color:y?"success.main":"error.main"},children:n==null?void 0:n.transactionMessage})]})]})}}},...r?[]:[{name:"terminalName",label:"Terminal",options:{filterOptions:{fullWidth:!0},customBodyRenderLite:(a,d)=>{const n=h[a];return s.jsx(b,{variant:"subtitle2",fontWeight:"bold",children:n==null?void 0:n.terminalName})}}}],{name:"transactionDate.fullDate",label:"Fecha",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(a,d)=>{var y,C;const n=h[a];return s.jsxs(p,{children:[s.jsx(b,{variant:"subtitle2",children:(y=n==null?void 0:n.transactionDate)==null?void 0:y.date}),s.jsx(b,{variant:"body2",sx:{color:"text.secondary"},children:(C=n==null?void 0:n.transactionDate)==null?void 0:C.time})]})}}},{name:"amountFormat",label:"Cantidad",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(a,d)=>{const n=h[a];return s.jsx(b,{variant:"subtitle2",fontWeight:"bold",children:n==null?void 0:n.amountFormat})}}}];return s.jsxs(ks,{children:[s.jsx(As,{currentMonth:e,setCurrentMonth:t,isLoading:i}),s.jsx(W,{sx:{borderStyle:"dashed"}}),s.jsx(Bs,{title:`${r?r==null?void 0:r.name:"Global"}`,data:h||[],columns:c,isLoading:i,options:{responsive:"simple",rowHover:!0,selectableRows:"none",selectableRowsOnClick:!1,selectToolbarPlacement:"replace",rowsPerPage:100,sortOrder:{name:"date",direction:"desc"},downloadOptions:{filename:`movimientos_terminal_${r==null?void 0:r.name}.csv`,filterOptions:{useDisplayedColumnsOnly:!1}}}})]})},le=()=>{const e=w(o=>o.terminal),t=w(o=>o.resetTerminal),r=()=>{t()};return s.jsx(p,{sx:o=>({pl:{xs:0,sm:2,lg:2},overflow:"hidden",flexDirection:"column",flexGrow:1,transition:o.transitions.create(["width","flexGrow"])}),children:s.jsx(Os,{children:s.jsxs(S,{sx:{overflowY:"auto"},children:[e&&s.jsx(R.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:s.jsxs(p,{pt:0,pb:4,px:2,children:[s.jsx(p,{alignItems:"flex-end",pb:2,children:s.jsx(P,{title:"Ver Global",children:s.jsx(os,{color:"secondary",sx:{bgcolor:"secondary.main",":hover":{bgcolor:"secondary.light"}},"aria-label":"close",size:"small",onClick:r,children:s.jsx(is,{width:20,height:20,fontSize:"inherit",color:"primary"})})})}),(e==null?void 0:e.isVirtual)&&s.jsx(qs,{}),s.jsx(N,{})]})}),!e&&s.jsx(R.div,{exit:{opacity:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:1},children:s.jsx(p,{pt:0,pb:4,px:2,children:s.jsx(N,{})})})]})})})},he=()=>{const e=w(o=>o.terminal),t=u(o=>o.balance),r=e?e==null?void 0:e.name:"Global";return s.jsxs(cs,{children:[s.jsx(Es,{title:s.jsx(p,{flexDirection:"column",gap:1,children:s.jsx(b,{variant:"subtitle1",children:r})}),sx:{px:2,py:2}}),s.jsxs(p,{alignItems:"center",pb:2,px:2,children:[s.jsxs(p,{direction:"row",spacing:1,alignItems:"center",children:[s.jsx(b,{variant:"h3",children:t.amount}),s.jsx(b,{variant:"caption",children:"MXN"})]}),(t==null?void 0:t.month)&&s.jsxs(b,{variant:"subtitle2",children:["Balance de ",t.month]})]})]})},de=ls(hs)(({theme:e})=>({borderRadius:"8px!important",width:1,justifyContent:"center",display:"flex",alignItems:"center",mb:1})),X=({terminal:e})=>{const t=u(c=>c.isOpenList),r=u(c=>c.setOpenList),o=w(c=>c.setTerminal),i=w(c=>c.terminal);(e==null?void 0:e.id)===(i==null?void 0:i.id)&&i&&(i==null||i.cardON);const l=(e==null?void 0:e.id)===(i==null?void 0:i.id),h=c=>{var d;!((d=c.target)==null?void 0:d.type)&&!l&&(o(e),r(!1))};return s.jsx(P,{title:e==null?void 0:e.name,arrow:!0,placement:"right",children:s.jsx(_s,{sx:{mb:1,padding:0,borderRadius:1,"& :hover":{color:"text.primary"}},disablePadding:!0,children:s.jsxs(de,{onClick:h,sx:{...l&&{bgcolor:"secondary.light",color:"black","& :hover":{color:"text.primary"}},"& :hover":{color:"text.primary"},width:1,py:1,gap:1},children:[s.jsx(Fs,{sx:{ml:2,m:0},children:s.jsx(S,{sx:{position:"relative"},children:s.jsx(Q,{sx:c=>({width:32,height:32,m:0,backgroundColor:c.palette.primary.main,"& :hover":{color:"white"}}),children:e!=null&&e.isVirtual?s.jsx(Y,{sx:{width:20,height:20,color:"white"}}):s.jsx(Qs,{sx:{width:16,height:16,color:"white"}})})})}),t&&s.jsx(s.Fragment,{children:s.jsx(p,{sx:{width:1},children:s.jsx(b,{noWrap:!0,variant:"subtitle2",children:e==null?void 0:e.name})})})]})})})};X.propTypes={terminal:j.shape({alias:j.any,id:j.any,isVirtual:j.any,name:j.any})};const q=({terminalsQuery:e,sx:t,...r})=>{const{isLoading:o,data:i,error:l,isError:h,refetch:c}=e,a=u(n=>n.isOpenList),d=u(n=>n.terminals);return h&&a&&!i&&!o?s.jsx(ds,{errorMessage:l,handleButton:c}):i&&a&&(i==null?void 0:i.length)===0&&!o?s.jsx(Ls,{pt:2.5,message:"No hay terminales activas para este comercio"}):s.jsx(ps,{disablePadding:!0,sx:t,...r,children:(o?[...Array(12)]:d).map((n,y)=>n!=null&&n.id?s.jsx(X,{terminal:n},n==null?void 0:n.id):s.jsx(zs,{isOpenSideBar:a},y))})};q.propTypes={sx:j.any,terminalsQuery:j.shape({data:j.array,error:j.any,isError:j.any,isLoading:j.any,refetch:j.any})};const K=({commerceTerminals:e=[]})=>{const t=u(g=>g.isOpenList),r=u(g=>g.setOpenList),o=u(g=>g.setTerminals),i=u(g=>g.terminals),l=u(g=>g.isCollapse),[h,c]=f.useState(""),[a,d]=f.useState(!1),n=async g=>{try{const{value:E}=g.target;if(c(E),E){const J=(e==null?void 0:e.filter(T=>{var D;return(T==null?void 0:T.name)&&((D=T==null?void 0:T.name)==null?void 0:D.toLowerCase().indexOf(E.toLowerCase()))!==-1}))||[];o(J)}else o(e)}catch(E){console.error(E)}},y=()=>{t&&(c(""),o(e)),r(!t)},C=()=>{d(!0)},x=()=>{d(!1)};return f.useEffect(()=>{e&&o(e)},[e]),f.useEffect(()=>{if(!t)return d(!1)},[t]),s.jsxs(s.Fragment,{children:[s.jsx(S,{sx:{p:2,px:0},children:s.jsxs(p,{direction:"row",justifyContent:t?"flex-end":"center",alignItems:"center",spacing:2,children:[!l&&s.jsx(Ds,{onClickAway:x,children:s.jsx(ms,{fullWidth:!0,size:"small",value:h,onFocus:C,onChange:n,placeholder:"Buscar Terminales...",InputProps:{startAdornment:s.jsx(Zs,{position:"start",children:s.jsx(Ws,{sx:{color:"text.disabled",width:20,height:20}})})}})}),s.jsx(p,{direction:"row",alignItems:"center",justifyContent:"center",children:s.jsx(Ns,{size:"small",sx:{...!t&&{transform:"rotate(180deg)"}},onClick:y,children:xs})})]})}),(i==null?void 0:i.length)===0&&(e==null?void 0:e.length)>0&&s.jsx(us,{sx:{p:1,display:"flex",flexDirection:"column",alignItems:"center"},searchQuery:h})]})};K.propTypes={commerceTerminals:j.array};const pe=()=>{const e=u(n=>n.setOpenList),t=u(n=>n.setCollapse),r=u(n=>n.isOpenList),o=te(),i=fs(),l=ys("up","md"),h=l&&!r,c=()=>{e(!1)},a=()=>{e(!r)};f.useEffect(()=>{l&&e(!0)},[l]),f.useEffect(()=>{t(h)},[h]);const d=s.jsxs(s.Fragment,{children:[r&&s.jsx(he,{}),s.jsx(p,{children:s.jsx(K,{commerceTerminals:(o==null?void 0:o.data)||[]})}),s.jsx(Z,{sx:{height:.98},children:s.jsx(p,{children:s.jsx(q,{terminalsQuery:o})})})]});return s.jsxs(s.Fragment,{children:[!l&&!r&&s.jsx(Vs,{onClick:a,children:s.jsx(Y,{sx:{width:20,height:20}})}),l?s.jsx(k,{open:r,variant:"persistent",PaperProps:{sx:{height:1,borderRightStyle:"none",bgcolor:"background.default"}},sx:{height:1,width:_,transition:i.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",backgroundColor:"transparent!important",width:_},...h&&{width:F,"& .MuiDrawer-paper":{width:F,backgroundColor:"transparent!important",position:"static",transform:"none !important",visibility:"visible !important"}}},children:d}):s.jsx(k,{ModalProps:{keepMounted:!0},open:r,onClose:c,sx:{height:1,"& .MuiDrawer-paper":{width:_,p:2}},children:d})]})},xe=()=>s.jsx(gs,{title:"Lista de Terminales Punto de Venta",children:s.jsx(Ms,{children:s.jsxs(S,{display:"flex",overflow:"hidden",sx:{height:"100vH",maxHeight:"100%",flexDirection:"column"},children:[s.jsx(S,{px:1,children:s.jsx(Is,{name:"Terminales Punto de Venta",links:[{name:"Inicio",href:js.root},{name:"Administración",href:Ss.terminals},{name:bs.terminals.name}]})}),s.jsxs(S,{display:"flex",overflow:"hidden",flex:1,children:[s.jsx(pe,{}),s.jsx(le,{})]})]})})}),Ae=Object.freeze(Object.defineProperty({__proto__:null,default:xe},Symbol.toStringTag,{value:"Module"}));export{Gs as L,Ae as P,v as T,Oe as c,_e as g,w as u};
