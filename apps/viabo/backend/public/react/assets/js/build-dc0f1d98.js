import{a as c,P as n,_ as d,u as v,b as y,g as N,r as _,j as a,B as g,S as j,c as A,C as L,W as I,d as w,e as M,f as D,h as z}from"./build-b398f610.js";import{c as G,d as V}from"./build-390e2d0a.js";import{P as o}from"./build-61d5e77c.js";import{s as B}from"./build-9563ddbe.js";import{I as U}from"./build-e603dc94.js";import{G as C}from"./build-7530f3a7.js";const F={TOKEN_COMMERCE:"tokenCommerce",VALIDATION_CODE:"validationCode",COMMERCE_PROCESS:"commerceProcess"},H=e=>{const{id:s,fiscalPersonType:t,taxName:r,tradeName:l,rfc:p,employees:E,branchOffices:R,paymentAPI:S,registerStep:x,legalRepresentative:f,services:u,pointSaleTerminal:P,documents:i}=e,m=u==null?void 0:u.find(k=>k.type==="2"),h=(m==null?void 0:m.cardNumbers)||0,T=(m==null?void 0:m.cardUse)||"",O=(m==null?void 0:m.personalized)==="1"||!1;return{id:s,idUser:f,services:u,fiscalTypePerson:t,fiscalName:r,rfc:p,commercialName:l,employeesNumber:Number(E),branchesNumber:Number(R),tpvsNumber:Number(P),apiRequired:S==="1",cardsNumber:Number(h),cardsUse:T,customCardsRequired:O,files:i,step:Number(x)}},ne=async e=>{const{data:s}=await c.post("/api/security/legalRepresentative/new",e);return s},ce=async e=>{const{data:s}=await c.get("/api/legal-representative/verificate",{headers:{Username:`${e}`}});return s},ie=async()=>{const{data:e}=await c.post("/api/code/verification/resend");return e},me=async e=>{const{data:s}=await c.post("/api/code/verificate",e);return s},q=async()=>{const{data:e}=await c.get("/api/commerce/legal-representative");return H(e)},le=async e=>{const{data:s}=await c.put("/api/commerce/update",e);return s},de=async e=>{const{data:s}=await c.post("/api/commerce/documents/create",e);return s},ue=async e=>{const{data:s}=await c.post("/api/commerce/documents/delete",e);return s},pe={actualProcess:n.string,token:n.string,resume:n.object,lastProcess:n.shape({name:n.any,info:n.any}),getComponent:n.func,getBackProcess:n.func,setLastProcess:n.func,setActualProcess:n.func,setToken:n.func,setResume:n.func},W=(e,s)=>({actualProcess:o.REGISTER,token:null,resume:null,lastProcess:{name:null,info:null},processList:[{name:o.REGISTER,component:()=>d(()=>import("./build-859d1b27.js"),["assets/js/build-859d1b27.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-00913d97.js","assets/js/build-e5a8d440.js","assets/js/build-61d5e77c.js","assets/js/build-fd68546e.js","assets/js/build-67d40c67.js","assets/js/build-9051198d.js","assets/js/build-87f50e92.js","assets/js/build-acbb6a33.js","assets/js/build-8bcb7677.js","assets/js/build-4f0afa8a.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js","assets/js/build-7530f3a7.js"]),backProcess:o.REGISTER},{name:o.CONTINUE_PROCESS,component:()=>d(()=>import("./build-2524be91.js"),["assets/js/build-2524be91.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-00913d97.js","assets/js/build-e5a8d440.js","assets/js/build-61d5e77c.js","assets/js/build-2072b954.js","assets/js/build-67d40c67.js","assets/js/build-9051198d.js","assets/js/build-acbb6a33.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js","assets/js/build-7530f3a7.js"]),backProcess:o.REGISTER},{name:o.VALIDATION_CODE,component:()=>d(()=>import("./build-af1716cd.js"),["assets/js/build-af1716cd.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-67d40c67.js","assets/js/build-ecaf0d13.js","assets/js/build-61d5e77c.js","assets/js/build-2072b954.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js","assets/js/build-7530f3a7.js"]),backProcess:o.REGISTER},{name:o.SERVICES_SELECTION,component:()=>d(()=>import("./build-7c80c4a3.js"),["assets/js/build-7c80c4a3.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-87f50e92.js","assets/js/build-61d5e77c.js","assets/js/build-84878585.js","assets/js/build-e3d7587b.js","assets/js/build-132ee0f6.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js","assets/js/build-7530f3a7.js"]),backProcess:o.REGISTER},{name:o.COMMERCE_INFO,component:()=>d(()=>import("./build-bcc0137c.js"),["assets/js/build-bcc0137c.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-00913d97.js","assets/js/build-e5a8d440.js","assets/js/build-61d5e77c.js","assets/js/build-e3d7587b.js","assets/js/build-67d40c67.js","assets/js/build-4f0afa8a.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js","assets/js/build-7530f3a7.js"]),backProcess:o.SERVICES_SELECTION},{name:o.COMMERCE_DOCUMENTATION,component:()=>d(()=>import("./build-0771eadb.js"),["assets/js/build-0771eadb.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-00913d97.js","assets/js/build-61d5e77c.js","assets/js/build-b3c266c9.js","assets/js/build-bee6630b.js","assets/js/build-e3d7587b.js","assets/js/build-b498e0bd.js","assets/js/build-7530f3a7.js","assets/js/build-132ee0f6.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js"]),backProcess:o.COMMERCE_INFO},{name:o.FINISHED_PROCESS,component:()=>d(()=>import("./build-e657cf58.js"),["assets/js/build-e657cf58.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-61d5e77c.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js","assets/js/build-7530f3a7.js"]),backProcess:o.COMMERCE_DOCUMENTATION}],getComponent:()=>{const{processList:t,actualProcess:r}=s(),l=()=>d(()=>import("./build-af1716cd.js"),["assets/js/build-af1716cd.js","assets/js/build-b398f610.js","assets/css/build-2e53629c.css","assets/js/build-67d40c67.js","assets/js/build-ecaf0d13.js","assets/js/build-61d5e77c.js","assets/js/build-2072b954.js","assets/js/build-390e2d0a.js","assets/js/build-9563ddbe.js","assets/js/build-e603dc94.js","assets/js/build-7530f3a7.js"]);return t.find(p=>p.name===r).component??l},getBackProcess:()=>{const{processList:t,actualProcess:r}=s();return t.find(l=>l.name===r).backProcess??o.REGISTER},setLastProcess:t=>{e(r=>({lastProcess:{name:(t==null?void 0:t.name)||null,info:(t==null?void 0:t.info)||null}}))},setActualProcess:t=>{e(r=>({actualProcess:t})),t===o.REGISTER&&(localStorage.removeItem("token"),delete c.defaults.headers.common.Authorization)},setToken:t=>{e(r=>({token:t})),localStorage.setItem("token",t),c.defaults.headers.common.Authorization=`Bearer ${t}`},setResume:t=>{e(r=>({resume:t}))}}),b=G(V(W)),$=(e={})=>{const{enqueueSnackbar:s}=v();return y([F.COMMERCE_PROCESS],q,{staleTime:60*5e3,onError:t=>{const r=N(t,"ðŸ˜Ÿ Error al obtener el proceso del comercio");s(r,{variant:"error",autoHideDuration:5e3})},...e})},K=()=>{const e=b(i=>i.getComponent),s=b(i=>i.getBackProcess),t=b(i=>i,B),{actualProcess:r,setToken:l,setActualProcess:p,setResume:E,token:R,resume:S}=t,{data:x,isSuccess:f}=$({enabled:!!R});_.useEffect(()=>{E(x&&f?x:null)},[x,f]),_.useEffect(()=>{r===o.REGISTER&&(l(null),E(null))},[r,l]);const u=()=>{const i=s();p(i)},P=_.useMemo(()=>_.lazy(e()),[r]);return a.jsx(g,{sx:{height:{xs:"100%",sm:"100%",md:"100%",lg:"100vh",xl:"calc(100vh - 100px)"},minHeight:{xs:"100vH",sm:"100vh",md:"100vh",lg:"100vh",xl:"600px"},display:"flex",flexDirection:"column",overflow:"auto",zIndex:1},className:"animate__animated animate__fadeIn",children:a.jsxs(_.Suspense,{fallback:a.jsx(Q,{}),children:[r!==o.REGISTER&&a.jsx(j,{m:5,mb:0,direction:"row",children:a.jsx(A,{onClick:u,children:"< Regresar"})}),a.jsx(g,{m:5,height:1,children:a.jsx(P,{store:t})})]})})},Q=()=>a.jsx(g,{sx:{position:"relative",top:0,left:0,width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backdropFilter:"blur(1px)",zIndex:e=>e.zIndex.modal-1},children:a.jsx(L,{})}),Y=I("div")(({theme:e})=>({top:0,left:0,right:0,bottom:0,zIndex:8,position:"absolute",backgroundColor:w(e.palette.grey[900],.1)})),J=I("div")(({theme:e})=>({display:"flex",maxWidth:e.breakpoints.values.lg,[e.breakpoints.down("xl")]:{maxWidth:"100%"},margin:"0 auto",height:"100%",overflow:"auto",zIndex:"100000",justifyContent:"center",alignItems:"center",backgroundColor:e.palette.background.paper,borderRadius:"0px",[e.breakpoints.up("xl")]:{borderRadius:"16px",boxShadow:"0 0 60px 10px rgb(85 44 44 / 20%)"}})),X=I("div")(({theme:e})=>({padding:"0px",height:"100%",[e.breakpoints.up("sm")]:{padding:"0px"},[e.breakpoints.up("md")]:{padding:"0px"},[e.breakpoints.up("lg")]:{padding:"0px"},[e.breakpoints.up("xl")]:{padding:"100px"}}));function Z(){return a.jsx(M,{title:"Registro Comercio",children:a.jsx(X,{className:"animate__animated animated__fadeIn",children:a.jsx(J,{children:a.jsxs(C,{container:!0,spacing:0,component:"main",justifyContent:"center",children:[a.jsx(C,{item:!0,elevation:0,xs:!1,sm:!1,md:6,children:a.jsxs(g,{sx:{position:"relative",display:"flex",height:1,backgroundColor:"#161C24"},children:[a.jsx(Y,{}),a.jsx(g,{component:D.LazyLoadImage,wrapperClassName:"wrapper",effect:"blur",placeholderSrc:"https://zone-assets-api.vercel.app/assets/img_placeholder.svg",sx:{width:1,height:1,objectFit:"cover"},src:U})]})}),a.jsx(C,{item:!0,xs:12,sm:12,md:6,alignItems:"center",justify:"center",component:z,elevation:10,sx:{overflow:"auto",borderRadius:{md:0,xl:"0px 16px 16px 0px"}},children:a.jsx(K,{})})]})})})})}const Ee=Object.freeze(Object.defineProperty({__proto__:null,default:Z},Symbol.toStringTag,{value:"Module"}));export{F as C,le as a,Ee as b,ne as c,ue as d,ce as g,pe as p,ie as s,de as u,me as v};
