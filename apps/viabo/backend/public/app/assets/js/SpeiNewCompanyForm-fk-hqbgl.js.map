{"version":3,"file":"SpeiNewCompanyForm-fk-hqbgl.js","sources":["../../../../../frontend/src/app/business/viabo-spei/companies/adapters/spei-new-company-adapter.js","../../../../../frontend/src/app/business/viabo-spei/companies/hooks/useCreateNewSpeiCompany.js","../../../../../frontend/src/app/business/viabo-spei/companies/hooks/useUpdateSpeiCompany.js"],"sourcesContent":["import { METHODS_NEW_COMPANY_USERS } from './spei-companies-keys'\r\n\r\nexport const SpeiNewCompanyAdapter = company => ({\r\n  fiscalName: company?.fiscalName?.trim(),\r\n  rfc: company?.rfc?.trim(),\r\n  commercialName: company?.commercialName?.trim(),\r\n  isNewUser: company?.method === METHODS_NEW_COMPANY_USERS.NEW_ADMIN_USER,\r\n  assignedUsers: company?.adminUsers?.map(user => user.value) || [],\r\n  userName: company?.adminName?.trim(),\r\n  userLastName: company?.adminLastName?.trim(),\r\n  userEmail: company?.adminEmail?.trim(),\r\n  userPhone: company?.adminPhone?.trim(),\r\n  costCenters: company?.costCenters?.map(user => user.value) || [],\r\n  hasViaboCard: company?.hasViaboCard\r\n})\r\n","import { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { SPEI_COMPANIES_KEYS } from '../adapters'\r\nimport { newSpeiCompany } from '../services'\r\n\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\nimport { isFunction } from '@/shared/utils'\r\n\r\nexport const useCreateNewSpeiCompany = (options = {}) => {\r\n  const client = useQueryClient()\r\n  const company = useMutation(newSpeiCompany, options)\r\n  const mutate = async (formData, options) => {\r\n    const { onSuccess, onError, mutationOptions } = options\r\n\r\n    try {\r\n      await toast.promise(company.mutateAsync(formData, mutationOptions), {\r\n        pending: 'Creando empresa...',\r\n        success: {\r\n          render({ data }) {\r\n            client.invalidateQueries([SPEI_COMPANIES_KEYS.COMPANIES_LIST])\r\n            isFunction(onSuccess) && onSuccess(data)\r\n\r\n            return 'Se creó la empresa con éxito'\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      const errorFormatted = getErrorAPI(\r\n        error,\r\n        `No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas`\r\n      )\r\n      isFunction(onError) && onError(errorFormatted)\r\n      toast.error(errorFormatted, {\r\n        type: getNotificationTypeByErrorCode(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...company,\r\n    mutate\r\n  }\r\n}\r\n","import { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { SPEI_COMPANIES_KEYS } from '../adapters'\r\nimport { updateViaboSpeiCompany } from '../services'\r\n\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\nimport { isFunction } from '@/shared/utils'\r\n\r\nexport const useUpdateSpeiCompany = (options = {}) => {\r\n  const client = useQueryClient()\r\n  const company = useMutation(updateViaboSpeiCompany, options)\r\n  const mutate = async (formData, options) => {\r\n    const { onSuccess, onError, mutationOptions } = options\r\n\r\n    try {\r\n      await toast.promise(company.mutateAsync(formData, mutationOptions), {\r\n        pending: 'Actualizando empresa...',\r\n        success: {\r\n          render({ data }) {\r\n            client.invalidateQueries([SPEI_COMPANIES_KEYS.COMPANIES_LIST])\r\n            client.invalidateQueries([SPEI_COMPANIES_KEYS.COMPANY_DETAILS, data?.id])\r\n            isFunction(onSuccess) && onSuccess(data)\r\n\r\n            return 'Se actualizó la empresa con éxito'\r\n          }\r\n        }\r\n      })\r\n    } catch (error) {\r\n      const errorFormatted = getErrorAPI(\r\n        error,\r\n        `No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas`\r\n      )\r\n      isFunction(onError) && onError(errorFormatted)\r\n      toast.error(errorFormatted, {\r\n        type: getNotificationTypeByErrorCode(error)\r\n      })\r\n    }\r\n  }\r\n\r\n  return {\r\n    ...company,\r\n    mutate\r\n  }\r\n}\r\n"],"names":["SpeiNewCompanyAdapter","company","_a","_b","_c","METHODS_NEW_COMPANY_USERS","_d","user","_e","_f","_g","_h","_i","useCreateNewSpeiCompany","options","client","useQueryClient","useMutation","newSpeiCompany","formData","onSuccess","onError","mutationOptions","toast","data","SPEI_COMPANIES_KEYS","isFunction","error","errorFormatted","getErrorAPI","getNotificationTypeByErrorCode","useUpdateSpeiCompany","updateViaboSpeiCompany"],"mappings":"u1BAEO,MAAMA,GAAwBC,GAAY,uBAAA,OAC/C,YAAYC,EAAAD,GAAA,YAAAA,EAAS,aAAT,YAAAC,EAAqB,OACjC,KAAKC,EAAAF,GAAA,YAAAA,EAAS,MAAT,YAAAE,EAAc,OACnB,gBAAgBC,EAAAH,GAAA,YAAAA,EAAS,iBAAT,YAAAG,EAAyB,OACzC,WAAWH,GAAA,YAAAA,EAAS,UAAWI,EAA0B,eACzD,gBAAeC,EAAAL,GAAA,YAAAA,EAAS,aAAT,YAAAK,EAAqB,IAAIC,GAAQA,EAAK,SAAU,CAAE,EACjE,UAAUC,EAAAP,GAAA,YAAAA,EAAS,YAAT,YAAAO,EAAoB,OAC9B,cAAcC,EAAAR,GAAA,YAAAA,EAAS,gBAAT,YAAAQ,EAAwB,OACtC,WAAWC,EAAAT,GAAA,YAAAA,EAAS,aAAT,YAAAS,EAAqB,OAChC,WAAWC,EAAAV,GAAA,YAAAA,EAAS,aAAT,YAAAU,EAAqB,OAChC,cAAaC,EAAAX,GAAA,YAAAA,EAAS,cAAT,YAAAW,EAAsB,IAAIL,GAAQA,EAAK,SAAU,CAAE,EAChE,aAAcN,GAAA,YAAAA,EAAS,YACzB,GCLaY,GAA0B,CAACC,EAAU,KAAO,CACvD,MAAMC,EAASC,EAAgB,EACzBf,EAAUgB,EAAYC,EAAgBJ,CAAO,EA4BnD,MAAO,CACL,GAAGb,EACH,OA7Ba,MAAOkB,EAAUL,IAAY,CAC1C,KAAM,CAAE,UAAAM,EAAW,QAAAC,EAAS,gBAAAC,CAAiB,EAAGR,EAEhD,GAAI,CACF,MAAMS,EAAM,QAAQtB,EAAQ,YAAYkB,EAAUG,CAAe,EAAG,CAClE,QAAS,qBACT,QAAS,CACP,OAAO,CAAE,KAAAE,GAAQ,CACf,OAAAT,EAAO,kBAAkB,CAACU,EAAoB,cAAc,CAAC,EAC7DC,EAAWN,CAAS,GAAKA,EAAUI,CAAI,EAEhC,8BACR,CACF,CACT,CAAO,CACF,OAAQG,EAAO,CACd,MAAMC,EAAiBC,EACrBF,EACA,8FACD,EACDD,EAAWL,CAAO,GAAKA,EAAQO,CAAc,EAC7CL,EAAM,MAAMK,EAAgB,CAC1B,KAAME,EAA+BH,CAAK,CAClD,CAAO,CACF,CACF,CAKA,CACH,EClCaI,GAAuB,CAACjB,EAAU,KAAO,CACpD,MAAMC,EAASC,EAAgB,EACzBf,EAAUgB,EAAYe,EAAwBlB,CAAO,EA6B3D,MAAO,CACL,GAAGb,EACH,OA9Ba,MAAOkB,EAAUL,IAAY,CAC1C,KAAM,CAAE,UAAAM,EAAW,QAAAC,EAAS,gBAAAC,CAAiB,EAAGR,EAEhD,GAAI,CACF,MAAMS,EAAM,QAAQtB,EAAQ,YAAYkB,EAAUG,CAAe,EAAG,CAClE,QAAS,0BACT,QAAS,CACP,OAAO,CAAE,KAAAE,GAAQ,CACf,OAAAT,EAAO,kBAAkB,CAACU,EAAoB,cAAc,CAAC,EAC7DV,EAAO,kBAAkB,CAACU,EAAoB,gBAAiBD,GAAA,YAAAA,EAAM,EAAE,CAAC,EACxEE,EAAWN,CAAS,GAAKA,EAAUI,CAAI,EAEhC,mCACR,CACF,CACT,CAAO,CACF,OAAQG,EAAO,CACd,MAAMC,EAAiBC,EACrBF,EACA,8FACD,EACDD,EAAWL,CAAO,GAAKA,EAAQO,CAAc,EAC7CL,EAAM,MAAMK,EAAgB,CAC1B,KAAME,EAA+BH,CAAK,CAClD,CAAO,CACF,CACF,CAKA,CACH"}