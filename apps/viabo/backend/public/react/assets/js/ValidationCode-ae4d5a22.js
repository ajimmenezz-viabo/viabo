import{s as E,_ as x,p as q,e as $,q as Q,g as X,j as d,i as Y,l as G,o as se,n as le,a8 as j,a1 as w,v as J,a9 as ce,aa as de,T as ue,a4 as _,U as N,Q as pe,x as M,V as U}from"./index-76391856.js";import{T as ge}from"./TextField-4164fc9f.js";import{v as he,g as fe,p as me,S as ve,a as xe,b as be,P as z}from"./CommerceRegister-0d7b31fe.js";import{u as Ce,a as ye}from"./useSendValidationCode-b7cc5fe4.js";import{u as Re}from"./useMutation-46589cee.js";import{g as Te}from"./dividerClasses-b6159071.js";import"./useId-a15d70f0.js";import"./index-1aacdabe.js";const ke=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],Ae=e=>{const{absolute:t,children:r,classes:i,flexItem:u,light:s,orientation:c,textAlign:o,variant:g}=e;return G({root:["root",t&&"absolute",g,s&&"light",c==="vertical"&&"vertical",u&&"flexItem",r&&"withChildren",r&&c==="vertical"&&"withChildrenVertical",o==="right"&&c!=="vertical"&&"textAlignRight",o==="left"&&c!=="vertical"&&"textAlignLeft"],wrapper:["wrapper",c==="vertical"&&"wrapperVertical"]},Te,i)},De=E("div",{name:"MuiDivider",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.absolute&&t.absolute,t[r.variant],r.light&&t.light,r.orientation==="vertical"&&t.vertical,r.flexItem&&t.flexItem,r.children&&t.withChildren,r.children&&r.orientation==="vertical"&&t.withChildrenVertical,r.textAlign==="right"&&r.orientation!=="vertical"&&t.textAlignRight,r.textAlign==="left"&&r.orientation!=="vertical"&&t.textAlignLeft]}})(({theme:e,ownerState:t})=>x({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:(e.vars||e).palette.divider,borderBottomWidth:"thin"},t.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},t.light&&{borderColor:e.vars?`rgba(${e.vars.palette.dividerChannel} / 0.08)`:q(e.palette.divider,.08)},t.variant==="inset"&&{marginLeft:72},t.variant==="middle"&&t.orientation==="horizontal"&&{marginLeft:e.spacing(2),marginRight:e.spacing(2)},t.variant==="middle"&&t.orientation==="vertical"&&{marginTop:e.spacing(1),marginBottom:e.spacing(1)},t.orientation==="vertical"&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},t.flexItem&&{alignSelf:"stretch",height:"auto"}),({theme:e,ownerState:t})=>x({},t.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:`thin solid ${(e.vars||e).palette.divider}`,top:"50%",content:'""',transform:"translateY(50%)"}}),({theme:e,ownerState:t})=>x({},t.children&&t.orientation==="vertical"&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:`thin solid ${(e.vars||e).palette.divider}`,transform:"translateX(0%)"}}),({ownerState:e})=>x({},e.textAlign==="right"&&e.orientation!=="vertical"&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},e.textAlign==="left"&&e.orientation!=="vertical"&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})),Fe=E("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.wrapper,r.orientation==="vertical"&&t.wrapperVertical]}})(({theme:e,ownerState:t})=>x({display:"inline-block",paddingLeft:`calc(${e.spacing(1)} * 1.2)`,paddingRight:`calc(${e.spacing(1)} * 1.2)`},t.orientation==="vertical"&&{paddingTop:`calc(${e.spacing(1)} * 1.2)`,paddingBottom:`calc(${e.spacing(1)} * 1.2)`})),Se=$.forwardRef(function(t,r){const i=Q({props:t,name:"MuiDivider"}),{absolute:u=!1,children:s,className:c,component:o=s?"div":"hr",flexItem:g=!1,light:b=!1,orientation:D="horizontal",role:m=o!=="hr"?"separator":void 0,textAlign:f="center",variant:C="fullWidth"}=i,p=X(i,ke),T=x({},i,{absolute:u,component:o,flexItem:g,light:b,orientation:D,role:m,textAlign:f,variant:C}),h=Ae(T);return d(De,x({as:o,className:Y(h.root,c),role:m,ref:r,ownerState:T},p,{children:s?d(Fe,{className:h.wrapper,ownerState:T,children:s}):null}))}),Ve=Se;function Ie(e){return le("MuiLink",e)}const we=se("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Le=we,Z={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},$e=e=>Z[e]||e,Ne=({theme:e,ownerState:t})=>{const r=$e(t.color),i=j(e,`palette.${r}`,!1)||t.color,u=j(e,`palette.${r}Channel`);return"vars"in e&&u?`rgba(${u} / 0.4)`:q(i,.4)},Ee=Ne,Pe=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],Me=e=>{const{classes:t,component:r,focusVisible:i,underline:u}=e,s={root:["root",`underline${J(u)}`,r==="button"&&"button",i&&"focusVisible"]};return G(s,Ie,t)},Be=E(w,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`underline${J(r.underline)}`],r.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>x({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&x({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:Ee({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Le.focusVisible}`]:{outline:"auto"}})),_e=$.forwardRef(function(t,r){const i=Q({props:t,name:"MuiLink"}),{className:u,color:s="primary",component:c="a",onBlur:o,onFocus:g,TypographyClasses:b,underline:D="always",variant:m="inherit",sx:f}=i,C=X(i,Pe),{isFocusVisibleRef:p,onBlur:T,onFocus:h,ref:k}=ce(),[V,I]=$.useState(!1),F=de(r,k),y=S=>{T(S),p.current===!1&&I(!1),o&&o(S)},v=S=>{h(S),p.current===!0&&I(!0),g&&g(S)},A=x({},i,{color:s,component:c,focusVisible:V,underline:D,variant:m}),L=Me(A);return d(Be,x({color:s,className:Y(L.root,u),classes:b,component:c,onBlur:y,onFocus:v,ref:F,ownerState:A,variant:m,sx:[...Object.keys(Z).includes(s)?[]:[{color:s}],...Array.isArray(f)?f:[f]]},C))}),Oe=_e;function We(e){const t=typeof e=="number",r=je(e);return(t||r&&e!=="")&&!isNaN(Number(e))}function je(e){return typeof e=="string"||e instanceof String}const Ue=(e={})=>{const{enqueueSnackbar:t}=ue();return Re({mutationFn:he,onError:r=>{const i=fe(r,"No se puede validar el código");t(i,{variant:(r==null?void 0:r.status)===500?"error":"warning",autoHideDuration:5e3})},...e})},ze=E(ge)`
  input {
    text-align: center;
  }
`,He={TextFieldStyled:ze},Ke=e=>d(He.TextFieldStyled,{...e}),B={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace"};function qe(e,t){return e<=0?[]:Array.from({length:e},t)}function Qe(e,t,r){return e.map((i,u)=>t===u?r:i)}function H(e){return e.join("")}function K(e,t){return[...e,t]}function Xe(e,t,r){return e.reduce((i,u,s)=>{const{characters:c,restArrayMerged:o}=i;if(s<r)return{restArrayMerged:o,characters:K(c,u)};const[g,...b]=o;return{restArrayMerged:b,characters:K(c,g||"")}},{restArrayMerged:t,characters:[]}).characters}function Ye(e){return e.split("")}const ee=_.forwardRef((e,t)=>{const{value:r,length:i,autoFocus:u,onChange:s,TextFieldsProps:c,onComplete:o,validateChar:g,className:b,...D}=e,{onPaste:m,onFocus:f,onKeyDown:C,className:p,...T}=c||{},h=qe(i,(n,l)=>({character:r[l]||"",inputRef:_.createRef()})),k=n=>h.findIndex(({inputRef:l})=>l.current===n),V=()=>h.map(({character:n})=>n),I=(n,l)=>{const a=Qe(V(),n,l);return H(a)},F=n=>{var l,a;(a=(l=h[n])==null?void 0:l.inputRef.current)==null||a.focus()},y=n=>{var l,a;(a=(l=h[n])==null?void 0:l.inputRef.current)==null||a.select()},v=n=>{n+1!==i&&(h[n+1].character?y(n+1):F(n+1))},A=n=>{n>0&&y(n-1)},L=n=>{const l=n.target.value[0]||"",a=k(n.target);if(typeof g=="function"&&!g(l,a))return;const R=I(a,l);s==null||s(R),R.length===i&&(o==null||o(R)),l!==""?R.length<i?v(R.length-1):v(a):R[a]?y(a):A(a)},S=n=>{n.preventDefault(),n.target.select(),f==null||f(n)},re=n=>{const l=n.target,a=k(l);l.value===n.key?(n.preventDefault(),v(a)):!l.value&&B.backspace===n.key||B.left===n.key?(n.preventDefault(),y(a-1)):B.right===n.key&&(n.preventDefault(),y(a+1)),C==null||C(n)},ne=n=>{n.preventDefault();const l=n.target,a=n.clipboardData.getData("text/plain"),R=k(l),oe=V(),O=Xe(oe,Ye(a),R),W=O.findIndex((ie,ae)=>ae>R&&ie===""),P=H(O);if(s==null||s(P),P.length===i){o==null||o(P),F(i-1);return}W!==-1&&F(W),m==null||m(n)};return d(N,{display:"flex",gap:"20px",alignItems:"center",ref:t,className:`MuiOtpInput-Box ${b||""}`,...D,children:h.map(({character:n,inputRef:l},a)=>d(Ke,{autoFocus:u?a===0:!1,autoComplete:"one-time-code",value:n,inputRef:l,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${a+1} ${p||""}`,onPaste:ne,onFocus:S,onChange:L,onKeyDown:re,...T},a))})});ee.defaultProps={value:"",length:4,autoFocus:!1,validateChar:()=>!0,onChange:()=>{},onComplete:()=>{},TextFieldsProps:{}};const Ge="/react/assets/img/mail-a33a291d.svg";te.propTypes={store:pe.shape(me)};function te({store:e}){const{lastProcess:t,setActualProcess:r,setLastProcess:i,setToken:u,token:s,resume:c}=e,{info:o}=t,{mutate:g,isLoading:b}=Ce(),{mutate:D,isLoading:m,isError:f,reset:C}=Ue(),{data:p,isError:T}=ye(o==null?void 0:o.email,{enabled:!!(o!=null&&o.email)});$.useEffect(()=>{p&&u(p==null?void 0:p.token)},[p]);const[h,k]=$.useState(""),V=v=>{k(v),C()},I=(v,A)=>We(v),F=v=>{D({verificationCode:v,token:s},{onSuccess:()=>{var A;c!=null&&c.step?r(((A=be.find(L=>L.step===(c==null?void 0:c.step)))==null?void 0:A.name)||z.SERVICES_SELECTION):r(z.SERVICES_SELECTION),i()},onError:()=>{k("")}})},y=()=>{g({token:p==null?void 0:p.token})};return M(U,{children:[d(N,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4},children:d("img",{className:"animate__animated animate__pulse",src:Ge,width:"25%",alt:"Sent Mail"})}),d(w,{variant:"h4",color:"textPrimary",align:"center",children:"Verificación de Cuenta"}),M(w,{paragraph:!0,sx:{mb:4,mt:2},align:"center",variant:"body2",color:"text.secondary",whiteSpace:"pre-line",children:["Enviamos un correo electrónico a ",o==null?void 0:o.email," con el código de verificacion de tu cuenta, ingrese el código en el cuadro a continuación para verificar su cuenta."]}),d(ee,{length:6,value:h,onComplete:F,onChange:V,validateChar:I,sx:{gap:{xs:1.5,sm:2,md:3}},TextFieldsProps:{placeholder:"-",error:f,disabled:m}}),!!f&&d(N,{mt:1,children:d(w,{variant:"caption",color:"error",children:"Código incorrecto"})}),d(N,{mb:5,children:d(Ve,{sx:{my:4},children:d(ve,{direction:"row",spacing:1,justifyContent:"center",children:b?d(xe,{wid:!0,sx:{mx:3}}):M(U,{children:[d(w,{variant:"body2",children:"¿No tengo un código?"}),d(Oe,{underline:"hover",sx:{cursor:"pointer"},onClick:y,children:d(w,{variant:"body2",color:"primary",children:"Reenviar código"})})]})})})})]})}const at=_.memo(te);export{at as default};
