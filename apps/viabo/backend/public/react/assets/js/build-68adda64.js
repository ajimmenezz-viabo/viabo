import{am as ne,an as re,W as D,ao as M,r as d,ap as ae,aq as ie,ar as be,j as t,as as le,at as ce,au as $,d as K,av as we,aw as ve,q as G,b as q,g as T,u as ye,a8 as de,m as Ie,n as ke,a3 as ue,S as x,I as Q,T as j,c as N,ax as Me,ai as Re,B as k,C as Ee,a4 as De,R as U,U as he,X as xe,a0 as Ae,ay as Oe,P as I,az as Pe,aA as Le,aB as $e,ak as ze,aC as Be,a1 as Ne,V as Te,aD as Fe,i as He,k as _e,aE as Ve,aF as J,e as We,a5 as Ge,aG as qe,aH as Qe}from"./build-25e7e2eb.js";import{E as ee,H as Ue}from"./build-fd05424b.js";import{g as Xe,a as Ye,c as Ze,u as p,P as Ke,M as Je,C as et,b as tt,d as st,e as ot,f as nt,G as rt,h as at,F as it}from"./build-1aa4ae0f.js";import lt from"./build-10efc721.js";import"./build-0c7fe524.js";import{L as ct,I as dt}from"./build-9151ecd6.js";import"./build-aef65eb7.js";import{C as z}from"./build-c7ce8ef2.js";import{S as ut}from"./build-a3e0cac9.js";import{C as ht}from"./build-caa4c160.js";import{C as xt,S as _}from"./build-deb91634.js";import{a as pt,M as mt}from"./build-b4439384.js";import{S as gt,C as ft}from"./build-3a191c20.js";import{u as Ct}from"./build-8ee8c8e9.js";import{G as V}from"./build-cdcb9c1c.js";import{L as jt}from"./build-e8a6b0bf.js";import{s as St}from"./build-9563ddbe.js";import{I as bt}from"./build-ea1777fe.js";import{S as wt}from"./build-396b2db3.js";import{C as vt}from"./build-4bcaabc0.js";import"./build-b0cf8558.js";import"./build-3f6bbffc.js";import"./build-84820902.js";import"./build-42302140.js";import"./build-26fd9c17.js";import"./build-8a0ce378.js";import"./build-3cc84a75.js";import"./build-8a07578b.js";import"./build-1e37eace.js";import"./build-f81efbfe.js";import"./build-ecaf0d13.js";import"./build-bee6630b.js";function yt(e){return ne("MuiListItemAvatar",e)}re("MuiListItemAvatar",["root","alignItemsFlexStart"]);const It=["className"],kt=e=>{const{alignItems:s,classes:r}=e;return ce({root:["root",s==="flex-start"&&"alignItemsFlexStart"]},yt,r)},Mt=D("div",{name:"MuiListItemAvatar",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:r}=e;return[s.root,r.alignItems==="flex-start"&&s.alignItemsFlexStart]}})(({ownerState:e})=>M({minWidth:56,flexShrink:0},e.alignItems==="flex-start"&&{marginTop:8})),Rt=d.forwardRef(function(s,r){const i=ae({props:s,name:"MuiListItemAvatar"}),{className:c}=i,a=ie(i,It),o=d.useContext(be),n=M({},i,{alignItems:o.alignItems}),u=kt(n);return t.jsx(Mt,M({className:le(u.root,c),ownerState:n,ref:r},a))}),Et=Rt;function Dt(e){return ne("MuiSwitch",e)}const At=re("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]),C=At,Ot=["className","color","edge","size","sx"],Pt=e=>{const{classes:s,edge:r,size:i,color:c,checked:a,disabled:o}=e,n={root:["root",r&&`edge${$(r)}`,`size${$(i)}`],switchBase:["switchBase",`color${$(c)}`,a&&"checked",o&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},u=ce(n,Dt,s);return M({},s,u)},Lt=D("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,s)=>{const{ownerState:r}=e;return[s.root,r.edge&&s[`edge${$(r.edge)}`],s[`size${$(r.size)}`]]}})(({ownerState:e})=>M({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},e.edge==="start"&&{marginLeft:-8},e.edge==="end"&&{marginRight:-8},e.size==="small"&&{width:40,height:24,padding:7,[`& .${C.thumb}`]:{width:16,height:16},[`& .${C.switchBase}`]:{padding:4,[`&.${C.checked}`]:{transform:"translateX(16px)"}}})),$t=D(gt,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,s)=>{const{ownerState:r}=e;return[s.switchBase,{[`& .${C.input}`]:s.input},r.color!=="default"&&s[`color${$(r.color)}`]]}})(({theme:e})=>({position:"absolute",top:0,left:0,zIndex:1,color:e.vars?e.vars.palette.Switch.defaultColor:`${e.palette.mode==="light"?e.palette.common.white:e.palette.grey[300]}`,transition:e.transitions.create(["left","transform"],{duration:e.transitions.duration.shortest}),[`&.${C.checked}`]:{transform:"translateX(20px)"},[`&.${C.disabled}`]:{color:e.vars?e.vars.palette.Switch.defaultDisabledColor:`${e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]}`},[`&.${C.checked} + .${C.track}`]:{opacity:.5},[`&.${C.disabled} + .${C.track}`]:{opacity:e.vars?e.vars.opacity.switchTrackDisabled:`${e.palette.mode==="light"?.12:.2}`},[`& .${C.input}`]:{left:"-100%",width:"300%"}}),({theme:e,ownerState:s})=>M({"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:K(e.palette.action.active,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},s.color!=="default"&&{[`&.${C.checked}`]:{color:(e.vars||e).palette[s.color].main,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[s.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:K(e.palette[s.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${C.disabled}`]:{color:e.vars?e.vars.palette.Switch[`${s.color}DisabledColor`]:`${e.palette.mode==="light"?we(e.palette[s.color].main,.62):ve(e.palette[s.color].main,.55)}`}},[`&.${C.checked} + .${C.track}`]:{backgroundColor:(e.vars||e).palette[s.color].main}})),zt=D("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,s)=>s.track})(({theme:e})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:e.transitions.create(["opacity","background-color"],{duration:e.transitions.duration.shortest}),backgroundColor:e.vars?e.vars.palette.common.onBackground:`${e.palette.mode==="light"?e.palette.common.black:e.palette.common.white}`,opacity:e.vars?e.vars.opacity.switchTrack:`${e.palette.mode==="light"?.38:.3}`})),Bt=D("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,s)=>s.thumb})(({theme:e})=>({boxShadow:(e.vars||e).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),Nt=d.forwardRef(function(s,r){const i=ae({props:s,name:"MuiSwitch"}),{className:c,color:a="primary",edge:o=!1,size:n="medium",sx:u}=i,h=ie(i,Ot),S=M({},i,{color:a,edge:o,size:n}),l=Pt(S),b=t.jsx(Bt,{className:l.thumb,ownerState:S});return t.jsxs(Lt,{className:le(l.root,c),sx:u,ownerState:S,children:[t.jsx($t,M({type:"checkbox",icon:b,checkedIcon:b,ref:r,ownerState:S},h,{classes:M({},l,{root:l.switchBase})})),t.jsx(zt,{className:l.track,ownerState:S})]})}),Tt=Nt;function Ft(e){const[s,r]=d.useState((e==null?void 0:e.defaultDense)||!1),[i,c]=d.useState((e==null?void 0:e.defaultOrderBy)||"name"),[a,o]=d.useState((e==null?void 0:e.defaultOrder)||"asc"),[n,u]=d.useState((e==null?void 0:e.defaultCurrentPage)||0),[h,S]=d.useState((e==null?void 0:e.defaultRowsPerPage)||5),[l,b]=d.useState((e==null?void 0:e.defaultSelected)||[]);return{dense:s,order:a,page:n,setPage:u,orderBy:i,rowsPerPage:h,selected:l,setSelected:b,resetSelected:()=>{b((e==null?void 0:e.defaultSelected)||[])},onSelectRow:m=>{const w=l.indexOf(m);let v=[];w===-1?v=v.concat(l,m):w===0?v=v.concat(l.slice(1)):w===l.length-1?v=v.concat(l.slice(0,-1)):w>0&&(v=v.concat(l.slice(0,w),l.slice(w+1))),b(v)},onSelectAllRows:(m,w)=>{if(m){b(w);return}b([])},onSort:m=>{m!==""&&(o(i===m&&a==="asc"?"desc":"asc"),c(m))},onChangePage:(m,w)=>{u(w)},onChangeDense:m=>{r(m.target.checked)},onChangeRowsPerPage:m=>{S(parseInt(m.target.value,10)),u(0)}}}const Ht=G(t.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined"),_t=G(t.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 12H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Message"),te=G(t.jsx("path",{d:"M2 17h20v2H2v-2zm1.15-4.05L4 11.47l.85 1.48 1.3-.75-.85-1.48H7v-1.5H5.3l.85-1.47L4.85 7 4 8.47 3.15 7l-1.3.75.85 1.47H1v1.5h1.7l-.85 1.48 1.3.75zm6.7-.75 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H15v-1.5h-1.7l.85-1.47-1.3-.75L12 8.47 11.15 7l-1.3.75.85 1.47H9v1.5h1.7l-.85 1.48zM23 9.22h-1.7l.85-1.47-1.3-.75L20 8.47 19.15 7l-1.3.75.85 1.47H17v1.5h1.7l-.85 1.48 1.3.75.85-1.48.85 1.48 1.3-.75-.85-1.48H23v-1.5z"}),"PasswordTwoTone"),Vt=(e,s={})=>{const[r,i]=d.useState(null);return{...q([z.CARDS_COMMERCE_LIST],()=>Xe(e),{staleTime:6e4,refetchOnMount:"always",onError:a=>{const o=T(a,"No se puede obtener la lista de tarjetas. Intente nuevamente o reporte a sistemas");i(o)},...s}),error:r||null}},Wt=(e,s={})=>{const[r,i]=d.useState(null);return{...q([z.CARD_INFO,e],({signal:a})=>Ye(e,a),{staleTime:6e4,onError:a=>{const o=T(a,"No se puede obtener la informacion de la tarjeta. Intente nuevamente o reporte a sistemas");i(o)},refetchOnWindowFocus:!1,...s}),error:r||null}},Gt=(e={})=>{const{enqueueSnackbar:s}=ye(),[r,i]=d.useState(null),c=de();return{...Ie(Ze,{onSuccess:o=>{i(null),c.refetchQueries([z.CARD_INFO,o==null?void 0:o.id]),s(o!=null&&o.cardON?"Se encendió la tarjeta con éxito":"Se apagó la tarjeta con éxito",{variant:"success",autoHideDuration:5e3})},onError:o=>{const n=T(o,"No se puede realizar esta operacion en este momento. Intente nuevamente o reporte a sistemas");s(n,{variant:ke(o),autoHideDuration:5e3}),i(n)},...e}),error:r||null}};function qt(){const[e,s]=d.useState(!1),[r,i]=d.useState(!1),c=p(n=>n.mainCard),a=p(n=>n.setSelectedCards),o=()=>{a([])};return t.jsxs(t.Fragment,{children:[t.jsx(ue,{sx:n=>({position:"sticky",borderRadius:1,py:4,top:0,boxShadow:n.customShadows.z8,backgroundColor:n.palette.info.lighter,color:"white"}),children:t.jsxs(x,{flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",sx:{width:1},gap:2,alignItems:"center",children:[t.jsxs(x,{flexDirection:"row",alignItems:"center",gap:1,children:[t.jsx(Q,{"aria-label":"close",size:"small",onClick:o,children:t.jsx(Ht,{width:20,height:20,fontSize:"inherit",color:"primary"})}),t.jsx(j,{variant:"subtitle2",color:"info.main",children:"Acciones:"})]}),t.jsxs(x,{flexDirection:"row",gap:2,justifyContent:"space-between",children:[t.jsx(N,{startIcon:t.jsx(_t,{}),variant:"outlined",color:"info",onClick:()=>{s(!0),i(!1)},children:"Mensaje"}),c&&t.jsx(N,{startIcon:t.jsx(Ke,{}),variant:"outlined",color:"info",onClick:()=>{i(!0),s(!1)},children:"Fondear"})]})]})}),t.jsx(Je,{isOpenCompose:e,onCloseCompose:()=>s(!1)}),t.jsx(lt,{open:r,setOpen:i,isFundingCard:!0})]})}function Qt(){const e=p(r=>r.card),{assignUser:s}=e;return t.jsxs(ht,{sx:{p:3},children:[t.jsx(j,{variant:"h6",gutterBottom:!0,children:"Asignado a:"}),t.jsxs(x,{spacing:3,children:[t.jsxs(x,{justifyContent:"space-between",gap:1,children:[t.jsx(j,{variant:"subtitle2",sx:{color:"text.secondary"},textTransform:"capitalize",children:"Nombre"}),t.jsx(j,{variant:"body2",children:s==null?void 0:s.name})]}),(s==null?void 0:s.phone)&&t.jsxs(x,{justifyContent:"space-between",gap:1,children:[t.jsx(j,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Telefono"}),t.jsx(j,{variant:"body2",children:(s==null?void 0:s.phone)||"-"})]}),t.jsxs(x,{justifyContent:"space-between",gap:1,children:[t.jsx(j,{variant:"subtitle2",sx:{color:"text.secondary"},children:"Correo"}),t.jsx(j,{variant:"body2",children:s==null?void 0:s.email})]})]})]})}const Ut=D(e=>t.jsx(Tt,{focusVisibleClassName:".Mui-focusVisible",disableRipple:!0,...e}))(({theme:e})=>({width:42,height:26,padding:0,"& .MuiSwitch-switchBase":{padding:0,margin:2,transitionDuration:"300ms","&.Mui-checked":{transform:"translateX(16px)",color:"#fff","& + .MuiSwitch-track":{backgroundColor:e.palette.mode==="dark"?"#2ECA45":"#65C466",opacity:1,border:0},"&.Mui-disabled + .MuiSwitch-track":{opacity:.5}},"&.Mui-focusVisible .MuiSwitch-thumb":{color:"#33cf4d",border:"6px solid #fff"},"&.Mui-disabled .MuiSwitch-thumb":{color:e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[600]},"&.Mui-disabled + .MuiSwitch-track":{opacity:e.palette.mode==="light"?.7:.3}},"& .MuiSwitch-thumb":{boxSizing:"border-box",width:22,height:22},"& .MuiSwitch-track":{borderRadius:26/2,backgroundColor:e.palette.error.main,opacity:1,transition:e.transitions.create(["background-color"],{duration:500})}}));function Xt({card:e}){const[s,r]=d.useState(!1),[i,c]=d.useState(!1),{mutate:a,isLoading:o}=Gt(),n=Ct([z.CARD_INFO,e==null?void 0:e.id])===1;d.useEffect(()=>{r(!1),c(!1)},[e==null?void 0:e.id]);const u=h=>{a({...e,cardON:!(e!=null&&e.cardON)})};return t.jsx(ue,{sx:h=>({borderRadius:1,position:"relative",zIndex:1,backgroundColor:h.palette.primary.light,color:"white",minHeight:"auto!important",height:{xs:1,sm:"auto"},py:{xs:0,sm:2}}),children:t.jsxs(x,{flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",sx:{width:1},gap:2,alignItems:"center",children:[t.jsxs(x,{flexDirection:"column",spacing:0,alignItems:{xs:"center",md:"start"},children:[t.jsxs(x,{flexDirection:"row",gap:1,alignItems:"center",children:[t.jsx(j,{variant:"subtitle2",children:"Disponible"}),o||n?t.jsx(Me,{size:30,containerProps:{display:"flex",ml:1}}):t.jsx(Ut,{disabled:o,color:e!=null&&e.cardON?"success":"error",checked:(e==null?void 0:e.cardON)||!1,onChange:u,sx:{m:1},inputProps:{"aria-label":"controlled"}})]}),t.jsxs(x,{direction:"row",spacing:2,alignItems:"center",children:[t.jsx(j,{variant:"h3",children:e==null?void 0:e.balanceFormatted}),t.jsx(j,{variant:"caption",children:"MXN"})]})]}),t.jsxs(x,{justifyContent:"flex-end",spacing:1,alignItems:{xs:"center",md:"end"},children:[t.jsx(xt,{card:e,color:"#fff"}),t.jsxs(x,{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-end",gap:1,divider:t.jsx(Re,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),children:[t.jsx(j,{color:"#fff",variant:"subtitle2",children:e==null?void 0:e.expiration}),t.jsx(N,{startIcon:s?t.jsx(se,{handleFinish:()=>r(!1)}):t.jsx(te,{}),color:"inherit",onClick:()=>r(h=>!h),children:s?`${e==null?void 0:e.cvv}`:"CVV"}),t.jsx(N,{startIcon:i?t.jsx(se,{handleFinish:()=>c(!1)}):t.jsx(te,{}),color:"inherit",onClick:()=>c(h=>!h),children:i?e==null?void 0:e.nip:"NIP"})]})]})]})})}function se({handleFinish:e,duration:s=10}){const[r,i]=d.useState(100);return d.useEffect(()=>{let c;return r>0?c=setInterval(()=>{i(a=>a-100/s)},1e3):e(),()=>clearInterval(c)},[r,s]),t.jsxs(k,{sx:{position:"relative",display:"inline-flex",minWidth:60},children:[t.jsx(Ee,{variant:"determinate",value:r}),t.jsx(k,{sx:{top:0,left:0,bottom:0,right:20,position:"absolute",display:"flex",alignItems:"center",justifyContent:"center"},children:t.jsx(j,{variant:"caption",component:"div",color:"text.primary",children:`${Math.ceil(s*r/100)} `})})]})}function Yt(){const e=p(u=>u.card),s=p(u=>u.addInfoCard),{data:r,isLoading:i,isError:c,error:a,refetch:o}=Wt(e==null?void 0:e.id,{enabled:!!(e!=null&&e.id)}),{isCollapse:n}=De();return d.useEffect(()=>{r&&s(r)},[r]),t.jsxs(x,{sx:u=>({pl:{xs:0,lg:2},overflow:"hidden",flexDirection:"column",flexGrow:1}),children:[c&&!r&&!i&&t.jsx(U,{sx:{justifyContent:"flex-start"},errorMessage:a,handleButton:o}),e&&i&&t.jsx(he,{}),e&&r&&t.jsxs(t.Fragment,{children:[t.jsx(Xt,{card:e}),t.jsx(et,{}),t.jsx(xe,{children:t.jsx(x,{pt:2,pb:4,px:2,children:t.jsxs(V,{container:!0,spacing:3,sx:{p:0,pb:3},children:[t.jsx(V,{item:!0,xs:12,sm:12,md:12,lg:n?4:12,xl:4,children:t.jsxs(x,{spacing:3,children:[t.jsx(tt,{}),t.jsx(st,{}),t.jsx(Qt,{})]})}),t.jsx(V,{item:!0,xs:12,sm:12,md:12,lg:n?8:12,xl:8,children:t.jsx(ot,{})})]})})})]}),!e&&t.jsxs(x,{spacing:3,sx:{height:"100%",width:"100%"},children:[t.jsx(Ae,{variant:"filled",severity:"info",children:"Debe seleccionar una tarjeta para ver sus detalles!"}),t.jsx(x,{alignItems:"center",children:t.jsx(ut,{sx:{width:"30%"}})})]})]})}const Zt=(e={})=>{const[s,r]=d.useState(null),i=p(o=>o.setCardTypeSelected),c=p(o=>o.cardTypeSelected);return{...q([z.PAYMENT_PROCESSORS],nt,{staleTime:6e4,refetchOnMount:"always",onError:o=>{const n=T(o,"No se puede obtener la lista de los tipos de tarjetas. Intente nuevamente o reporte a sistemas");r(n)},onSuccess:o=>{const n=(o==null?void 0:o.find(u=>(u==null?void 0:u.id)==="2"))||Array.isArray(o)&&(o==null?void 0:o.length)>0&&o[0]||null;n&&!c&&i(n==null?void 0:n.id)},...e}),error:s||null}},Kt=D(Oe)(({theme:e})=>({padding:e.spacing(1.5,3),borderRadius:"8px!important",width:1,justifyContent:"center",mb:1}));pe.propTypes={isOpenSidebar:I.bool,selected:I.bool,card:I.object,onSelectRow:I.func,onOpenDetails:I.func};function pe({isOpenSidebar:e,card:s,selected:r,onSelectRow:i,onOpenDetails:c}){const{id:a,cardUserNumber:o,cardType:n}=s,u=p(g=>g.setCard),h=p(g=>g.card),S=p(g=>g.addInfoCard),l=p(g=>g.setSelectedMainCard),b=p(g=>g.isMainCardSelected),y=Pe(),B=(y==null?void 0:y.permissions)??[],f=a===(h==null?void 0:h.id)&&h?(h==null?void 0:h.cardON)===!0?"online":"offline":"invisible",A=a===(h==null?void 0:h.id),O=g=>{var m;!((m=g.target)==null?void 0:m.type)&&!A&&(u(s),b&&l(!1),S({movements:[],expenses:"$0.00",income:"$0.00",balanceMovements:"$0.00"}),c())};return t.jsx(Le,{title:e?"":o,arrow:!0,placement:"right",children:t.jsx(jt,{sx:{mb:1,borderRadius:1,"& :hover":{color:"text.primary"}},secondaryAction:e&&B.includes($e.COMMERCE_CARDS)&&t.jsx(ft,{edge:"start",checked:r,onClick:i,inputProps:{"aria-labelledby":a}}),disablePadding:!0,children:t.jsxs(Kt,{onClick:O,sx:{...A&&{bgcolor:"secondary.light",color:"black","& :hover":{color:"text.primary"}},"& :hover":{color:"text.primary"},width:1},children:[t.jsx(Et,{sx:{m:0},children:t.jsxs(k,{sx:{position:"relative"},children:[t.jsx(ze,{sx:g=>({width:30,height:30,m:0,color:g.palette.primary.contrastText,backgroundColor:g.palette.primary.main}),children:n==="Carnet"?t.jsx(pt,{sx:{width:20},color:"white"}):t.jsx(mt,{sx:{width:20}})}),t.jsx(Be,{status:f,sx:{right:0,bottom:0,position:"absolute"}})]})}),e&&t.jsx(t.Fragment,{children:t.jsx(x,{sx:{width:1},px:1,children:t.jsx(j,{noWrap:!0,variant:"subtitle2",children:o})})})]})})})}const Jt=d.memo(pe);function es({isOpenSideBar:e}){return t.jsxs(x,{spacing:1,direction:"row",alignItems:"center",sx:{px:3,py:1.5},children:[t.jsx(_,{variant:"circular",width:48,height:48}),e&&t.jsxs(x,{spacing:.5,sx:{flexGrow:1},children:[t.jsx(_,{variant:"text",sx:{width:.5,height:16}}),t.jsx(_,{variant:"text",sx:{width:.25,height:12}})]})]})}me.propTypes={cards:I.array,isOpenSidebar:I.bool,onOpenDetails:I.func,isLoading:I.bool,sx:I.object};function me({cards:e,isOpenSidebar:s,isLoading:r,sx:i,onOpenDetails:c,...a}){const o=p(l=>l.setSelectedCards),n=p(l=>l.selectedCards,St),{selected:u,onSelectRow:h,resetSelected:S}=Ft();return d.useEffect(()=>{o(u)},[u]),d.useEffect(()=>{(n==null?void 0:n.length)===0&&S()},[n]),t.jsx(Ne,{disablePadding:!0,sx:i,...a,children:(r?[...Array(12)]:e).map((l,b)=>l!=null&&l.id?t.jsx(Jt,{isOpenSidebar:s,card:l,selected:n==null?void 0:n.some(y=>(y==null?void 0:y.id)===(l==null?void 0:l.id)),onSelectRow:()=>h(l),onOpenDetails:c},l==null?void 0:l.id):t.jsx(es,{isOpenSideBar:s},b))})}function ts({cardTypes:e,isLoading:s,isError:r,refetch:i}){const c=p(n=>n.setCardTypeSelected),a=p(n=>n.cardTypeSelected),o=n=>{c(n==null?void 0:n.id)};return t.jsxs(k,{display:"flex",children:[s&&t.jsx(he,{}),r&&!s&&t.jsx(U,{errorMessage:"No existen tipos de tarjetas para este comercio",handleButton:i}),!s&&(e==null?void 0:e.map(n=>{const u=a===(n==null?void 0:n.id);return t.jsx(Te.div,{onClick:()=>o(n),whileHover:{scale:1.03},whileTap:{scale:.8},children:t.jsx(ct,{variant:u?"ghost":"filled",color:Fe((n==null?void 0:n.name)||"inherit"),sx:{textTransform:"uppercase",marginRight:1,marginBottom:2,cursor:"pointer",border:u?3:0,borderColor:u?h=>h.palette.primary.main:"inherit"},children:n==null?void 0:n.name})},n==null?void 0:n.id)}))]})}const ss=D(e=>t.jsx(Q,{disableRipple:!0,...e}))(({theme:e})=>({left:0,zIndex:9,width:32,height:32,position:"absolute",top:e.spacing(21),borderRadius:"0 12px 12px 0",color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,boxShadow:e.customShadows.primary,"&:hover":{backgroundColor:e.palette.primary.darker}})),W=300,oe=96;function os(){const e=p(R=>{var E;return(E=R.card)==null?void 0:E.id}),s=p(R=>R.cardTypeSelected),{data:r,isLoading:i,isError:c,refetch:a}=Zt(),{data:o,isLoading:n,isRefetching:u,isError:h,error:S,refetch:l,isSuccess:b}=Vt(s,{enabled:!1}),y=n||u,B=He(),[f,A]=d.useState(!0),[O,g]=d.useState(""),[P,m]=d.useState(o||[]),[w,v]=d.useState(!1),L=_e("up","md"),ge=O&&w,X=L&&!f;d.useEffect(()=>{s&&l()},[s]),d.useEffect(()=>{if(!L)return F()},[L,e]),d.useEffect(()=>{if(!f)return v(!1)},[f]),d.useEffect(()=>{o&&m(o)},[o]);const F=()=>{A(!1)},Y=()=>{A(R=>(R&&(g(""),m(o)),!R))},fe=()=>{v(!1)},Ce=async R=>{try{const{value:E}=R.target;if(g(E),E){const Se=(o==null?void 0:o.filter(H=>(H==null?void 0:H.cardNumber.toLowerCase().indexOf(E.toLowerCase()))!==-1))||[];m(Se)}else m(o)}catch(E){console.error(E)}},je=()=>{v(!0)},Z=t.jsx(xe,{sx:{height:.98},children:t.jsxs(x,{px:f?1:0,children:[f&&t.jsx(ts,{cardTypes:r,isLoading:i,isError:c,refetch:a}),!s&&f&&!i&&t.jsx(ee,{pt:2.5,message:"Seleccione un tipo de tarjeta para obtener la lista de tarjetas"}),s&&!i&&t.jsxs(t.Fragment,{children:[t.jsx(rt,{openSidebar:f}),t.jsx(k,{sx:{p:2,px:L?0:2},children:t.jsxs(x,{direction:"row",justifyContent:f?"flex-end":"center",alignItems:"center",spacing:2,children:[!X&&t.jsx(at,{onClickAway:fe,children:t.jsx(dt,{fullWidth:!0,size:"small",value:O,onFocus:je,onChange:Ce,placeholder:"Buscar Tarjetas...",InputProps:{startAdornment:t.jsx(bt,{position:"start",children:t.jsx(wt,{sx:{color:"text.disabled",width:20,height:20}})})}})}),t.jsx(x,{direction:"row",alignItems:"center",justifyContent:"center",children:t.jsx(Q,{size:"small",sx:{alignItems:"center",justifyContent:"center",boxSizing:"boder-box",display:"inline-flex",outline:"0px",margin:"0px",cursor:"pointer",userSelect:"none",textDecoration:"none",textAlign:"center",borderRadius:"50%",overflow:"visible",color:"rgb(145, 158, 171)",fontSize:"1.125rem",padding:"4px",zIndex:"1500",border:"1px dashed rgba(145, 158, 171, 0.24)",backdropFilter:"blur(6px)",lineHeight:0,...!f&&{transform:"rotate(180deg)"}},onClick:Y,children:ns})})]})}),h&&f&&!o&&!y&&t.jsx(U,{errorMessage:S,handleButton:l}),o&&f&&(o==null?void 0:o.length)===0&&!y&&t.jsx(ee,{pt:2.5,message:"No hay tarjetas activas en este tipo de tarjeta"}),t.jsx(me,{isOpenSidebar:f,cards:P||[],isLoading:y,onOpenDetails:F}),ge&&(P==null?void 0:P.length)===0&&(o==null?void 0:o.length)>0&&t.jsx(Ve,{sx:{p:1,display:"flex",flexDirection:"column",alignItems:"center"},searchQuery:O})]})]})});return t.jsxs(t.Fragment,{children:[!L&&t.jsx(ss,{onClick:Y,children:t.jsx(vt,{sx:{width:16,height:16}})}),L?t.jsx(J,{open:f,variant:"persistent",PaperProps:{sx:{height:1,borderRightStyle:"none",bgcolor:"background.default"}},sx:{height:1,width:W,transition:B.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",backgroundColor:"transparent!important",width:W},...X&&{width:oe,"& .MuiDrawer-paper":{width:oe,backgroundColor:"transparent!important",position:"static",transform:"none !important",visibility:"visible !important"}}},children:Z}):t.jsx(J,{ModalProps:{keepMounted:!0},open:f,onClose:F,sx:{height:1,"& .MuiDrawer-paper":{width:W}},children:Z})]})}const ns=t.jsx("svg",{width:"24",height:"24",xmlns:"http://www.w3.org/2000/svg",children:t.jsxs("g",{fill:"none",fillRule:"evenodd",children:[t.jsx("path",{d:"M0 0h24v24H0z"}),t.jsxs("g",{fill:"currentColor",fillRule:"nonzero",children:[t.jsx("path",{d:"M14.3283 11.4343 18.5126 7.25c.4142-.4142.4142-1.0858 0-1.5-.4142-.4142-1.0858-.4142-1.5 0l-5.543 5.5429c-.3904.3905-.3904 1.0237 0 1.4142l5.543 5.5429c.4142.4142 1.0858.4142 1.5 0 .4142-.4142.4142-1.0858 0-1.5l-4.1843-4.1843a.8.8 0 0 1 0-1.1314Z",opacity:".48"}),t.jsx("path",{d:"M8.3283 11.4343 12.5126 7.25c.4142-.4142.4142-1.0858 0-1.5-.4142-.4142-1.0858-.4142-1.5 0l-5.543 5.5429c-.3904.3905-.3904 1.0237 0 1.4142l5.543 5.5429c.4142.4142 1.0858.4142 1.5 0 .4142-.4142.4142-1.0858 0-1.5l-4.1843-4.1843a.8.8 0 0 1 0-1.1314Z"})]})]})});function Bs(){const e=p(a=>a==null?void 0:a.selectedCards),s=p(a=>a.isMainCardSelected),r=p(a=>a.setSelectedMainCard),i=p(a=>a.resetCard),c=de();return d.useEffect(()=>()=>{const a=Object.values(z);c.cancelQueries(a)},[]),d.useEffect(()=>{s&&(i(),r(!1))},[s]),t.jsxs(We,{title:"Lista de Tarjetas",children:[t.jsxs(k,{display:"flex",overflow:"hidden",sx:{height:"100vH",maxHeight:"100%",flexDirection:"column"},children:[t.jsx(k,{px:1,children:t.jsx(Ue,{name:"Lista de Tarjetas",links:[{name:"Inicio",href:Ge.root},{name:"Administracion",href:qe.cards},{name:Qe.cards.name}]})}),t.jsx(x,{flexDirection:"row",sx:{display:"flex"},children:t.jsx(x,{sx:a=>({overflow:"hidden",flexDirection:"column",flexGrow:1,pb:2}),children:(e==null?void 0:e.length)>0&&t.jsx(qt,{})})}),t.jsxs(k,{display:"flex",overflow:"hidden",sx:{flex:"1 1 0%"},children:[t.jsx(k,{display:"block",width:1,position:"absolute"}),t.jsx(os,{}),t.jsx(Yt,{})]})]}),t.jsx(it,{})]})}export{Bs as default};
