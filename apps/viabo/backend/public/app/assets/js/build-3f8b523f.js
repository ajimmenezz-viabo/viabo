import{a6 as X,aU as K,r as i,j as e,T as n,B as Q,S as x,m as M,C as g,_ as E,O as y}from"./index-f4730562.js";import{C as Y}from"./build-c7ce8ef2.js";import{f as L}from"./build-1099c20e.js";import{u as O}from"./build-ea4fd1cf.js";import{a as q}from"./build-de29ea3a.js";import"./build-e75f6e8d.js";import{L as H}from"./build-f3326ad8.js";import{T as J,a as C}from"./build-74818923.js";import"./build-4c648b6f.js";import"./build-4c9e4bdc.js";import"./build-c0513ca7.js";import"./build-aef0dee4.js";import"./build-c573209c.js";import"./build-1d4535c6.js";import"./build-b04fd233.js";import"./build-835e1d30.js";import"./build-d4068e4b.js";import"./build-94ba8ff5.js";import"./build-25380d02.js";import"./build-bee6630b.js";import"./build-2b64884d.js";import"./build-0e651f57.js";import"./build-b8356536.js";import"./build-a28a65d2.js";import"./build-0fd5ede1.js";import"./build-1c8d8107.js";import"./build-d07194a5.js";import"./build-c035a370.js";import"./build-dc931114.js";import"./build-a6ffd79e.js";import"./build-80f93dbc.js";import"./build-44f7109b.js";import"./build-7a20d980.js";import"./build-8f97cf3d.js";import"./build-4de65bab.js";import"./build-3fecaa82.js";import"./build-6a3bcf29.js";import"./build-bc7be139.js";import"./build-606e80d3.js";import"./build-be2a465e.js";import"./build-f505b767.js";import"./build-aad0e5f9.js";const S=g(i.lazy(()=>E(()=>import("./build-03914cbe.js"),["assets/js/build-03914cbe.js","assets/js/index-f4730562.js","assets/css/build-a4b698a0.css","assets/js/build-b8356536.js","assets/js/build-94ba8ff5.js","assets/js/build-ea4fd1cf.js","assets/js/build-4c9e4bdc.js","assets/js/build-c0513ca7.js","assets/js/build-aef0dee4.js","assets/js/build-4c648b6f.js","assets/js/build-c573209c.js","assets/js/build-1d4535c6.js","assets/js/build-b04fd233.js","assets/js/build-835e1d30.js","assets/js/build-d4068e4b.js","assets/js/build-25380d02.js","assets/js/build-bee6630b.js","assets/js/build-1099c20e.js","assets/js/build-f3326ad8.js","assets/js/build-a6ffd79e.js","assets/js/build-1c8d8107.js","assets/js/build-2b64884d.js","assets/js/build-0e651f57.js","assets/js/build-a28a65d2.js","assets/js/build-0fd5ede1.js","assets/js/build-d07194a5.js","assets/js/build-c035a370.js","assets/js/build-dc931114.js","assets/js/build-80f93dbc.js","assets/js/build-44f7109b.js","assets/js/build-7a20d980.js","assets/js/build-8f97cf3d.js","assets/js/build-4de65bab.js","assets/js/build-3fecaa82.js","assets/js/build-de29ea3a.js","assets/js/build-f505b767.js","assets/js/build-aad0e5f9.js","assets/js/build-e75f6e8d.js","assets/js/build-6a3bcf29.js","assets/js/build-bc7be139.js","assets/js/build-606e80d3.js","assets/js/build-be2a465e.js","assets/js/build-848b46d4.js"]))),W=g(i.lazy(()=>E(()=>import("./build-7897a829.js"),["assets/js/build-7897a829.js","assets/js/index-f4730562.js","assets/css/build-a4b698a0.css","assets/js/build-7a20d980.js","assets/js/build-1099c20e.js","assets/js/build-4c648b6f.js","assets/js/build-c7ce8ef2.js","assets/js/build-44f7109b.js","assets/js/build-8f97cf3d.js","assets/js/build-aef0dee4.js","assets/js/build-c573209c.js","assets/js/build-1d4535c6.js","assets/js/build-4de65bab.js","assets/js/build-3fecaa82.js","assets/js/build-a28a65d2.js","assets/js/build-0fd5ede1.js","assets/js/build-1c8d8107.js","assets/js/build-2b64884d.js","assets/js/build-d07194a5.js","assets/js/build-c035a370.js","assets/js/build-dc931114.js","assets/js/build-a6ffd79e.js","assets/js/build-a2ca0403.js"]))),Z=g(i.lazy(()=>E(()=>import("./build-3414d4e3.js"),["assets/js/build-3414d4e3.js","assets/js/index-f4730562.js","assets/css/build-a4b698a0.css","assets/js/build-b8356536.js","assets/js/build-94ba8ff5.js","assets/js/build-f3326ad8.js","assets/js/build-a6ffd79e.js","assets/js/build-1c8d8107.js","assets/js/build-2b64884d.js","assets/js/build-4c648b6f.js","assets/js/build-25380d02.js","assets/js/build-bee6630b.js","assets/js/build-1099c20e.js","assets/js/build-1d4535c6.js","assets/js/build-bc7be139.js","assets/js/build-c035a370.js","assets/js/build-dc931114.js","assets/js/build-cece7d78.js","assets/js/build-848b46d4.js"])));function $({open:P,setOpen:A,isFundingCard:s}){var w;const f=X(),t=O(o=>o.card),r=O(o=>o.mainCard),a=K([Y.CARDS_COMMERCE_LIST,t==null?void 0:t.cardTypeId])||[],[h,c]=i.useState(0),u=i.useMemo(()=>s?r==null?void 0:r.balance:t==null?void 0:t.balance,[r==null?void 0:r.balance,t==null?void 0:t.balance]),[m,z]=i.useState("1"),[d,T]=i.useState(!1),[G,v]=i.useState(null),[R,B]=i.useState(!1),p=i.useMemo(()=>(parseFloat(u)-h).toFixed(2)<0,[h,u]),_=i.useMemo(()=>{var o;return((o=f==null?void 0:f.profile)==null?void 0:o.toLowerCase())==="representante legal"},[f]),b=i.useMemo(()=>a==null?void 0:a.filter(o=>o.id!==(t==null?void 0:t.id)),[a,t==null?void 0:t.id]),D=()=>{A(!1),c(0),T(!1),v(null),B(!1)},V=(o,l)=>{l&&z(l)};i.useEffect(()=>{c(0)},[m]);const j=o=>{const l=m==="2";let I=s?r==null?void 0:r.id:t==null?void 0:t.id;l&&(I=t==null?void 0:t.id),v({cardOriginId:I,isGlobal:l,transactions:l?o:(o==null?void 0:o.transactions)||[],concept:o==null?void 0:o.concept,balance:u,currentBalance:h}),T(!0)},k=()=>{T(!1)},N=e.jsx(e.Fragment,{children:s?e.jsx(n,{variant:"h6",children:"Fondear"}):e.jsxs(Q,{children:[e.jsxs(x,{spacing:1,alignItems:"center",direction:"row",mb:.5,children:[e.jsx(n,{variant:"subtitle2",children:"Origen: "}),e.jsxs(n,{variant:"subtitle2",children:[t==null?void 0:t.cardNumberMoreDigits," "]})]}),e.jsx(H,{color:"info",children:(w=t==null?void 0:t.assignUser)==null?void 0:w.name})]})}),U=e.jsxs(e.Fragment,{children:[!s&&_&&e.jsx(x,{alignItems:"flex-end",sx:{py:1,px:3},children:e.jsxs(J,{size:"small",color:"primary",value:m,exclusive:!0,onChange:V,"aria-label":"Platform",disabled:R,children:[e.jsx(C,{value:"1",children:"Tarjetas"}),e.jsx(C,{value:"2",children:"Global"})]})}),e.jsxs(x,{flexDirection:"column",alignItems:"center",justifyContent:"space-between",spacing:0,px:3,pt:s?2:1,children:[e.jsx(n,{variant:"subtitle1",children:"Saldo"}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(n,{variant:"h3",color:"success.main",children:L(u)}),e.jsx(n,{variant:"caption",color:"success.main",children:"MXN"})]}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(n,{variant:"subtitle1",color:"error",children:["- ",L(h)]}),e.jsx(n,{variant:"caption",color:"error",children:"MXN"})]}),p&&e.jsx(n,{variant:"caption",color:"warning.main",textAlign:"center",children:"Saldo insuficiente para realizar la(s) operacion(es)"})]}),s&&e.jsx(S,{cards:s?a:b,setCurrentBalance:c,insufficient:p,isBinCard:s,onSuccess:j}),!s&&_&&e.jsxs(e.Fragment,{children:[m==="1"&&e.jsx(S,{cards:s?a:b,setCurrentBalance:c,insufficient:p,isBinCard:s,onSuccess:j}),m==="2"&&e.jsx(Z,{mainCard:r,setCurrentBalance:c,insufficient:p,onSuccess:j})]}),!s&&!_&&e.jsx(S,{cards:s?a:b,setCurrentBalance:c,insufficient:p,isBinCard:s,onSuccess:j})]});return e.jsxs(q,{open:P,handleClose:D,titleElement:N,children:[e.jsx(M.div,{initial:{opacity:1},animate:{opacity:d?0:1},transition:{duration:.5},style:{display:d?"none":"flex",flex:1,overflow:"hidden",flexDirection:"column"},children:U}),e.jsx(M.div,{initial:{opacity:0},animate:{opacity:d?1:0},transition:{duration:.5},style:{display:d?"flex":"none",flexDirection:"column",flex:1,overflow:"hidden"},children:e.jsx(W,{data:G,onBack:k,setTransactionLoading:B,transactionLoading:R,onClose:D})})]})}$.propTypes={isFundingCard:y.bool,open:y.bool,setOpen:y.func};export{$ as default};
