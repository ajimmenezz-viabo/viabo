import{q as d,g as m,a as g,L as y,_ as u,G as T,S,R as _,E as P,l as h}from"./index-s6HyWPbs.js";import{r as n,e as x,a9 as k,i as s,S as p,T as j,P as c}from"./vendor-FSZoD0Ty.js";const C={CAUSES_BY_PROFILE:"new-ticket-causes-list-by-profile"},w=t=>(t==null?void 0:t.map(e=>{var o,r;return{id:e==null?void 0:e.id,cause:e==null?void 0:e.name,color:((o=e==null?void 0:e.color)==null?void 0:o.trim())===""?null:(r=e==null?void 0:e.color)==null?void 0:r.trim()}}))||[],I=async t=>{const{data:e}=await d.post("/api/tickets/ticket/new",t);return e},L=async()=>{const{data:t}=await d.get("/api/tickets/applicant-profile/support-reasons");return w(t)},R=(t={})=>{const[e,o]=n.useState(null),r=x({queryKey:[C.CAUSES_BY_PROFILE],queryFn:L,refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...t});return n.useEffect(()=>{if(r!=null&&r.isError){const a=m(r.error,"No se puede obtener la lista de las causas. Intente nuevamente o reporte a sistemas");o(a),k.error(a,{type:g(r.error)})}},[r.isError,r.error]),{...r,error:e||null}},b=y(n.lazy(()=>u(()=>import("./TicketSupportForm-iJ9UjCwD.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13])))),f=({open:t,setOpen:e})=>{const{data:o,isLoading:r,isError:a,error:E,refetch:i}=R({enabled:!1});n.useEffect(()=>{t&&i()},[t]);const l=()=>{e(!1)};return s.jsx(T,{open:t,handleClose:l,titleElement:s.jsx(p,{children:s.jsx(j,{variant:"h6",children:"Nuevo Ticket de Soporte"})}),children:s.jsx(S,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:s.jsxs(p,{spacing:3,p:3,children:[r&&s.jsx(_,{}),a&&!r&&s.jsx(P,{errorMessage:E,titleMessage:"Lista de Causas",handleButton:()=>i()}),!a&&!r&&t&&(o==null?void 0:o.length)===0&&s.jsx(h,{message:"Por el momento no se puede generar un ticket de soporte , No tiene causas asignadas"}),!a&&!r&&t&&(o==null?void 0:o.length)>0&&s.jsx(b,{causes:o,onSuccess:l})]})})})};f.propTypes={open:c.any,setOpen:c.func};const v=Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"}));export{v as T,I as n};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/TicketSupportForm-iJ9UjCwD.js","assets/js/vendor-FSZoD0Ty.js","assets/js/formik.esm--ft-gNTR.js","assets/js/index.esm-ZMwb309P.js","assets/js/getColorName-MAOZYUOa.js","assets/js/index-s6HyWPbs.js","assets/css/build-K0YT2apu.css","assets/js/matchTypes-_pBEYOAq.js","assets/js/tickets-support-list-keys-ThL685Ct.js","assets/js/TextMaxLine-PpgibfDP.js","assets/js/UploadSingleFile-RRpuU-ga.js","assets/js/fade-HpdRXKiE.js","assets/js/transition-Uc7vb3zK.js","assets/js/formatNumber-IeezKRXK.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=TicketSupportDrawer-oRRy70P4.js.map
