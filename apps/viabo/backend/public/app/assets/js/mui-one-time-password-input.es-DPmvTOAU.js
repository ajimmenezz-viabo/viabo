import{s as J,bT as Q,c5 as x,i as B,B as U}from"./vendor-CEMfbhOc.js";const X=J(Q)`
  input {
    text-align: center;
  }
`,Y={TextFieldStyled:X},Z=a=>B.jsx(Y.TextFieldStyled,{...a}),F={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function _(a,o){return a<=0?[]:Array.from({length:a},o)}function q(a,o,h){return a.map((s,R)=>o===R?h:s)}function N(a){return a.join("")}function b(a,o){return[...a,o]}function z(a,o,h){return a.reduce((s,R,l)=>{const{characters:y,restArrayMerged:u}=s;if(l<h)return{restArrayMerged:u,characters:b(y,R)};const[k,...T]=u;return{restArrayMerged:T,characters:b(y,k||"")}},{restArrayMerged:o,characters:[]}).characters}function W(a){return a.split("")}function O(a){const o=x.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return x.useInsertionEffect(()=>{o.current=a}),x.useCallback((...h)=>{var s;return(s=o.current)==null?void 0:s.call(o,...h)},[])}const ee=()=>!0,ne=x.forwardRef((a,o)=>{const{value:h="",length:s=4,autoFocus:R=!1,onChange:l,TextFieldsProps:y,onComplete:u,validateChar:k=ee,className:T,onBlur:w,...P}=a,S=x.useRef(h),I=O(u),v=O(e=>{const t=e.slice(0,s);return{isCompleted:t.length===s,finalValue:t}});x.useEffect(()=>{const{isCompleted:e,finalValue:t}=v(S.current);e&&I(t)},[s,I,v]);const d=_(s,(e,t)=>({character:h[t]||"",inputRef:x.createRef()})),M=e=>d.findIndex(({inputRef:t})=>t.current===e),V=()=>d.map(({character:e})=>e),j=(e,t)=>{const n=q(V(),e,t);return N(n)},$=e=>{var t,n;(n=(t=d[e])==null?void 0:t.inputRef.current)==null||n.focus()},f=e=>{var t,n;(n=(t=d[e])==null?void 0:t.inputRef.current)==null||n.select()},C=e=>{e+1!==s&&(d[e+1].character?f(e+1):$(e+1))},E=(e,t)=>typeof k!="function"?!0:k(e,t),K=e=>{const t=M(e.target);if(t===0&&e.target.value.length>1){const{finalValue:m,isCompleted:D}=v(e.target.value);l==null||l(m),D&&(u==null||u(m)),f(m.length-1);return}const n=e.target.value[0]||"";let i=n;i&&!E(i,t)&&(i="");const r=j(t,i);l==null||l(r);const{isCompleted:g,finalValue:p}=v(r);g&&(u==null||u(p)),i!==""?r.length-1<t?f(r.length):C(t):n===""&&r.length<=t&&f(t-1)},H=e=>{const t=e.target,n=t.selectionStart,i=t.selectionEnd,r=M(t),g=n===0&&i===0;if(t.value===e.key)e.preventDefault(),C(r);else if(F.backspace===e.key){if(!t.value)e.preventDefault(),f(r-1);else if(g){e.preventDefault();const p=j(r,"");l==null||l(p),p.length<=r&&f(r-1)}}else F.left===e.key?(e.preventDefault(),f(r-1)):F.right===e.key?(e.preventDefault(),f(r+1)):F.home===e.key?(e.preventDefault(),f(0)):F.end===e.key&&(e.preventDefault(),f(d.length-1))},L=e=>{const t=e.clipboardData.getData("text/plain"),n=e.target,i=d.findIndex(({character:c,inputRef:A})=>c===""||A.current===n),r=V(),g=z(r,W(t),i).map((c,A)=>E(c,A)?c:""),p=N(g);l==null||l(p);const{isCompleted:m,finalValue:D}=v(p);m?(u==null||u(D),f(s-1)):f(p.length)},G=e=>{if(!d.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:n}=v(h);w==null||w(n,t)}};return B.jsx(U,{display:"flex",gap:"20px",alignItems:"center",ref:o,className:`MuiOtpInput-Box ${T||""}`,...P,children:d.map(({character:e,inputRef:t},n)=>{const{onPaste:i,onFocus:r,onKeyDown:g,className:p,onBlur:m,...D}=typeof y=="function"?y(n)||{}:y||{};return B.jsx(Z,{autoFocus:R?n===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${n+1} ${p||""}`,onPaste:c=>{c.preventDefault(),L(c),i==null||i(c)},onFocus:c=>{c.preventDefault(),c.target.select(),r==null||r(c)},onChange:K,onKeyDown:c=>{H(c),g==null||g(c)},onBlur:c=>{m==null||m(c),G(c)},...D},n)})})});export{ne as o};
//# sourceMappingURL=mui-one-time-password-input.es-DPmvTOAU.js.map
