import{t as W,j as e,a as de,c as ve,r as b,B as S,S as p,aR as fe,aS as re,T as n,u as Se,b as Ie,g as xe,a0 as Te,n as Me,at as ae,o as we,a5 as Pe,a6 as Ne,ag as te,Z as R,I as Ee,e as H,aT as Re,P as l,aU as Ae,aB as Le,a8 as pe,D as se,af as De,F as P,aH as Oe,a3 as ke,L as ze,d as Fe,a4 as Be,f as qe,al as _e,aV as Ge,aW as We}from"./build-5885a497.js";import{s as Y}from"./build-9563ddbe.js";import{u as He}from"./build-984b3412.js";import{L as ce,F as Ue,R as L}from"./build-ebd5bc51.js";import{C as he}from"./build-23e0dc4d.js";import{f as ne,E as ie,b as Ve,C as Qe,M as $e,a as Ke,H as Xe}from"./build-a3405297.js";import{C as Ye}from"./build-13d46427.js";import{G as c}from"./build-8254f016.js";import{V as Ze,a as Je}from"./build-84878585.js";import{A as er,L as rr,v as N,I as ar}from"./build-4ec2ea70.js";import{d as tr,c as sr}from"./build-85f46b5d.js";import{a as nr}from"./build-61d5e77c.js";import{I as E}from"./build-e08f604e.js";import{S as ir}from"./build-6f07fea3.js";import{u as lr,s as K,P as or}from"./build-0265c78b.js";import{T as dr}from"./build-4c4ba0aa.js";import{S as xr}from"./build-fefa4769.js";import"./build-90d696a1.js";import"./build-bee6630b.js";const pr=W(e.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"}),"CheckTwoTone"),cr=W([e.jsx("path",{d:"M12 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm-5 9.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm5 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z",opacity:".3"},"0"),e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},"1"),e.jsx("circle",{cx:"7",cy:"12",r:"1.5"},"2"),e.jsx("circle",{cx:"12",cy:"12",r:"1.5"},"3"),e.jsx("circle",{cx:"17",cy:"12",r:"1.5"},"4")],"PendingTwoTone"),hr=W(e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person"),ur=W([e.jsx("path",{d:"M12 4c-4.42 0-8 3.58-8 8s3.58 8 8 8 8-3.58 8-8-3.58-8-8-8zm4.25 12.15L11 13V7h1.5v5.25l4.5 2.67-.75 1.23z",opacity:".3"},"0"),e.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"QueryBuilderTwoTone"),mr=(r,t)=>({commerceId:t,speiInCarnet:r==null?void 0:r.speiInCarnet,speiOutCarnet:r==null?void 0:r.speiOutCarnet,speiInMasterCard:r==null?void 0:r.speiInMasterCard,speiOutMasterCard:r==null?void 0:r.speiOutMasterCard,pay:r==null?void 0:r.viaboPay}),jr=r=>{const t=r==null?void 0:r.find(s=>(s==null?void 0:s.type)==="2");return t?{id:t==null?void 0:t.id,type:t==null?void 0:t.type,name:t==null?void 0:t.name,cardNumbers:t==null?void 0:t.cardNumbers,cardUse:t==null?void 0:t.cardUse,customCardsRequired:(t==null?void 0:t.personalized)==="1"}:null},gr=r=>(r==null?void 0:r.map(t=>{const{Id:s,Name:a,storePath:d}=t;return{id:s,name:a,path:d}}))??[],br=r=>({available:!!r,speiInCarnet:parseFloat((r==null?void 0:r.SpeiInCarnet)??"0.0"),speiOutCarnet:parseFloat((r==null?void 0:r.SpeiOutCarnet)??"0.0"),speiInMasterCard:parseFloat((r==null?void 0:r.SpeiInMasterCard)??"0.0"),speiOutMasterCard:parseFloat((r==null?void 0:r.SpeiOutMasterCard)??"0.0"),viaboPay:parseFloat((r==null?void 0:r.Pay)??"0.0")}),yr=r=>r.map((t,s)=>{var _;const{id:a,legalRepresentative:d,legalRepresentativeName:x,legalRepresentativePhone:o,legalRepresentativeLastSession:j,legalRepresentativeEmail:g,taxName:h,fiscalPersonType:u,tradeName:y,rfc:I,employees:C,branchOffices:z,pointSaleTerminal:F,paymentApi:B,register:T,statusId:U,registerStep:q,statusName:M,services:V,documents:Q,commissions:v}=t;return{id:a,name:y,account:{id:d,name:x,email:g,phone:o,status:"Activo",lastLogged:j===""?"No ha iniciado sesión":ne(j),register:ne(T)??""},information:{available:h!=="",fiscalName:h,commercialName:y,fiscalTypePerson:u==="1"?"Moral":"Física",rfc:I,employeesNumber:C,branchesNumber:z},services:{available:F!=="0",viaboCard:jr(V),tpvsNumber:F,apiRequired:B==="1"},status:{id:U,name:M,step:((_=nr.find($=>$.step.toString()===q))==null?void 0:_.name)??""},documents:gr(Q),commissions:br(v)}}),ue={COMMERCE_LIST:"commerceList"},Cr=async()=>{const{data:r}=await de.get("/api/commerces");return yr(r)},vr=async r=>{const{data:t}=await de.post("/api/commerce/commissions/register",r);return t},fr=[{id:1,name:"Registro",color:"info"},{id:2,name:"Validacion",color:"warning"},{id:3,name:"Afiliacion",color:"primary"},{id:4,name:"Cancelado",color:"error"}],me=r=>{var t;return((t=fr.find(s=>s.id.toString()===r.toString()))==null?void 0:t.color)||"info"},Sr={commerce:null},Ir=(r,t)=>({...Sr,setCommerce:s=>{r(a=>({commerce:s}))}}),G=ve(Ir);function Tr({commerce:r}){const{commerce:t}=G(o=>o,Y),{account:s,information:a,status:d}=r,x=(t==null?void 0:t.id)===r.id;return e.jsxs(he,{sx:o=>({backgroundColor:x?o.palette.secondary.lighter:o.palette.background.paper,color:x?o.palette.primary[o.palette.mode==="light"?"dark":"light"]:o.palette.text.primary,"&:hover":{border:2,borderColor:j=>j.palette.primary.main}}),children:[e.jsx(S,{sx:{p:1,position:"relative"},children:e.jsx(ce,{variant:"filled",color:me(d==null?void 0:d.id),sx:{right:16,zIndex:9,top:16,bottom:0,position:"absolute",textTransform:"capitalize"},children:d==null?void 0:d.name})}),e.jsxs(p,{spacing:2.5,children:[a!=null&&a.commercialName?e.jsxs(p,{direction:"row",alignItems:"center",spacing:2,sx:{p:3,pb:2.5},children:[e.jsx(fe,{src:(a==null?void 0:a.avatar)!==""?a==null?void 0:a.avatar:"",alt:a==null?void 0:a.commercialName,color:re(a==null?void 0:a.commercialName).color,children:re(a==null?void 0:a.commercialName).name}),e.jsxs("div",{children:[e.jsx(n,{variant:"subtitle2",children:a==null?void 0:a.commercialName}),e.jsx(n,{variant:"caption",sx:{color:"text.disabled",mt:.5,display:"block"},children:a==null?void 0:a.fiscalName})]})]}):e.jsxs(p,{direction:"row",alignItems:"center",spacing:2,sx:{px:3,pb:0,pt:4},children:[e.jsx(cr,{sx:{width:30,height:30,color:"info.main"}}),e.jsxs("div",{children:[e.jsx(n,{variant:"subtitle2",children:"No Disponible"}),e.jsxs(n,{variant:"body2",sx:{color:"text.info",mt:.5,display:"block"},children:["Se encuentra en el paso: ",d==null?void 0:d.step]})]})]}),e.jsxs(p,{direction:"row",alignItems:"center",justifyContent:"space-between",spacing:3,sx:o=>({backgroundColor:x?o.palette.secondary.main:o.palette.background.neutral,color:x?o.palette.primary[o.palette.mode==="light"?"dark":"light"]:o.palette.text.primary,p:3,pb:2.5}),children:[e.jsxs(p,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(hr,{sx:{width:16,height:16}}),e.jsx(n,{variant:"caption",children:s==null?void 0:s.name})]}),e.jsxs(p,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(ur,{sx:{width:16,height:16}}),e.jsxs(n,{variant:"caption",children:[s!=null&&s.register?s==null?void 0:s.register:"-"," "]})]})]})]})]})}const Mr=b.memo(Tr),wr=(r={})=>{const{enqueueSnackbar:t}=Se(),[s,a]=b.useState(null);return{...Ie([ue.COMMERCE_LIST],Cr,{staleTime:60*5e3,onError:x=>{const o=xe(x,"No se puede obtener la lista de comercios");a(o),t(o,{variant:"error",autoHideDuration:5e3})},...r}),error:s||null}},Pr=(r={})=>{const t=Te(),s=Me(vr,r);return{...s,mutate:async(d,x)=>{const{onSuccess:o,onError:j,mutationOptions:g}=x;try{await ae.promise(s.mutateAsync(d,g),{pending:"Actualizando Comisiones ...",success:{render({data:h}){return t.invalidateQueries([ue.COMMERCE_LIST]),o(h),"Se actualizaron las comisiones con éxito"}}})}catch(h){const u=xe(h,"No se puede realizar esta operacion en este momento. Intente nuevamente o reporte a sistemas");j(u),ae.error(u,{type:we(h)})}}}};function Nr(){var J,ee;const{data:r,isLoading:t,isError:s,error:a,refetch:d,isSuccess:x}=wr(),o=G(i=>i.setCommerce),{commerce:j}=G(i=>i,Y),g=b.useMemo(()=>{const i=(r==null?void 0:r.map(f=>f==null?void 0:f.status))||[],m={},w=[];return i.forEach(f=>{f&&!m[f.id]&&(m[f.id]=!0,w.push(f))}),w},[r]),[h,u]=b.useState(1),[y,I]=b.useState(""),[C,z]=b.useState(""),[F,B]=b.useState([]),[T,U]=b.useState([]),q=4,M=y?F:C?T:r,V=(M==null?void 0:M.length)||0,Q=Math.ceil(V/q),v=lr(M||[],q),_=(i,m)=>{u(m),v.jump(m)};if(b.useEffect(()=>{if(y.trim()!==""&&T&&C){const i=K(T,y);B(i)}else if(y&&r&&!C){const i=K(r,y);B(i)}},[y,r,C,T]),b.useEffect(()=>{if(r&&j){const i=r==null?void 0:r.find(m=>(m==null?void 0:m.id)===(j==null?void 0:j.id));i&&o(i)}},[r,j]),s)return e.jsx(p,{sx:{pr:{sm:2}},children:e.jsx(Pe,{errorMessage:a,handleButton:d})});const $=i=>{let m="";i===C?z(""):(z(i),m=(i==null?void 0:i.name)||"");const w=K(r,m);U(w)};return e.jsxs(e.Fragment,{children:[t&&e.jsx(Ne,{}),(r==null?void 0:r.length)>0&&e.jsxs(e.Fragment,{children:[e.jsx(S,{display:"flex",children:g==null?void 0:g.map(i=>{const m=(C==null?void 0:C.id)===(i==null?void 0:i.id);return e.jsx(te.div,{onClick:()=>$(i),whileHover:{scale:1.03},whileTap:{scale:.8},children:e.jsx(ce,{variant:m?"ghost":"filled",color:me(i==null?void 0:i.id),sx:{textTransform:"uppercase",marginRight:1,marginBottom:2,cursor:"pointer",border:m?3:0,borderColor:m?w=>w.palette.primary.main:"inherit"},children:i==null?void 0:i.name})},i==null?void 0:i.id)})}),e.jsxs(S,{display:"flex",mb:3,flexDirection:"column",alignItems:{xs:"center"},children:[e.jsx(dr,{fullWidth:!0,size:"small",placeholder:"Buscar ...",value:y,onChange:i=>I(i.target.value),InputProps:{startAdornment:e.jsx(E,{position:"start",children:e.jsx(S,{sx:{color:"text.disabled"},children:e.jsx(xr,{sx:{marginTop:1}})})})}}),e.jsx(S,{sx:{flex:"1 1 auto",mb:{xs:3}}}),e.jsx(or,{count:Q,page:h,onChange:_})]}),e.jsxs(p,{direction:"column",spacing:2,children:[((J=v==null?void 0:v.currentData())==null?void 0:J.length)===0&&e.jsx(ie,{pt:2.5,message:"Sin resultados "}),(ee=v==null?void 0:v.currentData())==null?void 0:ee.map((i,m)=>e.jsx(te.div,{onClick:()=>{o(i)},whileHover:{scale:1.03},whileTap:{scale:.8},style:{cursor:"pointer"},children:e.jsx(Mr,{commerce:i,selected:m===0})},m))]})]}),r&&(r==null?void 0:r.length)===0&&e.jsx(ie,{pt:2.5,message:"No hay comercios Registrados"})]})}const Er=R(r=>{const{expand:t,...s}=r;return e.jsx(Ee,{...s})})(({theme:r,expand:t})=>({transform:t?"rotate(180deg)":"rotate(0deg)",marginLeft:"auto",transition:r.transitions.create("transform",{duration:r.transitions.duration.shortest})})),Z=R("div")(({theme:r})=>({width:30,height:30,display:"flex",borderRadius:"50%",alignItems:"center",justifyContent:"center",color:r.palette.primary.main,backgroundColor:H(r.palette.primary.main,.08)})),X=({widthWrapper:r=30,heightWrapper:t=30,opacity:s=.08,...a})=>e.jsx(Z,{sx:{color:"success.main",bgcolor:d=>H(d.palette.success.main,s),width:r,height:t},children:e.jsx(pr,{sx:{width:15,height:15},...a})}),le=()=>e.jsx(Z,{sx:{color:"error.main",bgcolor:r=>H(r.palette.error.main,.08)},children:e.jsx(Ye,{sx:{width:15,height:15}})}),Rr=()=>e.jsx(Z,{sx:{color:"warning.main",width:25,height:25,bgcolor:r=>H(r.palette.warning.main,.2)},children:e.jsx(Re,{sx:{width:13,height:13}})});A.propTypes={alertText:l.string,available:l.bool,children:l.node,expanded:l.string,expandedText:l.string,handleChange:l.func,headerText:l.string,step:l.string,showIfNotAvailable:l.bool};function A({children:r,expandedText:t,expanded:s,handleChange:a,headerText:d,alertText:x,available:o=!0,step:j,showIfNotAvailable:g=!1}){const h=s===t;return e.jsxs(he,{sx:u=>({p:3,border:h?3:0,borderColor:h?u.palette.mode==="dark"?u.palette.secondary.main:u.palette.primary.main:"inherit"}),children:[e.jsxs(p,{display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsxs(p,{direction:"row",spacing:1.5,alignItems:"center",children:[o?e.jsx(X,{widthWrapper:25,heightWrapper:25,opacity:.2,sx:{width:15,height:15}}):e.jsx(Rr,{}),e.jsx(n,{variant:"subtitle1",color:"textPrimary",children:d})]}),e.jsx(S,{sx:{flex:"1 1 auto"}}),e.jsx(Er,{expand:h,onClick:()=>{a(t)},"aria-expanded":h,"aria-label":"show more",children:e.jsx(Ae,{})})]}),e.jsx(Le,{in:h,timeout:"auto",children:!o&&!g?e.jsxs(pe,{sx:{mt:3},severity:"warning",variant:"filled",children:[e.jsx(n,{variant:"body2",children:x}),e.jsxs(n,{variant:"caption",children:["Etapa de registro: ",e.jsx("b",{children:j??"Registro"})]})]}):r})]})}je.propTypes={account:l.object,expanded:l.string.isRequired,handleChange:l.func.isRequired};function je({account:r,expanded:t,handleChange:s}){return e.jsx(A,{headerText:"Cuenta",handleChange:s,expanded:t,expandedText:"account-info",children:e.jsxs(c,{container:!0,spacing:5,sx:{mt:0},children:[e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Nombre"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.name})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Correo Electronico"}),e.jsx(n,{variant:"body2",children:(r==null?void 0:r.email)??"-"})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Telefono"}),e.jsx(n,{variant:"body2",children:(r==null?void 0:r.phone)??"-"})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Fecha Registro"}),e.jsx(n,{variant:"body2",children:(r==null?void 0:r.register)??"-"})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Estado"}),e.jsx(n,{variant:"body2",children:(r==null?void 0:r.status)??"-"})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Último Inicio de Sesión"}),e.jsx(n,{variant:"body2",children:(r==null?void 0:r.lastLogged)??"-"})]})]})})}ge.propTypes={expanded:l.any,handleChange:l.any,info:l.shape({available:l.any,branchesNumber:l.any,commercialName:l.any,employeesNumber:l.any,fiscalName:l.any,fiscalTypePerson:l.any,rfc:l.any}),status:l.shape({step:l.any})};function ge({info:r,expanded:t,handleChange:s,status:a}){const d=!!(r!=null&&r.available);return e.jsx(A,{headerText:"Comercio",handleChange:s,step:a==null?void 0:a.step,available:d,expanded:t,expandedText:"general-info",alertText:"No se ha registrado la información para este comercio!",children:e.jsxs(c,{container:!0,spacing:5,sx:{mt:0},children:[e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Nombre Comercial"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.commercialName})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Nombre Fiscal"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.fiscalName})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"RFC"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.rfc})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Persona"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.fiscalTypePerson})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Numero de Empleados"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.employeesNumber})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Numero de Sucursales"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.branchesNumber})]})]})})}function Ar({services:r,expanded:t,handleChange:s,status:a}){var g,h;const d=!!(r!=null&&r.available),x=b.useMemo(()=>!!(r!=null&&r.viaboCard),[r]),o=b.useMemo(()=>!!(r!=null&&r.apiRequired),[r]),j=b.useMemo(()=>{var u;return!!((u=r==null?void 0:r.viaboCard)!=null&&u.customCardsRequired)},[r]);return e.jsx(A,{step:a==null?void 0:a.step,headerText:"Servicios",available:d,handleChange:s,expandedText:"services-info",expanded:t,alertText:"No se han seleccionado servicios para este comercio!",children:e.jsxs(c,{container:!0,spacing:5,sx:{mt:0},children:[e.jsx(c,{item:!0,xs:12,children:e.jsxs(p,{spacing:2,direction:"row",children:[e.jsx(se,{disabledEffect:!0,visibleByDefault:!0,alt:"logo",src:Ze,sx:{maxWidth:150}}),x&&e.jsx(se,{disabledEffect:!0,visibleByDefault:!0,alt:"logo",src:Je,sx:{maxWidth:150}})]})}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"No. Terminales TPV's"}),e.jsx(n,{variant:"body2",children:r==null?void 0:r.tpvsNumber})]}),x&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"No. de Tarjetas"}),e.jsx(n,{variant:"body2",children:(g=r==null?void 0:r.viaboCard)==null?void 0:g.cardNumbers})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Uso de las tarjetas viabo"}),e.jsx(n,{variant:"body2",children:(h=r==null?void 0:r.viaboCard)==null?void 0:h.cardUse})]})]}),e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"API para ligas de cobro"}),o?e.jsx(X,{}):e.jsx(le,{})]}),x&&e.jsxs(c,{item:!0,xs:12,sm:6,children:[e.jsx(n,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Tarjetas fisicas personalizadas"}),j?e.jsx(X,{}):e.jsx(le,{})]})]})})}be.propTypes={documents:l.array,expanded:l.string,handleChange:l.func,status:l.shape({step:l.string})};function be({documents:r,expanded:t,handleChange:s,status:a}){const d=(r==null?void 0:r.length)>0;return e.jsx(A,{step:a==null?void 0:a.step,headerText:"Documentos",available:d,handleChange:s,expandedText:"documents",expanded:t,alertText:"No se han cargado documentos legales del comercio!",children:e.jsxs(e.Fragment,{children:[e.jsx(Ve,{title:"",subheader:`${r==null?void 0:r.length} archivos`,sx:{p:0,my:3,"& .MuiCardHeader-action":{alignSelf:"center"}}}),e.jsx(De,{disablePadding:!0,sx:{my:3},children:e.jsx(er,{children:r==null?void 0:r.map(x=>e.jsx(ye,{file:x},x==null?void 0:x.id))})})]})})}ye.propTypes={file:l.shape({name:l.string,path:l.string})};function ye({file:r}){return e.jsxs(rr,{component:P.div,...N().inRight,sx:{my:2,px:2,py:.75,borderRadius:.75,border:t=>`solid 1px ${t.palette.divider}`},children:[e.jsx(ar,{sx:{width:28,height:28,color:"text.secondary",mr:2}}),e.jsx(p,{children:e.jsxs(n,{variant:"subtitle2",children:[" ",e.jsx(Oe,{href:r==null?void 0:r.path,target:"_blank",children:r==null?void 0:r.name})]})})]})}Ce.propTypes={handleChange:l.func.isRequired,expanded:l.string.isRequired,commerce:l.object.isRequired};const D=0,O=100,k=.1;function Ce({handleChange:r,expanded:t,commerce:s}){const{commissions:a}=s,{mutate:d,isLoading:x}=Pr(),o=tr().min(0,"El valor minimo es 0").max(100,"El valor maximo es 100").required("El valor es requerido"),j=sr({speiInCarnet:o,speiOutCarnet:o,speiInMasterCard:o,speiOutMasterCard:o,viaboPay:o}),g=He({initialValues:{speiInCarnet:(a==null?void 0:a.speiInCarnet)||0,speiOutCarnet:(a==null?void 0:a.speiOutCarnet)||0,speiInMasterCard:(a==null?void 0:a.speiInMasterCard)||0,speiOutMasterCard:(a==null?void 0:a.speiOutMasterCard)||0,viaboPay:(a==null?void 0:a.viaboPay)||0},validationSchema:j,enableReinitialize:!0,onSubmit:(y,{setSubmitting:I})=>{const C=mr(y,s==null?void 0:s.id);d(C,{onSuccess:()=>{I(!1)},onError:()=>{I(!1)}})}}),{isSubmitting:h}=g,u=h||x;return e.jsx(A,{headerText:"Comisiones",handleChange:r,expanded:t,expandedText:"commissions",available:!!(a!=null&&a.available),showIfNotAvailable:!0,children:e.jsx(Ue,{formik:g,children:e.jsxs(p,{mt:2,gap:3,flexDirection:"column",children:[e.jsxs(p,{gap:2,children:[e.jsx(n,{variant:"subtitle2",children:"SPEI"}),e.jsxs(p,{gap:3,flexDirection:"row",flexWrap:"wrap",alignItems:"center",width:1,children:[e.jsx(Qe,{}),e.jsxs(p,{spacing:1,flexGrow:1,children:[e.jsx(n,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Entrantes:"}),e.jsx(L,{name:"speiInCarnet",placeholder:"0.0",autoFocus:!0,focused:!0,size:"small",type:"number",required:!0,disabled:u,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(E,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:D,max:O,step:k}})]}),e.jsxs(p,{spacing:1,flexGrow:1,children:[e.jsx(n,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Salientes:"}),e.jsx(L,{name:"speiOutCarnet",placeholder:"0",type:"number",required:!0,size:"small",disabled:u,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(E,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:D,max:O,step:k}})]})]}),e.jsxs(p,{gap:3,flexDirection:"row",flexWrap:"wrap",alignItems:"center",width:1,children:[e.jsx($e,{}),e.jsxs(p,{spacing:1,flexGrow:1,children:[e.jsx(n,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Entrantes:"}),e.jsx(L,{name:"speiInMasterCard",placeholder:"0",required:!0,size:"small",type:"number",disabled:u,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(E,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:D,max:O,step:k}})]}),e.jsxs(p,{spacing:1,flexGrow:1,children:[e.jsx(n,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Salientes:"}),e.jsx(L,{name:"speiOutMasterCard",placeholder:"0",required:!0,type:"number",size:"small",disabled:u,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(E,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:D,max:O,step:k}})]})]})]}),e.jsx(ke,{flexItem:!0,sx:{borderStyle:"dashed"}}),e.jsxs(p,{gap:2,flexDirection:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsx(n,{variant:"subtitle2",children:"Viabo Pay"}),e.jsx(L,{name:"viaboPay",placeholder:"0",size:"small",type:"number",required:!0,disabled:u,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(E,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:D,max:O,step:k}})]}),e.jsx(S,{display:"flex",justifyContent:"center",children:e.jsx(ze,{loading:u,variant:"contained",type:"submit",children:"Guardar"})})]})})})}function Lr(){var d;const{commerce:r}=G(x=>x,Y),[t,s]=b.useState(""),a=x=>{s(t===x?"":x)};return e.jsxs(e.Fragment,{children:[e.jsxs(p,{spacing:3,direction:"row",justifyContent:"space-between",sx:{width:1,mb:2},alignItems:{sm:"center"},children:[e.jsx(p,{direction:"row",spacing:1,children:e.jsx(n,{variant:"h5",children:"Detalles"})}),r&&((d=r==null?void 0:r.status)==null?void 0:d.id)==="2"&&e.jsx(Fe,{variant:"contained",children:"Afiliación"})]}),r?e.jsx(p,{children:e.jsxs(c,{container:!0,spacing:3,children:[e.jsx(c,{item:!0,xs:12,xl:6,children:e.jsx(P.div,{...N().in,children:e.jsx(je,{account:r==null?void 0:r.account,expanded:t,handleChange:a,status:r==null?void 0:r.status})})}),e.jsx(c,{item:!0,xs:12,xl:6,children:e.jsx(P.div,{...N().in,children:e.jsx(ge,{info:r==null?void 0:r.information,expanded:t,handleChange:a,status:r==null?void 0:r.status})})}),e.jsx(c,{item:!0,xs:12,xl:6,children:e.jsx(P.div,{...N().in,children:e.jsx(Ar,{services:r==null?void 0:r.services,expanded:t,handleChange:a,status:r==null?void 0:r.status})})}),e.jsx(c,{item:!0,xs:12,xl:6,children:e.jsx(P.div,{...N().in,children:e.jsx(be,{documents:r==null?void 0:r.documents,expanded:t,handleChange:a,status:r==null?void 0:r.status})})}),e.jsx(c,{item:!0,xs:12,xl:6,children:e.jsx(P.div,{...N().in,children:e.jsx(Ce,{expanded:t,handleChange:a,commerce:r})})})]})}):e.jsxs(p,{spacing:3,sx:{height:"100%",width:"100%"},children:[e.jsx(pe,{variant:"filled",severity:"info",children:"Debe seleccionar un comercio para ver sus detalles!"}),e.jsx(p,{alignItems:"center",children:e.jsx(ir,{sx:{width:"30%"}})})]})]})}const Dr=R("div")({display:"flex",height:"100vh"}),Or=R(S)({flex:"1",height:"100%",overflow:"auto",scrollSnapType:"x mandatory",display:"flex"}),kr=R("div")({display:"flex",flex:"1"}),oe=R(r=>e.jsx(p,{...r}))(({theme:r})=>({height:"100%",overflow:"auto",scrollSnapAlign:"start",padding:r.spacing(2)})),zr=()=>(Be(),e.jsx(Dr,{children:e.jsx(Or,{children:e.jsxs(kr,{children:[e.jsx(oe,{sx:{minWidth:{xs:350,md:400}},children:e.jsx(Nr,{})}),e.jsx(oe,{sx:{flexGrow:1,minWidth:{xs:350,md:400}},children:e.jsx(Lr,{})})]})})}));function ta(){return e.jsx(qe,{title:"Administracion Comercios",children:e.jsxs(Ke,{children:[e.jsx(Xe,{name:"Comercios",links:[{name:"Inicio",href:_e.root},{name:"Administracion",href:Ge.commerces},{name:We.commerces.name}]}),e.jsx(zr,{})]})})}export{ta as default};
