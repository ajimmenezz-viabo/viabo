import{u as _,n as Y,g as ee,o as te,Z as ne,av as h,j as M,B as re}from"./index-6ad460b4.js";import{v as ae}from"./build-f944e319.js";import{T as oe}from"./build-636787f0.js";const xe=(r={})=>{const{enqueueSnackbar:a}=_();return Y({mutationFn:ae,onError:c=>{const o=ee(c,"No se puede validar el cÃ³digo");a(o,{variant:te(c),autoHideDuration:5e3})},...r})},se=ne(oe)`
  input {
    text-align: center;
  }
`,ce={TextFieldStyled:se},ue=r=>M.jsx(ce.TextFieldStyled,{...r}),v={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function le(r,a){return r<=0?[]:Array.from({length:r},a)}function ie(r,a,c){return r.map((o,g)=>a===g?c:o)}function P(r){return r.join("")}function O(r,a){return[...r,a]}function fe(r,a,c){return r.reduce((o,g,u)=>{const{characters:y,restArrayMerged:i}=o;if(u<c)return{restArrayMerged:i,characters:O(y,g)};const[C,...R]=i;return{restArrayMerged:R,characters:O(y,C||"")}},{restArrayMerged:a,characters:[]}).characters}function pe(r){return r.split("")}function K(r){const a=h.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return h.useInsertionEffect(()=>{a.current=r}),h.useCallback((...c)=>{var o;return(o=a.current)==null?void 0:o.call(a,...c)},[])}const de=()=>!0,ve=h.forwardRef((r,a)=>{const{value:c="",length:o=4,autoFocus:g=!1,onChange:u,TextFieldsProps:y,onComplete:i,validateChar:C=de,className:R,onBlur:k,...q}=r,L=h.useRef(c),w=K(i),m=K(e=>({isCompleted:e.length>=o,finalValue:e.slice(0,o)})),{onPaste:I,onFocus:B,onKeyDown:F,className:$,placeholder:T,onBlur:A,...z}=y||{};h.useEffect(()=>{const{isCompleted:e,finalValue:t}=m(L.current);e&&w(t)},[o,w,m]);const p=le(o,(e,t)=>({character:c[t]||"",inputRef:h.createRef()})),b=e=>p.findIndex(({inputRef:t})=>t.current===e),V=()=>p.map(({character:e})=>e),S=(e,t)=>{const n=ie(V(),e,t);return P(n)},G=e=>{var t,n;(n=(t=p[e])==null?void 0:t.inputRef.current)==null||n.focus()},l=e=>{var t,n;(n=(t=p[e])==null?void 0:t.inputRef.current)==null||n.select()},j=e=>{e+1!==o&&(p[e+1].character?l(e+1):G(e+1))},N=(e,t)=>typeof C!="function"?!0:C(e,t),H=e=>{const t=e.target.value[0]||"";let n=t;const f=b(e.target);n&&!N(n,f)&&(n="");const s=S(f,n);u==null||u(s);const{isCompleted:x,finalValue:d}=m(s);x&&(i==null||i(d)),n!==""?s.length-1<f?l(s.length):j(f):t===""&&s.length<=f&&l(f-1)},J=e=>{e.preventDefault(),e.target.select(),B==null||B(e)},Q=e=>{const t=e.target,n=t.selectionStart,f=t.selectionEnd,s=b(t),x=n===0&&f===0;if(t.value===e.key)e.preventDefault(),j(s);else if(v.backspace===e.key){if(!t.value)e.preventDefault(),l(s-1);else if(x){e.preventDefault();const d=S(s,"");u==null||u(d),d.length<=s&&l(s-1)}}else v.left===e.key?(e.preventDefault(),l(s-1)):v.right===e.key?(e.preventDefault(),l(s+1)):v.home===e.key?(e.preventDefault(),l(0)):v.end===e.key&&(e.preventDefault(),l(p.length-1));F==null||F(e)},U=e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain"),n=e.target,f=p.findIndex(({character:D,inputRef:E})=>D===""||E.current===n),s=V(),x=fe(s,pe(t),f).map((D,E)=>N(D,E)?D:""),d=P(x);u==null||u(d);const{isCompleted:X,finalValue:Z}=m(d);X?(i==null||i(Z),l(o-1)):l(d.length),I==null||I(e)},W=e=>{if(A==null||A(e),!p.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:n}=m(c);k==null||k(n,t)}};return M.jsx(re,{display:"flex",gap:"20px",alignItems:"center",ref:a,className:`MuiOtpInput-Box ${R||""}`,...q,children:p.map(({character:e,inputRef:t},n)=>M.jsx(ue,{autoFocus:g?n===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${n+1} ${$||""}`,onPaste:U,onFocus:J,onChange:H,onKeyDown:Q,onBlur:W,placeholder:typeof T=="function"?T(n):T,...z},n))})});export{ve as h,xe as u};
