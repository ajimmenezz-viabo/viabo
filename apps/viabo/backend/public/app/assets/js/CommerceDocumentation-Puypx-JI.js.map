{"version":3,"file":"CommerceDocumentation-Puypx-JI.js","sources":["../../../../../frontend/src/app/business/commerce/adapters/commerceUploadDocumentsAdapter.js","../../../../../frontend/src/app/business/commerce/services/documentationList.js","../../../../../frontend/src/app/business/commerce/hooks/useUploadDocuments.js","../../../../../frontend/src/app/business/commerce/hooks/useDeleteDocuments.js"],"sourcesContent":["export const CommerceUploadDocumentsAdapter = (documents, commerceId, fiscalPersonType) => {\r\n  let documentsAdapted = documents\r\n  if (fiscalPersonType === '2') {\r\n    documentsAdapted = {\r\n      ...documents,\r\n      ACTA_CONSTITUTIVA: null,\r\n      DOCUMENTO_PODER: null,\r\n      CEDULA_FISCAL_EMPRESA: null\r\n    }\r\n  }\r\n  const formUpload = new FormData()\r\n  const formUploadToDelete = new FormData()\r\n  for (const [key, value] of Object.entries(documentsAdapted)) {\r\n    if (value !== null) {\r\n      formUpload.append(key, value)\r\n    } else {\r\n      const contenido = ''\r\n      const archivo = new File([contenido], `${key}.txt`, {\r\n        type: 'text/plain'\r\n      })\r\n      formUploadToDelete.append(key, archivo)\r\n    }\r\n  }\r\n  formUpload.append('commerceId', commerceId)\r\n  formUploadToDelete.append('commerceId', commerceId)\r\n  return { uploadDocumentsForm: formUpload, deleteDocumentsForm: formUploadToDelete }\r\n}\r\n","const documentTypes = {\r\n  ACTA_CONSTITUTIVA: 'Acta Constitutiva',\r\n  DOCUMENTO_PODER: 'Documento Poder',\r\n  IDENTIFICACION: 'Identificación',\r\n  CEDULA_FISCAL_EMPRESA: 'Cédula Fiscal de la Empresa',\r\n  CEDULA_FISCAL_APODERADO: 'Cédula Fiscal del Apoderado',\r\n  COMPROBANTE_DOMICILIO: 'Comprobante de Domicilio'\r\n}\r\n\r\nconst documentList = {\r\n  ACTA_CONSTITUTIVA: {\r\n    accept: {\r\n      'image/*': ['.jpeg', '.png'],\r\n      'application/pdf': ['.pdf']\r\n    },\r\n    maxFiles: 1,\r\n    expiration: null,\r\n    moralPerson: true\r\n  },\r\n  DOCUMENTO_PODER: {\r\n    accept: {\r\n      'image/*': ['.jpeg', '.png'],\r\n      'application/pdf': ['.pdf']\r\n    },\r\n    maxFiles: 1,\r\n    expiration: null,\r\n    moralPerson: true\r\n  },\r\n  IDENTIFICACION: {\r\n    accept: {\r\n      'image/*': ['.jpeg', '.png'],\r\n      'application/pdf': ['.pdf']\r\n    },\r\n    maxFiles: 1,\r\n    expiration: null,\r\n    moralPerson: 'all'\r\n  },\r\n  CEDULA_FISCAL_EMPRESA: {\r\n    accept: {\r\n      'image/*': ['.jpeg', '.png'],\r\n      'application/pdf': ['.pdf']\r\n    },\r\n    maxFiles: 1,\r\n    expiration: 'No Mayor a 2 meses',\r\n    moralPerson: true\r\n  },\r\n  CEDULA_FISCAL_APODERADO: {\r\n    accept: {\r\n      'image/*': ['.jpeg', '.png'],\r\n      'application/pdf': ['.pdf']\r\n    },\r\n    maxFiles: 1,\r\n    expiration: 'No Mayor a 2 meses',\r\n    moralPerson: 'all'\r\n  },\r\n  COMPROBANTE_DOMICILIO: {\r\n    accept: {\r\n      'image/*': ['.jpeg', '.png'],\r\n      'application/pdf': ['.pdf']\r\n    },\r\n    maxFiles: 1,\r\n    expiration: 'No Mayor a 2 meses',\r\n    moralPerson: 'all'\r\n  }\r\n}\r\n\r\nexport { documentList, documentTypes }\r\n","import { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { COMMERCE_KEYS } from '@/app/business/commerce/adapters'\r\nimport { uploadDocuments } from '@/app/business/commerce/services'\r\nimport { getErrorAPI } from '@/shared/interceptors'\r\n\r\nexport const useUploadDocuments = (options = {}) => {\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const client = useQueryClient()\r\n  return useMutation({\r\n    mutationFn: uploadDocuments,\r\n    onSuccess: () => {\r\n      client.invalidateQueries([COMMERCE_KEYS.COMMERCE_PROCESS])\r\n      enqueueSnackbar('Se agregaron los documentos al proceso!', {\r\n        variant: 'success'\r\n      })\r\n    },\r\n    onError: error => {\r\n      const message = getErrorAPI(error, 'No se puede agregar los doumentos al proceso')\r\n      enqueueSnackbar(message, {\r\n        variant: error?.status === 500 ? 'error' : 'warning',\r\n        autoHideDuration: 5000\r\n      })\r\n    },\r\n    ...options\r\n  })\r\n}\r\n","import { useMutation, useQueryClient } from '@tanstack/react-query'\r\n\r\nimport { COMMERCE_KEYS } from '@/app/business/commerce/adapters'\r\nimport { deleteDocuments } from '@/app/business/commerce/services'\r\n\r\nexport const useDeleteDocuments = (options = {}) => {\r\n  const client = useQueryClient()\r\n  return useMutation({\r\n    mutationFn: deleteDocuments,\r\n    onSuccess: () => {\r\n      client.invalidateQueries([COMMERCE_KEYS.COMMERCE_PROCESS])\r\n    },\r\n    ...options\r\n  })\r\n}\r\n"],"names":["CommerceUploadDocumentsAdapter","documents","commerceId","fiscalPersonType","documentsAdapted","formUpload","formUploadToDelete","key","value","contenido","archivo","documentTypes","documentList","useUploadDocuments","options","enqueueSnackbar","useSnackbar","client","useQueryClient","useMutation","uploadDocuments","COMMERCE_KEYS","error","message","getErrorAPI","useDeleteDocuments","deleteDocuments"],"mappings":"ujBAAO,MAAMA,GAAiC,CAACC,EAAWC,EAAYC,IAAqB,CACzF,IAAIC,EAAmBH,EACnBE,IAAqB,MACvBC,EAAmB,CACjB,GAAGH,EACH,kBAAmB,KACnB,gBAAiB,KACjB,sBAAuB,IACxB,GAEH,MAAMI,EAAa,IAAI,SACjBC,EAAqB,IAAI,SAC/B,SAAW,CAACC,EAAKC,CAAK,IAAK,OAAO,QAAQJ,CAAgB,EACxD,GAAII,IAAU,KACZH,EAAW,OAAOE,EAAKC,CAAK,MACvB,CACL,MAAMC,EAAY,GACZC,EAAU,IAAI,KAAK,CAACD,CAAS,EAAG,GAAGF,CAAG,OAAQ,CAClD,KAAM,YACd,CAAO,EACDD,EAAmB,OAAOC,EAAKG,CAAO,CACvC,CAEH,OAAAL,EAAW,OAAO,aAAcH,CAAU,EAC1CI,EAAmB,OAAO,aAAcJ,CAAU,EAC3C,CAAE,oBAAqBG,EAAY,oBAAqBC,CAAoB,CACrF,EC1BMK,EAAgB,CACpB,kBAAmB,oBACnB,gBAAiB,kBACjB,eAAgB,iBAChB,sBAAuB,8BACvB,wBAAyB,8BACzB,sBAAuB,0BACzB,EAEMC,EAAe,CACnB,kBAAmB,CACjB,OAAQ,CACN,UAAW,CAAC,QAAS,MAAM,EAC3B,kBAAmB,CAAC,MAAM,CAC3B,EACD,SAAU,EACV,WAAY,KACZ,YAAa,EACd,EACD,gBAAiB,CACf,OAAQ,CACN,UAAW,CAAC,QAAS,MAAM,EAC3B,kBAAmB,CAAC,MAAM,CAC3B,EACD,SAAU,EACV,WAAY,KACZ,YAAa,EACd,EACD,eAAgB,CACd,OAAQ,CACN,UAAW,CAAC,QAAS,MAAM,EAC3B,kBAAmB,CAAC,MAAM,CAC3B,EACD,SAAU,EACV,WAAY,KACZ,YAAa,KACd,EACD,sBAAuB,CACrB,OAAQ,CACN,UAAW,CAAC,QAAS,MAAM,EAC3B,kBAAmB,CAAC,MAAM,CAC3B,EACD,SAAU,EACV,WAAY,qBACZ,YAAa,EACd,EACD,wBAAyB,CACvB,OAAQ,CACN,UAAW,CAAC,QAAS,MAAM,EAC3B,kBAAmB,CAAC,MAAM,CAC3B,EACD,SAAU,EACV,WAAY,qBACZ,YAAa,KACd,EACD,sBAAuB,CACrB,OAAQ,CACN,UAAW,CAAC,QAAS,MAAM,EAC3B,kBAAmB,CAAC,MAAM,CAC3B,EACD,SAAU,EACV,WAAY,qBACZ,YAAa,KACd,CACH,ECzDaC,GAAqB,CAACC,EAAU,KAAO,CAClD,KAAM,CAAE,gBAAAC,CAAiB,EAAGC,EAAa,EACnCC,EAASC,EAAgB,EAC/B,OAAOC,EAAY,CACjB,WAAYC,GACZ,UAAW,IAAM,CACfH,EAAO,kBAAkB,CAACI,EAAc,gBAAgB,CAAC,EACzDN,EAAgB,0CAA2C,CACzD,QAAS,SACjB,CAAO,CACF,EACD,QAASO,GAAS,CAChB,MAAMC,EAAUC,GAAYF,EAAO,8CAA8C,EACjFP,EAAgBQ,EAAS,CACvB,SAASD,GAAA,YAAAA,EAAO,UAAW,IAAM,QAAU,UAC3C,iBAAkB,GAC1B,CAAO,CACF,EACD,GAAGR,CACP,CAAG,CACH,ECtBaW,GAAqB,CAACX,EAAU,KAAO,CAClD,MAAMG,EAASC,EAAgB,EAC/B,OAAOC,EAAY,CACjB,WAAYO,GACZ,UAAW,IAAM,CACfT,EAAO,kBAAkB,CAACI,EAAc,gBAAgB,CAAC,CAC1D,EACD,GAAGP,CACP,CAAG,CACH"}