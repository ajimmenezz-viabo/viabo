import{r as f,a9 as B,as as T,at as E,j as r,y as b,au as R,av as S,Z as H,a1 as K,S as O,L as D,I as L,B as X,ay as Y}from"./index-f2af7371.js";import{a as N}from"./build-6a519190.js";import{f as j}from"./build-422e6a56.js";import{f as V,m as W}from"./build-f3c24bda.js";import{c as Z,S as F}from"./build-d4372400.js";function k(a){return a.substring(2).toLowerCase()}function _(a,s){return s.documentElement.clientWidth<a.clientX||s.documentElement.clientHeight<a.clientY}function $(a){const{children:s,disableReactTree:p=!1,mouseEvent:l="onClick",onClickAway:t,touchEvent:i="onTouchEnd"}=a,h=f.useRef(!1),o=f.useRef(null),g=f.useRef(!1),x=f.useRef(!1);f.useEffect(()=>(setTimeout(()=>{g.current=!0},0),()=>{g.current=!1}),[]);const y=B(s.ref,o),u=T(c=>{const n=x.current;x.current=!1;const e=E(o.current);if(!g.current||!o.current||"clientX"in c&&_(c,e))return;if(h.current){h.current=!1;return}let d;c.composedPath?d=c.composedPath().indexOf(o.current)>-1:d=!e.documentElement.contains(c.target)||o.current.contains(c.target),!d&&(p||!n)&&t(c)}),M=c=>n=>{x.current=!0;const e=s.props[c];e&&e(n)},w={ref:y};return i!==!1&&(w[i]=M(i)),f.useEffect(()=>{if(i!==!1){const c=k(i),n=E(o.current),e=()=>{h.current=!0};return n.addEventListener(c,u),n.addEventListener("touchmove",e),()=>{n.removeEventListener(c,u),n.removeEventListener("touchmove",e)}}},[u,i]),l!==!1&&(w[l]=M(l)),f.useEffect(()=>{if(l!==!1){const c=k(l),n=E(o.current);return n.addEventListener(c,u),()=>{n.removeEventListener(c,u)}}},[u,l]),r.jsx(f.Fragment,{children:f.cloneElement(s,w)})}const v=b(r.jsx("path",{d:"M4 10h3v7H4zm6.5 0h3v7h-3zM2 19h20v3H2zm15-9h3v7h-3zm-5-9L2 6v2h20V6z"}),"AccountBalance"),A=b(r.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeft"),I=b(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRight"),m=a=>{const s=N(a==null?void 0:a.ciphertext,a==null?void 0:a.iv);let p=0,l=0;return{movements:(s==null?void 0:s.map(t=>{const i=parseFloat((t==null?void 0:t.amount)||"0");(t==null?void 0:t.type.toLowerCase())==="gasto"?p+=i:l+=i;const h=t!=null&&t.date?R(new Date(t==null?void 0:t.date),"dd MMM yyyy",{locale:S}):"",o=t!=null&&t.date?R(new Date(t==null?void 0:t.date),"p"):"";return{id:t==null?void 0:t.transactionId,fullDate:V(t==null?void 0:t.date),date:h,time:o,description:t==null?void 0:t.description,amount:i,amountFormat:j(i),type:t==null?void 0:t.type.toLowerCase(),concept:(t==null?void 0:t.concept)??""}}))??[],income:j(l),expenses:j(p),balanceMovements:j(l-p)}},P=H(Z)(({theme:a})=>({"label + &":{marginTop:a.spacing(3)},"& .MuiInputBase-input":{borderRadius:4,position:"relative",border:"none",outline:"none"}}));function tt({setCurrentMonth:a,currentMonth:s,isLoading:p}){const t=new Date().getFullYear(),i=K("up","lg"),h=Array.from({length:t-2020+1},(n,e)=>2020+e).reverse(),o=p,g=()=>{a(n=>{const e=new Date(n);return e.setMonth(e.getMonth()-1),e})},x=()=>{a(n=>{const e=new Date(n);return e.setMonth(e.getMonth()+1),e})},y=()=>{const n=new Date;return s.getMonth()===n.getMonth()&&s.getFullYear()===n.getFullYear()},u=(n,e)=>{const d=new Date,C=d.getFullYear(),z=d.getMonth();return e>C||e===C&&n>z},M=n=>{const e=new Date(s);e.setMonth(n.target.value),a(e)},w=n=>{const e=new Date(s);e.setFullYear(n.target.value),a(e)},c={PaperProps:{style:{maxHeight:200,overflowY:"auto"}}};return r.jsxs(O,{spacing:2,direction:"row",justifyContent:"space-between",sx:{py:2.5,px:3},children:[i?r.jsx(D,{loading:o,variant:"outlined",startIcon:r.jsx(A,{}),onClick:g,children:"anterior"}):r.jsx(L,{disabled:o,variant:"outlined",onClick:g,children:r.jsx(A,{})}),r.jsxs(X,{display:"flex",alignItems:"center",justifyContent:"center",spacing:1,gap:1,children:[r.jsx(F,{size:"small",value:s.getMonth(),onChange:M,disabled:o,input:r.jsx(P,{}),children:W.map((n,e)=>{const d=s.getFullYear();return u(e,d)?null:r.jsx(Y,{value:e,disabled:u(e,d),children:n},e)})}),r.jsx(F,{size:"small",value:s.getFullYear(),onChange:w,input:r.jsx(P,{}),MenuProps:c,disabled:o,children:h.map(n=>r.jsx(Y,{value:n,children:n},n))})]}),i?r.jsx(D,{loading:o,variant:"outlined",endIcon:r.jsx(I,{}),disabled:y(),onClick:x,children:"siguiente"}):r.jsx(L,{disabled:o,variant:"outlined",onClick:x,children:r.jsx(I,{})})]})}export{v as A,$ as C,m as a,tt as b};
