import{ar as A,aq as E,Z as I,r as g,au as R,aj as T,al as u,j as o,av as P,aw as N,P as V,S as v,q as S,T as y,v as _,B as k,w,e as B}from"./index-6aaca417.js";import{u as U,C as L}from"./build-941fb69b.js";import{P as M}from"./build-61d5e77c.js";import{V as $}from"./build-83d17a75.js";import{V as F}from"./build-899176f2.js";import{p as z}from"./build-a9e4031f.js";import{A as D}from"./build-2de4eb8f.js";import{C as W}from"./build-2a209be5.js";import"./build-9563ddbe.js";import"./build-5b2a0241.js";function q(e){return A("MuiCardContent",e)}E("MuiCardContent",["root"]);const G=["className","component"],H=e=>{const{classes:a}=e;return N({root:["root"]},q,a)},Y=I("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,a)=>a.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),X=g.forwardRef(function(a,c){const t=R({props:a,name:"MuiCardContent"}),{className:s,component:p="div"}=t,l=T(t,G),d=u({},t,{component:p}),C=H(d);return o.jsx(Y,u({as:p,className:P(C.root,s),ownerState:d,ref:c},l))}),Z=X;function J(e){return A("MuiCardMedia",e)}E("MuiCardMedia",["root","media","img"]);const K=["children","className","component","image","src","style"],Q=e=>{const{classes:a,isMediaComponent:c,isImageComponent:t}=e;return N({root:["root",c&&"media",t&&"img"]},J,a)},ee=I("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:c}=e,{isMediaComponent:t,isImageComponent:s}=c;return[a.root,t&&a.media,s&&a.img]}})(({ownerState:e})=>u({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),te=["video","audio","picture","iframe","img"],oe=["picture","img"],ae=g.forwardRef(function(a,c){const t=R({props:a,name:"MuiCardMedia"}),{children:s,className:p,component:l="div",image:d,src:C,style:x}=t,f=T(t,K),m=te.indexOf(l)!==-1,r=!m&&d?u({backgroundImage:`url("${d}")`},x):x,n=u({},t,{component:l,isMediaComponent:m,isImageComponent:oe.indexOf(l)!==-1}),i=Q(n);return o.jsx(ee,u({className:P(i.root,p),as:l,role:!m&&d?"img":void 0,ref:c,style:r,ownerState:n,src:m?d||C:void 0},f,{children:s}))}),se=ae,b={VIABO_CARD:"Viabo Card",VIABO_PAY:"Viabo Pay"},h=[{type:1,name:b.VIABO_PAY,description:"Herramienta de cobro/pago por pefiles,transparencia transaccional y alertas.",image:F},{type:2,name:b.VIABO_CARD,description:"Tarjeta CARNET X VIABO para control de gastos, pago de compensaciones, cash-back y fidelización por perfiles.",image:$}];re.propTypes={store:V.shape(z)};const j={selected:{backgroundColor:e=>B(e.palette.primary.main,.3),borderColor:e=>e.palette.primary.main},unselected:{backgroundColor:e=>e.palette.background.neutral,borderColor:"transparent"}};function re({store:e}){const{setActualProcess:a,setLastProcess:c,resume:t}=e,[s,p]=g.useState([]),[l,d]=g.useState(!1),{mutate:C,isLoading:x}=U();g.useEffect(()=>{if(t!=null&&t.services){const r=(t==null?void 0:t.services.map(n=>{var i;return(i=h.find(O=>O.type.toString()===(n==null?void 0:n.type)))==null?void 0:i.name}))||[];p(r)}},[t==null?void 0:t.services]);const f=r=>{if(!s.includes(r.name))return p([...s,r.name]);const n=s.filter(i=>i!==r.name);return p(n)},m=()=>{if(s.length===0)return d(!0);const r=L(t,2),n=h.filter(i=>s.includes(i.name)).map(i=>({type:i.type.toString(),cardNumbers:"0",cardUse:"",personalized:"0"}));return C({...r,services:n},{onSuccess:()=>{a(M.COMMERCE_INFO),c({info:s,name:M.SERVICES_SELECTION}),d(!1)}})};return o.jsxs(o.Fragment,{children:[o.jsx(v,{direction:"column",width:1,spacing:1,children:o.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[o.jsx(y,{variant:"h4",color:"textPrimary",align:"center",children:"¡Bienvenido a Viabo!"}),o.jsx(y,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Seleccione los servicios para habilitar su ecosistema."})]})}),l&&o.jsxs(D,{listenElement:l,sx:{mb:5,mx:2,textAlign:"initial"},severity:"warning",children:[o.jsx(_,{sx:{textAlign:"initial"},children:"Servicios"}),"Se debe seleccionar al menos un servicio para continuar con el proceso"]}),o.jsx(S.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},children:o.jsx(k,{my:3,px:2,sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(2, 1fr)"}},children:h.map((r,n)=>{const i=s.includes(r.name);return o.jsx(S.div,{whileHover:{scale:1.05},whileTap:{scale:.9},children:o.jsxs(W,{onClick:()=>f(r),sx:{backgroundColor:"transparent",cursor:"pointer",height:"100%",...i?j.selected:j.unselected},children:[o.jsx(se,{sx:{px:{xs:10,sm:5},pt:3},component:"img",image:r.image}),o.jsx(Z,{children:o.jsx(y,{variant:"caption",color:"text.disabled",children:r.description})})]})},n)})})}),o.jsx(v,{mt:7,px:2,children:o.jsx(w,{onClick:m,loading:x,color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{textTransform:"uppercase"},children:"Guardar"})})]})}export{re as ServicesSelection,re as default};
