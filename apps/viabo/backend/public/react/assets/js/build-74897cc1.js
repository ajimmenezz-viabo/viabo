import{Z as H,aY as d,j as M,B as Y}from"./index-52f3dfc5.js";import{T as ee}from"./build-6b6057ed.js";const te=H(ee)`
  input {
    text-align: center;
  }
`,ne={TextFieldStyled:te},re=r=>M.jsx(ne.TextFieldStyled,{...r}),y={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace",home:"Home",end:"End"};function ae(r,c){return r<=0?[]:Array.from({length:r},c)}function ce(r,c,f){return r.map((l,g)=>c===g?f:l)}function S(r){return r.join("")}function K(r,c){return[...r,c]}function le(r,c,f){return r.reduce((l,g,o)=>{const{characters:v,restArrayMerged:u}=l;if(o<f)return{restArrayMerged:u,characters:K(v,g)};const[R,...D]=u;return{restArrayMerged:D,characters:K(v,R||"")}},{restArrayMerged:c,characters:[]}).characters}function oe(r){return r.split("")}function N(r){const c=d.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return d.useInsertionEffect(()=>{c.current=r}),d.useCallback((...f)=>{var l;return(l=c.current)==null?void 0:l.call(c,...f)},[])}const se=()=>!0,fe=d.forwardRef((r,c)=>{const{value:f="",length:l=4,autoFocus:g=!1,onChange:o,TextFieldsProps:v,onComplete:u,validateChar:R=se,className:D,onBlur:k,...L}=r,$=d.useRef(f),E=N(u),m=N(e=>({isCompleted:e.length>=l,finalValue:e.slice(0,l)})),{onPaste:I,onFocus:B,onKeyDown:F,className:q,placeholder:T,onBlur:w,...z}=v||{};d.useEffect(()=>{const{isCompleted:e,finalValue:t}=m($.current);e&&E(t)},[l,E,m]);const p=ae(l,(e,t)=>({character:f[t]||"",inputRef:d.createRef()})),V=e=>p.findIndex(({inputRef:t})=>t.current===e),b=()=>p.map(({character:e})=>e),j=(e,t)=>{const n=ce(b(),e,t);return S(n)},G=e=>{var t,n;(n=(t=p[e])==null?void 0:t.inputRef.current)==null||n.focus()},s=e=>{var t,n;(n=(t=p[e])==null?void 0:t.inputRef.current)==null||n.select()},O=e=>{e+1!==l&&(p[e+1].character?s(e+1):G(e+1))},P=(e,t)=>typeof R!="function"?!0:R(e,t),J=e=>{const t=e.target.value[0]||"";let n=t;const i=V(e.target);n&&!P(n,i)&&(n="");const a=j(i,n);o==null||o(a);const{isCompleted:x,finalValue:h}=m(a);x&&(u==null||u(h)),n!==""?a.length-1<i?s(a.length):O(i):t===""&&a.length<=i&&s(i-1)},Q=e=>{e.preventDefault(),e.target.select(),B==null||B(e)},U=e=>{const t=e.target,n=t.selectionStart,i=t.selectionEnd,a=V(t),x=n===0&&i===0;if(t.value===e.key)e.preventDefault(),O(a);else if(y.backspace===e.key){if(!t.value)e.preventDefault(),s(a-1);else if(x){e.preventDefault();const h=j(a,"");o==null||o(h),h.length<=a&&s(a-1)}}else y.left===e.key?(e.preventDefault(),s(a-1)):y.right===e.key?(e.preventDefault(),s(a+1)):y.home===e.key?(e.preventDefault(),s(0)):y.end===e.key&&(e.preventDefault(),s(p.length-1));F==null||F(e)},W=e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain"),n=e.target,i=p.findIndex(({character:C,inputRef:A})=>C===""||A.current===n),a=b(),x=le(a,oe(t),i).map((C,A)=>P(C,A)?C:""),h=S(x);o==null||o(h);const{isCompleted:Z,finalValue:_}=m(h);Z?(u==null||u(_),s(l-1)):s(h.length),I==null||I(e)},X=e=>{if(w==null||w(e),!p.some(({inputRef:t})=>t.current===e.relatedTarget)){const{isCompleted:t,finalValue:n}=m(f);k==null||k(n,t)}};return M.jsx(Y,{display:"flex",gap:"20px",alignItems:"center",ref:c,className:`MuiOtpInput-Box ${D||""}`,...L,children:p.map(({character:e,inputRef:t},n)=>M.jsx(re,{autoFocus:g?n===0:!1,autoComplete:"one-time-code",value:e,inputRef:t,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${n+1} ${q||""}`,onPaste:W,onFocus:Q,onChange:J,onKeyDown:U,onBlur:X,placeholder:typeof T=="function"?T(n):T,...z},n))})});export{fe as h};
