import{z as v,j as e,ak as L,r as R,a as T,g as F,b as q,S as o,T as d,i as C,cQ as k,L as z,ai as D}from"./index-C406R3ty.js";import{u as N}from"./build-KIH6eYLU.js";import{a as P}from"./build-9SyOgC-u.js";import{c as V,a as h}from"./build-GJTBy67J.js";import{u as m,C as _}from"./build-wl0USW4_.js";import{c as w}from"./build-m5YuXGUa.js";import{F as B}from"./build-ldM02251.js";import{R as E}from"./build-OsaRfRsO.js";import{I as g}from"./build-9E9tHrZa.js";import{I as H}from"./build-GHuRHZx5.js";import{E as M}from"./build-IK_p1PN7.js";import{F as O,C as $}from"./build-Ccv5rkT2.js";import{L as I}from"./build-5t1lJgEW.js";import"./build-ysCbZUYd.js";import"./build-3wi0y6zP.js";import"./build-uh7Bczik.js";import"./build-tho4U_WW.js";import"./build-UlczVlm5.js";import"./build-c97ZKUI0.js";import"./build-Uc7vb3zK.js";const W=v(e.jsx("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm-2 16-4-4 1.41-1.41L10 14.17l6.59-6.59L18 9l-8 8z"}),"VerifiedUser"),G=(p={})=>{const{enqueueSnackbar:t}=L(),[u,n]=R.useState(null);return{...T(w,{onSuccess:()=>{n(null),t("Se creo el usuario con éxito",{variant:"success",autoHideDuration:5e3})},onError:a=>{const c=F(a,"No se puede crear el usuario. Intente nuevamente o reporte a sistemas");n(c),t(c,{variant:q(a),autoHideDuration:5e3})},...p}),error:u||null}};function he(){const p=m(r=>r.setStepAssignRegister),t=m(r=>r.setUser),u=m(r=>r.setToken),n=m(r=>r.token),{mutate:x,isLoading:a}=G(),c=V({name:h().required("El nombre es requerido"),email:h().email("Ingresa un correo valido").required("El correo es requerido"),phone:h().test("longitud","El telefono es muy corto",r=>!(r&&r.replace(/[\s+]/g,"").length<10))}),f=N({initialValues:{name:"",phone:"",email:"",privacy:!1},validationSchema:c,onSubmit:r=>{D.defaults.headers.common.Authorization=`Bearer ${n}`,x(r,{onSuccess:i=>{i!=null&&i.token&&(u(i==null?void 0:i.token),t(r),p(_.USER_VALIDATION)),y(!1)},onError:()=>{y(!1)}})}}),{errors:j,touched:S,isSubmitting:b,setFieldValue:A,values:s,setSubmitting:y,getFieldProps:U}=f,l=b||a;return e.jsxs(o,{children:[e.jsxs(o,{direction:"column",width:1,spacing:0,children:[e.jsx(d,{variant:"h4",color:"textPrimary",align:"center",children:"Crear Cuenta"}),e.jsx(d,{paragraph:!0,align:"center",variant:"subtitle1",color:"text.primary",whiteSpace:"pre-line",children:"¡Es tiempo de transformar tu negocio!"})]}),e.jsx(B,{formik:f,children:e.jsxs(o,{spacing:2,sx:{p:3,px:5},children:[e.jsxs(o,{spacing:1,children:[e.jsx(g,{children:"Nombre Completo*"}),e.jsx(E,{name:"name",required:!0,placeholder:"Usuario",disabled:l,size:"small"})]}),e.jsxs(o,{spacing:1,children:[e.jsx(g,{children:"Correo Electrónico*"}),e.jsx(E,{name:"email",required:!0,placeholder:"usuario@dominio.com",disabled:l,size:"small",InputProps:{startAdornment:e.jsx(H,{position:"start",children:e.jsx(M,{})})}})]}),e.jsxs(o,{spacing:1,children:[e.jsx(g,{children:"Teléfono"}),e.jsx(P,{name:"phone",fullWidth:!0,langOfCountryName:"es",preferredCountries:["MX","US"],continents:["NA","SA"],value:s.phone||"+52",disabled:l,onChange:(r,i)=>{A("phone",r)},size:"small",error:S.phone&&!!j.phone,helperText:S.phone&&j.phone})]}),e.jsx(o,{justifyContent:"center",alignItems:"center",children:e.jsx(O,{control:e.jsx($,{size:"small",...U("privacy"),disabled:l,checked:s==null?void 0:s.apiRequired,value:s==null?void 0:s.apiRequired}),label:e.jsxs(d,{variant:"body2",align:"center",sx:{color:"text.secondary"},children:["He leído y acepto los  ",e.jsx(I,{component:C,underline:"always",color:"info.main",to:k.policies,target:"_blank",children:"Términos y condiciones"}),"  &  ",e.jsx(I,{component:C,underline:"always",color:"info.main",to:k.privacy,target:"_blank",children:"Acuerdos de privacidad"}),"."]})})}),e.jsx(o,{sx:{px:5},children:e.jsx(z,{size:"large",loading:b,variant:"contained",color:"primary",fullWidth:!0,type:"submit",startIcon:e.jsx(W,{}),children:"Registrar"})})]})})]})}export{he as default};
