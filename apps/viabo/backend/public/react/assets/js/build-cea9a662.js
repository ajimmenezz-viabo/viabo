import{t as T,j as e,c as A,ap as H,r as m,_ as B,B as f,$ as L,S as c,V as _,L as E,R as N,T as g,a5 as k,W,a0 as V,Z as $,a1 as Q,P as u,a3 as U,Y,a7 as q,aa as G,ab as K,a as X,b as Z,g as J,aI as ee,l as se,ac as O,f as te,ad as ne,ae as re,af as ie}from"./build-7f26f9ca.js";import{A as ae}from"./build-8cd20c41.js";import{a as oe,A as le,S as ce,N as de,C as he}from"./build-c8196064.js";import{D as pe}from"./build-4a7db965.js";import{C as xe}from"./build-c6051750.js";import{S as ue}from"./build-42e9af7a.js";import{L as me}from"./build-fb36d713.js";import{L as fe,S as je,a as ge,b as ye,c as C,d as P}from"./build-db1b4688.js";import{E as Se,C as be,H as ve}from"./build-bc7fa3d2.js";import"./build-1442fb25.js";import{I as Ie}from"./build-bfec3b8f.js";import{I as Ce}from"./build-8ee9e1f7.js";import{S as Te}from"./build-47ca29a0.js";const Le=T(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.46 14.45l-1.36-.62c.28-.61.41-1.24.4-1.86-.01-.63-.14-1.24-.4-1.8l1.36-.63c.35.75.53 1.56.54 2.4.01.86-.17 1.7-.54 2.51zm3.07 1.56-1.3-.74c.52-.92.78-1.98.78-3.15 0-1.19-.27-2.33-.8-3.4l1.34-.67c.64 1.28.96 2.65.96 4.07 0 1.43-.33 2.74-.98 3.89zm3.14 1.32-1.35-.66c.78-1.6 1.18-3.18 1.18-4.69 0-1.51-.4-3.07-1.18-4.64l1.34-.67c.9 1.78 1.34 3.56 1.34 5.31 0 1.74-.44 3.54-1.33 5.35z"}),"ContactlessSharp"),we=T(e.jsx("path",{d:"M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"}),"Link"),Ee=T(e.jsx("path",{d:"M17 2H7c-1.1 0-2 .9-2 2v2c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 4H7V4h10v2zm3 16H4c-1.1 0-2-.9-2-2v-1h20v1c0 1.1-.9 2-2 2zm-1.47-11.81C18.21 9.47 17.49 9 16.7 9H7.3c-.79 0-1.51.47-1.83 1.19L2 18h20l-3.47-7.81zM9.5 16h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm3 4h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5zm0-2h-1c-.28 0-.5-.22-.5-.5s.22-.5.5-.5h1c.28 0 .5.22.5.5s-.22.5-.5.5z"}),"PointOfSale"),Oe={terminal:null},Pe=(s,r)=>({...Oe,setTerminal:o=>{const{terminal:i}=r();s(n=>({terminal:{...i,...o}}),!1,"SET_TERMINAL_SELECTED")},resetTerminal:()=>{s(o=>({pos:null}),!1,"RESET_TERMINAL_SELECTED")},addTerminalInfo:o=>{const{terminal:i}=r();s(n=>({terminal:{...i,...o}}),!1,"SET_TERMINAL_INFO")}}),S=A(Pe),Ae={terminals:[],isOpenList:!0,isCollapse:!1},_e=(s,r)=>({...Ae,setTerminals:o=>{s(i=>({terminals:o}),!1,"SET_TERMINAL")},setOpenList:o=>{s(i=>({isOpenList:o}),!1,"SET_OPEN_LIST")},setCollapse:o=>{s(i=>({isCollapse:o}),!1,"SET_COLLAPSE")}}),h=A(_e),ke=H(m.lazy(()=>B(()=>import("./build-c6f98fa4.js"),["assets/js/build-c6f98fa4.js","assets/js/build-7f26f9ca.js","assets/css/build-2e53629c.css","assets/js/build-66f9d360.js","assets/js/build-1442fb25.js","assets/js/build-632f8838.js","assets/js/build-b2ad78ab.js","assets/js/build-8ee9e1f7.js","assets/js/build-38142a14.js","assets/js/build-e1125ef8.js","assets/js/build-bfec3b8f.js","assets/js/build-fb36d713.js","assets/js/build-bee6630b.js","assets/js/build-08df8bb6.js","assets/js/build-9ad2dcba.js","assets/js/build-d0fff932.js","assets/js/build-c6051750.js","assets/js/build-bc7fa3d2.js","assets/js/build-f7a5a130.js","assets/js/build-8cd20c41.js","assets/js/build-c8196064.js","assets/js/build-4a7db965.js","assets/js/build-0b64b4ca.js","assets/js/build-3c5effeb.js","assets/js/build-123afd9f.js","assets/js/build-42e9af7a.js","assets/js/build-db1b4688.js","assets/js/build-47ca29a0.js"]))),Me=()=>{S(n=>n.terminal);const[s,r]=m.useState(!1),[o,i]=m.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:{mb:2},children:e.jsx(L,{children:e.jsxs(c,{direction:"row",divider:e.jsx(_,{orientation:"vertical",flexItem:!0,sx:{borderStyle:"dashed"}}),sx:{py:3},spacing:1,children:[e.jsx(c,{direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:e.jsx(E,{startIcon:e.jsx(we,{}),variant:"contained",color:"info",onClick:()=>r(!0),children:"Liga de Pago"})}),e.jsx(c,{direction:"row",alignItems:"center",justifyContent:"center",sx:{width:1,minWidth:150},children:e.jsx(E,{startIcon:e.jsx(ae,{}),color:"info",variant:"contained",onClick:()=>i(!0),children:"Terminal Virtual"})})]})})}),s&&e.jsx(ke,{open:s,setOpen:r})]})},Re=()=>{const s=S(r=>r.terminal);return e.jsx(N,{sx:r=>({borderRadius:1,position:"relative",zIndex:1,backgroundColor:r.palette.primary.light,color:"white",minHeight:"auto!important",height:{xs:"auto",sm:"auto"}}),children:e.jsx(c,{flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",sx:{width:1},gap:2,py:2,alignItems:"center",children:e.jsxs(c,{flexDirection:"column",spacing:0,alignItems:{xs:"center",md:"start"},children:[e.jsx(c,{flexDirection:"row",gap:1,alignItems:"center",children:e.jsx(g,{variant:"subtitle2",children:"Disponible"})}),e.jsxs(c,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(g,{variant:"h3",children:s==null?void 0:s.balanceFormatted}),e.jsx(g,{variant:"caption",children:"MXN"})]})]})})})},ze=()=>{const[s,r]=m.useState(new Date);S(n=>n.terminal),S(n=>n.addTerminalInfo);const o=[],i=[{name:"description",label:"Descripcion",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(n,d)=>{const t=o[n],a=(t==null?void 0:t.type)==="ingreso";return e.jsxs(f,{sx:{display:"flex",alignItems:"center"},children:[e.jsxs(f,{sx:{position:"relative"},children:[e.jsx(k,{sx:{width:48,height:48,color:"text.secondary",bgcolor:"background.neutral"},children:e.jsx(le,{width:24,height:24})}),e.jsx(f,{sx:{right:0,bottom:0,width:20,height:20,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",color:"common.white",bgcolor:"error.main",justifyContent:"center",...a&&{bgcolor:"success.main"}},children:a?e.jsx(ce,{sx:{width:15,height:15}}):e.jsx(de,{sx:{width:15,height:15}})})]}),e.jsxs(f,{sx:{ml:2},children:[e.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:a?"Recibe dinero de: ":"Retiro de dinero en:"}),e.jsxs(g,{variant:"subtitle2",children:[" ",t==null?void 0:t.description]}),(t==null?void 0:t.concept)!==""&&e.jsxs(g,{variant:"overline",color:"text.disabled",fontStyle:"italic",children:["concepto : ",t==null?void 0:t.concept]})]})]})}}},{name:"date",label:"Fecha",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(n,d)=>{const t=o[n];return e.jsxs(c,{children:[e.jsx(g,{variant:"subtitle2",children:t==null?void 0:t.date}),e.jsx(g,{variant:"body2",sx:{color:"text.secondary"},children:t==null?void 0:t.time})]})}}},{name:"amount",label:"Cantidad",options:{filterType:"textField",filterOptions:{fullWidth:!0},customBodyRenderLite:(n,d)=>{const t=o[n],a=(t==null?void 0:t.type)==="ingreso";return e.jsx(g,{variant:"subtitle2",fontWeight:"bold",color:a?"success.main":"error",children:a?`+ ${t==null?void 0:t.amount}`:`- ${t==null?void 0:t.amount}`})}}}];return e.jsxs(xe,{children:[e.jsx(oe,{currentMonth:s,setCurrentMonth:r,isLoading:!1}),e.jsx(_,{sx:{borderStyle:"dashed"}}),e.jsx(pe,{title:"Movimientos",data:o||[],columns:i,options:{responsive:"simple",rowHover:!0,selectableRows:"single",selectableRowsOnClick:!1,selectToolbarPlacement:"replace",sortOrder:{name:"date",direction:"desc"},downloadOptions:{filename:"movimientos.csv",filterOptions:{useDisplayedColumnsOnly:!1}}}})]})},De=()=>{const s=S(r=>r.terminal);return W(),e.jsxs(c,{sx:r=>({pl:{xs:0,lg:2},overflow:"hidden",flexDirection:"column",flexGrow:1}),children:[s&&e.jsxs(e.Fragment,{children:[e.jsx(Re,{}),e.jsx(Me,{}),e.jsx(L,{children:e.jsx(c,{pt:0,pb:4,px:2,children:e.jsx(ze,{})})})]}),!s&&e.jsxs(c,{spacing:3,sx:{height:"100%",width:"100%"},children:[e.jsx(V,{variant:"filled",severity:"info",children:"Debe seleccionar una terminal para ver sus detalles!"}),e.jsx(c,{alignItems:"center",children:e.jsx(ue,{sx:{width:"30%"}})})]})]})},Fe=$(Q)(({theme:s})=>({borderRadius:"8px!important",width:1,justifyContent:"center",display:"flex",alignItems:"center",mb:1})),M=({terminal:s})=>{const r=h(a=>a.isOpenList),o=h(a=>a.setOpenList),i=S(a=>a.setTerminal),n=S(a=>a.terminal);(s==null?void 0:s.id)===(n==null?void 0:n.id)&&n&&(n==null||n.cardON);const d=(s==null?void 0:s.id)===(n==null?void 0:n.id),t=a=>{var j;!((j=a.target)==null?void 0:j.type)&&!d&&(i(s),o(!1))};return e.jsx(U,{title:"terminal",arrow:!0,placement:"right",children:e.jsx(me,{sx:{mb:1,padding:0,borderRadius:1,"& :hover":{color:"text.primary"}},disablePadding:!0,children:e.jsxs(Fe,{onClick:t,sx:{...d&&{bgcolor:"secondary.light",color:"black","& :hover":{color:"text.primary"}},"& :hover":{color:"text.primary"},width:1,py:1,gap:1},children:[e.jsx(fe,{sx:{ml:2,m:0},children:e.jsx(f,{sx:{position:"relative"},children:e.jsx(k,{sx:a=>({width:32,height:32,m:0,color:a.palette.primary.contrastText,backgroundColor:a.palette.primary.main}),children:e.jsx(Le,{sx:{width:20,height:20},color:"white"})})})}),r&&e.jsx(e.Fragment,{children:e.jsx(c,{sx:{width:1},children:e.jsx(g,{noWrap:!0,variant:"subtitle2",children:s==null?void 0:s.alias})})})]})})})};M.propTypes={terminal:u.shape({alias:u.any,id:u.any})};const R=({terminalsQuery:s,sx:r,...o})=>{const{isLoading:i,data:n,error:d,isError:t,refetch:a}=s,y=h(l=>l.isOpenList),j=h(l=>l.terminals);return t&&y&&!n&&!i?e.jsx(Y,{errorMessage:d,handleButton:a}):n&&y&&(n==null?void 0:n.length)===0&&!i?e.jsx(Se,{pt:2.5,message:"No hay terminales activas para este comercio"}):e.jsx(q,{disablePadding:!0,sx:r,...o,children:(i?[...Array(12)]:j).map((l,p)=>l!=null&&l.id?e.jsx(M,{terminal:l},l==null?void 0:l.id):e.jsx(je,{isOpenSideBar:y},p))})};R.propTypes={sx:u.any,terminalsQuery:u.shape({data:u.array,error:u.any,isError:u.any,isLoading:u.any,refetch:u.any})};const z=({commerceTerminals:s=[]})=>{const r=h(x=>x.isOpenList),o=h(x=>x.setOpenList),i=h(x=>x.setTerminals),n=h(x=>x.terminals),d=h(x=>x.isCollapse),[t,a]=m.useState(""),[y,j]=m.useState(!1),l=async x=>{try{const{value:v}=x.target;if(a(v),v){const F=(s==null?void 0:s.filter(b=>{var w;return(b==null?void 0:b.alias)&&((w=b==null?void 0:b.alias)==null?void 0:w.toLowerCase().indexOf(v.toLowerCase()))!==-1}))||[];i(F)}else i(s)}catch(v){console.error(v)}},p=()=>{r&&(a(""),i(s)),o(!r)},I=()=>{j(!0)},D=()=>{j(!1)};return m.useEffect(()=>{s&&i(s)},[s]),m.useEffect(()=>{if(!r)return j(!1)},[r]),e.jsxs(e.Fragment,{children:[e.jsx(f,{sx:{p:2,px:0},children:e.jsxs(c,{direction:"row",justifyContent:r?"flex-end":"center",alignItems:"center",spacing:2,children:[!d&&e.jsx(he,{onClickAway:D,children:e.jsx(Ie,{fullWidth:!0,size:"small",value:t,onFocus:I,onChange:l,placeholder:"Buscar Terminales...",InputProps:{startAdornment:e.jsx(Ce,{position:"start",children:e.jsx(Te,{sx:{color:"text.disabled",width:20,height:20}})})}})}),e.jsx(c,{direction:"row",alignItems:"center",justifyContent:"center",children:e.jsx(ge,{size:"small",sx:{...!r&&{transform:"rotate(180deg)"}},onClick:p,children:G})})]})}),(n==null?void 0:n.length)===0&&(s==null?void 0:s.length)>0&&e.jsx(K,{sx:{p:1,display:"flex",flexDirection:"column",alignItems:"center"},searchQuery:t})]})};z.propTypes={commerceTerminals:u.array};const He=async()=>[{id:"67830f19-ddc0-41c0-ab6f-ac1e880176a0",terminalId:"13",alias:"terminal 1",balanceFormatted:"$2700.43"}],ns=async s=>{await X.post("/api/pay/payment-link",s)},Be={LIST:"commerce-terminals"},Ne=(s={})=>{const[r,o]=m.useState(null);return{...Z([Be.LIST],He,{staleTime:6e4,refetchOnMount:"always",onError:n=>{const d=J(n,"No se puede obtener la lista de terminales del comercio. Intente nuevamente o reporte a sistemas");o(d)},...s}),error:r||null}},We=()=>{const s=S(p=>{var I;return(I=p.terminal)==null?void 0:I.id}),r=h(p=>p.setOpenList),o=h(p=>p.setCollapse),i=h(p=>p.isOpenList),n=Ne(),d=ee(),t=se("up","md"),a=t&&!i,y=()=>{r(!1)},j=()=>{r(!i)};m.useEffect(()=>{if(!t)return y()},[t,s]),m.useEffect(()=>{o(a)},[a]);const l=e.jsx(L,{sx:{height:.98},children:e.jsxs(c,{px:i?1:0,children:[e.jsx(z,{commerceTerminals:(n==null?void 0:n.data)||[]}),e.jsx(R,{terminalsQuery:n})]})});return e.jsxs(e.Fragment,{children:[!t&&!i&&e.jsx(ye,{onClick:j,children:e.jsx(Ee,{sx:{width:16,height:16}})}),t?e.jsx(O,{open:i,variant:"persistent",PaperProps:{sx:{height:1,borderRightStyle:"none",bgcolor:"background.default"}},sx:{height:1,width:C,transition:d.transitions.create("width"),"& .MuiDrawer-paper":{position:"static",backgroundColor:"transparent!important",width:C},...a&&{width:P,"& .MuiDrawer-paper":{width:P,backgroundColor:"transparent!important",position:"static",transform:"none !important",visibility:"visible !important"}}},children:l}):e.jsx(O,{ModalProps:{keepMounted:!0},open:i,onClose:y,sx:{height:1,"& .MuiDrawer-paper":{width:C,p:2}},children:l})]})},Ve=()=>e.jsx(te,{title:"Lista de Terminales Punto de Venta",children:e.jsx(be,{children:e.jsxs(f,{display:"flex",overflow:"hidden",sx:{height:"100vH",maxHeight:"100%",flexDirection:"column"},children:[e.jsx(f,{px:1,children:e.jsx(ve,{name:"Terminales Punto de Venta",links:[{name:"Inicio",href:ne.root},{name:"Administracion",href:re.cards},{name:ie.terminals.name}]})}),e.jsxs(f,{display:"flex",overflow:"hidden",sx:{flex:"1 1 0%"},children:[e.jsx(f,{display:"block",width:1,position:"absolute"}),e.jsx(We,{}),e.jsx(De,{})]})]})})}),rs=Object.freeze(Object.defineProperty({__proto__:null,default:Ve},Symbol.toStringTag,{value:"Module"}));export{we as L,rs as P,ns as c};
