import{y as b,j as n,au as S,av as j,ag as y,r as D,d as M,g as T,a0 as v,b as O,ae as z,ay as f,bb as F,bc as L,S as h,T as A,aD as N,aA as I,P as R,a5 as w}from"./index-fe9cccac.js";import{M as B}from"./build-e56cf91f.js";import"./build-8c6704b2.js";import{V as U}from"./build-2d75fe1f.js";import{G as E}from"./build-93c6284b.js";import{g as V}from"./build-3850ff23.js";import{g as H}from"./build-6d9b0aa0.js";import{L as k}from"./build-ae8d849a.js";import{C as G}from"./build-f7a33889.js";import{a as P}from"./build-316e6977.js";import{f as K}from"./build-ba4c2166.js";import{f as x,b as Y,H as $}from"./build-13d4e6e1.js";import{C as Q}from"./build-0032fb80.js";const W=b(n.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8c1.57 0 3.04.46 4.28 1.25l1.45-1.45C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10c1.73 0 3.36-.44 4.78-1.22l-1.5-1.5c-1 .46-2.11.72-3.28.72zm7-5h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z"}),"AddTask"),q=[{id:6,name:"PENDIENTE",color:"warning"},{id:7,name:"PAGADA",color:"primary"},{id:8,name:"CANCELADA",color:"error"},{id:9,name:"LIQUIDADA",color:"success"}],J=t=>{var a;return((a=q.find(s=>{var e;return s.name===((e=t==null?void 0:t.toLowerCase())==null?void 0:e.toUpperCase())}))==null?void 0:a.color)||"info"},X=t=>G(t),Z=t=>{var a;return(t==null?void 0:t.statusName)==="Pagada"?(a=t==null?void 0:t.payCashData)==null?void 0:a.date:(t==null?void 0:t.statusName)==="Liquidada"?t==null?void 0:t.conciliationDate:(t==null?void 0:t.statusName)==="Cancelada"?t==null?void 0:t.cancellationDate:t==null?void 0:t.registerDate},_=t=>{var c,o,l,u,g;let a="";t!=null&&t.spei&&(t!=null&&t.referencePayCash)&&t.spei!==""&&t.referencePayCash!==""?a="SPEI,PAYCASH":t!=null&&t.spei&&t.spei!==""?a="SPEI":t!=null&&t.referencePayCash&&t.referencePayCash!==""&&(a="PAYCASH");const s=t!=null&&t.registerDate?S(new Date(t==null?void 0:t.registerDate),"dd MMM yyyy",{locale:j}):"",e=t!=null&&t.registerDate?S(new Date(t==null?void 0:t.registerDate),"p"):"",i=Z(t);return{id:t==null?void 0:t.id,cardId:t==null?void 0:t.cardId,cardNumber:t==null?void 0:t.cardNumber,paymentProcessorName:t==null?void 0:t.paymentProcessorName,paymentMethods:a,referenceNumber:t==null?void 0:t.referenceNumber,amount:K(t==null?void 0:t.amount),status:t==null?void 0:t.statusName,date:t==null?void 0:t.registerDate,registerDate:{fullDate:x(t==null?void 0:t.registerDate),time:e,date:s},spei:t==null?void 0:t.spei,emails:(c=t==null?void 0:t.emails)==null?void 0:c.split(","),conciliatedName:(t==null?void 0:t.conciliated)!=="No"?"Conciliada":"Sin Conciliar",conciliated:(t==null?void 0:t.conciliated)!=="No",conciliationInfo:{number:t==null?void 0:t.conciliationNumber,userId:t==null?void 0:t.conciliationUserId,userName:t==null?void 0:t.conciliationUserName,date:t!=null&&t.conciliationDate?x(t==null?void 0:t.conciliationDate):""},cancelationInfo:{userId:t==null?void 0:t.canceledByUserId,userName:t==null?void 0:t.canceledByUserName,date:t==null?void 0:t.cancellationDate},payCash:t==null?void 0:t.referencePayCash,payCashURLS:t==null?void 0:t.instructionsUrls,paymentInfo:{folio:(o=t==null?void 0:t.payCashData)==null?void 0:o.folio,authorizationCode:(l=t==null?void 0:t.payCashData)==null?void 0:l.authorizationCode,date:(u=t==null?void 0:t.payCashData)!=null&&u.date?x((g=t==null?void 0:t.payCashData)==null?void 0:g.date):""},lastStatusDate:i?x(i):""}},d=t=>{const a=P(t==null?void 0:t.ciphertext,t==null?void 0:t.iv);return _(a)},r=t=>{const a=P(t==null?void 0:t.ciphertext,t==null?void 0:t.iv);return a==null?void 0:a.map(s=>_(s))},tt={LIST:"funding-orders-list",MOVEMENTS:"conciliate-movements",DETAILS:"funding-order-details"},at=async()=>{const{data:t}=await y.get("/api/funding-orders");return r(t)},bt=async t=>{const{data:a}=await y.get(`/api/funding-order/${t==null?void 0:t.id}`);return d(a)},jt=async t=>{const{data:a}=await y.get(`/api/master-card/movements/unreconciled?fundingOrderId=${t==null?void 0:t.id}`);return X(a)},Mt=async t=>{const{data:a}=await y.put("/api/funding-order/conciliation",t);return a},Tt=async t=>{const{data:a}=await y.put(`/api/funding-order/cancel/${t==null?void 0:t.id}`);return a},et=(t={})=>{const[a,s]=D.useState(null);return{...M([tt.LIST],at,{staleTime:6e4,refetchOnWindowFocus:!1,onError:i=>{const c=T(i,"No se puede obtener las ordenes de fondeo");s(c),v.error(c,{type:O(i)})},...t}),error:a||null}},st={openConciliateModal:!1,openCancelFundingOrder:!1,openDetailsFundingOrder:!1,fundingOrder:null},nt=(t,a)=>({...st,setOpenConciliateModal:s=>{t(e=>({openConciliateModal:s}),!1,"SET_OPEN_CONCILIATE_MODAL")},setFundingOrder:s=>{t(e=>({fundingOrder:s}),!1,"SET_FUNDING_ORDER")},setOpenCancelFundingOrder:s=>{t(e=>({openCancelFundingOrder:s}),!1,"SET_OPEN_CANCEL_FUNDING_ORDER")},setOpenDetailsFundingOrder:s=>{t(e=>({openDetailsFundingOrder:s}),!1,"SET_OPEN_DETAILS_FUNDING_ORDER")}}),p=z(nt);function it(t,a){const{original:s}=t,{status:e}=s,i=e==="Pendiente",c=e==="Pagada",o=p(m=>m.setFundingOrder),l=p(m=>m.setOpenConciliateModal),u=p(m=>m.setOpenCancelFundingOrder),g=p(m=>m.setOpenDetailsFundingOrder),C=[n.jsxs(f,{onClick:()=>{o(s),g(!0),a()},sx:{m:0},children:[n.jsx(F,{children:n.jsx(U,{color:"info"})}),"Ver Detalles"]},0)];return(c||i)&&C.push(n.jsxs(f,{onClick:()=>{o(s),l(!0),a()},sx:{m:0},children:[n.jsx(F,{children:n.jsx(W,{color:"success"})}),"Conciliar"]},1)),i&&C.push(n.jsxs(f,{onClick:()=>{o(s),u(!0),a()},sx:{m:0},children:[n.jsx(F,{children:n.jsx(L,{color:"error"})}),"Cancelar"]},2)),C}function ct(t){return E({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-1.846.634-3.542 1.688-4.897l11.209 11.209A7.946 7.946 0 0 1 12 20c-4.411 0-8-3.589-8-8zm14.312 4.897L7.103 5.688A7.948 7.948 0 0 1 12 4c4.411 0 8 3.589 8 8a7.954 7.954 0 0 1-1.688 4.897z"}}]})(t)}function lt(t){return E({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"}},{tag:"path",attr:{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"}}]})(t)}const ot=[{accessorKey:"referenceNumber",header:"Referencia",enableHiding:!1,size:100},{accessorKey:"paymentProcessorName",header:"Cuenta",size:100,filterVariant:"multi-select",Cell:({cell:t,column:a,row:s})=>{const{original:e}=s,i=V(e==null?void 0:e.paymentProcessorName),c=i==null?void 0:i.component;return n.jsx(h,{flexDirection:"row",alignItems:"center",gap:1,children:i&&n.jsx(c,{sx:{width:30,height:30}})})}},{accessorKey:"amount",header:"Monto",size:100,Cell:({cell:t,column:a,row:s,renderedCellValue:e})=>n.jsx(A,{variant:"subtitle2",fontWeight:"bold",children:e})},{accessorKey:"date",header:"Fecha",size:100,Cell:({cell:t,column:a,row:s})=>{var i,c;const{original:e}=s;return n.jsxs(h,{children:[n.jsx(A,{variant:"subtitle2",children:(i=e==null?void 0:e.registerDate)==null?void 0:i.date}),n.jsx(A,{variant:"body2",sx:{color:"text.secondary"},children:(c=e==null?void 0:e.registerDate)==null?void 0:c.time})]})}},{accessorKey:"paymentMethods",header:"Método(s)",size:100,filterVariant:"multi-select",Cell:({cell:t,column:a,row:s})=>{var o;const{original:e}=s,i=[],c=((o=e==null?void 0:e.paymentMethods)==null?void 0:o.split(","))||[];return c==null||c.forEach(l=>{const u=H(l);u&&i.push({component:u==null?void 0:u.component,width:l==="PAYCASH"?50:30,height:l==="PAYCASH"?50:30})}),n.jsx(h,{flexDirection:"row",alignItems:"center",gap:1,children:i==null?void 0:i.map(({component:l,width:u,height:g},C)=>n.jsx(l,{sx:{width:u,height:g}},C))})}},{accessorKey:"status",header:"Estado",filterVariant:"multi-select",size:100,Cell:({cell:t,column:a,row:s})=>{const{original:e}=s,i=J(e==null?void 0:e.status);return n.jsx(h,{flexDirection:"row",alignItems:"center",gap:1,children:n.jsx(k,{variant:"ghost",color:i,sx:{textTransform:"capitalize"},children:e==null?void 0:e.status})})}},{accessorKey:"conciliatedName",header:"¿Conciliada?",filterVariant:"multi-select",size:110,Cell:({cell:t,column:a,row:s})=>{const{original:e}=s;return n.jsx(h,{flexDirection:"row",width:1,justifyContent:"center",alignItems:"center",gap:1,color:"primary",children:e!=null&&e.conciliated?n.jsx(lt,{color:"green",fontWeight:"bold",fontSize:"20px"}):n.jsx(ct,{fontSize:"20px",color:"red"})})}}],ut=()=>{const{data:t,isError:a,isLoading:s,isFetching:e,error:i}=et(),c=ot;return n.jsx(Q,{children:n.jsx(B,{enablePinning:!0,enableColumnFilterModes:!0,enableStickyHeader:!0,enableRowVirtualization:!0,enableFacetedValues:!0,enableRowActions:!0,enableRowSelection:!0,positionActionsColumn:"last",enableDensityToggle:!1,columns:c,data:t||[],isError:a,textError:i,selectAllMode:"all",initialState:{density:"compact",sorting:[{id:"date",desc:!0}]},state:{isLoading:s,showAlertBanner:a,showProgressBars:e},displayColumnDefOptions:{"mrt-row-actions":{header:"Acciones",minSize:80},"mrt-row-select":{size:10}},muiTableContainerProps:{sx:{maxHeight:{md:"350px",lg:"450px",xl:"700px"}}},renderRowActionMenuItems:({closeMenu:o,row:l})=>it(l,o)})})},mt=N(D.lazy(()=>I(()=>import("./build-536612c0.js"),["assets/js/build-536612c0.js","assets/js/index-fe9cccac.js","assets/css/build-f63bc8fe.css","assets/js/build-e56cf91f.js","assets/js/build-1eee0384.js","assets/js/build-2a2deaa7.js","assets/js/build-ac2beafa.js","assets/js/build-13d4e6e1.js","assets/js/build-cfe3475e.js","assets/js/build-8c12169f.js","assets/js/build-8b850ec5.js","assets/js/build-316e6977.js","assets/js/build-6567a1ef.js","assets/js/build-3850ff23.js","assets/js/build-85a1c1dd.js","assets/js/build-0a8b7475.js","assets/js/build-8c6704b2.js","assets/js/build-0032fb80.js","assets/js/build-2d75fe1f.js","assets/js/build-93c6284b.js","assets/js/build-6d9b0aa0.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-ae8d849a.js","assets/js/build-c84bd68c.js","assets/js/build-ba4c2166.js","assets/js/build-bee6630b.js","assets/js/build-f7a33889.js"]))),pt=N(D.lazy(()=>I(()=>import("./build-623d41fd.js"),["assets/js/build-623d41fd.js","assets/js/index-fe9cccac.js","assets/css/build-f63bc8fe.css","assets/js/build-e56cf91f.js","assets/js/build-1eee0384.js","assets/js/build-2a2deaa7.js","assets/js/build-ac2beafa.js","assets/js/build-13d4e6e1.js","assets/js/build-cfe3475e.js","assets/js/build-8c12169f.js","assets/js/build-8b850ec5.js","assets/js/build-316e6977.js","assets/js/build-6567a1ef.js","assets/js/build-8c6704b2.js","assets/js/build-ff81780f.js","assets/js/build-2d75fe1f.js","assets/js/build-93c6284b.js","assets/js/build-3850ff23.js","assets/js/build-85a1c1dd.js","assets/js/build-0a8b7475.js","assets/js/build-6d9b0aa0.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-ae8d849a.js","assets/js/build-c84bd68c.js","assets/js/build-ba4c2166.js","assets/js/build-bee6630b.js","assets/js/build-f7a33889.js","assets/js/build-0032fb80.js"]))),gt=N(D.lazy(()=>I(()=>import("./build-9005bf5b.js"),["assets/js/build-9005bf5b.js","assets/js/index-fe9cccac.js","assets/css/build-f63bc8fe.css","assets/js/build-e56cf91f.js","assets/js/build-1eee0384.js","assets/js/build-2a2deaa7.js","assets/js/build-ac2beafa.js","assets/js/build-13d4e6e1.js","assets/js/build-cfe3475e.js","assets/js/build-8c12169f.js","assets/js/build-8b850ec5.js","assets/js/build-316e6977.js","assets/js/build-6567a1ef.js","assets/js/build-6d9b0aa0.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-ae8d849a.js","assets/js/build-c84bd68c.js","assets/js/build-ba4c2166.js","assets/js/build-bee6630b.js","assets/js/build-83d77235.js","assets/js/build-3a0a00c5.js","assets/js/build-b65c576b.js","assets/js/build-0032fb80.js","assets/js/build-23d329b8.js","assets/js/build-dc545d90.js","assets/js/build-8c6704b2.js","assets/js/build-2d75fe1f.js","assets/js/build-93c6284b.js","assets/js/build-3850ff23.js","assets/js/build-85a1c1dd.js","assets/js/build-0a8b7475.js","assets/js/build-f7a33889.js"]))),Ct=()=>{const t=p(s=>s.openConciliateModal),a=p(s=>s.openCancelFundingOrder);return p(s=>s.openDetailsFundingOrder),n.jsx(R,{title:"Órdenes de Fondeo",children:n.jsxs(Y,{children:[n.jsx($,{name:"Órdenes de Fondeo",links:[{name:"Inicio",href:w.root},{name:"Órdenes de Fondeo"}]}),n.jsx(ut,{}),t&&n.jsx(mt,{}),a&&n.jsx(pt,{}),n.jsx(gt,{})]})})},vt=Object.freeze(Object.defineProperty({__proto__:null,default:Ct},Symbol.toStringTag,{value:"Module"}));export{lt as B,tt as F,Tt as a,ct as b,Mt as c,J as d,bt as e,vt as f,jt as g,p as u};
