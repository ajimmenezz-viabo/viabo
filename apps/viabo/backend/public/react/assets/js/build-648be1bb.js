import{t as y,j as e,u as T,n as E,g as I,o as k,r as N,S as s,T as u,B as R,ad as A,L as D}from"./build-9dc23fd9.js";import{R as F}from"./build-1517a09b.js";import{u as M}from"./build-d9d6fc9b.js";import{F as _,M as w}from"./build-c86a048d.js";import{c as P,a as V}from"./build-8545d663.js";import{u as o,C as z}from"./build-2f5bf9d7.js";import{c as H}from"./build-ce399990.js";import{v as q}from"./build-dceab77b.js";import{I as B}from"./build-c3cf2243.js";import{C as L}from"./build-91f0622b.js";import"./build-25455e46.js";import"./build-f50814e2.js";import"./build-bee6630b.js";import"./build-041f94ad.js";import"./build-b8eff164.js";const G=y([e.jsx("path",{d:"M4 4h16v6H4zm0 9h16v2H4z",opacity:".3"},"0"),e.jsx("path",{d:"M20 2H4c-1.11 0-2 .89-2 2v11c0 1.11.89 2 2 2h4v5l4-2 4 2v-5h4c1.11 0 2-.89 2-2V4c0-1.11-.89-2-2-2zm0 13H4v-2h16v2zm0-5H4V4h16v6z"},"1")],"CardMembershipTwoTone"),U=(i={})=>{const{enqueueSnackbar:n}=T();return E({mutationFn:q,onError:r=>{const c=I(r,"No se puede validar la tarjeta.");n(c,{variant:k(r),autoHideDuration:5e3})},...i})};function ie(){const i=o(a=>a.setToken),n=o(a=>a.setStepAssignRegister),r=o(a=>a.setCard),c=o(a=>a.resetState),{mutate:h,isLoading:x}=U(),f=P().shape({cardNumber:V().transform((a,t)=>t.replace(/\s/g,"")).min(8,"Debe contener los últimos 8 dígitos").required("El número de la tarjeta es requerido")}),m=M({initialValues:{cardNumber:""},validationSchema:f,onSubmit:(a,{setSubmitting:t})=>{var l;h({cardNumber:(l=a==null?void 0:a.cardNumber)==null?void 0:l.replace(/\s+/g,"")},{onSuccess:v=>{const{token:p,...b}=v;p&&(i(p),r(b),n(z.USER_REGISTER)),t(!1)},onError:()=>{t(!1)}})}}),{isSubmitting:g,values:j,setFieldValue:S,handleSubmit:C}=m,d=g||x;return N.useEffect(()=>{c()},[]),e.jsxs(s,{sx:{display:"flex",overflow:"hidden"},children:[e.jsxs(s,{direction:"column",width:1,spacing:1,children:[e.jsx(u,{variant:"h4",color:"textPrimary",align:"center",children:"Registrar Tarjeta"}),e.jsx(u,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Ingrese los 8 últimos dígitos de la tarjeta para iniciar con el proceso de asociación de la misma."}),e.jsx(R,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4},children:e.jsx("img",{className:"animate__animated animate__pulse",src:H,width:"25%",alt:"Sent Mail"})})]}),e.jsx(A,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:e.jsx(_,{formik:m,children:e.jsx(s,{spacing:2,p:3,children:e.jsx(F,{name:"cardNumber",required:!0,placeholder:"9717 8968",fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(L,{})}),inputComponent:w,inputProps:{mask:"0000 0000",value:j.cardNumber,onAccept:a=>{S("cardNumber",a)}}},disabled:d})})})}),e.jsx(s,{spacing:3,px:3,children:e.jsx(D,{loading:d,variant:"contained",color:"primary",fullWidth:!0,type:"submit",onClick:C,disabled:d,startIcon:e.jsx(G,{}),children:"Validar"})})]})}export{ie as default};
