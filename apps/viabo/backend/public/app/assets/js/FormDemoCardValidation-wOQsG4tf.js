import{t as A,f as D,r as T,i as e,V as a,p as f,T as n,aX as W,aZ as P,X as V,a0 as q}from"./vendor-VdGvLetj.js";import{g as M,a as _,j as w}from"./index-W5_PJt9d.js";import{u as z}from"./formik.esm-qswtkH0w.js";import{h as L}from"./mui-one-time-password-input.es-hfNUE9PZ.js";import{c as B,a as G}from"./index.esm-tihgvVDv.js";import{u as o,C as U}from"./RegisterCards-pXMfzrv3.js";import{m as X}from"./matchTypes-Lmz382Bt.js";import{v as $}from"./RegisterCardsRepository-QJAgBX84.js";import{v as j}from"./fade-HpdRXKiE.js";import{F as H,R as O,M as Z}from"./TextMaxLine-WruMZtAJ.js";import"./iconBase-Qvi60nla.js";import"./formatNumber-v_3o-PH6.js";import"./transition-Uc7vb3zK.js";import"./UploadSingleFile-6LMGjDBZ.js";const J=(d={})=>{const{enqueueSnackbar:c}=A();return D({mutationFn:$,onError:i=>{const l=M(i,"No se puede validar la tarjeta.");c(l,{variant:_(i),autoHideDuration:5e3})},...d})};function ue(){const d=o(r=>r.setToken),c=o(r=>r.setStepAssignRegister),i=o(r=>r.setCard),l=o(r=>r.resetState),v=w("up","md"),{mutate:C,isLoading:b,reset:S,isError:m}=J(),N=B().shape({cardNumber:G().transform((r,t)=>t.replace(/\s/g,"")).min(8,"Debe contener los últimos 8 dígitos").required("El número de la tarjeta es requerido")}),u=z({initialValues:{cardNumber:""},validationSchema:N,onSubmit:(r,{setSubmitting:t})=>{var g;C({cardNumber:(g=r==null?void 0:r.cardNumber)==null?void 0:g.replace(/\s+/g,"")},{onSuccess:I=>{const{token:x,...F}=I;x&&(d(x),i(F),c(U.USER_REGISTER)),t(!1)},onError:()=>{t(!1)}})}}),{isSubmitting:E,values:p,setFieldValue:h,handleSubmit:k,errors:K}=u,s=E||b;T.useEffect(()=>{l()},[]);const y=r=>{m&&S(),h("cardNumber",r)},R=(r,t)=>X(r);return e.jsxs(a,{spacing:5,children:[e.jsxs(a,{direction:"column",width:1,spacing:1,children:[e.jsxs(a,{children:[e.jsx(f.div,{variants:j().inRight,children:e.jsx(n,{align:"center",variant:"h3",sx:{color:"primary.main",fontWeight:"fontWeightMedium"},children:"Aquí Comienza"})}),e.jsx(f.div,{variants:j().inRight,children:e.jsx(n,{align:"center",variant:"h3",sx:{color:"primary.light",fontWeight:"fontWeightMedium"},children:"tu agilidad en pagos"})})]}),e.jsx(n,{paragraph:!0,align:"center",variant:"subtitle1",color:"text.primary",whiteSpace:"pre-line",children:"Ingrese los 8 últimos dígitos de la tarjeta."})]}),e.jsx(H,{formik:u,children:v?e.jsx(L,{name:"cardNumber",length:8,value:p.cardNumber,onChange:y,validateChar:R,sx:{gap:1.5},TextFieldsProps:{placeholder:"-",error:m,disabled:s,fullWidth:!0}}):e.jsx(O,{name:"cardNumber",required:!0,placeholder:"9717 8968",fullWidth:!0,size:"small",InputProps:{startAdornment:e.jsx(W,{position:"start",children:e.jsx(P,{})}),inputComponent:Z,inputProps:{mask:"0000 0000",value:p.cardNumber,onAccept:r=>{h("cardNumber",r)}}},disabled:s})}),e.jsxs(a,{spacing:3,px:5,children:[e.jsxs(a,{children:[e.jsx(n,{paragraph:!0,align:"center",variant:"body2",color:"text.primary",children:"Iniciemos el proceso de asociación de tu cuenta."}),e.jsx(V,{})]}),e.jsx(a,{alignItems:"center",justifyContent:"center",children:e.jsx(q,{loading:s,variant:"contained",size:"large",color:"primary",fullWidth:!0,type:"submit",onClick:k,disabled:s,sx:{width:150},children:"Validar"})})]})]})}export{ue as default};
//# sourceMappingURL=FormDemoCardValidation-wOQsG4tf.js.map
