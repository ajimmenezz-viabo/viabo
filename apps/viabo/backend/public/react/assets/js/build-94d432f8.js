import{y as U,j as e,aa as Y,r as g,ab as q,C as S,S as x,T as d,m as _,a9 as ce,B as F,I as pe,z as de,p as k,R as xe,a2 as he,G as Q,L as ue,as as G,at as ge,a8 as J,d as Z,g as v,Y as ee,b as se,au as je,av as fe,U as ye,aw as D,J as Ce,P as be,a4 as me}from"./index-b206e6bf.js";import{a as Me}from"./build-0afbd56d.js";import{f as T,A as Se}from"./build-7603f30a.js";import"./build-01352c33.js";import{u as V,M as Te,a as Ie,d as Ee,b as we,e as Fe,S as Pe,N as Ae,F as Re}from"./build-51c9a374.js";import{C as z}from"./build-bed0eb48.js";import{C as Le}from"./build-2311a532.js";import{C as Oe}from"./build-115cbf7d.js";import{R as Be}from"./build-3e1b6094.js";import"./build-be55576f.js";import"./build-355ff93c.js";import"./build-840c2507.js";import{g as te}from"./build-61d7772a.js";import{C as H}from"./build-c97d2791.js";import{G as De}from"./build-d4d9c9cc.js";import{g as ne}from"./build-daeee77c.js";import{f as _e,b as ke,H as Ge}from"./build-f5c07123.js";import{g as ze}from"./build-8c53c715.js";import{M as Ne}from"./build-15b844cf.js";import{A as We}from"./build-36a4ac04.js";import{M as X}from"./build-680f25bc.js";import{a as Ve}from"./build-11095990.js";import{G as W}from"./build-a7669cd3.js";import"./build-7661dcbf.js";import"./build-bee6630b.js";import"./build-78a15b5c.js";import"./build-ab172b06.js";import"./build-12fda1b5.js";import"./build-782503ed.js";import"./build-c824461f.js";import"./build-831fcec0.js";import"./build-4405d1f6.js";import"./build-66694a17.js";import"./build-8e05fa31.js";import"./build-056ccbbd.js";import"./build-890619cd.js";import"./build-5755d425.js";import"./build-471f99e2.js";import"./build-ce68da8f.js";import"./build-237b1036.js";import"./build-a402c175.js";import"./build-8f714c1b.js";import"./build-83d17a75.js";import"./build-899176f2.js";import"./build-c2354da2.js";const $e=U(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM8.46 14.45l-1.36-.62c.28-.61.41-1.24.4-1.86-.01-.63-.14-1.24-.4-1.8l1.36-.63c.35.75.53 1.56.54 2.4.01.86-.17 1.7-.54 2.51zm3.07 1.56-1.3-.74c.52-.92.78-1.98.78-3.15 0-1.19-.27-2.33-.8-3.4l1.34-.67c.64 1.28.96 2.65.96 4.07 0 1.43-.33 2.74-.98 3.89zm3.14 1.32-1.35-.66c.78-1.6 1.18-3.18 1.18-4.69 0-1.51-.4-3.07-1.18-4.64l1.34-.67c.9 1.78 1.34 3.56 1.34 5.31 0 1.74-.44 3.54-1.33 5.35z"}),"Contactless"),K=U(e.jsx("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),"Update"),He=Y(g.lazy(()=>q(()=>import("./build-002b3d2d.js"),["assets/js/build-002b3d2d.js","assets/js/index-b206e6bf.js","assets/css/build-f63bc8fe.css","assets/js/build-4405d1f6.js","assets/js/build-be55576f.js","assets/js/build-51c9a374.js","assets/js/build-bed0eb48.js","assets/js/build-ab172b06.js","assets/js/build-daeee77c.js","assets/js/build-12fda1b5.js","assets/js/build-7603f30a.js","assets/js/build-bee6630b.js","assets/js/build-78a15b5c.js","assets/js/build-f5c07123.js","assets/js/build-8f714c1b.js","assets/js/build-471f99e2.js","assets/js/build-782503ed.js","assets/js/build-c824461f.js","assets/js/build-831fcec0.js","assets/js/build-355ff93c.js","assets/js/build-ce68da8f.js","assets/js/build-11095990.js","assets/js/build-840c2507.js","assets/js/build-15b844cf.js","assets/js/build-c2354da2.js","assets/js/build-a7669cd3.js","assets/js/build-5755d425.js","assets/js/build-36a4ac04.js","assets/js/build-0afbd56d.js","assets/js/build-7661dcbf.js","assets/js/build-01352c33.js","assets/js/build-66694a17.js","assets/js/build-8e05fa31.js","assets/js/build-056ccbbd.js","assets/js/build-890619cd.js","assets/js/build-2311a532.js","assets/js/build-115cbf7d.js","assets/js/build-cfa9aa17.js"]))),Xe=Y(g.lazy(()=>q(()=>import("./build-8c116d11.js"),["assets/js/build-8c116d11.js","assets/js/index-b206e6bf.js","assets/css/build-f63bc8fe.css","assets/js/build-daeee77c.js","assets/js/build-7603f30a.js","assets/js/build-bee6630b.js","assets/js/build-78a15b5c.js","assets/js/build-ab172b06.js","assets/js/build-12fda1b5.js","assets/js/build-f5c07123.js","assets/js/build-8f714c1b.js","assets/js/build-471f99e2.js","assets/js/build-782503ed.js","assets/js/build-c824461f.js","assets/js/build-15b844cf.js","assets/js/build-c2354da2.js","assets/js/build-ce68da8f.js","assets/js/build-11095990.js","assets/js/build-a7669cd3.js","assets/js/build-5755d425.js","assets/js/build-355ff93c.js","assets/js/build-4405d1f6.js","assets/js/build-5e2aff96.js"]))),ie=({open:r,setOpen:o,card:n,cardList:l=[]})=>{const[s,i]=g.useState(0),h=g.useMemo(()=>n==null?void 0:n.balance,[n==null?void 0:n.balance]),[u,b]=g.useState(!1),[j,m]=g.useState(null),[I,P]=g.useState(!1),w=g.useMemo(()=>(parseFloat(h)-s).toFixed(2)<0,[s,h]),A=()=>{o(!1),i(0),b(!1),m(null),P(!1)},O=c=>{const f=n==null?void 0:n.id;m({cardOriginId:f,isGlobal:!1,transactions:(c==null?void 0:c.transactions)||[],balance:h,currentBalance:s}),b(!0)},B=()=>{b(!1)},R=e.jsx(e.Fragment,{children:e.jsx(d,{variant:"h6",children:"Fondear Tarjetas"})}),L=e.jsxs(e.Fragment,{children:[e.jsxs(x,{flexDirection:"column",alignItems:"center",justifyContent:"space-between",spacing:0,px:3,pt:2,children:[e.jsx(d,{variant:"subtitle1",children:"Saldo"}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(d,{variant:"h3",color:"success.main",children:T(h)}),e.jsx(d,{variant:"caption",color:"success.main",children:"MXN"})]}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(d,{variant:"subtitle1",color:"error",children:["- ",T(s)]}),e.jsx(d,{variant:"caption",color:"error",children:"MXN"})]}),w&&e.jsx(d,{variant:"caption",color:"warning.main",textAlign:"center",children:"Saldo insuficiente para realizar la(s) operacion(es)"})]}),e.jsx(He,{cards:l,setCurrentBalance:i,insufficient:w,isBinCard:!1,onSuccess:O})]});return e.jsxs(Me,{open:r,handleClose:A,titleElement:R,children:[e.jsx(_.div,{initial:{opacity:1},animate:{opacity:u?0:1},transition:{duration:.5},style:{display:u?"none":"flex",flex:1,overflow:"hidden",flexDirection:"column"},children:L}),e.jsx(_.div,{initial:{opacity:0},animate:{opacity:u?1:0},transition:{duration:.5},style:{display:u?"flex":"none",flexDirection:"column",flex:1,overflow:"hidden"},children:e.jsx(Xe,{data:j,onBack:B,setTransactionLoading:P,transactionLoading:I,onClose:A})})]})};ie.propTypes={card:S.shape({balance:S.any,id:S.any}),cardList:S.array,open:S.any,setOpen:S.func};const Ke={card:null,isMaster:!0,movements:[],balanceMovements:"$0.00",income:"$0.00",expenses:"$0.00",filterPaymentProcessor:null},Ue=(r,o)=>({...Ke,setGlobalCard:n=>{o(),r(l=>({card:n}),!1,"SET_GLOBAL_CARD")},resetGlobalCard:()=>{r(n=>({card:null}),!1,"RESET_GLOBAL_CARD")},setIsMaster:n=>{r(l=>({isMaster:n}),!1,"SET_IS_MASTER")},setMovements:n=>{r(l=>({movements:(n==null?void 0:n.movements)||[],balanceMovements:(n==null?void 0:n.balanceMovements)||"$0.00",expenses:(n==null?void 0:n.expenses)||"$0.00",income:(n==null?void 0:n.income)||"$0.00"}),!1,"SET_MASTER_MOVEMENTS")},getBalance:()=>{const{balanceMovements:n,income:l,expenses:s}=o();return{balanceMovements:n,income:l,expenses:s}},setFilterPaymentProcessor:n=>{r(l=>({filterPaymentProcessor:n}),!1,"SET_FILTER_PAYMENT_PROCESSOR")}}),M=ce(Ue);function re({actions:r}){var b;const o=M(j=>j.card),[n,l]=g.useState(!1),[s,i]=g.useState(!1),h=V(j=>j.setOpenFundingOrder),u=V(j=>j.setFundingCard);return e.jsxs(e.Fragment,{children:[e.jsxs(z,{sx:{p:3},children:[e.jsxs(x,{display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(d,{variant:"h6",textTransform:"capitalize",children:`Fondear Tarjeta ${(b=o==null?void 0:o.paymentProcessor)==null?void 0:b.toLowerCase()}`}),e.jsx(F,{sx:{flex:"1 1 auto"}})]}),e.jsxs(x,{spacing:2,children:[e.jsxs(x,{flexDirection:"column",justifyContent:"space-between",alignItems:"baseline",gap:1,sx:{display:"flex",flexWrap:"wrap"},children:[e.jsxs(x,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{flexGrow:1,flexWrap:"wrap"},gap:1,children:[e.jsx(d,{variant:"subtitle1",sx:{color:"text.secondary"},children:"SPEI"}),e.jsx(pe,{variant:"outlined",color:n?"success":"inherit",onClick:()=>{l(!0),de(o==null?void 0:o.SPEI),setTimeout(()=>{l(!1)},1e3)},children:n?e.jsx(Le,{sx:{color:"success"}}):e.jsx(Oe,{sx:{color:"text.disabled"}})})]}),e.jsx(d,{variant:"body1",children:o==null?void 0:o.SPEI})]}),e.jsxs(x,{flexDirection:"row",flexWrap:"wrap",gap:3,alignItems:"center",children:[e.jsx(k,{fullWidth:!0,color:"primary",variant:"outlined",startIcon:e.jsx(Te,{}),onClick:()=>i(!0),children:"Compartir"}),e.jsx(k,{fullWidth:!0,color:"primary",variant:"contained",startIcon:e.jsx(Be,{}),onClick:()=>{h(!0),u(o)},children:"Orden Fondeo"}),r]})]})]}),e.jsx(Ie,{open:s,card:o,onClose:()=>{i(!1)}})]})}re.propTypes={actions:S.any};function ae({data:r,isLoading:o}){var C;const[n,l]=g.useState("1"),s=M(t=>t.card),i=M(t=>t.setGlobalCard),h=M(t=>t.resetGlobalCard),u=M(t=>t.setIsMaster),b=M(t=>t.setFilterPaymentProcessor),j=M(t=>t.getBalance),m=M(t=>t.movements),I=M(t=>t.isMaster),{data:P,isLoading:w,isRefetching:A,refetch:O,isSuccess:B}=Ee(s==null?void 0:s.paymentProcessorId,{enabled:!!(s!=null&&s.paymentProcessorId)}),R=g.useMemo(()=>j(),[m]),[L,c]=g.useState(!1),y=r==null?void 0:r.master,f=r==null?void 0:r.globals,a=t=>()=>{b(t==null?void 0:t.paymentProcessor),u(!1),i(t),l("1")},p=(t,E)=>()=>{b(t==null?void 0:t.paymentProcessor),i(t),l(E),u(!1)};return e.jsx(Se,{children:e.jsxs(x,{spacing:2,flex:1,children:[e.jsx(_.div,{onClick:()=>{u(!0),l("1"),h(),b(null)},whileHover:{scale:1.03},whileTap:{scale:.8},children:e.jsxs(z,{sx:{p:0,cursor:"pointer",border:I?3:0,borderColor:t=>I?t.palette.mode==="dark"?t.palette.secondary.main:t.palette.primary.main:"inherit"},children:[e.jsx(H,{title:e.jsx(x,{flexDirection:"row",gap:1,alignItems:"center",children:e.jsx(d,{variant:"subtitle2",children:"Global [Master]"})}),sx:{px:2,py:2}}),o?e.jsx(xe,{mb:3}):e.jsxs(x,{alignItems:"center",pb:2,px:2,children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(d,{variant:"h3",children:y==null?void 0:y.balanceFormatted}),e.jsx(d,{variant:"caption",children:"MXN"})]}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(K,{sx:{width:30,height:30,color:"text.secondary"}}),e.jsxs(x,{alignItems:"center",children:[e.jsx(d,{variant:"subtitle2",children:"En transito"}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(d,{variant:"body1",children:y==null?void 0:y.inTransitFormatted}),e.jsx(d,{variant:"caption",children:"MXN"})]})]})]})]})]})}),e.jsx(F,{children:e.jsx(he,{children:e.jsx(x,{direction:{xs:"column",md:"row"},spacing:2,pb:2,children:f==null?void 0:f.map(t=>{const E=te(t==null?void 0:t.paymentProcessor),le=E==null?void 0:E.component,$=(s==null?void 0:s.id)===(t==null?void 0:t.id);return e.jsx(x,{flexGrow:1,position:"relative",children:e.jsxs(z,{sx:{minWidth:{xs:300,md:"auto"},border:$?3:0,borderColor:N=>$?N.palette.mode==="dark"?N.palette.secondary.main:N.palette.primary.main:"inherit"},children:[e.jsxs(_.div,{onClick:a(t),whileTap:{scale:.8},style:{cursor:"pointer"},children:[e.jsx(H,{title:e.jsxs(x,{flexDirection:"row",gap:1,alignItems:"center",justifyContent:"space-between",children:[e.jsx(d,{variant:"caption",children:t==null?void 0:t.paymentProcessor}),E&&e.jsx(le,{sx:{width:30,height:30}})]}),sx:{px:2,py:2}}),e.jsxs(x,{alignItems:"center",pb:2,px:2,children:[e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(d,{variant:"h6",children:t==null?void 0:t.balanceFormatted}),e.jsx(d,{variant:"caption",children:"MXN"})]}),e.jsxs(x,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(K,{sx:{width:20,height:20,color:"text.secondary"}}),e.jsxs(x,{alignItems:"center",children:[e.jsx(d,{variant:"subtitle2",children:"En transito"}),e.jsxs(x,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(d,{variant:"body2",children:t==null?void 0:t.inTransitFormatted}),e.jsx(d,{variant:"caption",children:"MXN"})]})]})]})]})]}),e.jsx(Q,{sx:{borderStyle:"dashed"}}),e.jsxs(x,{px:2,py:1,flexDirection:"row",justifyContent:"space-between",children:[e.jsx(k,{onClick:p(t,"1"),children:"Balance"}),e.jsx(k,{onClick:p(t,"2"),children:"Fondeo"})]})]})},t==null?void 0:t.cardId)})})})}),n==="1"&&e.jsx(we,{card:R,title:s&&!I?`Balance ${(C=s==null?void 0:s.paymentProcessor)==null?void 0:C.toLowerCase()}`:"Balance Master"}),n==="2"&&s&&!I&&e.jsxs(e.Fragment,{children:[e.jsx(re,{actions:e.jsx(ue,{fullWidth:!0,variant:"contained",color:"secondary",startIcon:e.jsx(Fe,{}),sx:{color:"black",fontWeight:"bolder"},loading:A,onClick:()=>{c(!0)},children:"Fondear Tarjetas"})}),e.jsx(ie,{setOpen:c,open:L,card:s,cardList:P})]})]})})}ae.propTypes={data:S.shape({globals:S.array,master:S.shape({balanceFormatted:S.any,inTransitFormatted:S.any})}),isLoading:S.any};function Ye(r){return De({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z"}},{tag:"path",attr:{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}},{tag:"path",attr:{d:"M12 17V7"}}]})(r)}const oe={GLOBAL_CARDS:"global-cards",MOVEMENTS:"master-movements"},qe={"MASTER CARD":"1",MASTERCARD:"1",CARNET:"2"},Qe=r=>{const o=ne(r==null?void 0:r.ciphertext,r==null?void 0:r.iv);let n=0,l=0;const s=o==null?void 0:o.map(i=>{var h;return n+=parseFloat(i==null?void 0:i.balance),l+=parseFloat(i==null?void 0:i.inTransit),{...i,paymentProcessorId:qe[(h=i==null?void 0:i.paymentProcessor)==null?void 0:h.toUpperCase()]??null,id:i==null?void 0:i.cardId,SPEI:i==null?void 0:i.spei,balanceFormatted:T(i==null?void 0:i.balance),inTransitFormatted:T(i==null?void 0:i.inTransit)}});return{master:{balance:n,inTransit:l,balanceFormatted:T(n),inTransitFormatted:T(l)},globals:s}},Je=r=>{const o=ne(r==null?void 0:r.ciphertext,r==null?void 0:r.iv);let n=0,l=0;return{movements:(o==null?void 0:o.map(s=>{const i=parseFloat((s==null?void 0:s.amount)||"0");(s==null?void 0:s.type.toLowerCase())==="gasto"&&(n+=i),(s==null?void 0:s.type.toLowerCase())==="ingreso"&&(l+=i);const h=s!=null&&s.date?G(new Date(s==null?void 0:s.date),"dd MMM yyyy",{locale:ge}):"",u=s!=null&&s.date?G(new Date(s==null?void 0:s.date),"p"):"";return{fullDate:_e(s==null?void 0:s.date),date:h,time:u,description:s==null?void 0:s.description,amount:i,amountFormatted:T(i),paymentProcessor:s==null?void 0:s.paymentProcessor,type:s==null?void 0:s.type.toLowerCase(),operationType:s==null?void 0:s.typeOperation.toUpperCase(),concept:(s==null?void 0:s.concept)??""}}))??[],income:T(l),expenses:T(n),balanceMovements:T(l-n)}},Ze=async()=>{const{data:r}=await J.get("/api/main-cards/information");return Qe(r)},ve=async(r,o,n)=>{const{data:l}=await J.get(`/api/cards/movements/${r}/to/${o}`);return Je(l)},es=(r={})=>{const[o,n]=g.useState(null),l=V(i=>i.setMainCard);return{...Z([oe.GLOBAL_CARDS],Ze,{staleTime:6e4,refetchOnWindowFocus:!1,onError:i=>{const h=v(i,"No se puede obtener la informacion de las tarjetas principales");n(h),l(null),ee.error(h,{type:se(i)})},onSuccess:i=>{l(i)},...r}),error:o||null}},ss=(r,o,n={})=>{if(!r||!o)return null;const l=G(r,"yyyy-MM-dd"),s=G(o,"yyyy-MM-dd"),[i,h]=g.useState(null),u=M(j=>j.setMovements);return{...Z([oe.MOVEMENTS],({signal:j})=>ve(l,s),{staleTime:6e4,retry:!1,refetchOnWindowFocus:!1,onError:j=>{const m=v(j,"No se puede obtener la lista de movimientos. Intente nuevamente o reporte a sistemas");h(m),ee.error(m,{type:se(j)}),u(null)},...n}),error:i||null}};function ts(){const r=new Date,o=je(r),n=fe(r),[l,s]=g.useState(o),[i,h]=g.useState(n),u=M(c=>c.filterPaymentProcessor),b=M(c=>c.setMovements),j=M(c=>c.movements),{data:m,isError:I,isLoading:P,isFetching:w,error:A,refetch:O}=ss(l,i);g.useEffect(()=>{l&&i&&O()},[l,i]),g.useEffect(()=>{var c;if(u){let y=0,f=0;const a=(c=m==null?void 0:m.movements)==null?void 0:c.filter(p=>{var C;return((C=p==null?void 0:p.paymentProcessor)==null?void 0:C.toLowerCase())===(u==null?void 0:u.toLowerCase())});a==null||a.forEach(p=>{(p==null?void 0:p.type.toLowerCase())==="gasto"?y+=p==null?void 0:p.amount:f+=p==null?void 0:p.amount}),b({movements:a,income:T(f),expenses:T(y),balanceMovements:T(f-y)})}else b(m)},[u,m]);const B=g.useMemo(()=>[{accessorKey:"description",header:"Movimiento",enableHiding:!1,minSize:300,Cell:({cell:c,column:y,row:f})=>{const{original:a}=f,p=(a==null?void 0:a.type)==="ingreso",C=(a==null?void 0:a.type)==="terminal",t=te(a==null?void 0:a.paymentProcessor),E=t==null?void 0:t.component;return e.jsxs(F,{sx:{display:"flex",alignItems:"center"},children:[e.jsxs(F,{sx:{position:"relative"},children:[e.jsx(ye,{sx:{width:40,height:40,color:"text.secondary",bgcolor:"background.neutral"},children:t?e.jsx(E,{sx:{width:25,height:25}}):C?e.jsx($e,{color:"primary",width:24,height:24}):e.jsx(We,{width:24,height:24})}),e.jsx(F,{sx:{right:0,bottom:0,width:15,height:15,display:"flex",borderRadius:"50%",position:"absolute",alignItems:"center",color:"common.white",bgcolor:"error.main",justifyContent:"center",...(p||C)&&{bgcolor:"success.main"}},children:p||C?e.jsx(Pe,{sx:{width:10,height:10}}):e.jsx(Ae,{sx:{width:10,height:10}})})]}),e.jsxs(x,{flexWrap:"wrap",sx:{ml:2},children:[e.jsx(d,{variant:"body2",sx:{color:"text.secondary"},children:p||C?"Recibe dinero de: ":"Retiro de dinero en:"}),e.jsx(d,{variant:"subtitle2",sx:{textWrap:"wrap"},children:a==null?void 0:a.description}),(a==null?void 0:a.concept)!==""&&e.jsxs(d,{variant:"overline",color:"text.disabled",fontStyle:"italic",sx:{textWrap:"wrap"},children:["concepto : ",a==null?void 0:a.concept]})]})]})}},{accessorKey:"date",header:"Fecha",size:100,Cell:({cell:c,column:y,row:f})=>{const{original:a}=f;return e.jsxs(x,{children:[e.jsx(d,{variant:"subtitle2",children:a==null?void 0:a.date}),e.jsx(d,{variant:"body2",sx:{color:"text.secondary"},children:a==null?void 0:a.time})]})}},{accessorKey:"operationType",header:"Tipo",filterVariant:"multi-select",size:100,Cell:({cell:c,column:y,row:f})=>{const{original:a}=f,p=ze(a==null?void 0:a.operationType),C=p==null?void 0:p.component;return e.jsx(F,{children:p?e.jsx(C,{sx:{width:25,height:25}}):e.jsx(Ye,{size:22})})}},{accessorKey:"amountFormatted",header:"Monto",size:100,Cell:({cell:c,column:y,row:f})=>{const{original:a}=f,p=(a==null?void 0:a.type)==="ingreso",C=(a==null?void 0:a.type)==="terminal";return e.jsx(d,{variant:"subtitle2",fontWeight:"bold",color:p||C?"success.main":"error",children:p||C?`+ ${a==null?void 0:a.amountFormatted}`:`- ${a==null?void 0:a.amountFormatted}`})}}],[m]),R=c=>{i!==null&&c>i&&h(c),s(c)},L=c=>{l!==null&&c<l&&s(c),h(c)};return e.jsxs(z,{children:[e.jsxs(x,{p:2,direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[e.jsx(X,{size:"small",value:l,onChange:R,maxDate:i,slotProps:{textField:{size:"small",required:!0}},disabled:w,format:"dd MMMM yyyy"}),e.jsx(Ve,{children:"-"}),e.jsx(X,{size:"small",value:i,onChange:L,minDate:l,slotProps:{textField:{size:"small",required:!0}},disabled:w,format:"dd MMMM yyyy"})]}),e.jsx(Q,{sx:{borderStyle:"dashed"}}),e.jsx(Ne,{enablePinning:!0,enableColumnFilterModes:!0,enableStickyHeader:!0,enableRowVirtualization:!0,enableFacetedValues:!0,enableRowActions:!0,enableRowSelection:!0,positionActionsColumn:"last",enableDensityToggle:!1,columns:B,data:j||[],isError:I,textError:A,selectAllMode:"all",initialState:{density:"compact",sorting:[{id:"date",desc:!0}]},state:{isLoading:P,showAlertBanner:I,showProgressBars:w},displayColumnDefOptions:{"mrt-row-actions":{header:"Acciones",size:80},"mrt-row-select":{size:10}},muiTableContainerProps:{sx:{maxHeight:{md:"350px",lg:"450px",xl:"700px"}}},renderRowActionMenuItems:({row:c})=>[e.jsx(D,{onClick:()=>console.info("conciliation"),children:"Conciliación"},"conciliation"),e.jsx(D,{onClick:()=>console.info("incidence"),children:"Incidencia"},"incidence"),e.jsx(D,{onClick:()=>console.info("communication"),children:"Comunicación"},"communication"),e.jsx(D,{onClick:()=>console.info("tag"),children:"Tag"},"tag")]})]})}function Ys(){var l,s;const{isCollapse:r}=Ce(),{data:o,isLoading:n}=es();return e.jsx(be,{title:"Dashboard Master",children:e.jsxs(ke,{children:[e.jsx(Ge,{name:"Dashboard Master",links:[{name:"Inicio",href:me.root},{name:"Dashboard Master"}]}),e.jsx(F,{pb:4,children:e.jsxs(W,{container:!0,flex:1,spacing:2,children:[e.jsx(W,{item:!0,xs:12,md:((l=o==null?void 0:o.globals)==null?void 0:l.length)>1?r?4:5:r?3:4,xl:r?3:4,children:e.jsx(ae,{data:o,isLoading:n})}),e.jsx(W,{item:!0,xs:12,md:((s=o==null?void 0:o.globals)==null?void 0:s.length)>1?r?8:7:r?9:8,xl:r?9:8,children:e.jsx(ts,{})})]})}),e.jsx(Re,{})]})})}export{Ys as default};
