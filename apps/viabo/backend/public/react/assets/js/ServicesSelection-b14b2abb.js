import{n as x,o as M,W as b,e as C,q as E,g as w,_ as l,j as n,i as R,l as N,Q as P,C as _,w as S,F as A,Y as v,T as y,E as O,p as U}from"./index-21571737.js";import{a as L,g as $,p as F,S as T,P as k}from"./CommerceRegister-43a2c944.js";import{A as j,a as B}from"./AlertWithFocus-2bfae5ca.js";import{S as W}from"./servicesList-51303f67.js";import{u as V,a as q}from"./CommerceRepository-8e325193.js";import{L as z}from"./LoadingButton-b882bc74.js";import"./useId-a16d032f.js";function D(e){return x("MuiCard",e)}M("MuiCard",["root"]);const H=["className","raised"],G=e=>{const{classes:o}=e;return N({root:["root"]},D,o)},Q=b(L,{name:"MuiCard",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({overflow:"hidden"})),Y=C.forwardRef(function(o,s){const t=E({props:o,name:"MuiCard"}),{className:a,raised:i=!1}=t,c=w(t,H),r=l({},t,{raised:i}),p=G(r);return n(Q,l({className:R(p.root,a),elevation:i?8:void 0,ref:s,ownerState:r},c))}),J=Y;function K(e){return x("MuiCardContent",e)}M("MuiCardContent",["root"]);const X=["className","component"],Z=e=>{const{classes:o}=e;return N({root:["root"]},K,o)},ee=b("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),te=C.forwardRef(function(o,s){const t=E({props:o,name:"MuiCardContent"}),{className:a,component:i="div"}=t,c=w(t,X),r=l({},t,{component:i}),p=Z(r);return n(ee,l({as:i,className:R(p.root,a),ownerState:r,ref:s},c))}),oe=te;function se(e){return x("MuiCardMedia",e)}M("MuiCardMedia",["root","media","img"]);const ae=["children","className","component","image","src","style"],ne=e=>{const{classes:o,isMediaComponent:s,isImageComponent:t}=e;return N({root:["root",s&&"media",t&&"img"]},se,o)},re=b("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:s}=e,{isMediaComponent:t,isImageComponent:a}=s;return[o.root,t&&o.media,a&&o.img]}})(({ownerState:e})=>l({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),ie=["video","audio","picture","iframe","img"],ce=["picture","img"],de=C.forwardRef(function(o,s){const t=E({props:o,name:"MuiCardMedia"}),{children:a,className:i,component:c="div",image:r,src:p,style:f}=t,h=w(t,ae),m=ie.indexOf(c)!==-1,d=!m&&r?l({backgroundImage:`url("${r}")`},f):f,u=l({},t,{component:c,isMediaComponent:m,isImageComponent:ce.indexOf(c)!==-1}),g=ne(u);return n(re,l({className:R(g.root,i),as:c,role:!m&&r?"img":void 0,ref:s,style:d,ownerState:u,src:m?r||p:void 0},h,{children:a}))}),le=de,pe=(e={})=>{const{enqueueSnackbar:o}=P();return V({mutationFn:q,onSuccess:()=>{o("Se actualizo la información del proceso!",{variant:"success"})},onError:s=>{const t=$(s,"No se puede agregar la información al proceso");o(t,{variant:(s==null?void 0:s.status)===500?"error":"warning",autoHideDuration:5e3})},...e})};me.propTypes={store:_.shape(F)};const I={selected:{backgroundColor:e=>U(e.palette.primary.main,.08),borderColor:e=>e.palette.primary.main},unselected:{backgroundColor:e=>e.palette.background.neutral,borderColor:"transparent"}};function me({store:e}){const{setActualProcess:o,setLastProcess:s,resume:t}=e,[a,i]=C.useState([]),[c,r]=C.useState(!1),{mutate:p,isLoading:f}=pe();C.useEffect(()=>{t!=null&&t.services&&i(t==null?void 0:t.services)},[t==null?void 0:t.services]);const h=d=>{if(!a.includes(d.name))return i([...a,d.name]);const u=a.filter(g=>g!==d.name);return i(u)},m=()=>{if(a.length===0)return r(!0);o(k.COMMERCE_INFO),s({info:a,name:k.SERVICES_SELECTION}),r(!1)};return S(A,{children:[n(T,{direction:"column",width:1,spacing:1,children:S(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[n(y,{variant:"h4",color:"textPrimary",align:"center",children:"¡Bienvenido a Viabo!"}),n(y,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Seleccione los servicios para habilitar su ecosistema."})]})}),c&&S(j,{listenElement:c,sx:{mb:5,mx:2,textAlign:"initial"},severity:"warning",children:[n(B,{sx:{textAlign:"initial"},children:"Servicios"}),"Se debe seleccionar al menos un servicio para continuar con el proceso"]}),n(v.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},children:n(O,{my:3,px:2,sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(2, 1fr)"}},children:W.map((d,u)=>{const g=a.includes(d.name);return n(v.div,{whileHover:{scale:1.05},whileTap:{scale:.9},children:S(J,{onClick:()=>h(d),sx:{backgroundColor:"transparent",cursor:"pointer",height:"100%",...g?I.selected:I.unselected},children:[n(le,{sx:{px:{xs:10,sm:5},pt:3},component:"img",image:d.image}),n(oe,{children:n(y,{variant:"caption",color:"text.disabled",children:d.description})})]})},u)})})}),n(T,{mt:7,px:2,children:n(z,{onClick:m,loading:f,color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{textTransform:"uppercase"},children:"Continuar"})})]})}export{me as ServicesSelection,me as default};
