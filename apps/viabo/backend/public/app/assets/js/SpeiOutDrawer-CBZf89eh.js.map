{"version":3,"mappings":"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","names":["SpeiOutForm","Lodable","lazy","SpeiOutResume","SpeiOutSuccess","SpeiOutDrawer","data","accounts","isLoading","isError","error","refetch","useFindSpeiThirdAccountsList","setOpenSpeiOut","openSpeiOut","stpAccount","useAdminDashboardSpeiStore","currentBalance","setCurrentBalance","useState","transactionForm","setTransactionForm","balance","useMemo","showResume","setShowResume","transactionData","setTransactionData","successTransaction","setSuccessTransaction","transactionLoading","setTransactionLoading","insufficient","parseFloat","toFixed","handleClose","handleSuccessForm","values","transactions","concept","handleBackResume","handleSuccess","transaction","titleTransaction","jsx","Typography","renderContentTransaction","jsxs","Fragment","Stack","fCurrency","RightPanel","RequestLoadingComponent","ErrorRequestPage","m","varFade","in","display","flex","overflow","flexDirection"],"sources":["../../../../../frontend/src/app/business/viabo-spei/dashboard/admin-stp/components/spei-out/SpeiOutDrawer.jsx"],"sourcesContent":["import { lazy, useMemo, useState } from 'react'\r\n\r\nimport { Stack, Typography } from '@mui/material'\r\nimport { m } from 'framer-motion'\r\n\r\nimport { useAdminDashboardSpeiStore } from '../../store'\r\n\r\nimport { useFindSpeiThirdAccountsList } from '@/app/business/viabo-spei/third-accounts/hooks'\r\nimport { RightPanel } from '@/app/shared/components'\r\nimport { varFade } from '@/shared/components/animate'\r\nimport { RequestLoadingComponent } from '@/shared/components/loadings'\r\nimport { Lodable } from '@/shared/components/lodables'\r\nimport { ErrorRequestPage } from '@/shared/components/notifications'\r\nimport { fCurrency } from '@/shared/utils'\r\n\r\nconst SpeiOutForm = Lodable(lazy(() => import('./SpeiOutForm')))\r\nconst SpeiOutResume = Lodable(lazy(() => import('./SpeiOutResume')))\r\nconst SpeiOutSuccess = Lodable(lazy(() => import('./SpeiOutSuccess')))\r\n\r\nconst SpeiOutDrawer = () => {\r\n  const { data: accounts, isLoading, isError, error, refetch } = useFindSpeiThirdAccountsList()\r\n  const { setOpenSpeiOut, openSpeiOut, stpAccount } = useAdminDashboardSpeiStore()\r\n\r\n  const [currentBalance, setCurrentBalance] = useState(0)\r\n  const [transactionForm, setTransactionForm] = useState(null)\r\n  const balance = useMemo(() => stpAccount?.balance, [stpAccount?.balance])\r\n  const [showResume, setShowResume] = useState(false)\r\n  const [transactionData, setTransactionData] = useState(null)\r\n  const [successTransaction, setSuccessTransaction] = useState(null)\r\n  const [transactionLoading, setTransactionLoading] = useState(false)\r\n\r\n  const insufficient = useMemo(\r\n    () => Boolean((parseFloat(balance) - currentBalance).toFixed(2) < 0),\r\n    [currentBalance, balance]\r\n  )\r\n\r\n  const handleClose = () => {\r\n    setOpenSpeiOut(false)\r\n    setCurrentBalance(0)\r\n    setShowResume(false)\r\n    setTransactionData(null)\r\n    setTransactionLoading(false)\r\n    setTransactionForm(null)\r\n    setSuccessTransaction(null)\r\n  }\r\n\r\n  const handleSuccessForm = values => {\r\n    setTransactionForm(values)\r\n\r\n    setTransactionData({\r\n      transactions: values?.transactions || [],\r\n      concept: values?.concept,\r\n      balance,\r\n      currentBalance\r\n    })\r\n    setShowResume(true)\r\n  }\r\n\r\n  const handleBackResume = () => {\r\n    setShowResume(false)\r\n  }\r\n\r\n  const handleSuccess = transaction => {\r\n    setShowResume(false)\r\n    setSuccessTransaction(transaction)\r\n  }\r\n\r\n  const titleTransaction = <Typography variant=\"h6\">SPEI Out</Typography>\r\n\r\n  const renderContentTransaction = (\r\n    <>\r\n      <Stack flexDirection=\"column\" alignItems={'center'} justifyContent={'space-between'} spacing={0} px={3} pt={2}>\r\n        <Typography variant=\"subtitle1\">Saldo</Typography>\r\n        <Stack direction={'row'} spacing={1} alignItems={'center'}>\r\n          <Typography variant=\"h3\" color={'success.main'}>\r\n            {fCurrency(balance)}\r\n          </Typography>\r\n          <Typography variant=\"caption\" color={'success.main'}>\r\n            MXN\r\n          </Typography>\r\n        </Stack>\r\n        <Stack direction={'row'} spacing={1} alignItems={'center'}>\r\n          <Typography variant=\"subtitle1\" color={'error'}>\r\n            - {fCurrency(currentBalance)}\r\n          </Typography>\r\n          <Typography variant=\"caption\" color={'error'}>\r\n            MXN\r\n          </Typography>\r\n        </Stack>\r\n        {insufficient && (\r\n          <Typography variant=\"caption\" color={'warning.main'} textAlign={'center'}>\r\n            Saldo insuficiente para realizar la(s) operacion(es)\r\n          </Typography>\r\n        )}\r\n      </Stack>\r\n      <SpeiOutForm\r\n        accounts={accounts || []}\r\n        insufficient={insufficient}\r\n        onSuccess={handleSuccessForm}\r\n        setCurrentBalance={setCurrentBalance}\r\n        initialValues={transactionForm}\r\n      />\r\n    </>\r\n  )\r\n\r\n  return (\r\n    <RightPanel open={openSpeiOut} handleClose={handleClose} titleElement={titleTransaction}>\r\n      {isLoading && <RequestLoadingComponent />}\r\n\r\n      {isError && !isLoading && (\r\n        <ErrorRequestPage errorMessage={error} titleMessage={'Lista de Cuentas'} handleButton={() => refetch()} />\r\n      )}\r\n\r\n      {!isError && !isLoading && openSpeiOut && !showResume && !successTransaction && (\r\n        <m.div\r\n          variants={varFade().in}\r\n          style={{\r\n            display: showResume ? 'none' : 'flex',\r\n            flex: 1,\r\n            overflow: 'hidden',\r\n            flexDirection: 'column'\r\n          }}\r\n        >\r\n          {renderContentTransaction}\r\n        </m.div>\r\n      )}\r\n\r\n      {!isError && !isLoading && openSpeiOut && showResume && !successTransaction && (\r\n        <m.div variants={varFade().in}>\r\n          <SpeiOutResume\r\n            data={transactionData}\r\n            onBack={handleBackResume}\r\n            setTransactionLoading={setTransactionLoading}\r\n            transactionLoading={transactionLoading}\r\n            onSuccess={handleSuccess}\r\n          />\r\n        </m.div>\r\n      )}\r\n\r\n      {!isError && !isLoading && openSpeiOut && !showResume && successTransaction && (\r\n        <m.div variants={varFade().in}>\r\n          <SpeiOutSuccess transactions={successTransaction} onFinish={handleClose} />\r\n        </m.div>\r\n      )}\r\n    </RightPanel>\r\n  )\r\n}\r\n\r\nexport default SpeiOutDrawer\r\n"],"file":"assets/js/SpeiOutDrawer-CBZf89eh.js"}