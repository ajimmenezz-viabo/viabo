import{b7 as V,b8 as Z,b9 as fe,ba as R,bb as z,bc as S,bd as C,z as pe,j as u,a$ as n,B as I,be as Y,r as w,bf as Re,aV as Oe,bg as ee,bh as K,bi as J,bj as $,aA as Q,aB as U,bk as re,bl as se,bm as je,aD as ge,E as F,T as B,G as T,bn as W,aW as oe,bo as te,bp as Ne,a4 as Te,aC as He,I as L,bq as Ie,N as le,br as Ve,bs as _e,bt as Pe,O as _,a7 as We,K as P,S as G,p as ie}from"./index-346c4534.js";import{r as Fe,i as ze,g as Ye}from"./build-40e523c6.js";import{g as Be,h as Le,i as qe,j as Ae}from"./build-6a6f2775.js";import{G as g}from"./build-6471b759.js";import{L as $e}from"./build-cb0e7475.js";import{F as ce,S as de,T as Ge}from"./build-6435c1fd.js";import{b as Ke,c as Je,d as Qe}from"./build-a20336ff.js";function ve(e){V(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Z(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var a;return t.forEach(function(s){var r=fe(s);(a===void 0||a<r||isNaN(Number(r)))&&(a=r)}),a||new Date(NaN)}function xe(e){V(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Z(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var a;return t.forEach(function(s){var r=fe(s);(a===void 0||a>r||isNaN(r.getDate()))&&(a=r)}),a||new Date(NaN)}function Ue(e){return V(1,arguments),R(e,Date.now())}function Xe(e,t){V(2,arguments);var a=S(t);return z(e,-a)}function Ze(e,t){V(2,arguments);var a=S(t);return C(e,-a)}function Tt(e,t){if(V(2,arguments),!t||Z(t)!=="object")return new Date(NaN);var a=t.years?S(t.years):0,s=t.months?S(t.months):0,r=t.weeks?S(t.weeks):0,o=t.days?S(t.days):0,d=t.hours?S(t.hours):0,h=t.minutes?S(t.minutes):0,v=t.seconds?S(t.seconds):0,i=Ze(e,s+a*12),l=Xe(i,o+r*7),f=h+d*60,D=v+f*60,m=D*1e3,E=new Date(l.getTime()-m);return E}const et=pe(u.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonth"),tt=pe(u.jsx("path",{d:"M12.89 11.1c-1.78-.59-2.64-.96-2.64-1.9 0-1.02 1.11-1.39 1.81-1.39 1.31 0 1.79.99 1.9 1.34l1.58-.67c-.15-.45-.82-1.92-2.54-2.24V5h-2v1.26c-2.48.56-2.49 2.86-2.49 2.96 0 2.27 2.25 2.91 3.35 3.31 1.58.56 2.28 1.07 2.28 2.03 0 1.13-1.05 1.61-1.98 1.61-1.82 0-2.34-1.87-2.4-2.09l-1.66.67c.63 2.19 2.28 2.78 2.9 2.96V19h2v-1.24c.4-.09 2.9-.59 2.9-3.22 0-1.39-.61-2.61-3.01-3.44zM3 21H1v-6h6v2H4.52c1.61 2.41 4.36 4 7.48 4 4.97 0 9-4.03 9-9h2c0 6.08-4.92 11-11 11-3.72 0-7.01-1.85-9-4.67V21zm-2-9C1 5.92 5.92 1 12 1c3.72 0 7.01 1.85 9 4.67V3h2v6h-6V7h2.48C17.87 4.59 15.12 3 12 3c-4.97 0-9 4.03-9 9H1z"}),"CurrencyExchangeOutlined");var ae={},at=ze;Object.defineProperty(ae,"__esModule",{value:!0});var ye=ae.default=void 0,nt=at(Fe()),rt=u,st=(0,nt.default)((0,rt.jsx)("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt");ye=ae.default=st;const ot=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(a,s)=>e.slice(s*t,s*t+t)),lt=(e,t)=>{const a=K(Q(e),{locale:t}),s=J(U(e),{locale:t}),r=[];for(let o=a;W(o,s);)r.push(o),o=z(o,1);return r},it=({startDate:e},t)=>e&&R(t,e),ct=({endDate:e},t)=>e&&R(t,e),dt=({startDate:e,endDate:t},a)=>e&&t&&(te(a,{start:e,end:t})||R(a,e)||R(a,t)),ut=({startDate:e,endDate:t})=>e&&t?R(e,t):!1,ue=(e,t)=>{if(e){const a=e instanceof Date?e:Re(e);if(Oe(a))return a}return t},mt=(e,t,a)=>{const{startDate:s,endDate:r}=e;if(s&&r){const o=ve([s,t]),d=xe([r,a]);return[o,ee(o,d)?C(o,1):d]}return[s,r]},ht=(e,t)=>[{label:"Today",startDate:e,endDate:e},{label:"Yesterday",startDate:z(e,-1),endDate:z(e,-1)},{label:"This Week",startDate:K(e,{locale:t}),endDate:J(e,{locale:t})},{label:"Last Week",startDate:K($(e,-1),{locale:t}),endDate:J($(e,-1),{locale:t})},{label:"Last 7 Days",startDate:$(e,-1),endDate:e},{label:"This Month",startDate:Q(e),endDate:U(e)},{label:"Last Month",startDate:Q(C(e,-1)),endDate:U(C(e,-1))},{label:"This Year",startDate:re(e),endDate:se(e)},{label:"Last Year",startDate:re(Y(e,-1)),endDate:se(Y(e,-1))}],ft=(e,t)=>{const a=Math.floor(t/2);return Array(t).fill(0).map((s,r)=>e.getFullYear()-a+r)},pt=({date:e,setDate:t,nextDisabled:a,prevDisabled:s,onClickNext:r,onClickPrevious:o,locale:d})=>{const h=typeof d<"u"?[...Array(12).keys()].map(l=>{var f;return(f=d.localize)===null||f===void 0?void 0:f.month(l,{width:"abbreviated",context:"standalone"})}):["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],v=l=>{t(_e(e,parseInt(l.target.value,10)))},i=l=>{t(Pe(e,parseInt(l.target.value,10)))};return n.createElement(g,{container:!0,justifyContent:"space-between",alignItems:"center"},n.createElement(g,{item:!0,sx:{padding:"5px"}},n.createElement(L,{sx:{padding:"10px","&:hover":{background:"none"}},disabled:s,onClick:o},n.createElement(Le,{color:s?"disabled":"action"}))),n.createElement(g,{item:!0},n.createElement(ce,{variant:"standard"},n.createElement(de,{value:Ie(e),onChange:v,MenuProps:{disablePortal:!0}},h.map((l,f)=>n.createElement(le,{key:l,value:f},l))))),n.createElement(g,{item:!0},n.createElement(ce,{variant:"standard"},n.createElement(de,{value:Ve(e),onChange:i,MenuProps:{disablePortal:!0}},ft(e,30).map(l=>n.createElement(le,{key:l,value:l},l))))),n.createElement(g,{item:!0,sx:{padding:"5px"}},n.createElement(L,{sx:{padding:"10px","&:hover":{background:"none"}},disabled:a,onClick:r},n.createElement(qe,{color:a?"disabled":"action"}))))},gt=({startOfRange:e,endOfRange:t,disabled:a,highlighted:s,outlined:r,filled:o,onClick:d,onHover:h,value:v})=>n.createElement(I,{sx:{display:"flex",borderRadius:e?"50% 0 0 50%":t?"0 50% 50% 0":void 0,backgroundColor:i=>!a&&s?i.palette.primary.light:void 0}},n.createElement(L,{sx:Object.assign({height:"36px",width:"36px",padding:0,border:i=>!a&&r?`1px solid ${i.palette.primary.dark}`:void 0},!a&&o?{"&:hover":{backgroundColor:i=>i.palette.primary.dark},backgroundColor:i=>i.palette.primary.dark}:{}),disabled:a,onClick:d,onMouseOver:h},n.createElement(B,{sx:{lineHeight:1.6,color:i=>a?i.palette.text.secondary:o?i.palette.primary.contrastText:i.palette.text.primary},variant:"body2"},v)));var q;(function(e){e[e.Previous=-1]="Previous",e[e.Next=1]="Next"})(q||(q={}));const me=e=>{var t;const{helpers:a,handlers:s,value:r,dateRange:o,marker:d,setValue:h,minDate:v,maxDate:i,locale:l}=e,f=((t=l==null?void 0:l.options)===null||t===void 0?void 0:t.weekStartsOn)||0,D=typeof l<"u"?[...Array(7).keys()].map(y=>{var x;return(x=l.localize)===null||x===void 0?void 0:x.day((y+f)%7,{width:"short",context:"standalone"})}):["Su","Mo","Tu","We","Th","Fr","Sa"],[m,E]=e.navState;return n.createElement(ge,{square:!0,elevation:0,sx:{width:290}},n.createElement(g,{container:!0},n.createElement(pt,{date:r,setDate:h,nextDisabled:!E,prevDisabled:!m,onClickPrevious:()=>s.onMonthNavigate(d,q.Previous),onClickNext:()=>s.onMonthNavigate(d,q.Next),locale:l}),n.createElement(g,{item:!0,container:!0,direction:"row",justifyContent:"space-between",sx:{marginTop:"10px",paddingLeft:"30px",paddingRight:"30px"}},D.map((y,x)=>n.createElement(B,{color:"textSecondary",key:x,variant:"caption"},y))),n.createElement(g,{item:!0,container:!0,direction:"column",justifyContent:"space-between",sx:{paddingLeft:"15px",paddingRight:"15px",marginTop:"15px",marginBottom:"20px"}},ot(lt(r,l),7).map((y,x)=>n.createElement(g,{key:x,container:!0,direction:"row",justifyContent:"center"},y.map(p=>{const b=it(o,p),j=ct(o,p),O=ut(o),H=dt(o,p)||a.inHoverRange(p);return n.createElement(gt,{key:T(p,"dd-MM-yyyy"),filled:b||j,outlined:Ue(p),highlighted:H&&!O,disabled:!ee(r,p)||!te(p,{start:v,end:i}),startOfRange:b&&!O,endOfRange:j&&!O,onClick:()=>s.onDayClick(p),onHover:()=>s.onDayHover(p),value:Ne(p)})}))))))},he=(e,t)=>{const{startDate:a,endDate:s}=e,{startDate:r,endDate:o}=t;return a&&r&&s&&o?R(a,r)&&R(s,o):!1},vt=({ranges:e,setRange:t,selectedRange:a,verticalOrientation:s})=>n.createElement(Te,{sx:{flexDirection:s?"row":"column",display:"flex",overflowY:"scroll"}},e.map((r,o)=>n.createElement($e,{button:!0,key:o,onClick:()=>t(r),sx:[he(r,a)&&{backgroundColor:d=>d.palette.primary.dark,color:"primary.contrastText","&:hover":{color:"inherit"}}]},n.createElement(He,{primaryTypographyProps:{variant:"body2",sx:{fontWeight:he(r,a)?"bold":"normal"}}},r.label)))),X={FIRST_MONTH:Symbol("firstMonth"),SECOND_MONTH:Symbol("secondMonth")},xt={writingMode:"vertical-lr",transform:"rotate(180deg)"},yt=e=>{const{ranges:t,dateRange:a,minDate:s,maxDate:r,firstMonth:o,setFirstMonth:d,secondMonth:h,setSecondMonth:v,setDateRange:i,helpers:l,handlers:f,locale:D,verticalOrientation:m}=e,{startDate:E,endDate:y}=a,x=je(h,o)>=2,p={dateRange:a,minDate:s,maxDate:r,helpers:l,handlers:f},b=Object.assign({flex:1,textAlign:"center"},m?xt:{});return n.createElement(ge,{elevation:5,square:!0},n.createElement(g,{container:!0,direction:m?"column":"row",wrap:"nowrap"},n.createElement(g,null,n.createElement(vt,{selectedRange:a,ranges:t,setRange:i,verticalOrientation:m})),n.createElement(F,{orientation:m?"horizontal":"vertical",flexItem:!0}),n.createElement(g,{display:"flex",flexDirection:m?"row":"column"},n.createElement(g,{container:!0,direction:m?"column":"row",sx:m?{}:{padding:"20px 70px"},alignItems:"center"},n.createElement(g,{item:!0,sx:b},n.createElement(B,{variant:"subtitle1"},E?T(E,"dd MMMM yyyy",{locale:D}):"Start Date")),n.createElement(g,{item:!0,sx:{flex:m?.5:1,display:"flex",justifyContent:"center",alignItems:"center"}},m?n.createElement(Be,{color:"action"}):n.createElement(ye,{color:"action"})),n.createElement(g,{item:!0,sx:b},n.createElement(B,{variant:"subtitle1"},y?T(y,"dd MMMM yyyy",{locale:D}):"End Date"))),n.createElement(F,null),n.createElement(g,{container:!0,direction:m?"column":"row",justifyContent:"center",wrap:"nowrap"},n.createElement(me,Object.assign({},p,{value:o,setValue:d,navState:[!0,x],marker:X.FIRST_MONTH,locale:D})),n.createElement(F,{orientation:m?"horizontal":"vertical",flexItem:!0}),n.createElement(me,Object.assign({},p,{value:h,setValue:v,navState:[x,!0],marker:X.SECOND_MONTH,locale:D}))))))},Dt=e=>{const t=new Date,{open:a,onChange:s,initialDateRange:r,minDate:o,maxDate:d,definedRanges:h=ht(new Date,e.locale),locale:v,verticalOrientation:i}=e,l=ue(o,Y(t,-10)),f=ue(d,Y(t,10)),[D,m]=mt(r||{},l,f),[E,y]=w.useState(Object.assign({},r)),[x,p]=w.useState(),[b,j]=w.useState(D||t),[O,H]=w.useState(m||C(b,1)),{startDate:N,endDate:A}=E,De=c=>{W(c,O)&&j(c)},be=c=>{oe(c,b)&&H(c)},Me=c=>{let{startDate:M,endDate:k}=c;if(M&&k)c.startDate=M=ve([M,l]),c.endDate=k=xe([k,f]),y(c),s(c),j(M),H(ee(M,k)?C(M,1):k);else{const ne={};y(ne),s(ne),j(t),H(C(b,1))}},Ee=c=>{if(N&&!A&&!W(c,N)){const M={startDate:N,endDate:c};s(M),y(M)}else y({startDate:c,endDate:void 0});p(c)},ke=(c,M)=>{if(c===X.FIRST_MONTH){const k=C(b,M);W(k,O)&&j(k)}else{const k=C(O,M);W(b,k)&&H(k)}},we=c=>{N&&!A&&(!x||!R(c,x))&&p(c)},Se={inHoverRange:c=>N&&!A&&x&&oe(x,N)&&te(c,{start:N,end:x})},Ce={onDayClick:Ee,onDayHover:we,onMonthNavigate:ke};return a?w.createElement(yt,{dateRange:E,minDate:l,maxDate:f,ranges:h,firstMonth:b,secondMonth:O,setFirstMonth:De,setSecondMonth:be,setDateRange:Me,helpers:Se,handlers:Ce,locale:v,verticalOrientation:!!i}):null},bt=e=>{const{closeOnClickOutside:t,wrapperClassName:a,toggle:s,open:r}=e,o=()=>{t!==!1&&s()},d=h=>(h==null?void 0:h.key)==="Escape"&&o();return n.createElement(I,{sx:{position:"relative"}},r&&n.createElement(I,{sx:{position:"fixed",height:"100vh",width:"100vw",bottom:0,zIndex:0,right:0,left:0,top:0},onKeyPress:d,onClick:o}),n.createElement(I,{sx:{position:"relative",zIndex:1},className:a},n.createElement(Dt,Object.assign({},e))))},Mt=e=>n.createElement(bt,Object.assign({},e)),Et=({startDate:e,endDate:t,onChangeDateRange:a,loading:s,onOpenBalance:r})=>{const o=w.useMemo(()=>Ye(),[]),d=w.useRef(null),h=We("down","md"),[v,i]=w.useState(!1),[l,f]=w.useState(v),D=()=>{i(!v),v||f(!0)},m=w.useMemo(()=>e?T(e,"dd MMMM yyyy",{locale:P}):T(new Date,"dd MMMM yyyy",{locale:P}),[e]),E=w.useMemo(()=>t?T(t,"dd MMMM yyyy",{locale:P}):T(new Date,"dd MMMM yyyy",{locale:P}),[t]),y=`${m} - ${E}`;return u.jsxs(u.Fragment,{children:[u.jsxs(G,{py:2,px:1,flexDirection:{lg:"row"},justifyContent:"space-between",alignItems:"center",gap:1,children:[u.jsxs(G,{flex:1,direction:"row",spacing:.5,children:[u.jsx(L,{disabled:!!s,onClick:D,size:"small",children:u.jsx(et,{})}),u.jsx(G,{minWidth:300,flex:1,children:u.jsx(Ge,{placeholder:"Fecha inicial - Fecha final",value:y,fullWidth:!0,type:"text",variant:"outlined",size:"small",disabled:!!s,onClick:D,InputProps:{readOnly:!0}})})]}),u.jsx(I,{display:"flex",flexGrow:1}),u.jsx(I,{display:"flex",flexGrow:1,justifyContent:"flex-end",children:u.jsx(ie,{variant:"contained",color:"secondary",disabled:!!s,startIcon:u.jsx(tt,{}),sx:{color:"text.primary",fontWeight:"bolder"},onClick:r,children:"Ver Balance del Periodo"})}),u.jsxs(Ke,{open:l,ref:d,scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",children:[u.jsx(Ae,{variant:"subtitle1",fontWeight:"bolder",id:"scroll-dialog-title",children:"Confirma las fechas seleccionadas"}),u.jsx(Je,{id:"scroll-dialog-description",dividers:!0,children:u.jsx(Mt,{open:v,onChange:a,verticalOrientation:h,toggle:D,locale:P,definedRanges:o,closeOnClickOutside:!1,wrapperClassName:"simple-date-range"})}),u.jsx(Qe,{children:u.jsx(ie,{variant:"contained",color:"primary",onClick:()=>{f(!1),setTimeout(()=>{i(!1)},200)},children:"Hecho"})})]})]}),u.jsx(F,{sx:{borderStyle:"dashed"}})]})};Et.propTypes={endDate:_.any.isRequired,loading:_.any,onChangeDateRange:_.func.isRequired,onOpenBalance:_.func,startDate:_.any.isRequired};export{tt as C,Et as a,Tt as s};
