import{k as b,a as w,Q as j,g as C,b as T,j as i,S as r,T as a,E as y,B as s,L as q,O as n}from"./index-e73cf17b.js";import{l as L,C as N}from"./build-2f036377.js";import{i as f}from"./build-c9433a85.js";import{g as I}from"./build-e432cd3b.js";import"./build-ac55763c.js";import"./build-605ae648.js";import"./build-de5e9f77.js";import"./build-a2715f08.js";import"./build-0c8c73a4.js";import"./build-b486dabf.js";import"./build-838d2e22.js";import"./build-ca5c03ca.js";import"./build-a99081e6.js";import"./build-dba47033.js";import"./build-89d6f61d.js";import"./build-5033c3a7.js";import"./build-8193b4a1.js";import"./build-08243790.js";import"./build-7101bc47.js";import"./build-34e19a43.js";import"./build-7c7c485c.js";import"./build-77a5b78b.js";import"./build-c6c15f5a.js";import"./build-3c0d21c0.js";import"./build-350bceb8.js";const M=(t={})=>{const l=b(),e=w(L,t);return{...e,mutate:async(p,u)=>{const{onSuccess:c,onError:o,mutationOptions:g}=u;try{await j.promise(e.mutateAsync(p,g),{pending:"Liquidando movimiento ...",success:{render({data:d}){return l.invalidateQueries([N.MOVEMENTS]),f(c)&&c(d),"Se liquidó el movimiento con éxito"}}})}catch(d){const x=C(d,"No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas");f(o)&&o(x),j.error(x,{type:T(d)})}}}},S=({movement:t,onSuccess:l})=>{var o;const e=I(t==null?void 0:t.cardType),h=e==null?void 0:e.component,{mutate:p,isLoading:u}=M(),c=()=>{p(t==null?void 0:t.dataToLiquidate,{onSuccess:()=>{l()}})};return i.jsxs(r,{px:5,py:3,children:[i.jsxs(r,{alignItems:"center",justifyContent:"center",spacing:.5,children:[i.jsx(r,{alignItems:"center",justifyContent:"center",children:i.jsxs(r,{direction:"row",spacing:1,alignItems:"center",children:[i.jsxs(a,{variant:"h2",children:[" ",t==null?void 0:t.amount]}),i.jsx(a,{variant:"caption",children:"MXN"})]})}),i.jsxs(r,{direction:"row",spacing:.5,alignItems:"center",children:[i.jsx(h,{sx:{width:25,height:25}}),i.jsx(a,{textAlign:"center",variant:"body1",children:t==null?void 0:t.description})]})]}),i.jsxs(r,{divider:i.jsx(y,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:1,alignItems:"center",justifyContent:"center",children:[i.jsx(s,{}),i.jsx(a,{variant:"subtitle1",color:"text.secondary",children:"Detalles de la Transacción"}),i.jsxs(r,{flex:1,width:1,spacing:1,children:[i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"Comercio:"}),i.jsx(s,{component:"span",color:"primary.light",fontWeight:"bold",children:t==null?void 0:t.commerceName})]}),i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"Terminal:"}),i.jsx(s,{component:"span",color:"primary.main",fontWeight:"bold",children:t==null?void 0:t.terminalName})]}),i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"No. Referencia:"}),i.jsx(s,{component:"span",color:"primary.main",fontWeight:"bold",children:t==null?void 0:t.id})]}),i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"No. Autorización:"}),i.jsx(s,{component:"span",color:"primary.main",fontWeight:"bold",children:t==null?void 0:t.authNumber})]}),i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"Fecha:"}),i.jsx(s,{component:a,variant:"subtitle2",color:"text.primary",children:(o=t==null?void 0:t.transactionDate)==null?void 0:o.fullDate})]})]})]}),i.jsxs(r,{divider:i.jsx(y,{flexItem:!0,sx:{borderStyle:"dashed"}}),spacing:1,alignItems:"center",justifyContent:"center",children:[i.jsx(s,{}),i.jsx(a,{variant:"subtitle1",color:"text.secondary",children:"Liquidación"}),i.jsxs(r,{flex:1,width:1,spacing:1,children:[i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"Monto:"}),i.jsx(s,{component:"span",fontWeight:"bold",children:t==null?void 0:t.amountFormat})]}),i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"Comisión:"}),i.jsxs(s,{component:"span",color:"error.main",fontWeight:"bold",children:["-",t==null?void 0:t.commission]})]}),i.jsxs(r,{justifyContent:"space-between",direction:"row",children:[i.jsx(a,{variant:"subtitle2",children:"Monto a Liquidar:"}),i.jsx(s,{component:"span",color:"success.main",fontWeight:"bold",children:t==null?void 0:t.amountToLiquidateFormat})]})]}),i.jsx(r,{width:1,pt:2,children:i.jsx(q,{loading:u,size:"large",fullWidth:!0,variant:"contained",onClick:c,children:"Liquidar"})})]})]})};S.propTypes={movement:n.shape({amount:n.any,amountFormat:n.any,amountToLiquidateFormat:n.any,authNumber:n.any,cardType:n.any,commerceName:n.any,commission:n.any,dataToLiquidate:n.any,description:n.any,id:n.any,terminalName:n.any,transactionDate:n.shape({fullDate:n.any})}),onSuccess:n.func};export{S as default};
