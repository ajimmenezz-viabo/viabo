import{j as L,o as t,a6 as O,m as e,ag as d,T as p,B as u}from"./index-a5b9a34e.js";import{u as A}from"./formik.esm-5996d112.js";import{c as V,a as j}from"./index.esm-4f526a47.js";import{p as v,P as h}from"./CommerceRegister-0ebd4dc3.js";import{u as B,a as _}from"./useSendValidationCode-18d4ff21.js";import{S as f}from"./integracion-tecnologica-ba5f7d0c.js";import{T as q}from"./TextField-749b4905.js";import{I as w}from"./InputAdornment-77459eae.js";import{E as D}from"./EmailOutlined-82543660.js";import{L as N}from"./LoadingButton-68870635.js";import"./useMutation-46b372a0.js";import"./index-1aacdabe.js";const R="/react/assets/img/forms_steps-1aa59cf4.svg";W.propTypes={store:L.shape(v)};function W({store:g}){const{setToken:y,setActualProcess:S,setLastProcess:C}=g,{mutate:x,isLoading:T}=B(),E=A({initialValues:{email:""},validationSchema:V({email:j().email("Ingresa un correo valido").required("El correo es requerido")}),onSubmit:r=>{const m=r==null?void 0:r.email;k().then(P=>{const{isError:F,data:o}=P;F?l(!1):(y(o==null?void 0:o.token),x({email:m,token:o==null?void 0:o.token},{onSuccess:()=>{S(h.VALIDATION_CODE),C({info:{email:m},name:h.CONTINUE_PROCESS})},onError:()=>{l(!1)}}))})}}),{handleSubmit:n,values:i,errors:a,touched:s,handleChange:b,isSubmitting:I,setSubmitting:l,getFieldProps:$,setFieldValue:z}=E,{data:U,isError:G,refetch:k}=_(i==null?void 0:i.email,{enabled:!1}),c=T||I;return t(O,{children:[e(f,{direction:"column",width:1,spacing:1,children:t(d.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e(p,{variant:"h4",color:"textPrimary",align:"center",children:"Continué con el proceso"}),e(p,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Ingrese el correo electrónico con el que se hizo el registro para poder continuar con su proceso."})]})}),e(d.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5},children:e(u,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4},children:e("img",{src:R,width:"40%",alt:"fill forms"})})}),e(u,{component:"form",mt:3,onSubmit:n,children:t(f,{direction:"column",spacing:3,children:[e(q,{fullWidth:!0,id:"email",name:"email",label:"Correo",placeholder:"usuario@dominio.com",value:i.email,onChange:b,error:s.email&&!!a.email,helperText:s.email&&a.email,disabled:c,InputProps:{startAdornment:e(w,{position:"start",children:e(D,{})})}}),e(N,{onClick:n,loading:c,color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{textTransform:"uppercase"},children:"Continuar"})]})})]})}export{W as default};
