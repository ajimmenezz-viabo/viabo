import{b7 as V,b8 as Z,b9 as fe,ba as R,bb as z,bc as S,bd as C,z as pe,j as u,b0 as n,B as _,be as B,r as w,bf as Re,aW as Oe,bg as ee,bh as K,bi as J,bj as $,aA as X,aB as Q,bk as re,bl as se,bm as je,aD as ge,E as W,T as Y,G as T,bn as F,aX as oe,bo as te,bp as Ne,a4 as Te,aC as He,I as L,bq as Ie,N as le,br as _e,bs as Ve,bt as Pe,O as I,a7 as Fe,K as P,S as G,p as ie}from"./index-4598388a.js";import{r as We,i as ze,g as Be}from"./build-6273f162.js";import{g as Ye,h as Le,i as qe,j as Ae}from"./build-a3ff9182.js";import{G as v}from"./build-a6ca5fb2.js";import{L as $e}from"./build-2e665ca4.js";import{F as ce,S as de,T as Ge}from"./build-002795c1.js";import{a as Ke,b as Je,c as Xe}from"./build-633032d6.js";function ve(e){V(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Z(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var a;return t.forEach(function(s){var r=fe(s);(a===void 0||a<r||isNaN(Number(r)))&&(a=r)}),a||new Date(NaN)}function xe(e){V(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Z(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var a;return t.forEach(function(s){var r=fe(s);(a===void 0||a>r||isNaN(r.getDate()))&&(a=r)}),a||new Date(NaN)}function Qe(e){return V(1,arguments),R(e,Date.now())}function Ue(e,t){V(2,arguments);var a=S(t);return z(e,-a)}function Ze(e,t){V(2,arguments);var a=S(t);return C(e,-a)}function Tt(e,t){if(V(2,arguments),!t||Z(t)!=="object")return new Date(NaN);var a=t.years?S(t.years):0,s=t.months?S(t.months):0,r=t.weeks?S(t.weeks):0,o=t.days?S(t.days):0,d=t.hours?S(t.hours):0,h=t.minutes?S(t.minutes):0,y=t.seconds?S(t.seconds):0,i=Ze(e,s+a*12),l=Ue(i,o+r*7),p=h+d*60,b=y+p*60,m=b*1e3,E=new Date(l.getTime()-m);return E}const et=pe(u.jsx("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonth"),tt=pe(u.jsx("path",{d:"M12.89 11.1c-1.78-.59-2.64-.96-2.64-1.9 0-1.02 1.11-1.39 1.81-1.39 1.31 0 1.79.99 1.9 1.34l1.58-.67c-.15-.45-.82-1.92-2.54-2.24V5h-2v1.26c-2.48.56-2.49 2.86-2.49 2.96 0 2.27 2.25 2.91 3.35 3.31 1.58.56 2.28 1.07 2.28 2.03 0 1.13-1.05 1.61-1.98 1.61-1.82 0-2.34-1.87-2.4-2.09l-1.66.67c.63 2.19 2.28 2.78 2.9 2.96V19h2v-1.24c.4-.09 2.9-.59 2.9-3.22 0-1.39-.61-2.61-3.01-3.44zM3 21H1v-6h6v2H4.52c1.61 2.41 4.36 4 7.48 4 4.97 0 9-4.03 9-9h2c0 6.08-4.92 11-11 11-3.72 0-7.01-1.85-9-4.67V21zm-2-9C1 5.92 5.92 1 12 1c3.72 0 7.01 1.85 9 4.67V3h2v6h-6V7h2.48C17.87 4.59 15.12 3 12 3c-4.97 0-9 4.03-9 9H1z"}),"CurrencyExchangeOutlined");var ae={},at=ze;Object.defineProperty(ae,"__esModule",{value:!0});var ye=ae.default=void 0,nt=at(We()),rt=u,st=(0,nt.default)((0,rt.jsx)("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4z"}),"ArrowRightAlt");ye=ae.default=st;const ot=(e,t)=>Array.from({length:Math.ceil(e.length/t)},(a,s)=>e.slice(s*t,s*t+t)),lt=(e,t)=>{const a=K(X(e),{locale:t}),s=J(Q(e),{locale:t}),r=[];for(let o=a;F(o,s);)r.push(o),o=z(o,1);return r},it=({startDate:e},t)=>e&&R(t,e),ct=({endDate:e},t)=>e&&R(t,e),dt=({startDate:e,endDate:t},a)=>e&&t&&(te(a,{start:e,end:t})||R(a,e)||R(a,t)),ut=({startDate:e,endDate:t})=>e&&t?R(e,t):!1,ue=(e,t)=>{if(e){const a=e instanceof Date?e:Re(e);if(Oe(a))return a}return t},mt=(e,t,a)=>{const{startDate:s,endDate:r}=e;if(s&&r){const o=ve([s,t]),d=xe([r,a]);return[o,ee(o,d)?C(o,1):d]}return[s,r]},ht=(e,t)=>[{label:"Today",startDate:e,endDate:e},{label:"Yesterday",startDate:z(e,-1),endDate:z(e,-1)},{label:"This Week",startDate:K(e,{locale:t}),endDate:J(e,{locale:t})},{label:"Last Week",startDate:K($(e,-1),{locale:t}),endDate:J($(e,-1),{locale:t})},{label:"Last 7 Days",startDate:$(e,-1),endDate:e},{label:"This Month",startDate:X(e),endDate:Q(e)},{label:"Last Month",startDate:X(C(e,-1)),endDate:Q(C(e,-1))},{label:"This Year",startDate:re(e),endDate:se(e)},{label:"Last Year",startDate:re(B(e,-1)),endDate:se(B(e,-1))}],ft=(e,t)=>{const a=Math.floor(t/2);return Array(t).fill(0).map((s,r)=>e.getFullYear()-a+r)},pt=({date:e,setDate:t,nextDisabled:a,prevDisabled:s,onClickNext:r,onClickPrevious:o,locale:d})=>{const h=typeof d<"u"?[...Array(12).keys()].map(l=>{var p;return(p=d.localize)===null||p===void 0?void 0:p.month(l,{width:"abbreviated",context:"standalone"})}):["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],y=l=>{t(Ve(e,parseInt(l.target.value,10)))},i=l=>{t(Pe(e,parseInt(l.target.value,10)))};return n.createElement(v,{container:!0,justifyContent:"space-between",alignItems:"center"},n.createElement(v,{item:!0,sx:{padding:"5px"}},n.createElement(L,{sx:{padding:"10px","&:hover":{background:"none"}},disabled:s,onClick:o},n.createElement(Le,{color:s?"disabled":"action"}))),n.createElement(v,{item:!0},n.createElement(ce,{variant:"standard"},n.createElement(de,{value:Ie(e),onChange:y,MenuProps:{disablePortal:!0}},h.map((l,p)=>n.createElement(le,{key:l,value:p},l))))),n.createElement(v,{item:!0},n.createElement(ce,{variant:"standard"},n.createElement(de,{value:_e(e),onChange:i,MenuProps:{disablePortal:!0}},ft(e,30).map(l=>n.createElement(le,{key:l,value:l},l))))),n.createElement(v,{item:!0,sx:{padding:"5px"}},n.createElement(L,{sx:{padding:"10px","&:hover":{background:"none"}},disabled:a,onClick:r},n.createElement(qe,{color:a?"disabled":"action"}))))},gt=({startOfRange:e,endOfRange:t,disabled:a,highlighted:s,outlined:r,filled:o,onClick:d,onHover:h,value:y})=>n.createElement(_,{sx:{display:"flex",borderRadius:e?"50% 0 0 50%":t?"0 50% 50% 0":void 0,backgroundColor:i=>!a&&s?i.palette.primary.light:void 0}},n.createElement(L,{sx:Object.assign({height:"36px",width:"36px",padding:0,border:i=>!a&&r?`1px solid ${i.palette.primary.dark}`:void 0},!a&&o?{"&:hover":{backgroundColor:i=>i.palette.primary.dark},backgroundColor:i=>i.palette.primary.dark}:{}),disabled:a,onClick:d,onMouseOver:h},n.createElement(Y,{sx:{lineHeight:1.6,color:i=>a?i.palette.text.secondary:o?i.palette.primary.contrastText:i.palette.text.primary},variant:"body2"},y)));var q;(function(e){e[e.Previous=-1]="Previous",e[e.Next=1]="Next"})(q||(q={}));const me=e=>{var t;const{helpers:a,handlers:s,value:r,dateRange:o,marker:d,setValue:h,minDate:y,maxDate:i,locale:l}=e,p=((t=l==null?void 0:l.options)===null||t===void 0?void 0:t.weekStartsOn)||0,b=typeof l<"u"?[...Array(7).keys()].map(x=>{var f;return(f=l.localize)===null||f===void 0?void 0:f.day((x+p)%7,{width:"short",context:"standalone"})}):["Su","Mo","Tu","We","Th","Fr","Sa"],[m,E]=e.navState;return n.createElement(ge,{square:!0,elevation:0,sx:{width:290}},n.createElement(v,{container:!0},n.createElement(pt,{date:r,setDate:h,nextDisabled:!E,prevDisabled:!m,onClickPrevious:()=>s.onMonthNavigate(d,q.Previous),onClickNext:()=>s.onMonthNavigate(d,q.Next),locale:l}),n.createElement(v,{item:!0,container:!0,direction:"row",justifyContent:"space-between",sx:{marginTop:"10px",paddingLeft:"30px",paddingRight:"30px"}},b.map((x,f)=>n.createElement(Y,{color:"textSecondary",key:f,variant:"caption"},x))),n.createElement(v,{item:!0,container:!0,direction:"column",justifyContent:"space-between",sx:{paddingLeft:"15px",paddingRight:"15px",marginTop:"15px",marginBottom:"20px"}},ot(lt(r,l),7).map((x,f)=>n.createElement(v,{key:f,container:!0,direction:"row",justifyContent:"center"},x.map(g=>{const D=it(o,g),j=ct(o,g),O=ut(o),H=dt(o,g)||a.inHoverRange(g);return n.createElement(gt,{key:T(g,"dd-MM-yyyy"),filled:D||j,outlined:Qe(g),highlighted:H&&!O,disabled:!ee(r,g)||!te(g,{start:y,end:i}),startOfRange:D&&!O,endOfRange:j&&!O,onClick:()=>s.onDayClick(g),onHover:()=>s.onDayHover(g),value:Ne(g)})}))))))},he=(e,t)=>{const{startDate:a,endDate:s}=e,{startDate:r,endDate:o}=t;return a&&r&&s&&o?R(a,r)&&R(s,o):!1},vt=({ranges:e,setRange:t,selectedRange:a,verticalOrientation:s})=>n.createElement(Te,{sx:{flexDirection:s?"row":"column",display:"flex",overflowY:"scroll"}},e.map((r,o)=>n.createElement($e,{button:!0,key:o,onClick:()=>t(r),sx:[he(r,a)&&{backgroundColor:d=>d.palette.primary.dark,color:"primary.contrastText","&:hover":{color:"inherit"}}]},n.createElement(He,{primaryTypographyProps:{variant:"body2",sx:{fontWeight:he(r,a)?"bold":"normal"}}},r.label)))),U={FIRST_MONTH:Symbol("firstMonth"),SECOND_MONTH:Symbol("secondMonth")},xt={writingMode:"vertical-lr",transform:"rotate(180deg)"},yt=e=>{const{ranges:t,dateRange:a,minDate:s,maxDate:r,firstMonth:o,setFirstMonth:d,secondMonth:h,setSecondMonth:y,setDateRange:i,helpers:l,handlers:p,locale:b,verticalOrientation:m}=e,{startDate:E,endDate:x}=a,f=je(h,o)>=2,g={dateRange:a,minDate:s,maxDate:r,helpers:l,handlers:p},D=Object.assign({flex:1,textAlign:"center"},m?xt:{});return n.createElement(ge,{elevation:5,square:!0},n.createElement(v,{container:!0,direction:m?"column":"row",wrap:"nowrap"},n.createElement(v,null,n.createElement(vt,{selectedRange:a,ranges:t,setRange:i,verticalOrientation:m})),n.createElement(W,{orientation:m?"horizontal":"vertical",flexItem:!0}),n.createElement(v,{display:"flex",flexDirection:m?"row":"column"},n.createElement(v,{container:!0,direction:m?"column":"row",sx:m?{}:{padding:"20px 70px"},alignItems:"center"},n.createElement(v,{item:!0,sx:D},n.createElement(Y,{variant:"subtitle1"},E?T(E,"dd MMMM yyyy",{locale:b}):"Start Date")),n.createElement(v,{item:!0,sx:{flex:m?.5:1,display:"flex",justifyContent:"center",alignItems:"center"}},m?n.createElement(Ye,{color:"action"}):n.createElement(ye,{color:"action"})),n.createElement(v,{item:!0,sx:D},n.createElement(Y,{variant:"subtitle1"},x?T(x,"dd MMMM yyyy",{locale:b}):"End Date"))),n.createElement(W,null),n.createElement(v,{container:!0,direction:m?"column":"row",justifyContent:"center",wrap:"nowrap"},n.createElement(me,Object.assign({},g,{value:o,setValue:d,navState:[!0,f],marker:U.FIRST_MONTH,locale:b})),n.createElement(W,{orientation:m?"horizontal":"vertical",flexItem:!0}),n.createElement(me,Object.assign({},g,{value:h,setValue:y,navState:[f,!0],marker:U.SECOND_MONTH,locale:b}))))))},bt=e=>{const t=new Date,{open:a,onChange:s,initialDateRange:r,minDate:o,maxDate:d,definedRanges:h=ht(new Date,e.locale),locale:y,verticalOrientation:i}=e,l=ue(o,B(t,-10)),p=ue(d,B(t,10)),[b,m]=mt(r||{},l,p),[E,x]=w.useState(Object.assign({},r)),[f,g]=w.useState(),[D,j]=w.useState(b||t),[O,H]=w.useState(m||C(D,1)),{startDate:N,endDate:A}=E,be=c=>{F(c,O)&&j(c)},De=c=>{oe(c,D)&&H(c)},Me=c=>{let{startDate:M,endDate:k}=c;if(M&&k)c.startDate=M=ve([M,l]),c.endDate=k=xe([k,p]),x(c),s(c),j(M),H(ee(M,k)?C(M,1):k);else{const ne={};x(ne),s(ne),j(t),H(C(D,1))}},Ee=c=>{if(N&&!A&&!F(c,N)){const M={startDate:N,endDate:c};s(M),x(M)}else x({startDate:c,endDate:void 0});g(c)},ke=(c,M)=>{if(c===U.FIRST_MONTH){const k=C(D,M);F(k,O)&&j(k)}else{const k=C(O,M);F(D,k)&&H(k)}},we=c=>{N&&!A&&(!f||!R(c,f))&&g(c)},Se={inHoverRange:c=>N&&!A&&f&&oe(f,N)&&te(c,{start:N,end:f})},Ce={onDayClick:Ee,onDayHover:we,onMonthNavigate:ke};return a?w.createElement(yt,{dateRange:E,minDate:l,maxDate:p,ranges:h,firstMonth:D,secondMonth:O,setFirstMonth:be,setSecondMonth:De,setDateRange:Me,helpers:Se,handlers:Ce,locale:y,verticalOrientation:!!i}):null},Dt=e=>{const{closeOnClickOutside:t,wrapperClassName:a,toggle:s,open:r}=e,o=()=>{t!==!1&&s()},d=h=>(h==null?void 0:h.key)==="Escape"&&o();return n.createElement(_,{sx:{position:"relative"}},r&&n.createElement(_,{sx:{position:"fixed",height:"100vh",width:"100vw",bottom:0,zIndex:0,right:0,left:0,top:0},onKeyPress:d,onClick:o}),n.createElement(_,{sx:{position:"relative",zIndex:1},className:a},n.createElement(bt,Object.assign({},e))))},Mt=e=>n.createElement(Dt,Object.assign({},e)),Et=({startDate:e,endDate:t,onChangeDateRange:a,loading:s,onOpenBalance:r,hideBalance:o=!1})=>{const d=w.useMemo(()=>Be(),[]),h=w.useRef(null),y=Fe("down","md"),[i,l]=w.useState(!1),[p,b]=w.useState(i),m=()=>{l(!i),i||b(!0)},E=w.useMemo(()=>e?T(e,"dd MMMM yyyy",{locale:P}):T(new Date,"dd MMMM yyyy",{locale:P}),[e]),x=w.useMemo(()=>t?T(t,"dd MMMM yyyy",{locale:P}):T(new Date,"dd MMMM yyyy",{locale:P}),[t]),f=`${E} - ${x}`;return u.jsxs(u.Fragment,{children:[u.jsxs(G,{py:2,px:1,flexDirection:{lg:"row"},justifyContent:"space-between",alignItems:"center",gap:1,children:[u.jsxs(G,{flex:1,width:1,direction:"row",spacing:.5,children:[u.jsx(L,{disabled:!!s,onClick:m,size:"small",children:u.jsx(et,{})}),u.jsx(G,{flex:1,children:u.jsx(Ge,{placeholder:"Fecha inicial - Fecha final",value:f,fullWidth:!0,type:"text",variant:"outlined",size:"small",disabled:!!s,onClick:m,InputProps:{readOnly:!0}})})]}),u.jsx(_,{display:"flex",flexGrow:1}),u.jsx(_,{display:"flex",flexGrow:1,justifyContent:"flex-end",children:!o&&u.jsx(ie,{variant:"contained",color:"secondary",disabled:!!s,startIcon:u.jsx(tt,{}),sx:{color:"text.primary",fontWeight:"bolder"},onClick:r,children:"Ver Balance del Periodo"})}),u.jsxs(Ke,{open:p,ref:h,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"md",children:[u.jsx(Ae,{variant:"subtitle1",fontWeight:"bolder",sx:{mb:2},id:"scroll-dialog-title",children:"Confirma las fechas seleccionadas"}),u.jsx(Je,{id:"scroll-dialog-description",dividers:!0,children:u.jsx(Mt,{open:i,onChange:a,verticalOrientation:y,toggle:m,locale:P,definedRanges:d,closeOnClickOutside:!1,wrapperClassName:"simple-date-range"})}),u.jsx(Xe,{children:u.jsx(ie,{variant:"contained",color:"primary",onClick:()=>{b(!1),setTimeout(()=>{l(!1)},200)},children:"Hecho"})})]})]}),u.jsx(W,{sx:{borderStyle:"dashed"}})]})};Et.propTypes={endDate:I.any.isRequired,loading:I.any,onChangeDateRange:I.func.isRequired,onOpenBalance:I.func,startDate:I.any.isRequired,hideBalance:I.bool};export{tt as C,Et as a,Tt as s};
