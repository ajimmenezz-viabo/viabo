import{n as y,o as b,W as x,e as C,q as M,g as E,_ as l,j as s,i as w,l as R,S as P,C as A,w as f,F as O,Z as h,T as v,E as _,p as U}from"./index-3c15f187.js";import{a as V,g as $,p as L,S as T,P as N}from"./CommerceRegister-2b274463.js";import{A as j,a as F}from"./AlertWithFocus-ba77d95b.js";import{u as B,s as W}from"./CommerceRepository-cb9bcdbe.js";import{L as H}from"./LoadingButton-98c99725.js";function q(e){return y("MuiCard",e)}b("MuiCard",["root"]);const z=["className","raised"],D=e=>{const{classes:o}=e;return R({root:["root"]},q,o)},G=x(V,{name:"MuiCard",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({overflow:"hidden"})),X=C.forwardRef(function(o,a){const t=M({props:o,name:"MuiCard"}),{className:i,raised:d=!1}=t,c=E(t,z),n=l({},t,{raised:d}),p=D(n);return s(G,l({className:w(p.root,i),elevation:d?8:void 0,ref:a,ownerState:n},c))}),Z=X;function J(e){return y("MuiCardContent",e)}b("MuiCardContent",["root"]);const K=["className","component"],Q=e=>{const{classes:o}=e;return R({root:["root"]},J,o)},Y=x("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,o)=>o.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),ee=C.forwardRef(function(o,a){const t=M({props:o,name:"MuiCardContent"}),{className:i,component:d="div"}=t,c=E(t,K),n=l({},t,{component:d}),p=Q(n);return s(Y,l({as:d,className:w(p.root,i),ownerState:n,ref:a},c))}),te=ee;function oe(e){return y("MuiCardMedia",e)}b("MuiCardMedia",["root","media","img"]);const ae=["children","className","component","image","src","style"],se=e=>{const{classes:o,isMediaComponent:a,isImageComponent:t}=e;return R({root:["root",a&&"media",t&&"img"]},oe,o)},re=x("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:(e,o)=>{const{ownerState:a}=e,{isMediaComponent:t,isImageComponent:i}=a;return[o.root,t&&o.media,i&&o.img]}})(({ownerState:e})=>l({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},e.isMediaComponent&&{width:"100%"},e.isImageComponent&&{objectFit:"cover"})),ne=["video","audio","picture","iframe","img"],ie=["picture","img"],ce=C.forwardRef(function(o,a){const t=M({props:o,name:"MuiCardMedia"}),{children:i,className:d,component:c="div",image:n,src:p,style:g}=t,S=E(t,ae),r=ne.indexOf(c)!==-1,u=!r&&n?l({backgroundImage:`url("${n}")`},g):g,m=l({},t,{component:c,isMediaComponent:r,isImageComponent:ie.indexOf(c)!==-1}),I=se(m);return s(re,l({className:w(I.root,d),as:c,role:!r&&n?"img":void 0,ref:a,style:u,ownerState:m,src:r?n||p:void 0},S,{children:i}))}),de=ce,le=(e={})=>{const{enqueueSnackbar:o}=P();return B({mutationFn:W,onSuccess:()=>{o("Servicios agregados al comercio!",{variant:"success"})},onError:a=>{const t=$(a,"No se puede agregar los servicios al comercio");o(t,{variant:(a==null?void 0:a.status)===500?"error":"warning",autoHideDuration:5e3})},...e})},pe="/react/assets/img/viabo-card-be5013bb.png",me="/react/assets/img/viabo-pay-c2518fc8.png";Ce.propTypes={store:A.shape(L)};const ue=[{name:"Viabo Card",description:"Tarjeta CARNET X VIABO para control de gastos, pago de compensaciones, cash-back y fidelización por perfiles.",image:pe},{name:"Viabo Pay",description:"Herramienta de cobro/pago por pefiles,transparencia transaccional y alertas.",image:me}],k={selected:{backgroundColor:e=>U(e.palette.primary.main,.08),borderColor:e=>e.palette.primary.main},unselected:{backgroundColor:e=>e.palette.background.neutral,borderColor:"transparent"}};function Ce({store:e}){const{setActualProcess:o,setLastProcess:a}=e,[t,i]=C.useState([]),[d,c]=C.useState(!1),{mutate:n,isLoading:p}=le(),g=r=>{if(!t.includes(r.name))return i([...t,r.name]);const u=t.filter(m=>m!==r.name);return i(u)},S=()=>t.length===0?c(!0):n({services:t},{onSuccess:()=>{o(N.COMMERCE_INFO),a({info:t,name:N.SERVICES_SELECTION}),c(!1)}});return f(O,{children:[s(T,{direction:"column",width:1,spacing:1,children:f(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[s(v,{variant:"h4",color:"textPrimary",align:"center",children:"¡Bienvenido a Viabo!"}),s(v,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Seleccione los servicios para habilitar su ecosistema."})]})}),d&&f(j,{listenElement:d,sx:{mb:5,mx:2,textAlign:"initial"},severity:"warning",children:[s(F,{sx:{textAlign:"initial"},children:"Servicios"}),"Se debe seleccionar al menos un servicio para continuar con el proceso"]}),s(h.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5},children:s(_,{my:3,px:2,sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:"repeat(2, 1fr)",xl:"repeat(2, 1fr)"}},children:ue.map((r,u)=>{const m=t.includes(r.name);return s(h.div,{whileHover:{scale:1.05},whileTap:{scale:.9},children:f(Z,{onClick:()=>g(r),sx:{backgroundColor:"transparent",cursor:"pointer",height:"100%",...m?k.selected:k.unselected},children:[s(de,{sx:{px:{xs:10,sm:5},pt:3},component:"img",image:r.image}),s(te,{children:s(v,{variant:"caption",color:"text.disabled",children:r.description})})]})},u)})})}),s(T,{mt:7,px:2,children:s(H,{onClick:S,loading:p,color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{textTransform:"uppercase"},children:"Continuar"})})]})}export{Ce as ServicesSelection,Ce as default};
