import{r as d,u as L,A as y,a as A,s as g,g as E,b as S,c as F,d as C,e as T,j as e,m as R,T as h,M as k,S as t,f,h as H,L as M,i as W,k as P,P as U,F as q,B as b,l as N}from"./index-mplo7Cy0.js";import{u as O}from"./build-0lw-wv_t.js";import{c as z,a as I}from"./build-SLoEvwLV.js";import{u as B}from"./build-38M3h7rC.js";import{A as _}from"./build-Ppy2hREe.js";import{A as D,v as j}from"./build-Hhkdi4aP.js";import{F as G}from"./build-fgcEbVX7.js";import{R as Q}from"./build-Iq_SWpw6.js";import{R as $}from"./build-ZYzTDOzo.js";import{I as v}from"./build-nSdaxBfa.js";import{L as V}from"./build-1LmYI3dU.js";import"./build-Uc7vb3zK.js";import"./build-9Efc2eo3.js";import"./build-D3xC4GbD.js";import"./build-E66JUiqZ.js";import"./build-UhUpPKic.js";import"./build-Prpaxqgv.js";import"./build-1rkYb17X.js";import"./build-jhrJ8roR.js";const Y=(o={})=>{const[i,r]=d.useState(null),[p,a]=d.useState(!1),{login:m}=L(),l=B([y.USER_MODULES]),n=A(F,{onSuccess:s=>{r(null),g(s==null?void 0:s.token),a(!0)},onError:s=>{a(!1),g(null),r({message:E(s,"Ocurrio un error inesperado. Intente nuevamente o reportelo al área de sistemas"),code:S(s)})},...o}),c=C([y.USER_MODULES],T,{onSuccess:s=>{m(),r(null),a(!1)},onError:s=>{a(!1),g(null),r({message:E(s,"Ocurrio un error inesperado. Intente nuevamente o reportelo al área de sistemas"),code:S(s)})},enabled:!!p,retry:!1});return{...n,setCustomError:r,isError:n.isError||c.isError,isSuccess:n.isSuccess&&c.isSuccess,isLoading:n.isLoading||l===1,error:i??null}},K=({text:o,variant:i,loop:r,...p})=>{const[a,m]=d.useState(""),[l,n]=d.useState(0);return d.useEffect(()=>{const c=setInterval(()=>{l<o.length?(m(s=>s+o[l]),n(s=>s+1)):r&&(m(""),n(0))},100);return()=>clearInterval(c)},[l,o,r]),e.jsx(D,{children:e.jsx(R.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{minHeight:"15px"},children:e.jsx(h,{variant:i,...p,children:a})})})};function X(){const{mutate:o,error:i,isError:r,isLoading:p,isSuccess:a,setCustomError:m}=Y(),l=z().shape({email:I().email("Ingrese un correo valido").required("El correo es requerido"),password:I().required("La contraseña es requerida")}),n=O({initialValues:{email:"",password:""},validationSchema:l,onSubmit:(u,{setSubmitting:J})=>{m(null);const w={username:u==null?void 0:u.email,password:u==null?void 0:u.password};o(w)}}),{isSubmitting:c,setSubmitting:s}=n,x=p||c;return d.useEffect(()=>{(a||r)&&s(!1)},[r,a]),e.jsx(k,{children:e.jsxs(t,{spacing:3,p:4,justifyContent:"center",height:1,children:[e.jsxs(t,{children:[e.jsx(f.div,{variants:j().inRight,children:e.jsx(h,{align:"center",variant:"h3",sx:{color:"primary.main",fontWeight:"fontWeightMedium"},children:"Aquí Comienza"})}),e.jsx(f.div,{variants:j().inRight,children:e.jsx(h,{align:"center",variant:"h3",sx:{color:"primary.light",fontWeight:"fontWeightMedium"},children:"tu agilidad en pagos"})})]}),e.jsx(K,{color:"common",text:"¡Es tiempo de transformar tu negocio!",variant:"h6",align:"center"}),i&&e.jsxs(_,{listenElement:i,sx:{mt:3,textAlign:"initial"},severity:i==null?void 0:i.code,children:[e.jsx(H,{sx:{textAlign:"initial"},children:"Inicio de Sesión"}),i==null?void 0:i.message]}),e.jsx(f.div,{...j().in,children:e.jsx(G,{formik:n,children:e.jsxs(t,{spacing:2,flex:1,children:[e.jsxs(t,{spacing:1,children:[e.jsx(v,{children:"Email"}),e.jsx($,{disabled:x,name:"email",placeholder:"usuario@dominio.com",type:"email",fullWidth:!0,InputLabelProps:{shrink:!0}})]}),e.jsxs(t,{spacing:1,children:[e.jsx(v,{children:"Contraseña"}),e.jsx(Q,{InputLabelProps:{shrink:!0},disabled:x,name:"password",placeholder:"********",fullWidth:!0})]}),e.jsx(t,{pt:1,children:e.jsx(M,{loading:x,variant:"contained",color:"primary",fullWidth:!0,type:"submit",size:"large",disabled:c,children:"Accesar a mi cuenta"})}),e.jsxs(h,{variant:"body2",fontWeight:600,align:"center",sx:{color:"text.secondary"},children:["¿No tienes una cuenta?  ",e.jsx(V,{color:"primary",component:W,to:"/registro",children:"Inscribete."})]})]})})})]})})}const Z="/app/assets/webp/build-RHSRpZfE.webp",ye=()=>{const o=P();return d.useEffect(()=>{o.removeQueries()},[]),e.jsx(U,{title:"Inicio de Sesión",children:e.jsx(t,{alignItems:"center",justifyContent:"center",minHeight:"100vH",children:e.jsxs(t,{px:{sm:10,xl:20},width:1,height:1,direction:"row",children:[e.jsxs(t,{flexGrow:1,width:1,height:1,minHeight:"70vh",maxHeight:"90vH",position:"relative",sx:{overflowX:"hidden",overflowY:"auto"},justifyContent:"space-between",children:[e.jsxs(t,{direction:"row",spacing:1,alignItems:"center",px:{xs:5,sm:0},children:[e.jsx(q,{sx:{width:100}}),e.jsx(h,{fontWeight:"600",variant:"subtitle1",children:"Agilidad en pagos"})]}),e.jsx(b,{flexGrow:1}),e.jsx(t,{flex:1,px:{xs:0,sm:5,xl:15},children:e.jsx(X,{})})]}),e.jsx(t,{width:1,justifyContent:"center",height:1,flexGrow:1,sx:{display:{xs:"none",sm:"none",lg:"flex"}},children:e.jsx(b,{component:N.LazyLoadImage,placeholderSrc:"https://zone-assets-api.vercel.app/assets/img_placeholder.svg",wrapperClassName:"wrapper",effect:"blur",height:1,maxHeight:"90vH",sx:{objectFit:"fill"},borderRadius:4,src:Z})})]})})})};export{ye as default};
