import{w as t,F as P,j as e,Y as m,T as d,E as p,C as L}from"./index-21571737.js";import{u as A,c as V,a as j}from"./index.esm-c4b3badb.js";import{P as v,S as u,p as w}from"./CommerceRegister-43a2c944.js";import{a as O,b as q}from"./useSendValidationCode-a2dc56fb.js";import{T as B}from"./TextField-7ca732a0.js";import{I as D,E as _}from"./EmailOutlined-460240eb.js";import{L as W}from"./LoadingButton-b882bc74.js";import"./CommerceRepository-8e325193.js";import"./commerceKeys-5c6f325c.js";import"./useId-a16d032f.js";const $="/react/assets/img/forms_steps-1aa59cf4.svg";z.propTypes={store:L.shape(w)};function z({store:h}){const{setToken:f,setActualProcess:g,setLastProcess:y}=h,{mutate:S,isLoading:C}=O(),x=A({initialValues:{email:""},validationSchema:V({email:j().email("Ingresa un correo valido").required("El correo es requerido")}),onSubmit:r=>{const k=r==null?void 0:r.email;E().then(I=>{const{isError:F,data:o}=I;F?l(!1):(f(o==null?void 0:o.token),S({email:k,token:o==null?void 0:o.token},{onSuccess:()=>{g(v.VALIDATION_CODE),y()},onError:()=>{l(!1)}}))})}}),{handleSubmit:n,values:i,errors:a,touched:s,handleChange:T,isSubmitting:b,setSubmitting:l,getFieldProps:N,setFieldValue:R}=x,{data:Y,isError:G,refetch:E}=q(i==null?void 0:i.email,{enabled:!1}),c=C||b;return t(P,{children:[e(u,{direction:"column",width:1,spacing:1,children:t(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[e(d,{variant:"h4",color:"textPrimary",align:"center",children:"Continué con el proceso"}),e(d,{paragraph:!0,align:"center",variant:"body1",color:"text.secondary",whiteSpace:"pre-line",children:"Ingrese el correo electrónico con el que se hizo el registro para poder continuar con su proceso."})]})}),e(m.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},transition:{duration:.5},children:e(p,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4},children:e("img",{src:$,width:"40%",alt:"fill forms"})})}),e(p,{component:"form",mt:3,onSubmit:n,children:t(u,{direction:"column",spacing:3,children:[e(B,{fullWidth:!0,id:"email",name:"email",label:"Correo",placeholder:"usuario@dominio.com",value:i.email,onChange:T,error:s.email&&!!a.email,helperText:s.email&&a.email,disabled:c,InputProps:{startAdornment:e(D,{position:"start",children:e(_,{})})}}),e(W,{onClick:n,loading:c,color:"primary",variant:"contained",fullWidth:!0,type:"submit",sx:{textTransform:"uppercase"},children:"Continuar"})]})})]})}export{z as default};
