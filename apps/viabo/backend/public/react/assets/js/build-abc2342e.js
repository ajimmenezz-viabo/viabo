import{y as E,j as a,au as D,av as P,ag as d,r as f,d as S,g as _,a0 as N,b as j,ae as I,ay as h,bb as O,bc as b,S as p,T as x,aD as y,aA as F,P as M,a5 as T}from"./index-b1682d49.js";import{M as v}from"./build-a6798f69.js";import"./build-8f2afbe3.js";import{V as z}from"./build-7c9cadc5.js";import{G as A}from"./build-a9e8abbd.js";import{g as R}from"./build-84cbf166.js";import{g as L}from"./build-9b30f3a5.js";import{L as w}from"./build-96188fd2.js";import{C as B}from"./build-4fc22fe7.js";import{a as V}from"./build-4c199bf1.js";import{f as H}from"./build-17fd2393.js";import{f as k,b as U,H as G}from"./build-2b2c0a27.js";import{C as K}from"./build-0a587b7b.js";const Y=E(a.jsx("path",{d:"M22 5.18 10.59 16.6l-4.24-4.24 1.41-1.41 2.83 2.83 10-10L22 5.18zM12 20c-4.41 0-8-3.59-8-8s3.59-8 8-8c1.57 0 3.04.46 4.28 1.25l1.45-1.45C16.1 2.67 14.13 2 12 2 6.48 2 2 6.48 2 12s4.48 10 10 10c1.73 0 3.36-.44 4.78-1.22l-1.5-1.5c-1 .46-2.11.72-3.28.72zm7-5h-3v2h3v3h2v-3h3v-2h-3v-3h-2v3z"}),"AddTask"),Q=[{id:6,name:"PENDIENTE",color:"warning"},{id:7,name:"PAGADA",color:"primary"},{id:8,name:"CANCELADA",color:"error"},{id:9,name:"LIQUIDADA",color:"success"}],W=t=>{var s;return((s=Q.find(e=>{var n;return e.name===((n=t==null?void 0:t.toLowerCase())==null?void 0:n.toUpperCase())}))==null?void 0:s.color)||"info"},$=t=>B(t),q=t=>{const s=V(t==null?void 0:t.ciphertext,t==null?void 0:t.iv);return s==null?void 0:s.map(e=>{var l;let n="";e!=null&&e.spei&&(e!=null&&e.referencePayCash)&&e.spei!==""&&e.referencePayCash!==""?n="SPEI,PAYCASH":e!=null&&e.spei&&e.spei!==""?n="SPEI":e!=null&&e.referencePayCash&&e.referencePayCash!==""&&(n="PAYCASH");const i=e!=null&&e.registerDate?D(new Date(e==null?void 0:e.registerDate),"dd MMM yyyy",{locale:P}):"",c=e!=null&&e.registerDate?D(new Date(e==null?void 0:e.registerDate),"p"):"";return{id:e==null?void 0:e.id,cardId:e==null?void 0:e.cardId,cardNumber:e==null?void 0:e.cardNumber,paymentProcessorName:e==null?void 0:e.paymentProcessorName,paymentMethods:n,referenceNumber:e==null?void 0:e.referenceNumber,amount:H(e==null?void 0:e.amount),status:e==null?void 0:e.statusName,date:e==null?void 0:e.registerDate,registerDate:{fullDate:k(e==null?void 0:e.registerDate),time:c,date:i},spei:e==null?void 0:e.spei,payCash:e==null?void 0:e.referencePayCash,payCashURLS:e==null?void 0:e.instructionsUrls,emails:(l=e==null?void 0:e.emails)==null?void 0:l.split(","),conciliatedName:(e==null?void 0:e.conciliated)!=="No"?"Conciliada":"Sin Conciliar",conciliated:(e==null?void 0:e.conciliated)!=="No"}})},J={LIST:"funding-orders-list",MOVEMENTS:"conciliate-movements"},X=async()=>{const{data:t}=await d.get("/api/funding-orders");return q(t)},Ee=async t=>{const{data:s}=await d.get(`/api/master-card/movements/unreconciled?fundingOrderId=${t==null?void 0:t.id}`);return $(s)},Pe=async t=>{const{data:s}=await d.put("/api/funding-order/conciliation",t);return s},Se=async t=>{const{data:s}=await d.get("/api/main-cards/information");return s},Z=(t={})=>{const[s,e]=f.useState(null);return{...S([J.LIST],X,{staleTime:6e4,refetchOnWindowFocus:!1,onError:i=>{const c=_(i,"No se puede obtener las ordenes de fondeo");e(c),N.error(c,{type:j(i)})},...t}),error:s||null}},ee={openConciliateModal:!1,openCancelFundingOrder:!1,openDetailsFundingOrder:!1,fundingOrder:null},ne=(t,s)=>({...ee,setOpenConciliateModal:e=>{t(n=>({openConciliateModal:e}),!1,"SET_OPEN_CONCILIATE_MODAL")},setFundingOrder:e=>{t(n=>({fundingOrder:e}),!1,"SET_FUNDING_ORDER")},setOpenCancelFundingOrder:e=>{t(n=>({openCancelFundingOrder:e}),!1,"SET_OPEN_CANCEL_FUNDING_ORDER")},setOpenDetailsFundingOrder:e=>{t(n=>({openDetailsFundingOrder:e}),!1,"SET_OPEN_DETAILS_FUNDING_ORDER")}}),m=I(ne);function te(t,s){const{original:e}=t,{status:n}=e,i=n==="Pendiente",c=n==="Pagada",l=m(u=>u.setFundingOrder),o=m(u=>u.setOpenConciliateModal),r=m(u=>u.setOpenCancelFundingOrder),C=m(u=>u.setOpenDetailsFundingOrder),g=[a.jsxs(h,{onClick:()=>{l(e),C(!0),s()},sx:{m:0},children:[a.jsx(O,{children:a.jsx(z,{color:"info"})}),"Ver Detalles"]},0)];return(c||i)&&g.push(a.jsxs(h,{onClick:()=>{l(e),o(!0),s()},sx:{m:0},children:[a.jsx(O,{children:a.jsx(Y,{color:"success"})}),"Conciliar"]},1)),i&&g.push(a.jsxs(h,{onClick:()=>{l(e),r(!0),s()},sx:{m:0},children:[a.jsx(O,{children:a.jsx(b,{color:"error"})}),"Cancelar"]},2)),g}function ae(t){return A({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 2C6.486 2 2 6.486 2 12s4.486 10 10 10 10-4.486 10-10S17.514 2 12 2zM4 12c0-1.846.634-3.542 1.688-4.897l11.209 11.209A7.946 7.946 0 0 1 12 20c-4.411 0-8-3.589-8-8zm14.312 4.897L7.103 5.688A7.948 7.948 0 0 1 12 4c4.411 0 8 3.589 8 8a7.954 7.954 0 0 1-1.688 4.897z"}}]})(t)}function se(t){return A({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M10.354 6.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7 8.793l2.646-2.647a.5.5 0 0 1 .708 0z"}},{tag:"path",attr:{d:"m10.273 2.513-.921-.944.715-.698.622.637.89-.011a2.89 2.89 0 0 1 2.924 2.924l-.01.89.636.622a2.89 2.89 0 0 1 0 4.134l-.637.622.011.89a2.89 2.89 0 0 1-2.924 2.924l-.89-.01-.622.636a2.89 2.89 0 0 1-4.134 0l-.622-.637-.89.011a2.89 2.89 0 0 1-2.924-2.924l.01-.89-.636-.622a2.89 2.89 0 0 1 0-4.134l.637-.622-.011-.89a2.89 2.89 0 0 1 2.924-2.924l.89.01.622-.636a2.89 2.89 0 0 1 4.134 0l-.715.698a1.89 1.89 0 0 0-2.704 0l-.92.944-1.32-.016a1.89 1.89 0 0 0-1.911 1.912l.016 1.318-.944.921a1.89 1.89 0 0 0 0 2.704l.944.92-.016 1.32a1.89 1.89 0 0 0 1.912 1.911l1.318-.016.921.944a1.89 1.89 0 0 0 2.704 0l.92-.944 1.32.016a1.89 1.89 0 0 0 1.911-1.912l-.016-1.318.944-.921a1.89 1.89 0 0 0 0-2.704l-.944-.92.016-1.32a1.89 1.89 0 0 0-1.912-1.911l-1.318.016z"}}]})(t)}const ie=[{accessorKey:"referenceNumber",header:"Referencia",enableHiding:!1,size:100},{accessorKey:"paymentProcessorName",header:"Cuenta",size:100,filterVariant:"multi-select",Cell:({cell:t,column:s,row:e})=>{const{original:n}=e,i=R(n==null?void 0:n.paymentProcessorName),c=i==null?void 0:i.component;return a.jsx(p,{flexDirection:"row",alignItems:"center",gap:1,children:i&&a.jsx(c,{sx:{width:30,height:30}})})}},{accessorKey:"amount",header:"Monto",size:100,Cell:({cell:t,column:s,row:e,renderedCellValue:n})=>a.jsx(x,{variant:"subtitle2",fontWeight:"bold",children:n})},{accessorKey:"date",header:"Fecha",size:100,Cell:({cell:t,column:s,row:e})=>{var i,c;const{original:n}=e;return a.jsxs(p,{children:[a.jsx(x,{variant:"subtitle2",children:(i=n==null?void 0:n.registerDate)==null?void 0:i.date}),a.jsx(x,{variant:"body2",sx:{color:"text.secondary"},children:(c=n==null?void 0:n.registerDate)==null?void 0:c.time})]})}},{accessorKey:"paymentMethods",header:"Método(s)",size:100,filterVariant:"multi-select",Cell:({cell:t,column:s,row:e})=>{var l;const{original:n}=e,i=[],c=((l=n==null?void 0:n.paymentMethods)==null?void 0:l.split(","))||[];return c==null||c.forEach(o=>{const r=L(o);r&&i.push({component:r==null?void 0:r.component,width:o==="PAYCASH"?50:30,height:o==="PAYCASH"?50:30})}),a.jsx(p,{flexDirection:"row",alignItems:"center",gap:1,children:i==null?void 0:i.map(({component:o,width:r,height:C},g)=>a.jsx(o,{sx:{width:r,height:C}},g))})}},{accessorKey:"status",header:"Estado",filterVariant:"multi-select",size:100,Cell:({cell:t,column:s,row:e})=>{const{original:n}=e,i=W(n==null?void 0:n.status);return a.jsx(p,{flexDirection:"row",alignItems:"center",gap:1,children:a.jsx(w,{variant:"ghost",color:i,sx:{textTransform:"capitalize"},children:n==null?void 0:n.status})})}},{accessorKey:"conciliatedName",header:"¿Conciliada?",filterVariant:"multi-select",size:110,Cell:({cell:t,column:s,row:e})=>{const{original:n}=e;return a.jsx(p,{flexDirection:"row",width:1,justifyContent:"center",alignItems:"center",gap:1,color:"primary",children:n!=null&&n.conciliated?a.jsx(se,{color:"green",fontWeight:"bold",fontSize:"20px"}):a.jsx(ae,{fontSize:"20px",color:"red"})})}}],ce=()=>{const{data:t,isError:s,isLoading:e,isFetching:n,error:i}=Z(),c=ie;return a.jsx(K,{children:a.jsx(v,{enablePinning:!0,enableColumnFilterModes:!0,enableStickyHeader:!0,enableRowVirtualization:!0,enableFacetedValues:!0,enableRowActions:!0,enableRowSelection:!0,positionActionsColumn:"last",enableDensityToggle:!1,columns:c,data:t||[],isError:s,textError:i,selectAllMode:"all",initialState:{density:"compact",sorting:[{id:"date",desc:!0}]},state:{isLoading:e,showAlertBanner:s,showProgressBars:n},displayColumnDefOptions:{"mrt-row-actions":{header:"Acciones",minSize:80},"mrt-row-select":{size:10}},muiTableContainerProps:{sx:{maxHeight:{md:"350px",lg:"450px",xl:"700px"}}},renderRowActionMenuItems:({closeMenu:l,row:o})=>te(o,l)})})},le=y(f.lazy(()=>F(()=>import("./build-4034e312.js"),["assets/js/build-4034e312.js","assets/js/index-b1682d49.js","assets/css/build-f63bc8fe.css","assets/js/build-a6798f69.js","assets/js/build-741e7298.js","assets/js/build-3d86603b.js","assets/js/build-eba948ff.js","assets/js/build-2b2c0a27.js","assets/js/build-9b924a5d.js","assets/js/build-8944ef97.js","assets/js/build-6095b7f2.js","assets/js/build-4c199bf1.js","assets/js/build-79301c0d.js","assets/js/build-84cbf166.js","assets/js/build-e7ef87ae.js","assets/js/build-40b0109f.js","assets/js/build-8f2afbe3.js","assets/js/build-0a587b7b.js","assets/js/build-7c9cadc5.js","assets/js/build-a9e8abbd.js","assets/js/build-9b30f3a5.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-96188fd2.js","assets/js/build-3f7a6814.js","assets/js/build-17fd2393.js","assets/js/build-bee6630b.js","assets/js/build-4fc22fe7.js"]))),oe=y(f.lazy(()=>F(()=>import("./build-9e3e66b3.js"),["assets/js/build-9e3e66b3.js","assets/js/index-b1682d49.js","assets/css/build-f63bc8fe.css","assets/js/build-a6798f69.js","assets/js/build-741e7298.js","assets/js/build-3d86603b.js","assets/js/build-eba948ff.js","assets/js/build-2b2c0a27.js","assets/js/build-9b924a5d.js","assets/js/build-8944ef97.js","assets/js/build-6095b7f2.js","assets/js/build-4c199bf1.js","assets/js/build-79301c0d.js","assets/js/build-8f2afbe3.js","assets/js/build-de3e44f5.js","assets/js/build-7c9cadc5.js","assets/js/build-a9e8abbd.js","assets/js/build-84cbf166.js","assets/js/build-e7ef87ae.js","assets/js/build-40b0109f.js","assets/js/build-9b30f3a5.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-96188fd2.js","assets/js/build-3f7a6814.js","assets/js/build-17fd2393.js","assets/js/build-bee6630b.js","assets/js/build-4fc22fe7.js","assets/js/build-0a587b7b.js"]))),re=y(f.lazy(()=>F(()=>import("./build-a6cb1f48.js"),["assets/js/build-a6cb1f48.js","assets/js/index-b1682d49.js","assets/css/build-f63bc8fe.css","assets/js/build-a6798f69.js","assets/js/build-741e7298.js","assets/js/build-3d86603b.js","assets/js/build-eba948ff.js","assets/js/build-2b2c0a27.js","assets/js/build-9b924a5d.js","assets/js/build-8944ef97.js","assets/js/build-6095b7f2.js","assets/js/build-4c199bf1.js","assets/js/build-79301c0d.js","assets/js/build-9b30f3a5.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-96188fd2.js","assets/js/build-3f7a6814.js","assets/js/build-17fd2393.js","assets/js/build-bee6630b.js","assets/js/build-7f2077f7.js","assets/js/build-b4e1af9b.js","assets/js/build-b5c0448c.js","assets/js/build-0a587b7b.js","assets/js/build-2e797e3b.js","assets/js/build-346358a2.js","assets/js/build-8f2afbe3.js","assets/js/build-7c9cadc5.js","assets/js/build-a9e8abbd.js","assets/js/build-84cbf166.js","assets/js/build-e7ef87ae.js","assets/js/build-40b0109f.js","assets/js/build-4fc22fe7.js"]))),ue=()=>{const t=m(e=>e.openConciliateModal),s=m(e=>e.openCancelFundingOrder);return m(e=>e.openDetailsFundingOrder),a.jsx(M,{title:"Órdenes de Fondeo",children:a.jsxs(U,{children:[a.jsx(G,{name:"Órdenes de Fondeo",links:[{name:"Inicio",href:T.root},{name:"Órdenes de Fondeo"}]}),a.jsx(ce,{}),t&&a.jsx(le,{}),s&&a.jsx(oe,{}),a.jsx(re,{})]})})},_e=Object.freeze(Object.defineProperty({__proto__:null,default:ue},Symbol.toStringTag,{value:"Module"}));export{se as B,J as F,Se as a,ae as b,Pe as c,W as d,_e as e,Ee as g,m as u};
