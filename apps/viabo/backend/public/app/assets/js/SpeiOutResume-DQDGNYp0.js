import{c as M,f as P,U as C,s as _,dR as E,r as v,i as e,dO as L,dP as V,dQ as W,dS as s,dT as N,B as I,T as o,S as B,bB as z,aT as D,dk as Q,dq as G,e0 as H,P as a}from"./vendor-5lkxkETF.js";import{f}from"./formatNumber-dGNhWwxT.js";import{K,g as U,b as $,S as q}from"./index-D5oZe3QV.js";import{h as Y,i as J,V as O,L as X,B as Z}from"./AdminDashboardViaboSpei-UZToPwGD.js";import{i as k}from"./matchTypes-mENztEWg.js";import"./viabo-spei-paths-CscWQyNa.js";import"./TextMaxLine-Cweu1ZMD.js";import"./formik.esm-CTTSENmf.js";import"./formatTime-jCgU2sMR.js";import"./UploadSingleFile-D4e1QNmZ.js";import"./fade-CViozI82.js";import"./transition-anLY3gj9.js";import"./filterSearch-NGUmCbyG.js";import"./usePagination-Xa7qo0UK.js";import"./HeaderPage-BXF44eOm.js";const w=(n,l,c,m,h)=>{const u={destinationsAccounts:n==null?void 0:n.map(t=>{var d,x,r;return{bankAccount:(x=(d=t==null?void 0:t.account)==null?void 0:d.clabe)==null?void 0:x.toString(),amount:parseFloat((t==null?void 0:t.amount.toString())===""?"0":(r=t==null?void 0:t.amount)==null?void 0:r.toString().replace(/,/g,""))}}),concept:(l==null?void 0:l.toString())||"",googleAuthenticatorCode:(c==null?void 0:c.toString())||"",originBankAccount:m,internalTransaction:h};return console.log(u),K(u)},ee=(n={})=>{const l=M(),c=P(Y,n);return{...c,mutate:async(h,u)=>{const{onSuccess:t,onError:d,mutationOptions:x}=u;try{const r=await C.promise(c.mutateAsync(h,x),{pending:"Enviando Transacciones ..."});l.invalidateQueries([J.ACCOUNTS_INFO]),l.invalidateQueries([O.BALANCE_RESUME]),l.invalidateQueries([O.MOVEMENTS]),k(t)&&t(r)}catch(r){const g=U(r,"No se puede realizar esta operaciÃ³n en este momento. Intente nuevamente o reporte a sistemas");k(d)&&d(g),C.error(g,{type:$(r)})}}}},A=_(E)(({theme:n})=>({"& td":{paddingTop:n.spacing(.5),paddingBottom:n.spacing(.5)}})),ne=({data:n,onBack:l,setTransactionLoading:c,transactionLoading:m,onSuccess:h})=>{const{mutate:u,isLoading:t}=ee(),d=v.useMemo(()=>(n==null?void 0:n.transactions)||[],[n]),x=v.useMemo(()=>(parseFloat(n==null?void 0:n.balance)-(n==null?void 0:n.currentBalance)).toFixed(2)||0,[n]),[r,g]=v.useState(""),R=()=>{const{transactions:i,concept:p,origin:j,internal:S}=n,b=w(i,p,r,j,S);c(!0),u(b,{onSuccess:y=>{h(y)},onError:()=>{c(!1)}})},T=t||m;return e.jsxs(e.Fragment,{children:[e.jsxs(q,{children:[e.jsx(L,{sx:{minWidth:200},children:e.jsxs(V,{children:[e.jsx(W,{sx:{borderBottom:i=>`solid 1px ${i.palette.divider}`},children:e.jsxs(E,{children:[e.jsx(s,{width:40,children:"#"}),e.jsx(s,{align:"left",children:"Movimiento"}),e.jsx(s,{align:"right",children:"Monto"})]})}),e.jsxs(N,{children:[d==null?void 0:d.map((i,p)=>{var j,S,b,y;return e.jsxs(E,{sx:{borderBottom:F=>`solid 1px ${F.palette.divider}`},children:[e.jsx(s,{children:p+1}),e.jsx(s,{align:"left",children:e.jsxs(I,{sx:{maxWidth:200},children:[e.jsx(o,{variant:"subtitle2",fontWeight:"bold",children:(j=i==null?void 0:i.account)==null?void 0:j.name}),e.jsx(o,{variant:"subtitle2",children:(b=(S=i==null?void 0:i.account)==null?void 0:S.bank)==null?void 0:b.name}),e.jsx(o,{variant:"subtitle2",children:(y=i==null?void 0:i.account)==null?void 0:y.clabe}),e.jsx(o,{variant:"body2",sx:{color:"text.secondary"},noWrap:!0,children:i==null?void 0:i.concept})]})}),e.jsx(s,{align:"right",children:f(i==null?void 0:i.amount)})]},p)}),e.jsxs(A,{children:[e.jsx(s,{colSpan:1}),e.jsx(s,{align:"right",children:e.jsx(B,{flexDirection:"row",gap:1,alignItems:"center",justifyContent:"flex-end",children:e.jsx(o,{children:"Saldo disponible"})})}),e.jsx(s,{align:"right",width:120,children:e.jsx(o,{children:f(n==null?void 0:n.balance)})})]}),e.jsxs(A,{children:[e.jsx(s,{colSpan:1}),e.jsx(s,{align:"right",children:e.jsx(o,{variant:"h6",children:"Total a dispersar"})}),e.jsx(s,{align:"right",width:120,children:e.jsx(o,{variant:"h6",sx:{color:"error.main"},children:f(-(n==null?void 0:n.currentBalance))})})]}),e.jsxs(A,{children:[e.jsx(s,{colSpan:1}),e.jsx(s,{align:"right",children:e.jsx(o,{children:"Saldo actualizado"})}),e.jsx(s,{align:"right",width:140,children:e.jsx(o,{children:f(x)})})]})]})]})}),e.jsxs(B,{spacing:1,p:3,justifyContent:"flex-end",alignItems:"flex-end",children:[e.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Token de Google"," ",e.jsx(I,{component:"span",color:"error.main",children:"*"})]}),e.jsx(z,{name:"googleCode",type:"number",size:"small",placeholder:"000000",required:!0,value:r,onChange:i=>{var p;return g((p=i==null?void 0:i.target)==null?void 0:p.value)},inputProps:{pattern:"/^-?d+.?d*$/",min:"1"},InputProps:{startAdornment:e.jsx(D,{position:"start",children:e.jsx(Q,{})})},disabled:T})]})]}),e.jsxs(B,{direction:{md:"row-reverse"},sx:{p:3},gap:3,children:[e.jsx(X,{size:"large",onClick:R,endIcon:e.jsx(G,{}),loading:T,variant:"contained",color:"primary",fullWidth:!0,type:"submit",disabled:!r,sx:{fontWeight:"bold"},children:"Enviar"}),!T&&e.jsx(Z,{size:"large",onClick:l,variant:"outlined",color:"inherit",fullWidth:!0,startIcon:e.jsx(H,{}),children:"Regresar"})]})]})};ne.propTypes={data:a.shape({balance:a.any,concept:a.any,currentBalance:a.any,internal:a.any,origin:a.any,transactions:a.array}),onBack:a.func,onSuccess:a.func,setTransactionLoading:a.func,transactionLoading:a.any};export{ne as default};
//# sourceMappingURL=SpeiOutResume-DQDGNYp0.js.map
