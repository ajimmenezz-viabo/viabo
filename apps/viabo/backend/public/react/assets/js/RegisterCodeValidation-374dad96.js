import{v as re,n as oe,at as _,A as ae,W,G as F,D as q,_ as L,r as $,B as se,g as ie,au as ce,o as le,j as c,i as ue,l as de,ak as K,T as O,al as A,ag as pe,p as M,aj as H}from"./index-b9d01977.js";import{u as G,v as ge,g as J,s as me,q as he,p as fe,D as ye,S as Ce,C as ve,P as xe}from"./CommerceRegister-22e610a4.js";function be(e){return oe("MuiLink",e)}const ke=re("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]),Fe=ke,Q={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},De=e=>Q[e]||e,Se=({theme:e,ownerState:t})=>{const r=De(t.color),o=_(e,`palette.${r}`,!1)||t.color,l=_(e,`palette.${r}Channel`);return"vars"in e&&l?`rgba(${l} / 0.4)`:ae(o,.4)},Re=Se,Te=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant","sx"],Ve=e=>{const{classes:t,component:r,focusVisible:o,underline:l}=e,i={root:["root",`underline${q(l)}`,r==="button"&&"button",o&&"focusVisible"]};return de(i,be,t)},Ne=W(F,{name:"MuiLink",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[`underline${q(r.underline)}`],r.component==="button"&&t.button]}})(({theme:e,ownerState:t})=>L({},t.underline==="none"&&{textDecoration:"none"},t.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},t.underline==="always"&&L({textDecoration:"underline"},t.color!=="inherit"&&{textDecorationColor:Re({theme:e,ownerState:t})},{"&:hover":{textDecorationColor:"inherit"}}),t.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Fe.focusVisible}`]:{outline:"auto"}})),Pe=$.forwardRef(function(t,r){const o=se({props:t,name:"MuiLink"}),{className:l,color:i="primary",component:g="a",onBlur:u,onFocus:m,TypographyClasses:y,underline:D="always",variant:C="inherit",sx:h}=o,v=ie(o,Te),{isFocusVisibleRef:k,onBlur:S,onFocus:d,ref:p}=ce(),[R,N]=$.useState(!1),T=le(r,p),x=b=>{S(b),k.current===!1&&N(!1),u&&u(b)},V=b=>{d(b),k.current===!0&&N(!0),m&&m(b)},P=L({},o,{color:i,component:g,focusVisible:R,underline:D,variant:C}),E=Ve(P);return c(Ne,L({color:i,className:ue(E.root,l),classes:y,component:g,onBlur:x,onFocus:V,ref:T,ownerState:P,variant:C,sx:[...Object.keys(Q).includes(i)?[]:[{color:i}],...Array.isArray(h)?h:[h]]},v))}),Ae=Pe;function Le(e){const t=typeof e=="number",r=Ee(e);return(t||r&&e!=="")&&!isNaN(Number(e))}function Ee(e){return typeof e=="string"||e instanceof String}const Ie=(e={})=>{const{enqueueSnackbar:t}=K();return G({mutationFn:ge,onError:r=>{const o=J(r,"No se puede validar el código");t(o,{variant:(r==null?void 0:r.status)===500?"error":"warning",autoHideDuration:5e3})},...e})},Me=(e={})=>{const{enqueueSnackbar:t}=K();return G({mutationFn:me,onSuccess:()=>{t("Código Enviado!",{variant:"success"})},onError:r=>{const o=J(r,"No se puede enviar el código");t(o,{variant:(r==null?void 0:r.status)===500?"error":"warning",autoHideDuration:5e3})},...e})},we=W(he)`
  input {
    text-align: center;
  }
`,$e={TextFieldStyled:we},Be=e=>c($e.TextFieldStyled,{...e}),w={left:"ArrowLeft",right:"ArrowRight",backspace:"Backspace"};function je(e,t){return e<=0?[]:Array.from({length:e},t)}function _e(e,t,r){return e.map((o,l)=>t===l?r:o)}function U(e){return e.join("")}function z(e,t){return[...e,t]}function Oe(e,t,r){return e.reduce((o,l,i)=>{const{characters:g,restArrayMerged:u}=o;if(i<r)return{restArrayMerged:u,characters:z(g,l)};const[m,...y]=u;return{restArrayMerged:y,characters:z(g,m||"")}},{restArrayMerged:t,characters:[]}).characters}function He(e){return e.split("")}const X=O.forwardRef((e,t)=>{const{value:r,length:o,autoFocus:l,onChange:i,TextFieldsProps:g,onComplete:u,validateChar:m,className:y,...D}=e,{onPaste:C,onFocus:h,onKeyDown:v,className:k,...S}=g||{},d=je(o,(n,s)=>({character:r[s]||"",inputRef:O.createRef()})),p=n=>d.findIndex(({inputRef:s})=>s.current===n),R=()=>d.map(({character:n})=>n),N=(n,s)=>{const a=_e(R(),n,s);return U(a)},T=n=>{var s,a;(a=(s=d[n])==null?void 0:s.inputRef.current)==null||a.focus()},x=n=>{var s,a;(a=(s=d[n])==null?void 0:s.inputRef.current)==null||a.select()},V=n=>{n+1!==o&&(d[n+1].character?x(n+1):T(n+1))},P=n=>{n>0&&x(n-1)},E=n=>{const s=n.target.value[0]||"",a=p(n.target);if(typeof m=="function"&&!m(s,a))return;const f=N(a,s);i==null||i(f),f.length===o&&(u==null||u(f)),s!==""?f.length<o?V(f.length-1):V(a):f[a]?x(a):P(a)},b=n=>{n.preventDefault(),n.target.select(),h==null||h(n)},Y=n=>{const s=n.target,a=p(s);s.value===n.key?(n.preventDefault(),V(a)):!s.value&&w.backspace===n.key||w.left===n.key?(n.preventDefault(),x(a-1)):w.right===n.key&&(n.preventDefault(),x(a+1)),v==null||v(n)},Z=n=>{n.preventDefault();const s=n.target,a=n.clipboardData.getData("text/plain"),f=p(s),ee=R(),B=Oe(ee,He(a),f),j=B.findIndex((ne,te)=>te>f&&ne===""),I=U(B);if(i==null||i(I),I.length===o){u==null||u(I),T(o-1);return}j!==-1&&T(j),C==null||C(n)};return c(A,{display:"flex",gap:"20px",alignItems:"center",ref:t,className:`MuiOtpInput-Box ${y||""}`,...D,children:d.map(({character:n,inputRef:s},a)=>c(Be,{autoFocus:l?a===0:!1,autoComplete:"one-time-code",value:n,inputRef:s,className:`MuiOtpInput-TextField MuiOtpInput-TextField-${a+1} ${k||""}`,onPaste:Z,onFocus:b,onChange:E,onKeyDown:Y,...S},a))})});X.defaultProps={value:"",length:4,autoFocus:!1,validateChar:()=>!0,onChange:()=>{},onComplete:()=>{},TextFieldsProps:{}};const Ue="/react/assets/img/mail-a33a291d.svg";ze.propTypes={store:pe.shape(fe)};function ze({store:e}){const{lastProcess:t,setActualProcess:r,setLastProcess:o}=e,{info:l}=t,{mutate:i,isLoading:g}=Me(),{mutate:u,isLoading:m,isError:y,reset:D}=Ie(),[C,h]=$.useState(""),v=p=>{h(p),D()},k=(p,R)=>Le(p),S=p=>{r(xe.SERVICES_SELECTION),o()},d=()=>{i({})};return M(H,{children:[c(A,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",my:4},children:c("img",{className:"animate__animated animate__pulse",src:Ue,width:"25%",alt:"Sent Mail"})}),c(F,{variant:"h4",color:"textPrimary",align:"center",children:"Verificación de Cuenta"}),M(F,{paragraph:!0,sx:{mb:4,mt:2},align:"center",variant:"body2",color:"text.secondary",whiteSpace:"pre-line",children:["Enviamos un correo electrónico a ",l==null?void 0:l.email," con el código de verificacion de tu cuenta, ingrese el código en el cuadro a continuación para verificar su cuenta."]}),c(X,{length:6,value:C,onComplete:S,onChange:v,validateChar:k,sx:{gap:{xs:1.5,sm:2,md:3}},TextFieldsProps:{placeholder:"-",error:y,disabled:m}}),!!y&&c(A,{mt:1,children:c(F,{variant:"caption",color:"error",children:"Código incorrecto"})}),c(A,{mb:5,children:c(ye,{sx:{my:4},children:c(Ce,{direction:"row",spacing:1,justifyContent:"center",children:g?c(ve,{wid:!0,sx:{mx:3}}):M(H,{children:[c(F,{variant:"body2",children:"¿No tengo un código?"}),c(Ae,{underline:"hover",sx:{cursor:"pointer"},onClick:d,children:c(F,{variant:"body2",color:"primary",children:"Reenviar código"})})]})})})})]})}export{ze as default};
