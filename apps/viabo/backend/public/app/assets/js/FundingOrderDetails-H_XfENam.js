import{P as o,i as a,S as s,T as t,B as j,r as D,aH as w,a5 as N,I as B,aQ as T,ca as P,c4 as z,e as A,a9 as R}from"./vendor-CEMfbhOc.js";import{B as k,a as L}from"./index-BdTlPQ76.js";import{e as M,g as $,a as W,D as G,S as q,R as H,E as Y}from"./index-BioQLkmz.js";import{b as _,d as Q,F as K,u as y}from"./FundingOrders-Ca8qMfD6.js";import{g as U}from"./operationTypes-DpSK433W.js";import{L as J}from"./TextMaxLine-Ca-IUWEV.js";import"./iconBase-D_ql85QS.js";import"./MaterialDataTable-D0DjFiDf.js";import"./cardTypes-v8wXYwqO.js";import"./AmexLogo-DsyshqEq.js";import"./CarnetLogo-BssSE0Ex.js";import"./MasterCardLogo-Bcn9gvbj.js";import"./VisaLogo-ByWQmEg7.js";import"./cardMovementsAdapter-DkXcGY6N.js";import"./crypto--V-xCCVf.js";import"./formatNumber-Df8NwpjV.js";import"./formatTime-mlJJpQBT.js";import"./HeaderPage-BO6m0cK6.js";import"./fade-CViozI82.js";import"./transition-anLY3gj9.js";import"./viabo-card-CcTpX9JZ.js";import"./viabo-pay-Tb0TUikx.js";import"./formik.esm-Dshy1xjd.js";import"./matchTypes-BFKCRNnN.js";import"./UploadSingleFile-DmSrCqqJ.js";const C=({fundingOrder:e})=>{var c,r,i,x,p;return a.jsxs(s,{spacing:2,children:[a.jsx(t,{variant:"subtitle1",fontWeight:"bold",children:"Conciliación"}),a.jsx(s,{spacing:2,children:a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"¿Conciliada?"}),a.jsx(j,{textAlign:"center",children:e!=null&&e.conciliated?a.jsx(k,{color:"green",fontWeight:"bold",fontSize:"20px"}):a.jsx(L,{fontSize:"20px",color:"red"})})]}),a.jsx(j,{display:"flex",flex:1}),a.jsx(s,{flexGrow:1,spacing:.5,children:((c=e==null?void 0:e.conciliationInfo)==null?void 0:c.number)&&((r=e==null?void 0:e.conciliationInfo)==null?void 0:r.number)!==""&&a.jsxs(a.Fragment,{children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Movimiento"}),a.jsxs(s,{children:[a.jsx(t,{variant:"body2",children:`${((i=e==null?void 0:e.conciliationInfo)==null?void 0:i.number)||"-"}`}),a.jsx(t,{variant:"body2",children:` ${((x=e==null?void 0:e.conciliationInfo)==null?void 0:x.date)||"-"}`}),a.jsx(t,{variant:"body2",children:` ${((p=e==null?void 0:e.conciliationInfo)==null?void 0:p.userName)||"-"}`})]})]})})]})})]})};C.propTypes={fundingOrder:o.shape({conciliated:o.any,conciliationInfo:o.shape({date:o.any,number:o.string,userName:o.any})})};const I=({fundingOrder:e})=>{var n,b,m,v;const[c,r]=D.useState(!1),i=[],x=((n=e==null?void 0:e.paymentMethods)==null?void 0:n.split(","))||[],p=_(e==null?void 0:e.status);return x==null||x.forEach(l=>{const h=U(l);h&&i.push({component:h==null?void 0:h.component,width:l==="PAYCASH"?50:30,height:l==="PAYCASH"?50:30})}),a.jsxs(s,{spacing:2,children:[a.jsx(t,{variant:"subtitle1",fontWeight:"bold",children:"Datos de la orden"}),a.jsxs(s,{spacing:2,children:[a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Monto:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.amount)??"-"})]}),a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Referencia Interna:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.referenceNumber)??"-"})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Cuenta Maestra:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.cardNumber)??"-"})]}),a.jsxs(s,{spacing:1.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Métodos de Fondeo:"}),a.jsx(s,{flexDirection:"row",alignItems:"center",gap:1,position:"relative",children:i==null?void 0:i.map(({component:l,width:h,height:E},F)=>a.jsx(l,{sx:{width:h,height:E,position:"absolute",left:F===0?0:40}},F))})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Fecha de Creación:"}),a.jsx(t,{variant:"body2",children:((b=e==null?void 0:e.registerDate)==null?void 0:b.fullDate)??"-"})]}),a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",gutterBottom:!1,sx:{color:"text.disabled"},children:"Liga Orden de Fondeo"}),(e==null?void 0:e.referenceNumber)&&a.jsxs(s,{alignItems:"flex-start",direction:"row",spacing:1,children:[a.jsx(w,{variant:"body2",component:N,underline:"always",to:`/orden-fondeo/${e==null?void 0:e.referenceNumber}`,target:"_blank",color:"info.main",children:`orden-fondeo/${e==null?void 0:e.referenceNumber}`}),a.jsx(j,{position:"relative",children:a.jsx(B,{variant:"outlined",sx:{position:"absolute",p:0},size:"small",color:c?"success":"inherit",onClick:()=>{r(!0),M(`${window.location.host}/orden-fondeo/${e==null?void 0:e.referenceNumber}`),setTimeout(()=>{r(!1)},1e3)},children:c?a.jsx(T,{fontSize:"small",sx:{color:"success"}}):a.jsx(P,{fontSize:"small",sx:{color:"text.disabled"}})})})]})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Destinatarios:"}),((m=e==null?void 0:e.emails)==null?void 0:m.length)>0?(v=e==null?void 0:e.emails)==null?void 0:v.map(l=>a.jsx(j,{display:"flex",flexDirection:"column",children:a.jsx(j,{children:a.jsx(z,{label:a.jsx(t,{variant:"body2",children:l}),size:"small"})})},l)):a.jsx(t,{variant:"body2",children:"-"})]}),a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Estado:"}),a.jsx(j,{children:a.jsx(J,{variant:"ghost",color:p,sx:{textTransform:"capitalize"},children:(e==null?void 0:e.status)||"-"})})]})]}),a.jsx(s,{flexDirection:"row",gap:1,children:a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Fecha Último Estado:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.lastStatusDate)||"-"})]})})]})]})};I.propTypes={fundingOrder:o.shape({amount:o.string,cardNumber:o.string,emails:o.array,lastStatusDate:o.string,paymentMethods:o.string,referenceNumber:o.string,registerDate:o.shape({fullDate:o.string}),status:o.string})};const S=({fundingOrder:e})=>{var c,r,i;return a.jsxs(s,{spacing:2,children:[a.jsx(t,{variant:"subtitle1",fontWeight:"bold",children:"Datos del Pago"}),a.jsxs(s,{spacing:2,children:[a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Referencia"}),a.jsx(t,{variant:"body2",children:e==null?void 0:e.payCash})]}),a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Folio"}),a.jsx(t,{variant:"body2",children:((c=e==null?void 0:e.paymentInfo)==null?void 0:c.folio)||"-"})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Fecha"}),a.jsx(t,{variant:"body2",children:((r=e==null?void 0:e.paymentInfo)==null?void 0:r.date)||"-"})]}),a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Código Autorización"}),a.jsx(t,{variant:"body2",children:((i=e==null?void 0:e.paymentInfo)==null?void 0:i.authorizationCode)||"-"})]})]})]})]})};S.propTypes={fundingOrder:o.shape({payCash:o.any,paymentInfo:o.shape({authorizationCode:o.string,date:o.string,folio:o.string})})};const V=(e,c={})=>{const[r,i]=D.useState(null);return{...A([K.DETAILS,e==null?void 0:e.id],()=>Q(e),{staleTime:6e4,refetchOnWindowFocus:!1,onError:p=>{const n=$(p,"No se puede obtener la información de la orden de fondeo");i(n),R.error(n,{type:W(p)})},...c}),error:r||null}},Da=()=>{const e=y(l=>l.fundingOrder),c=y(l=>l.setFundingOrder),r=y(l=>l.setOpenDetailsFundingOrder),i=y(l=>l.openDetailsFundingOrder),{data:x,isLoading:p,isError:n,error:b,refetch:m}=V(e,{enabled:!!e});D.useEffect(()=>{e&&m()},[e]);const v=()=>{r(!1),c(null)};return a.jsx(G,{open:i,handleClose:v,titleElement:a.jsxs(s,{children:[a.jsx(t,{variant:"h6",children:"Orden de Fondeo"}),a.jsxs(t,{variant:"subtitle1",children:["#",e==null?void 0:e.referenceNumber]})]}),children:a.jsx(q,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:a.jsxs(s,{spacing:3,p:3,children:[p&&a.jsx(H,{}),n&&!p&&a.jsx(Y,{errorMessage:b,titleMessage:"Detalles Orden de Fondeo",handleButton:()=>m()}),!n&&!p&&a.jsxs(a.Fragment,{children:[a.jsx(I,{fundingOrder:x}),["Pagada","Liquidada"].includes(e==null?void 0:e.status)&&(e==null?void 0:e.payCash)!==""&&a.jsx(S,{fundingOrder:x}),a.jsx(C,{fundingOrder:x})]})]})})})};export{Da as default};
//# sourceMappingURL=FundingOrderDetails-H_XfENam.js.map
