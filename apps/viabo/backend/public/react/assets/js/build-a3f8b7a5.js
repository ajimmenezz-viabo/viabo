import{z as de,j as e,aa as X,r as u,ab as Y,D as S,S as p,T as x,m as N,a9 as xe,B as k,I as ue,C as he,p as H,R as fe,a2 as ge,H as v,L as ee,as as W,at as ye,a8 as se,d as te,g as ne,Z as $,b as re,au as je,av as Ce,aw as V,K as be,P as Me,a4 as Se}from"./index-5914b1fb.js";import{a as we}from"./build-cf1479e2.js";import{f as w}from"./build-d581bd4f.js";import"./build-21808848.js";import{u as U,M as Te,a as Ie,d as Pe,b as Ee,e as De,f as Fe,L as me,F as Re}from"./build-e4f422b1.js";import{C as q}from"./build-48835d84.js";import{C as ie}from"./build-51cf7806.js";import{C as Ae}from"./build-9a2cf5c2.js";import{R as Oe}from"./build-e24caa2c.js";import"./build-faa42696.js";import"./build-c62d72c2.js";import"./build-29cf80d2.js";import{g as Le,B as Be,a as _e}from"./build-adebf1d1.js";import{A as ke}from"./build-ef0ed077.js";import{C as Q}from"./build-731e9aff.js";import{D as ae}from"./build-49ab0b2d.js";import{g as oe,M as Z}from"./build-23c6fce1.js";import{f as Ge,b as ze,H as Ve}from"./build-60153964.js";import{g as Ne}from"./build-115013bd.js";import{M as He}from"./build-bf7efcf7.js";import{u as We}from"./build-21cba2a7.js";import{b as $e}from"./build-784a8ed3.js";import{G as K}from"./build-1dfe973f.js";import"./build-556efae6.js";import"./build-729cafe5.js";import"./build-f2c31027.js";import"./build-b8a0c28b.js";import"./build-b57852ec.js";import"./build-6bc7bda3.js";import"./build-ef332fd1.js";import"./build-f6f438e5.js";import"./build-dd65ec28.js";import"./build-eb7c1e24.js";import"./build-cbcc4bd8.js";import"./build-f0c05603.js";import"./build-91eb3a6d.js";import"./build-ecf2e624.js";import"./build-0eef8a39.js";import"./build-c24ec286.js";import"./build-07eaa56e.js";import"./build-6fe99893.js";import"./build-db465f28.js";import"./build-bee6630b.js";import"./build-6ed57473.js";import"./build-83d17a75.js";import"./build-899176f2.js";import"./build-63a5a323.js";const J=de(e.jsx("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),"Update"),qe=X(u.lazy(()=>Y(()=>import("./build-2879fbcb.js"),["assets/js/build-2879fbcb.js","assets/js/index-5914b1fb.js","assets/css/build-f63bc8fe.css","assets/js/build-f6f438e5.js","assets/js/build-faa42696.js","assets/js/build-e4f422b1.js","assets/js/build-f2c31027.js","assets/js/build-23c6fce1.js","assets/js/build-784a8ed3.js","assets/js/build-729cafe5.js","assets/js/build-ecf2e624.js","assets/js/build-d581bd4f.js","assets/js/build-b8a0c28b.js","assets/js/build-60153964.js","assets/js/build-6ed57473.js","assets/js/build-0eef8a39.js","assets/js/build-b57852ec.js","assets/js/build-6bc7bda3.js","assets/js/build-ef332fd1.js","assets/js/build-48835d84.js","assets/js/build-c62d72c2.js","assets/js/build-c24ec286.js","assets/js/build-07eaa56e.js","assets/js/build-ef0ed077.js","assets/js/build-bee6630b.js","assets/js/build-29cf80d2.js","assets/js/build-bf7efcf7.js","assets/js/build-63a5a323.js","assets/js/build-1dfe973f.js","assets/js/build-adebf1d1.js","assets/js/build-dd65ec28.js","assets/js/build-6fe99893.js","assets/js/build-db465f28.js","assets/js/build-eb7c1e24.js","assets/js/build-115013bd.js","assets/js/build-83d17a75.js","assets/js/build-899176f2.js","assets/js/build-21cba2a7.js","assets/js/build-51cf7806.js","assets/js/build-cbcc4bd8.js","assets/js/build-cf1479e2.js","assets/js/build-556efae6.js","assets/js/build-21808848.js","assets/js/build-f0c05603.js","assets/js/build-91eb3a6d.js","assets/js/build-9a2cf5c2.js","assets/js/build-ed60c792.js"]))),Ke=X(u.lazy(()=>Y(()=>import("./build-15cb6bb7.js"),["assets/js/build-15cb6bb7.js","assets/js/index-5914b1fb.js","assets/css/build-f63bc8fe.css","assets/js/build-23c6fce1.js","assets/js/build-784a8ed3.js","assets/js/build-729cafe5.js","assets/js/build-ecf2e624.js","assets/js/build-d581bd4f.js","assets/js/build-f2c31027.js","assets/js/build-b8a0c28b.js","assets/js/build-60153964.js","assets/js/build-6ed57473.js","assets/js/build-0eef8a39.js","assets/js/build-b57852ec.js","assets/js/build-6bc7bda3.js","assets/js/build-bf7efcf7.js","assets/js/build-63a5a323.js","assets/js/build-07eaa56e.js","assets/js/build-1dfe973f.js","assets/js/build-c24ec286.js","assets/js/build-fb2c1ab0.js"]))),le=({open:i,setOpen:a,card:t,cardList:o=[]})=>{const[s,r]=u.useState(0),h=u.useMemo(()=>t==null?void 0:t.balance,[t==null?void 0:t.balance]),[g,j]=u.useState(!1),[C,P]=u.useState(null),[E,T]=u.useState(!1),O=u.useMemo(()=>(parseFloat(h)-s).toFixed(2)<0,[s,h]),L=()=>{a(!1),r(0),j(!1),P(null),T(!1)},R=F=>{const A=t==null?void 0:t.id;P({cardOriginId:A,isGlobal:!1,transactions:(F==null?void 0:F.transactions)||[],balance:h,currentBalance:s}),j(!0)},G=()=>{j(!1)},B=e.jsx(e.Fragment,{children:e.jsx(x,{variant:"h6",children:"Fondear Tarjetas"})}),_=e.jsxs(e.Fragment,{children:[e.jsxs(p,{flexDirection:"column",alignItems:"center",justifyContent:"space-between",spacing:0,px:3,pt:2,children:[e.jsx(x,{variant:"subtitle1",children:"Saldo"}),e.jsxs(p,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(x,{variant:"h3",color:"success.main",children:w(h)}),e.jsx(x,{variant:"caption",color:"success.main",children:"MXN"})]}),e.jsxs(p,{direction:"row",spacing:1,alignItems:"center",children:[e.jsxs(x,{variant:"subtitle1",color:"error",children:["- ",w(s)]}),e.jsx(x,{variant:"caption",color:"error",children:"MXN"})]}),O&&e.jsx(x,{variant:"caption",color:"warning.main",textAlign:"center",children:"Saldo insuficiente para realizar la(s) operacion(es)"})]}),e.jsx(qe,{cards:o,setCurrentBalance:r,insufficient:O,isBinCard:!1,onSuccess:R})]});return e.jsxs(we,{open:i,handleClose:L,titleElement:B,children:[e.jsx(N.div,{initial:{opacity:1},animate:{opacity:g?0:1},transition:{duration:.5},style:{display:g?"none":"flex",flex:1,overflow:"hidden",flexDirection:"column"},children:_}),e.jsx(N.div,{initial:{opacity:0},animate:{opacity:g?1:0},transition:{duration:.5},style:{display:g?"flex":"none",flexDirection:"column",flex:1,overflow:"hidden"},children:e.jsx(Ke,{data:C,onBack:G,setTransactionLoading:T,transactionLoading:E,onClose:L})})]})};le.propTypes={card:S.shape({balance:S.any,id:S.any}),cardList:S.array,open:S.any,setOpen:S.func};const Ue={card:null,isMaster:!0,movements:[],balanceMovements:"$0.00",income:"$0.00",expenses:"$0.00",filterPaymentProcessor:null},Xe=(i,a)=>({...Ue,setGlobalCard:t=>{a(),i(o=>({card:t}),!1,"SET_GLOBAL_CARD")},resetGlobalCard:()=>{i(t=>({card:null}),!1,"RESET_GLOBAL_CARD")},setIsMaster:t=>{i(o=>({isMaster:t}),!1,"SET_IS_MASTER")},setMovements:t=>{i(o=>({movements:(t==null?void 0:t.movements)||[],balanceMovements:(t==null?void 0:t.balanceMovements)||"$0.00",expenses:(t==null?void 0:t.expenses)||"$0.00",income:(t==null?void 0:t.income)||"$0.00"}),!1,"SET_MASTER_MOVEMENTS")},getBalance:()=>{const{balanceMovements:t,income:o,expenses:s}=a();return{balanceMovements:t,income:o,expenses:s}},setFilterPaymentProcessor:t=>{i(o=>({filterPaymentProcessor:t}),!1,"SET_FILTER_PAYMENT_PROCESSOR")}}),M=xe(Xe);function ce({actions:i}){var j;const a=M(C=>C.card),[t,o]=u.useState(!1),[s,r]=u.useState(!1),h=U(C=>C.setOpenFundingOrder),g=U(C=>C.setFundingCard);return e.jsxs(e.Fragment,{children:[e.jsxs(q,{sx:{p:3},children:[e.jsxs(p,{display:"flex",flexDirection:"row",alignItems:"center",children:[e.jsx(x,{variant:"h6",textTransform:"capitalize",children:`Fondear Tarjeta ${(j=a==null?void 0:a.paymentProcessor)==null?void 0:j.toLowerCase()}`}),e.jsx(k,{sx:{flex:"1 1 auto"}})]}),e.jsxs(p,{spacing:2,children:[e.jsxs(p,{flexDirection:"column",justifyContent:"space-between",alignItems:"baseline",gap:1,sx:{display:"flex",flexWrap:"wrap"},children:[e.jsxs(p,{flexDirection:"row",alignItems:"center",justifyContent:"center",sx:{flexGrow:1,flexWrap:"wrap"},gap:1,children:[e.jsx(x,{variant:"subtitle1",sx:{color:"text.secondary"},children:"SPEI"}),e.jsx(ue,{variant:"outlined",color:t?"success":"inherit",onClick:()=>{o(!0),he(a==null?void 0:a.SPEI),setTimeout(()=>{o(!1)},1e3)},children:t?e.jsx(ie,{sx:{color:"success"}}):e.jsx(Ae,{sx:{color:"text.disabled"}})})]}),e.jsx(x,{variant:"body1",children:a==null?void 0:a.SPEI})]}),e.jsxs(p,{flexDirection:"row",flexWrap:"wrap",gap:3,alignItems:"center",children:[e.jsx(H,{fullWidth:!0,color:"primary",variant:"outlined",startIcon:e.jsx(Te,{}),onClick:()=>r(!0),children:"Compartir"}),e.jsx(H,{fullWidth:!0,color:"primary",variant:"contained",startIcon:e.jsx(Oe,{}),onClick:()=>{h(!0),g(a)},children:"Orden Fondeo"}),i]})]})]}),e.jsx(Ie,{open:s,card:a,onClose:()=>{r(!1)}})]})}ce.propTypes={actions:S.any};function pe({data:i,isLoading:a}){var z;const[t,o]=u.useState("1"),s=M(n=>n.card),r=M(n=>n.setGlobalCard),h=M(n=>n.resetGlobalCard),g=M(n=>n.setIsMaster),j=M(n=>n.setFilterPaymentProcessor),C=M(n=>n.getBalance),P=M(n=>n.movements),E=M(n=>n.isMaster),{data:T,isLoading:O,isRefetching:L,refetch:R,isSuccess:G}=Pe(s==null?void 0:s.paymentProcessorId,{enabled:!!(s!=null&&s.paymentProcessorId)}),B=u.useMemo(()=>C(),[P]),[_,F]=u.useState(!1),D=i==null?void 0:i.master,A=i==null?void 0:i.globals,I=n=>()=>{j(n==null?void 0:n.paymentProcessor),g(!1),r(n),o("1")},m=(n,l)=>()=>{j(n==null?void 0:n.paymentProcessor),r(n),o(l),g(!1)};return e.jsx(ke,{children:e.jsxs(p,{spacing:2,flex:1,children:[e.jsx(N.div,{onClick:()=>{g(!0),o("1"),h(),j(null)},whileHover:{scale:1.03},whileTap:{scale:.8},children:e.jsxs(q,{sx:{p:0,cursor:"pointer",border:E?3:0,borderColor:n=>E?n.palette.mode==="dark"?n.palette.secondary.main:n.palette.primary.main:"inherit"},children:[e.jsx(Q,{title:e.jsx(p,{flexDirection:"row",gap:1,alignItems:"center",children:e.jsx(x,{variant:"subtitle2",children:"Global [Master]"})}),sx:{px:2,py:2}}),a?e.jsx(fe,{mb:3}):e.jsxs(p,{alignItems:"center",pb:2,px:2,children:[e.jsxs(p,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(x,{variant:"h3",children:D==null?void 0:D.balanceFormatted}),e.jsx(x,{variant:"caption",children:"MXN"})]}),e.jsxs(p,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(J,{sx:{width:30,height:30,color:"text.secondary"}}),e.jsxs(p,{alignItems:"center",children:[e.jsx(x,{variant:"subtitle2",children:"En transito"}),e.jsxs(p,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(x,{variant:"body1",children:D==null?void 0:D.inTransitFormatted}),e.jsx(x,{variant:"caption",children:"MXN"})]})]})]})]})]})}),e.jsx(k,{children:e.jsx(ge,{children:e.jsx(p,{direction:{xs:"column",md:"row"},spacing:2,pb:2,children:A==null?void 0:A.map(n=>{const l=Le(n==null?void 0:n.paymentProcessor),y=l==null?void 0:l.component,f=(s==null?void 0:s.id)===(n==null?void 0:n.id);return e.jsx(p,{flexGrow:1,position:"relative",children:e.jsxs(q,{sx:{minWidth:{xs:300,md:"auto"},border:f?3:0,borderColor:c=>f?c.palette.mode==="dark"?c.palette.secondary.main:c.palette.primary.main:"inherit"},children:[e.jsxs(N.div,{onClick:I(n),whileTap:{scale:.8},style:{cursor:"pointer"},children:[e.jsx(Q,{title:e.jsxs(p,{flexDirection:"row",gap:1,alignItems:"center",justifyContent:"space-between",children:[e.jsx(x,{variant:"caption",children:n==null?void 0:n.paymentProcessor}),l&&e.jsx(y,{sx:{width:30,height:30}})]}),sx:{px:2,py:2}}),e.jsxs(p,{alignItems:"center",pb:2,px:2,children:[e.jsxs(p,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(x,{variant:"h6",children:n==null?void 0:n.balanceFormatted}),e.jsx(x,{variant:"caption",children:"MXN"})]}),e.jsxs(p,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(J,{sx:{width:20,height:20,color:"text.secondary"}}),e.jsxs(p,{alignItems:"center",children:[e.jsx(x,{variant:"subtitle2",children:"En transito"}),e.jsxs(p,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(x,{variant:"body2",children:n==null?void 0:n.inTransitFormatted}),e.jsx(x,{variant:"caption",children:"MXN"})]})]})]})]})]}),e.jsx(v,{sx:{borderStyle:"dashed"}}),e.jsxs(p,{px:2,py:1,flexDirection:"row",justifyContent:"space-between",children:[e.jsx(H,{onClick:m(n,"1"),children:"Balance"}),e.jsx(H,{onClick:m(n,"2"),children:"Fondeo"})]})]})},n==null?void 0:n.cardId)})})})}),t==="1"&&e.jsx(Ee,{card:B,title:s&&!E?`Balance ${(z=s==null?void 0:s.paymentProcessor)==null?void 0:z.toLowerCase()}`:"Balance Master"}),t==="2"&&s&&!E&&e.jsxs(e.Fragment,{children:[e.jsx(ce,{actions:e.jsx(ee,{fullWidth:!0,variant:"contained",color:"secondary",startIcon:e.jsx(De,{}),sx:{color:"text.primary",fontWeight:"bolder"},loading:L,onClick:()=>{F(!0)},children:"Fondear Tarjetas"})}),e.jsx(le,{setOpen:F,open:_,card:s,cardList:T})]})]})})}pe.propTypes={data:S.shape({globals:S.array,master:S.shape({balanceFormatted:S.any,inTransitFormatted:S.any})}),isLoading:S.any};const Ye={"MASTER CARD":"1",MASTERCARD:"1",CARNET:"2"},Qe=i=>{const a=oe(i==null?void 0:i.ciphertext,i==null?void 0:i.iv);let t=0,o=0;const s=a==null?void 0:a.map(r=>{var h;return t+=parseFloat(r==null?void 0:r.balance),o+=parseFloat(r==null?void 0:r.inTransit),{...r,paymentProcessorId:Ye[(h=r==null?void 0:r.paymentProcessor)==null?void 0:h.toUpperCase()]??null,id:r==null?void 0:r.cardId,SPEI:r==null?void 0:r.spei,balanceFormatted:w(r==null?void 0:r.balance),inTransitFormatted:w(r==null?void 0:r.inTransit)}});return{master:{balance:t,inTransit:o,balanceFormatted:w(t),inTransitFormatted:w(o)},globals:s}},Ze=i=>{const a=oe(i==null?void 0:i.ciphertext,i==null?void 0:i.iv);let t=0,o=0;return{movements:(a==null?void 0:a.map(s=>{var j;const r=parseFloat((s==null?void 0:s.amount)||"0");(s==null?void 0:s.type.toLowerCase())==="gasto"&&(t+=r),(s==null?void 0:s.type.toLowerCase())==="ingreso"&&(o+=r);const h=s!=null&&s.date?W(new Date(s==null?void 0:s.date),"dd MMM yyyy",{locale:ye}):"",g=s!=null&&s.date?W(new Date(s==null?void 0:s.date),"p"):"";return{id:s==null?void 0:s.transactionId,fullDate:Ge(s==null?void 0:s.date),date:h,time:g,serverDate:s==null?void 0:s.date,description:s==null?void 0:s.description,amount:r,amountFormat:w(r),paymentProcessor:s==null?void 0:s.cardPaymentProcessor,type:s==null?void 0:s.type.toLowerCase(),operationType:(j=s==null?void 0:s.operationType)==null?void 0:j.toUpperCase(),concept:(s==null?void 0:s.concept)??"",cardId:s==null?void 0:s.cardId,commerceId:s==null?void 0:s.cardCommerceId,original:s,verified:!!(s!=null&&s.checked)}}))??[],income:w(o),expenses:w(t),balanceMovements:w(o-t)}},Je=async()=>{const{data:i}=await se.get("/api/main-cards/information");return Qe(i)},ve=async(i,a,t)=>{const o=new URL("/api/master-cards/movements",window.location.origin);o.searchParams.set("startDate",i),o.searchParams.set("endDate",a);const{data:s}=await se.get(o.href);return Ze(s)},es=(i={})=>{const[a,t]=u.useState(null),o=U(r=>r.setMainCard);return{...te([ae.GLOBAL_CARDS],Je,{staleTime:6e4,refetchOnWindowFocus:!1,onError:r=>{const h=ne(r,"No se puede obtener la informacion de las tarjetas principales");t(h),o(null),$.error(h,{type:re(r)})},onSuccess:r=>{o(r)},...i}),error:a||null}},ss=(i,a,t={})=>{if(!i||!a)return null;const o=W(i,"yyyy-MM-dd"),s=W(a,"yyyy-MM-dd"),[r,h]=u.useState(null),g=M(C=>C.setMovements);return{...te([ae.MOVEMENTS],({signal:C})=>ve(o,s),{staleTime:6e4,retry:!1,refetchOnWindowFocus:!1,onError:C=>{const P=ne(C,"No se puede obtener la lista de movimientos. Intente nuevamente o reporte a sistemas");h(P),$.error(P,{type:re(C)}),g(null)},...t}),error:r||null}},ts=X(u.lazy(()=>Y(()=>import("./build-2c2e26ac.js"),["assets/js/build-2c2e26ac.js","assets/js/index-5914b1fb.js","assets/css/build-f63bc8fe.css","assets/js/build-cf1479e2.js","assets/js/build-48835d84.js","assets/js/build-556efae6.js","assets/js/build-21808848.js"])));function ns(){var n;const i=new Date,a=je(i),t=Ce(i),[o,s]=u.useState(a),[r,h]=u.useState(t),g=M(l=>l.filterPaymentProcessor),j=M(l=>l.setMovements),C=M(l=>l.movements),[P,E]=u.useState(!1),{data:T,isError:O,isLoading:L,isFetching:R,error:G,refetch:B}=ss(o,r);u.useEffect(()=>{o&&r&&B()},[o,r]),u.useEffect(()=>{var l;if(g){let y=0,f=0;const c=(l=T==null?void 0:T.movements)==null?void 0:l.filter(d=>{var b;return((b=d==null?void 0:d.paymentProcessor)==null?void 0:b.toLowerCase())===(g==null?void 0:g.toLowerCase())});c==null||c.forEach(d=>{(d==null?void 0:d.type.toLowerCase())==="gasto"?y+=d==null?void 0:d.amount:f+=d==null?void 0:d.amount}),j({movements:c,income:w(f),expenses:w(y),balanceMovements:w(f-y)})}else j(T)},[g,T]);const _=u.useMemo(()=>[{accessorKey:"description",header:"Movimiento",enableHiding:!1,size:200,Cell:({cell:l,column:y,row:f})=>{const{original:c}=f;return e.jsx(Fe,{row:c})}},{accessorKey:"serverDate",header:"Fecha",size:120,Cell:({cell:l,column:y,row:f})=>{const{original:c}=f;return e.jsx(p,{children:e.jsx(x,{variant:"subtitle2",children:c==null?void 0:c.fullDate})})}},{accessorKey:"operationType",header:"Tipo",filterVariant:"multi-select",size:100,Cell:({cell:l,column:y,row:f})=>{const{original:c}=f,d=Ne(c==null?void 0:c.operationType),b=d==null?void 0:d.component;return e.jsx(k,{children:d?e.jsx(b,{sx:{width:25,height:25}}):e.jsx(me,{size:22})})}},{accessorKey:"amount",header:"Monto",size:100,Cell:({cell:l,column:y,row:f})=>{const{original:c}=f,d=(c==null?void 0:c.type)==="ingreso",b=(c==null?void 0:c.type)==="terminal";return e.jsx(x,{variant:"subtitle2",fontWeight:"bold",color:d||b?"success.main":"error",children:d||b?`+ ${c==null?void 0:c.amountFormat}`:`- ${c==null?void 0:c.amountFormat}`})}},{accessorKey:"verified",header:"Comprobación",size:100,Cell:({cell:l,column:y,row:f})=>{const{original:c}=f;return e.jsx(p,{flexDirection:"row",width:1,justifyContent:"center",alignItems:"center",gap:1,mr:2,color:"primary",children:c!=null&&c.verified?e.jsx(Be,{color:"green",fontWeight:"bold",fontSize:"18px"}):e.jsx(_e,{fontSize:"18px",color:"red"})})}}],[]),F=l=>{r!==null&&l>r&&h(l),s(l)},D=l=>{o!==null&&l<o&&s(l),h(l)},A=l=>()=>{var d;const y=((d=l==null?void 0:l.getSelectedRowModel().flatRows)==null?void 0:d.map(b=>b.original))??[],f=y==null?void 0:y.some(b=>b==null?void 0:b.verified),c=y==null?void 0:y.some(b=>(b==null?void 0:b.operationType)!=="OTROS CARGOS");return f?$.warn("Existen movimientos que ya se encuentran comprobados, verifique los movimientos seleccionados."):c?$.warn("Existen movimientos que no se pueden comprobar, verifique el tipo de movimiento."):E(!0)},I=We(O,G,{columns:_,data:C||[],enableColumnPinning:!0,enableColumnFilterModes:!0,enableStickyHeader:!0,enableRowVirtualization:!0,enableFacetedValues:!0,enableRowActions:!0,enableRowSelection:!0,enableDensityToggle:!1,positionActionsColumn:"last",selectAllMode:"all",initialState:{density:"compact",sorting:[{id:"serverDate",desc:!0}]},state:{isLoading:L,showAlertBanner:O,showProgressBars:R},displayColumnDefOptions:{"mrt-row-select":{maxSize:10},"mrt-row-actions":{header:"Acciones",maxSize:80}},muiTableContainerProps:{sx:{maxHeight:{md:"350px",lg:"450px",xl:"700px"}}},renderTopToolbarCustomActions:({table:l})=>e.jsx(k,{sx:{display:"flex",gap:"1rem"},children:e.jsx(ee,{loading:R,onClick:A(l),disabled:z(),startIcon:e.jsx(ie,{width:24,height:24}),variant:"outlined",children:"Comprobar"})}),renderRowActionMenuItems:({row:l})=>[e.jsx(V,{onClick:()=>console.info("conciliation"),children:"Conciliación"},"conciliation"),e.jsx(V,{onClick:()=>console.info("incidence"),children:"Incidencia"},"incidence"),e.jsx(V,{onClick:()=>console.info("communication"),children:"Comunicación"},"communication"),e.jsx(V,{onClick:()=>console.info("tag"),children:"Tag"},"tag")]}),m=((n=I==null?void 0:I.getSelectedRowModel().flatRows)==null?void 0:n.map(l=>l.original))??[],z=u.useCallback(()=>{var f;const l=m.length>0?(f=m[0])==null?void 0:f.paymentProcessor:null;return!!!(m.every(c=>c.paymentProcessor===l)&&(I!=null&&I.getIsSomeRowsSelected()))},[m,I]);return e.jsxs(e.Fragment,{children:[e.jsxs(q,{children:[e.jsxs(p,{p:2,direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[e.jsx(Z,{size:"small",value:o,onChange:F,maxDate:r,slotProps:{textField:{size:"small",required:!0}},disabled:R,format:"dd MMMM yyyy"}),e.jsx($e,{children:"-"}),e.jsx(Z,{size:"small",value:r,onChange:D,minDate:o,slotProps:{textField:{size:"small",required:!0}},disabled:R,format:"dd MMMM yyyy"})]}),e.jsx(v,{sx:{borderStyle:"dashed"}}),e.jsx(He,{table:I})]}),e.jsx(ts,{open:P,setOpen:E,movements:m??[]})]})}function Zs(){var o,s;const{isCollapse:i}=be(),{data:a,isLoading:t}=es();return e.jsx(Me,{title:"Dashboard Master",children:e.jsxs(ze,{children:[e.jsx(Ve,{name:"Dashboard Master",links:[{name:"Inicio",href:Se.root},{name:"Dashboard Master"}]}),e.jsx(k,{pb:4,children:e.jsxs(K,{container:!0,flex:1,spacing:2,children:[e.jsx(K,{item:!0,xs:12,md:((o=a==null?void 0:a.globals)==null?void 0:o.length)>1?i?4:5:i?3:4,xl:i?3:4,children:e.jsx(pe,{data:a,isLoading:t})}),e.jsx(K,{item:!0,xs:12,md:((s=a==null?void 0:a.globals)==null?void 0:s.length)>1?i?8:7:i?9:8,xl:i?9:8,children:e.jsx(ns,{})})]})}),e.jsx(Re,{})]})})}export{Zs as default};
