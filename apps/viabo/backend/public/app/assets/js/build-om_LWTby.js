import{k as P,a as y,Q as I,g as v,b as E,O as f,j as e,S as a,T as x,E as w,B as O,L as A}from"./index-EHCGdQqa.js";import{u as S}from"./build-e8tJ2xFq.js";import{b as L,c as T}from"./build-h17sqtwg.js";import{b as k,M as z}from"./build-pWPvcn6f.js";import{C as q}from"./build-9olBfd-W.js";import{M as D}from"./build-Y0IIkvqn.js";import{V as F,a as N}from"./build-l-kXUfk-.js";import{F as R,R as o}from"./build-6fg1h0Az.js";import{I as d}from"./build-z2d0I-ip.js";import"./build-XJ8-Uf4O.js";import"./build-K6o6RXRY.js";import"./build-evFGbqQZ.js";import"./build-ViBNx4nm.js";import"./build-0DUGlmod.js";import"./build-Wa6kpvgH.js";import"./build-AT2uCFgk.js";import"./build-lZ3TP0q8.js";import"./build-J6QiovFS.js";import"./build-dAZ6w5rU.js";import"./build-S4-6fRHa.js";import"./build--4aaS65y.js";import"./build-bVmbnDvY.js";import"./build-mZYsXZap.js";import"./build-tvLIepYE.js";import"./build-G-VE9h_k.js";import"./build-j61AaUI1.js";import"./build-n0pfqJRy.js";import"./build-Lxz5SIYZ.js";import"./build-zH8OCAbq.js";import"./build-zEF68lUW.js";import"./build-JN8U9UBX.js";import"./build-Uc7vb3zK.js";const G=(r,u)=>({commerceId:u,speiInCarnet:r==null?void 0:r.speiInCarnet,speiOutCarnet:r==null?void 0:r.speiOutCarnet,speiInMasterCard:r==null?void 0:r.speiInMasterCard,speiOutMasterCard:r==null?void 0:r.speiOutMasterCard,pay:r==null?void 0:r.viaboPay,sharedTerminal:r==null?void 0:r.cloud}),V=(r={})=>{const u=P(),t=y(k,r);return{...t,mutate:async(m,i)=>{const{onSuccess:C,onError:c,mutationOptions:j}=i;try{await I.promise(t.mutateAsync(m,j),{pending:"Actualizando Comisiones ...",success:{render({data:n}){return u.invalidateQueries([z.COMMERCE_LIST]),C(n),"Se actualizaron las comisiones con éxito"}}})}catch(n){const h=v(n,"No se puede realizar esta operacion en este momento. Intente nuevamente o reporte a sistemas");c(h),I.error(h,{type:E(n)})}}}};_.propTypes={commerce:f.object.isRequired,onSuccess:f.func};const p=0,s=50,l=.1;function _({commerce:r,onSuccess:u}){const{commissions:t}=r,{mutate:g,isLoading:m}=V(),i=L().min(p,"El valor mínimo es 0").max(s,"El valor máximo es 50").required("El valor es requerido"),C=T({speiInCarnet:i,speiOutCarnet:i,speiInMasterCard:i,speiOutMasterCard:i,viaboPay:i,cloud:i}),c=S({initialValues:{speiInCarnet:(t==null?void 0:t.speiInCarnet)||0,speiOutCarnet:(t==null?void 0:t.speiOutCarnet)||0,speiInMasterCard:(t==null?void 0:t.speiInMasterCard)||0,speiOutMasterCard:(t==null?void 0:t.speiOutMasterCard)||0,viaboPay:(t==null?void 0:t.viaboPay)||0,cloud:(t==null?void 0:t.cloud)||0},validationSchema:C,enableReinitialize:!0,onSubmit:(h,{setSubmitting:b})=>{const M=G(h,r==null?void 0:r.id);g(M,{onSuccess:()=>{b(!1),u()},onError:()=>{b(!1)}})}}),{isSubmitting:j}=c,n=j||m;return e.jsx(R,{formik:c,children:e.jsxs(a,{p:3,gap:3,flexDirection:"column",children:[e.jsxs(a,{gap:2,children:[e.jsx(x,{variant:"subtitle2",children:"SPEI"}),e.jsxs(a,{gap:3,flexDirection:"row",flexWrap:"wrap",alignItems:"center",width:1,children:[e.jsx(q,{}),e.jsxs(a,{spacing:1,flexGrow:1,children:[e.jsx(x,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Entrantes:"}),e.jsx(o,{name:"speiInCarnet",placeholder:"0.0",autoFocus:!0,focused:!0,size:"small",type:"number",required:!0,disabled:n,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(d,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:p,max:s,step:l}})]}),e.jsxs(a,{spacing:1,flexGrow:1,children:[e.jsx(x,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Salientes:"}),e.jsx(o,{name:"speiOutCarnet",placeholder:"0",type:"number",required:!0,size:"small",disabled:n,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(d,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:p,max:s,step:l}})]})]}),e.jsxs(a,{gap:3,flexDirection:"row",flexWrap:"wrap",alignItems:"center",width:1,children:[e.jsx(D,{}),e.jsxs(a,{spacing:1,flexGrow:1,children:[e.jsx(x,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Entrantes:"}),e.jsx(o,{name:"speiInMasterCard",placeholder:"0",required:!0,size:"small",type:"number",disabled:n,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(d,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:p,max:s,step:l}})]}),e.jsxs(a,{spacing:1,flexGrow:1,children:[e.jsx(x,{m:0,paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Salientes:"}),e.jsx(o,{name:"speiOutMasterCard",placeholder:"0",required:!0,type:"number",size:"small",disabled:n,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(d,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:p,max:s,step:l}})]})]})]}),e.jsx(w,{flexItem:!0,sx:{borderStyle:"dashed"}}),e.jsxs(a,{flexDirection:"row",justifyContent:"space-between",alignItems:"center",children:[e.jsxs(a,{gap:2,alignItems:"center",flexDirection:"row",children:[e.jsx(a,{flexDirection:"row",gap:1,alignItems:"center",children:e.jsx(F,{sx:{width:40,height:40}})}),e.jsx(o,{name:"viaboPay",placeholder:"0",size:"small",type:"number",required:!0,disabled:n,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(d,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:p,max:s,step:l}})]}),e.jsxs(a,{gap:2,flexDirection:"row",alignItems:"center",children:[e.jsx(a,{flexDirection:"row",gap:1,alignItems:"center",children:e.jsx(N,{sx:{width:35,height:35}})}),e.jsx(o,{name:"cloud",placeholder:"0",size:"small",type:"number",required:!0,disabled:n,InputLabelProps:{shrink:!0},InputProps:{endAdornment:e.jsx(d,{position:"start",children:"%"})},inputProps:{inputMode:"numeric",min:p,max:s,step:l}})]})]}),e.jsx(O,{display:"flex",pt:2,children:e.jsx(A,{fullWidth:!0,loading:n,variant:"contained",type:"submit",sx:{fontWeight:"bold"},children:"Guardar"})})]})})}export{_ as default};
