import{c as F,f as E,a9 as y,i as r,S as a,T as o,B as v,aX as A,dq as I,du as z,a0 as P,P as s}from"./vendor-CEMfbhOc.js";import{u as R}from"./formik.esm-Dshy1xjd.js";import{c as T,a as p}from"./index.esm-C2GVbld4.js";import{g as u,a as N}from"./index-BxvL1HP2.js";import{i as c}from"./matchTypes-BFKCRNnN.js";import{n as q,S as L}from"./SpeiThirdAccountsRepository-CppjvjvC.js";import{F as w,R as x}from"./TextMaxLine-iGSgfpVZ.js";import{R as B}from"./RFSelect-B2dtP2ya.js";import"./formatTime-mlJJpQBT.js";import"./UploadSingleFile-CP5cFJ4A.js";import"./fade-CViozI82.js";import"./transition-anLY3gj9.js";import"./formatNumber-Df8NwpjV.js";const V=e=>{var l,t,h,d,m,n;return{interbankCLABE:e==null?void 0:e.clabe,beneficiary:(l=e==null?void 0:e.name)==null?void 0:l.trim(),rfc:((t=e==null?void 0:e.rfc)==null?void 0:t.trim())||"",alias:((h=e==null?void 0:e.alias)==null?void 0:h.trim())||"",bankId:(d=e==null?void 0:e.bank)==null?void 0:d.value,email:((m=e==null?void 0:e.email)==null?void 0:m.trim())||"",phone:((n=e==null?void 0:e.phone)==null?void 0:n.trim())||""}},_=(e={})=>{const l=F(),t=E(q,e);return{...t,mutate:async(d,m)=>{const{onSuccess:n,onError:j,mutationOptions:S}=m;try{await y.promise(t.mutateAsync(d,S),{pending:"Agregando Cuenta ...",success:{render({data:b}){return l.invalidateQueries([L.THIRD_ACCOUNTS_LIST]),c(n)&&n(b),"Se agrego la cuenta con éxito"}}})}catch(b){const i=u(b,"No se puede realizar esta operación en este momento. Intente nuevamente o reporte a sistemas");c(j)&&j(i),y.error(i,{type:N(b)})}}}},M=({account:e,catalogBanks:l,onSuccess:t})=>{const{mutate:h,isLoading:d}=_(),m=T().shape({clabe:p().trim().max(18,"Máximo 18 caracteres").matches(/^\S{18}$/,"La clabe debe contener 18 caracteres y no puede contener espacios en blanco").required("Es necesario la clabe"),name:p().trim().max(100,"Máximo 100 caracteres").required("Es necesario el beneficiario"),rfc:p(),alias:p().trim().max(100,"Máximo 100 caracteres"),bank:T().nullable().required("Es necesario el banco"),email:p().trim().email("Ingrese un correo valido"),phone:p().trim()}),n=R({initialValues:{clabe:(e==null?void 0:e.clabe)||"",name:(e==null?void 0:e.beneficiary)||"",alias:(e==null?void 0:e.alias)||"",rfc:(e==null?void 0:e.rfc)||"",bank:(l==null?void 0:l.find(f=>{var g;return(f==null?void 0:f.id)===((g=e==null?void 0:e.bank)==null?void 0:g.id)}))||null,email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.phone)||""},enableReinitialize:!0,validationSchema:m,onSubmit:(f,{setSubmitting:g,setFieldValue:O})=>{const C=V(f);h(C,{onSuccess:()=>{g(!1),t()},onError:()=>{g(!1)}})}}),{isSubmitting:j,setFieldValue:S,values:b}=n,i=j||d;return r.jsx(w,{formik:n,children:r.jsxs(a,{spacing:2,children:[r.jsxs(a,{spacing:1,children:[r.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Cuenta CLABE",r.jsx(v,{component:"span",color:"error.main",ml:.5,children:"*"})]}),r.jsx(x,{inputProps:{maxLength:"18"},required:!0,name:"clabe",size:"small",disabled:i,placeholder:"Clabe..."})]}),r.jsxs(a,{spacing:1,children:[r.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Beneficiario",r.jsx(v,{component:"span",color:"error.main",ml:.5,children:"*"})]}),r.jsx(x,{required:!0,name:"name",size:"small",placeholder:"Nombre del titular de la cuenta...",disabled:i})]}),r.jsxs(a,{spacing:1,children:[r.jsx(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"RFC"}),r.jsx(x,{name:"rfc",size:"small",placeholder:"RFC del beneficiario...",disabled:i})]}),r.jsxs(a,{spacing:1,children:[r.jsx(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Alias"}),r.jsx(x,{name:"alias",size:"small",placeholder:"Alias de la cuenta...",disabled:i})]}),r.jsxs(a,{spacing:1,children:[r.jsxs(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:["Banco",r.jsx(v,{component:"span",color:"error.main",ml:.5,children:"*"})]}),r.jsx(B,{name:"bank",textFieldParams:{placeholder:"Seleccionar ...",required:!0,size:"small"},options:l||[],disabled:i})]}),r.jsxs(a,{flexDirection:{md:"row"},gap:2,children:[r.jsxs(a,{spacing:1,flex:1,children:[r.jsx(o,{type:"email",paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Correo"}),r.jsx(x,{name:"email",size:"small",placeholder:"beneficiario@domino.com...",InputProps:{startAdornment:r.jsx(A,{position:"start",children:r.jsx(I,{})})},disabled:i})]}),r.jsxs(a,{spacing:1,children:[r.jsx(o,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Teléfono"}),r.jsx(x,{name:"phone",type:"tel",size:"small",placeholder:"55 5555 5555",InputProps:{startAdornment:r.jsx(A,{position:"start",children:r.jsx(z,{})})},disabled:i})]})]}),r.jsx(a,{sx:{pt:1},children:r.jsx(P,{size:"large",loading:i,variant:"contained",color:"primary",fullWidth:!0,type:"submit",children:"Crear"})})]})})};M.propTypes={account:s.shape({alias:s.string,bank:s.any,beneficiary:s.string,clabe:s.string,email:s.string,name:s.string,phone:s.string,rfc:s.string}),catalogBanks:s.array,onSuccess:s.func};export{M as default};
//# sourceMappingURL=NewSpeiThirdAccountForm-d1HI0lmj.js.map
