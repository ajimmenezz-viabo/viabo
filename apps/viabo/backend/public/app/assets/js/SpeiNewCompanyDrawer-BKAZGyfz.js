import{g as E,a as F,L as w,_ as I,D as M,S as T,R as O,E as R}from"./index-1FUUY6N4.js";import{r as t,e as f,a9 as U,i as o,S as u,T as v}from"./vendor-CEMfbhOc.js";import{u as q}from"./useFindSpeiCostCenters-Cv5TjvFt.js";import{S as C,g as B,a as K,u as d}from"./ViaboSpeiCompanies-CKRJZiEW.js";import"./matchTypes-BFKCRNnN.js";import"./useViaboSpeiBreadCrumbs-Kn0SQNXo.js";import"./viabo-spei-paths-D0whVJVF.js";import"./TextMaxLine-BooApTzI.js";import"./formik.esm-Dshy1xjd.js";import"./formatTime-mlJJpQBT.js";import"./UploadSingleFile-DBlnS0ZI.js";import"./fade-CViozI82.js";import"./transition-anLY3gj9.js";import"./formatNumber-Df8NwpjV.js";import"./MaterialDataTable-_kvAzFsF.js";import"./useMaterialTable-9wOa4uxn.js";import"./HeaderPage-DF1oZxt5.js";const V=(s={})=>{const[a,i]=t.useState(null),e=f({queryKey:[C.USERS_ADMIN_COMPANY_LIST],queryFn:({signal:r})=>B(),refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...s});return t.useEffect(()=>{if(e!=null&&e.isError){const r=E(e.error,"No se puede obtener la lista de usuarios. Intente nuevamente o reporte a sistemas");i(r)}},[e.isError,e.error]),{...e,error:a||null}},Y=(s,a={})=>{const[i,e]=t.useState(null),r=f({queryKey:[C.COMPANY_DETAILS,s],queryFn:()=>K(s),refetchOnWindowFocus:!1,retry:!1,staleTime:3e5,...a});return t.useEffect(()=>{if(r!=null&&r.isError){const n=E(r.error,"No se puede obtener la información de la empresa. Intente nuevamente o reporte a sistemas");e(n),U.error(n,{type:F(r.error)})}},[r.isError,r.error]),{...r,error:i||null}},W=w(t.lazy(()=>I(()=>import("./SpeiNewCompanyForm-C64nr5yg.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20])))),pe=()=>{const{openNewCompany:s,setOpenNewSpeiCompany:a,setSpeiCompany:i}=d(),e=d(A=>A.company),{data:r,isLoading:n,isError:S,error:g,refetch:l}=V({enabled:!1}),{data:y,isLoading:h,isError:x,error:_,refetch:N}=q({enabled:!1}),{data:D,isError:L,error:b,isFetching:P}=Y(e==null?void 0:e.id,{enabled:!!(e!=null&&e.id)});t.useEffect(()=>{s&&(l(),N())},[s]);const m=()=>{a(!1),i(null)},c=S||x||L,p=n||h||P,j=g||_||b;return o.jsx(M,{open:s,handleClose:m,titleElement:o.jsx(u,{children:o.jsx(v,{variant:"h6",children:e?"Editar Empresa":"Nueva Empresa"})}),children:o.jsx(T,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:o.jsxs(u,{spacing:3,p:3,children:[p&&o.jsx(O,{}),c&&!p&&o.jsx(R,{errorMessage:j,titleMessage:"Error al obtener información",handleButton:()=>l()}),!c&&!p&&s&&o.jsx(W,{adminCompanyUsers:r,costCenters:y,company:D,onSuccess:m})]})})})};export{pe as default};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/js/SpeiNewCompanyForm-C64nr5yg.js","assets/js/vendor-CEMfbhOc.js","assets/js/formik.esm-Dshy1xjd.js","assets/js/index.esm-C2GVbld4.js","assets/js/index-1FUUY6N4.js","assets/css/build-B8cqXs1n.css","assets/js/ViaboSpeiCompanies-CKRJZiEW.js","assets/js/useViaboSpeiBreadCrumbs-Kn0SQNXo.js","assets/js/viabo-spei-paths-D0whVJVF.js","assets/js/TextMaxLine-BooApTzI.js","assets/js/formatTime-mlJJpQBT.js","assets/js/matchTypes-BFKCRNnN.js","assets/js/UploadSingleFile-DBlnS0ZI.js","assets/js/fade-CViozI82.js","assets/js/transition-anLY3gj9.js","assets/js/formatNumber-Df8NwpjV.js","assets/js/MaterialDataTable-_kvAzFsF.js","assets/js/useMaterialTable-9wOa4uxn.js","assets/js/HeaderPage-DF1oZxt5.js","assets/js/viabo-card-CcTpX9JZ.js","assets/js/RFSelect-B2dtP2ya.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=SpeiNewCompanyDrawer-BKAZGyfz.js.map
