import{D as o,j as a,S as s,T as t,B as m,r as C,i as w,I as E,C as T,d as B,g as P,a0 as z,b as A,a3 as L,R,N as k}from"./index-be176464.js";import{B as M}from"./build-156a6049.js";import{a as $}from"./build-a5ba83d8.js";import{b as W,d as G,F as q,u as y}from"./build-f85a22a7.js";import{g as Y}from"./build-f86e02cf.js";import{L as _}from"./build-3fdf003c.js";import{L as H}from"./build-112d79ca.js";import{C as Q}from"./build-eb025cba.js";import{C as K}from"./build-22cfdd14.js";import{C as U}from"./build-f0aa92ba.js";import{a as J}from"./build-3e2825f2.js";import"./build-0d6b0eaf.js";import"./build-d6c61d92.js";import"./build-726930e2.js";import"./build-6bd3f839.js";import"./build-b46d1600.js";import"./build-865f3cc7.js";import"./build-bc852905.js";import"./build-199169fb.js";import"./build-aeaad37b.js";import"./build-7cb492e3.js";import"./build-3edaa701.js";import"./build-1c3bacef.js";import"./build-b7da0f7f.js";import"./build-59cb91f6.js";import"./build-eff8b675.js";import"./build-bf8ea840.js";import"./build-8047ff64.js";import"./build-bee6630b.js";import"./build-a3d9f42b.js";import"./build-83d17a75.js";import"./build-899176f2.js";import"./build-f1e2ed79.js";import"./build-8a3d443f.js";const F=({fundingOrder:e})=>{var c,r,l,p,x;return a.jsxs(s,{spacing:2,children:[a.jsx(t,{variant:"subtitle1",fontWeight:"bold",children:"Conciliación"}),a.jsx(s,{spacing:2,children:a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"¿Conciliada?"}),a.jsx(m,{textAlign:"center",children:e!=null&&e.conciliated?a.jsx($,{color:"green",fontWeight:"bold",fontSize:"20px"}):a.jsx(M,{fontSize:"20px",color:"red"})})]}),a.jsx(m,{display:"flex",flex:1}),a.jsx(s,{flexGrow:1,spacing:.5,children:((c=e==null?void 0:e.conciliationInfo)==null?void 0:c.number)&&((r=e==null?void 0:e.conciliationInfo)==null?void 0:r.number)!==""&&a.jsxs(a.Fragment,{children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Movimiento"}),a.jsxs(s,{children:[a.jsx(t,{variant:"body2",children:`${((l=e==null?void 0:e.conciliationInfo)==null?void 0:l.number)||"-"}`}),a.jsx(t,{variant:"body2",children:` ${((p=e==null?void 0:e.conciliationInfo)==null?void 0:p.date)||"-"}`}),a.jsx(t,{variant:"body2",children:` ${((x=e==null?void 0:e.conciliationInfo)==null?void 0:x.userName)||"-"}`})]})]})})]})})]})};F.propTypes={fundingOrder:o.shape({conciliated:o.any,conciliationInfo:o.shape({date:o.any,number:o.string,userName:o.any})})};const I=({fundingOrder:e})=>{var n,j,b,v;const[c,r]=C.useState(!1),l=[],p=((n=e==null?void 0:e.paymentMethods)==null?void 0:n.split(","))||[],x=W(e==null?void 0:e.status);return p==null||p.forEach(i=>{const h=Y(i);h&&l.push({component:h==null?void 0:h.component,width:i==="PAYCASH"?50:30,height:i==="PAYCASH"?50:30})}),a.jsxs(s,{spacing:2,children:[a.jsx(t,{variant:"subtitle1",fontWeight:"bold",children:"Datos de la orden"}),a.jsxs(s,{spacing:2,children:[a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Monto:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.amount)??"-"})]}),a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Referencia Interna:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.referenceNumber)??"-"})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Cuenta Maestra:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.cardNumber)??"-"})]}),a.jsxs(s,{spacing:1.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Métodos de Fondeo:"}),a.jsx(s,{flexDirection:"row",alignItems:"center",gap:1,position:"relative",children:l==null?void 0:l.map(({component:i,width:h,height:N},D)=>a.jsx(i,{sx:{width:h,height:N,position:"absolute",left:D===0?0:40}},D))})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Fecha de Creación:"}),a.jsx(t,{variant:"body2",children:((j=e==null?void 0:e.registerDate)==null?void 0:j.fullDate)??"-"})]}),a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",gutterBottom:!1,sx:{color:"text.disabled"},children:"Liga Orden de Fondeo"}),(e==null?void 0:e.referenceNumber)&&a.jsxs(s,{alignItems:"flex-start",direction:"row",spacing:1,children:[a.jsx(H,{variant:"body2",component:w,underline:"always",to:`/orden-fondeo/${e==null?void 0:e.referenceNumber}`,target:"_blank",color:"info.main",children:`orden-fondeo/${e==null?void 0:e.referenceNumber}`}),a.jsx(m,{position:"relative",children:a.jsx(E,{variant:"outlined",sx:{position:"absolute",p:0},size:"small",color:c?"success":"inherit",onClick:()=>{r(!0),T(`${window.location.host}/orden-fondeo/${e==null?void 0:e.referenceNumber}`),setTimeout(()=>{r(!1)},1e3)},children:c?a.jsx(Q,{fontSize:"small",sx:{color:"success"}}):a.jsx(K,{fontSize:"small",sx:{color:"text.disabled"}})})})]})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Destinatarios:"}),((b=e==null?void 0:e.emails)==null?void 0:b.length)>0?(v=e==null?void 0:e.emails)==null?void 0:v.map(i=>a.jsx(m,{display:"flex",flexDirection:"column",children:a.jsx(m,{children:a.jsx(U,{label:a.jsx(t,{variant:"body2",children:i}),size:"small"})})},i)):a.jsx(t,{variant:"body2",children:"-"})]}),a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Estado:"}),a.jsx(m,{children:a.jsx(_,{variant:"ghost",color:x,sx:{textTransform:"capitalize"},children:(e==null?void 0:e.status)||"-"})})]})]}),a.jsx(s,{flexDirection:"row",gap:1,children:a.jsxs(s,{spacing:.5,flex:1,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Fecha Último Estado:"}),a.jsx(t,{variant:"body2",children:(e==null?void 0:e.lastStatusDate)||"-"})]})})]})]})};I.propTypes={fundingOrder:o.shape({amount:o.string,cardNumber:o.string,emails:o.array,lastStatusDate:o.string,paymentMethods:o.string,referenceNumber:o.string,registerDate:o.shape({fullDate:o.string}),status:o.string})};const S=({fundingOrder:e})=>{var c,r,l;return a.jsxs(s,{spacing:2,children:[a.jsx(t,{variant:"subtitle1",fontWeight:"bold",children:"Datos del Pago"}),a.jsxs(s,{spacing:2,children:[a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Referencia"}),a.jsx(t,{variant:"body2",children:e==null?void 0:e.payCash})]}),a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Folio"}),a.jsx(t,{variant:"body2",children:((c=e==null?void 0:e.paymentInfo)==null?void 0:c.folio)||"-"})]})]}),a.jsxs(s,{flexDirection:"row",gap:1,children:[a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Fecha"}),a.jsx(t,{variant:"body2",children:((r=e==null?void 0:e.paymentInfo)==null?void 0:r.date)||"-"})]}),a.jsxs(s,{flex:1,spacing:.5,children:[a.jsx(t,{paragraph:!0,variant:"overline",sx:{color:"text.disabled"},children:"Código Autorización"}),a.jsx(t,{variant:"body2",children:((l=e==null?void 0:e.paymentInfo)==null?void 0:l.authorizationCode)||"-"})]})]})]})]})};S.propTypes={fundingOrder:o.shape({payCash:o.any,paymentInfo:o.shape({authorizationCode:o.string,date:o.string,folio:o.string})})};const V=(e,c={})=>{const[r,l]=C.useState(null);return{...B([q.DETAILS,e==null?void 0:e.id],()=>G(e),{staleTime:6e4,refetchOnWindowFocus:!1,onError:x=>{const n=P(x,"No se puede obtener la información de la orden de fondeo");l(n),z.error(n,{type:A(x)})},...c}),error:r||null}},Ba=()=>{const e=y(i=>i.fundingOrder),c=y(i=>i.setFundingOrder),r=y(i=>i.setOpenDetailsFundingOrder),l=y(i=>i.openDetailsFundingOrder),{data:p,isLoading:x,isError:n,error:j,refetch:b}=V(e,{enabled:!!e}),v=()=>{r(!1),c(null)};return a.jsx(J,{open:l,handleClose:v,titleElement:a.jsxs(s,{children:[a.jsx(t,{variant:"h6",children:"Orden de Fondeo"}),a.jsxs(t,{variant:"subtitle1",children:["#",e==null?void 0:e.referenceNumber]})]}),children:a.jsx(L,{containerProps:{sx:{flexGrow:0,height:"auto"}},children:a.jsxs(s,{spacing:3,p:3,children:[x&&a.jsx(R,{open:x}),n&&!x&&a.jsx(k,{errorMessage:j,titleMessage:"Detalles Orden de Fondeo",handleButton:()=>b()}),!n&&!x&&a.jsxs(a.Fragment,{children:[a.jsx(I,{fundingOrder:p}),["Pagada","Liquidada"].includes(e==null?void 0:e.status)&&(e==null?void 0:e.payCash)!==""&&a.jsx(S,{fundingOrder:p}),a.jsx(F,{fundingOrder:p})]})]})})})};export{Ba as default};
