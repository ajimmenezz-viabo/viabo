import{t as v,j as s,r as c,S as n,T as j,B as d,I as S,u as O,ae as H,b3 as q,aF as L,l as N,a7 as _,a8 as G}from"./build-a914105e.js";import{u as z,a as W}from"./build-80a184b8.js";import{C as J,S as o}from"./build-b35cd6a9.js";import{V as K,a as Q}from"./build-6b2f2a1f.js";import{b as U,E as I}from"./build-43d9dd38.js";import{C as X}from"./build-0f1bf6ed.js";import{u as Y,s as Z,P as $}from"./build-e27f7ba6.js";import{T as ss}from"./build-b1f1edf3.js";import{I as es}from"./build-f2b95e6c.js";import{S as ts}from"./build-0a21e8ff.js";const ns=v([s.jsx("path",{d:"M15 17h2v-3h1v-2l-1-5H2l-1 5v2h1v6h9v-6h4v3zm-6 1H4v-4h5v4zM2 4h15v2H2z"},"0"),s.jsx("path",{d:"M20 18v-3h-2v3h-3v2h3v3h2v-3h3v-2z"},"1")],"AddBusiness"),fs=v(s.jsx("path",{d:"M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4v4zm6 6h4v-4h-4v4zm0 6h4v-4h-4v4z"}),"Apps"),rs=v(s.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1s-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm0 4c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm6 12H6v-1.4c0-2 4-3.1 6-3.1s6 1.1 6 3.1V19z"}),"AssignmentIndRounded"),ys=v(s.jsx("path",{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"}),"FormatListBulleted"),as=v(s.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertTwoTone");function is({card:e,disableShow:h}){const[a,u]=c.useState(!0),p=m=>{m.stopPropagation(),u(l=>!l)};return s.jsxs(n,{position:"relative",children:[s.jsx(j,{sx:{mb:1,typography:"caption",opacity:.48},children:"CVV"}),s.jsx(n,{direction:"row",spacing:1,alignItems:"center",children:s.jsx(j,{sx:{typography:"subtitle2"},children:a?"***":e==null?void 0:e.cvv})}),!h&&s.jsx(d,{position:"absolute",sx:{left:"32px",top:"20px"},children:s.jsx(S,{size:"small",color:"inherit",onClick:p,sx:{opacity:.2},children:a?s.jsx(K,{}):s.jsx(Q,{})})})]})}function os({card:e}){const h=z(t=>t.isReadyToAssign),a=z(t=>t.setOpen),u=z(t=>t.setCard),[p,m]=c.useState(null),l=!!p,{enqueueSnackbar:y}=O(),i=t=>{m(t.currentTarget)},C=()=>{m(null)},f=()=>{h?(a(!0),u(e)):(a(!1),y("Por el momento no se puede asignar la tarjeta. No hay comercios disponibles",{variant:"warning",autoHideDuration:5e3}))};return s.jsxs(s.Fragment,{children:[s.jsx(H,{title:"Acciones",children:s.jsx(S,{onClick:i,sx:{ml:2},"aria-controls":l?"card-menu":void 0,"aria-haspopup":"true","aria-expanded":l?"true":void 0,children:s.jsx(as,{width:20,height:20})})}),s.jsx(q,{open:!!l,anchorEl:p,onClose:C,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},arrow:"right-start",sx:{mt:-1,mr:0,p:2,width:250,"& .MuiMenuItem-root":{px:1,typography:"body2",borderRadius:.75,"& svg":{mr:2,width:20,height:20}}},children:s.jsxs(L,{onClick:()=>{f(),C()},sx:{color:"text.secondary"},children:[s.jsx(ns,{width:24,height:24}),"Asignar a Comercio"]})})]})}function cs({card:e}){return s.jsxs(W,{children:[s.jsx(U,{action:s.jsx(os,{card:e}),title:s.jsx(j,{sx:{typography:"subtitle2",opacity:.72},children:"Viabo Card"}),subheader:e==null?void 0:e.register,sx:{p:0}}),s.jsx("div",{children:s.jsx(J,{card:e})}),s.jsxs(n,{direction:"row",spacing:5,children:[s.jsxs(n,{children:[s.jsx(j,{sx:{mb:1,typography:"caption",opacity:.48},children:"Vencimiento"}),s.jsx(j,{sx:{typography:"subtitle1"},children:e==null?void 0:e.expiration})]}),s.jsx(is,{card:e})]})]})}function hs(){return s.jsxs(X,{sx:e=>({color:e.palette.common.white,display:"flex",p:3,flexDirection:"column",justifyContent:"space-between"}),children:[s.jsxs(n,{children:[s.jsx(o,{variant:"text",sx:{width:.3}}),s.jsx(o,{variant:"text",sx:{width:.5}})]}),s.jsx(n,{sx:{py:1.5},children:s.jsx(o,{variant:"text",sx:{width:.9,height:40}})}),s.jsxs(n,{direction:"row",spacing:2,children:[s.jsxs(n,{spacing:.5,children:[s.jsx(o,{variant:"text",sx:{width:100}}),s.jsx(o,{variant:"text",sx:{width:40}})]}),s.jsxs(n,{spacing:.5,children:[s.jsx(o,{variant:"text",sx:{width:100}}),s.jsxs(n,{direction:"row",spacing:1,alignItems:"center",children:[s.jsx(o,{variant:"text",sx:{width:40}}),s.jsx(o,{variant:"circular",sx:{width:16,height:16}})]})]})]})]})}function ws({cards:e,emptyMessage:h="No hay tarjetas disponibles en stock",cardComponent:a=cs,...u}){const p=N("up","xl"),{isCollapse:m}=_(),[l,y]=c.useState(1),[i,C]=c.useState(""),[f,t]=c.useState([]),{data:B,isLoading:E,isError:A,error:R,isSuccess:T,refetch:P}=e,r=B||[],w=E,b=p?12:9,V=c.useMemo(()=>(i!==""?f:r)||[],[i,r,f]),M=V.length||0,D=Math.ceil(M/b),k=Y(V||[],b),F=(x,g)=>{y(g),k.jump(g)};return c.useEffect(()=>{if(i){const x=Z(r,i);t(x)}else t([])},[i,r]),s.jsxs(s.Fragment,{children:[T&&(r==null?void 0:r.length)>0&&s.jsxs(d,{display:"flex",mb:3,flexDirection:{xs:"column",sm:"row"},alignItems:{xs:"center"},...u,children:[s.jsx(d,{children:s.jsx(ss,{fullWidth:!0,size:"small",placeholder:"Buscar ...",value:i,onChange:x=>C(x.target.value),InputProps:{startAdornment:s.jsx(es,{position:"start",children:s.jsx(d,{sx:{color:"text.disabled"},children:s.jsx(ts,{sx:{marginTop:1}})})})}})}),s.jsx(d,{sx:{flex:"1 1 auto",mb:{xs:3}}}),s.jsx($,{count:D,page:l,onChange:F})]}),!w&&T&&r.length===0&&s.jsx(I,{widthImage:"30%",message:h}),!w&&A&&s.jsx(G,{widthImage:"30%",errorMessage:R,handleButton:P}),!A&&s.jsx(d,{mb:3,sx:{display:"grid",gap:3,gridTemplateColumns:{xs:"repeat(1, 1fr)",sm:"repeat(2, 1fr)",md:"repeat(2, 1fr)",lg:m?"repeat(3, 1fr)":"repeat(2, 1fr)",xl:"repeat(4, 1fr)"}},children:(w?[...Array(b)]:k.currentData()||[]).map((x,g)=>x?c.createElement(a,{card:x,key:g}):s.jsx(hs,{},g))}),r.length>0&&M===0&&s.jsx(I,{widthImage:"30%",message:"No hay tarjetas que coincidan con la bÃºsqueda"})]})}function bs({handleAssign:e}){return s.jsx(d,{sx:{marginRight:3},children:s.jsx(H,{title:"Asignar",children:s.jsx(S,{onClick:e,children:s.jsx(rs,{sx:{color:h=>h.palette.info.main},width:24,height:24})})})})}export{rs as A,is as C,ys as F,ws as a,bs as b,fs as c};
