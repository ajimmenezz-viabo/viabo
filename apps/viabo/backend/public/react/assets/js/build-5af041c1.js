import{a as D}from"./build-7637d2c3.js";import{J as g,ay as T}from"./index-3809032b.js";import{f as r}from"./build-566d20b3.js";import{c as E}from"./build-2b227f05.js";const A=s=>{const h=D(s==null?void 0:s.ciphertext,s==null?void 0:s.iv);let u=0,C=0,f=0,x=0,y=0;return{movements:(h==null?void 0:h.map(a=>{var w,W,N;const c=parseFloat((a==null?void 0:a.amount)||"0");(a==null?void 0:a.type.toLowerCase())==="gasto"?u+=c:C+=c;const k=a!=null&&a.date?g(new Date(a==null?void 0:a.date),"dd MMM yyyy",{locale:T}):"",B=a!=null&&a.date?g(new Date(a==null?void 0:a.date),"p"):"",i=a!=null&&a.receiptFiles?(w=a==null?void 0:a.receiptFiles)==null?void 0:w.split(","):[],d=i==null?void 0:i.reduce((M,l)=>(l.endsWith(".xml")?M.xml=l:l.endsWith(".pdf")&&(M.pdf=l),M),{xml:null,pdf:null}),p=(d==null?void 0:d.xml)!==null&&(d==null?void 0:d.pdf)!==null,I=((W=a==null?void 0:a.operationType)==null?void 0:W.toLowerCase())==="otros cargos";return I&&(a!=null&&a.checked)&&p&&(x+=c),I&&(a!=null&&a.checked)&&!p&&(f+=c),I&&!(a!=null&&a.checked)&&(y+=c),{id:a==null?void 0:a.transactionId,serverDate:a==null?void 0:a.date,fullDate:E(a==null?void 0:a.date),date:k,time:B,description:a==null?void 0:a.description,amount:c,amountFormat:r(c),type:a==null?void 0:a.type.toLowerCase(),concept:(a==null?void 0:a.concept)??"",operationType:(N=a==null?void 0:a.operationType)==null?void 0:N.toUpperCase(),cardId:a==null?void 0:a.cardId,commerceId:a==null?void 0:a.cardCommerceId,ownerCard:a!=null&&a.cardMain?a==null?void 0:a.cardCommerceName:(a==null?void 0:a.cardOwnerName)===""?"Sin Asignar":a==null?void 0:a.cardOwnerName,cardNumber:a!=null&&a.cardMain?"Cuenta Maestra":a==null?void 0:a.cardNumber,cardCommerceName:a==null?void 0:a.cardCommerceName,paymentProcessor:a==null?void 0:a.cardPaymentProcessor,verified:!!(a!=null&&a.checked),isMainCard:!!(a!=null&&a.cardMain),expensesControl:{id:a==null?void 0:a.receiptId,isInvoice:p,invoiceFiles:d,otherFiles:p?[]:i},original:a}}))??[],income:r(C),expenses:r(u),balanceMovements:r(C-u),expensesWithInvoice:r(x),expensesWithoutInvoice:r(f),expensesWithoutChecked:r(y),totalExpensesOtherCharges:r(x+f+y)}};export{A as C};
