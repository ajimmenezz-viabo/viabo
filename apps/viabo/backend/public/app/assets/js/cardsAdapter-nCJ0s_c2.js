import{bg as m,aM as g}from"./vendor-_TWOdD6q.js";import{g as b}from"./crypto-4w0xa2KF.js";import{f as E,b as T,d as k}from"./fade-FopuCQlG.js";import{f as D}from"./formatTime-6Hp-6rfJ.js";import"./index-E9ArhrQG.js";import{c as x}from"./matchTypes--uN0rjmL.js";const R=e=>{const t=b(e==null?void 0:e.ciphertext,e==null?void 0:e.iv),s=parseFloat((t==null?void 0:t.balance)===""?"0":t==null?void 0:t.balance.replace(/,/g,""));if(t)return{SPEI:t==null?void 0:t.spei,PAYNET:t==null?void 0:t.paynet,cardON:(t==null?void 0:t.block)==="UnBlocked",nip:t==null?void 0:t.nip,balance:s,balanceFormatted:E(s)};throw new Error("Algo fallo al obtenerla informacion")};function y(e){const{id:t,number:s,CVV:i,register:o,expirationDate:l,paymentProcessorName:r,paymentProcessorId:f,statusId:C,statusName:w,commerceId:h,commerceName:I,ownerId:U,ownerName:a,ownerLastname:p,ownerPhone:A,ownerEmail:M,recorderId:V,recorderName:v,assignmentDate:u,active:P}=e,N=s==null?void 0:s.slice(-4);let n=a??"";return(n==null?void 0:n.length)>10&&(n=n.slice(0,13)+"..."),{id:t,cardTypeId:f,cardType:r,assignCommerce:{id:h,name:I},assignUser:{id:U,fullName:a!==""?m.startCase(m.camelCase(`${a==null?void 0:a.trim()} ${p==null?void 0:p.trim()} `)):"-",name:a===""?"-":m.startCase(m.camelCase(a)),lastName:m.startCase(m.camelCase(p)),phone:A,email:M,dateTime:u===""?"-":D(u),date:u===""?"-":g(new Date(o),"dd MMM yyyy"),time:u===""?"-":g(new Date(o),"p"),lastLogged:e!=null&&e.sessionLastDate&&(e==null?void 0:e.sessionLastDate)!==""?D(e==null?void 0:e.sessionLastDate):null},staffRegister:{id:V,name:v},cardNumber:s,cardNumberHidden:T(s),cardNumberMoreDigits:k(s),cardUserNumber:(n==null?void 0:n.toUpperCase())+" "+N,binCard:N,expiration:l,register:D(o),registerDate:o?g(new Date(o),"dd MMM yyyy"):"",registerTime:o?g(new Date(o),"p"):"",cvv:i,emptyCVV:i===""||!i?"SIN CVV":"CON CVV",status:{id:C,name:w},cardStatus:{isActive:(e==null?void 0:e.block)==="UnBlocked",name:(e==null?void 0:e.block)==="UnBlocked"?"Encendida":"Apagada"}}}const $=e=>{const t=b(e==null?void 0:e.ciphertext,e==null?void 0:e.iv);if(t&&Array.isArray(t)){const s=t==null?void 0:t.map(i=>y(i));return s==null||s.sort((i,o)=>{var l,r,f;return(f=(l=i==null?void 0:i.assignUser)==null?void 0:l.fullName)==null?void 0:f.localeCompare((r=o==null?void 0:o.assignUser)==null?void 0:r.fullName)}),x(s,"id","cardUserNumber")||[]}throw new Error("No se pueden obtener las tarjetas")};export{y as C,$ as a,R as b};
//# sourceMappingURL=cardsAdapter-nCJ0s_c2.js.map
