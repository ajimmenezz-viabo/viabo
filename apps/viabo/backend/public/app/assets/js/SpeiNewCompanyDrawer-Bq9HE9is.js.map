{"version":3,"mappings":"yvBASO,MAAMA,EAA+B,CAACC,EAAU,KAAO,CAC5D,KAAM,CAACC,EAAaC,CAAc,EAAIC,WAAS,IAAI,EAE7CC,EAAQC,EAAS,CACrB,SAAU,CAACC,EAAoB,wBAAwB,EACvD,QAAS,CAAC,CAAE,OAAAC,CAAQ,IAAKC,EAA+B,EACxD,qBAAsB,GACtB,MAAO,GACP,UAAW,IACX,GAAGR,CACP,CAAG,EAEDS,mBAAU,IAAM,CACd,GAAIL,GAAA,MAAAA,EAAO,QAAS,CAClB,MAAMM,EAAeC,EACnBP,EAAM,MACN,mFACD,EACDF,EAAeQ,CAAY,CAC5B,CACF,EAAE,CAACN,EAAM,QAASA,EAAM,KAAK,CAAC,EAExB,CACL,GAAGA,EACH,MAAOH,GAAe,IACvB,CACH,ECzBaW,EAA4B,CAACC,EAAWb,EAAU,KAAO,CACpE,KAAM,CAACC,EAAaC,CAAc,EAAIC,WAAS,IAAI,EAE7CC,EAAQC,EAAS,CACrB,SAAU,CAACC,EAAoB,gBAAiBO,CAAS,EACzD,QAAS,IAAMC,EAA2BD,CAAS,EACnD,qBAAsB,GACtB,MAAO,GACP,UAAW,IACX,GAAGb,CACP,CAAG,EAEDS,mBAAU,IAAM,CACd,GAAIL,GAAA,MAAAA,EAAO,QAAS,CAClB,MAAMM,EAAeC,EACnBP,EAAM,MACN,2FACD,EACDF,EAAeQ,CAAY,EAC3BK,EAAM,MAAML,EAAc,CACxB,KAAMM,EAA+BZ,EAAM,KAAK,CACxD,CAAO,CACF,CACF,EAAE,CAACA,EAAM,QAASA,EAAM,KAAK,CAAC,EAExB,CACL,GAAGA,EACH,MAAOH,GAAe,IACvB,CACH,ECzBMgB,EAAqBC,EAAQC,OAAK,UAAM,OAAO,kCAAsB,0EAAC,CAAC,EAEvEC,GAAuBA,IAAM,CAC3B,MAAEC,iBAAgBC,wBAAuBC,kBAAmBC,EAAsB,EAClFC,EAAUD,EAA+BE,KAAMD,OAAO,EAEtD,CACJE,KAAMC,EACNC,UAAWC,EACXC,QAASC,EACTC,MAAOC,EACPC,WACEpC,EAA6B,CAAEqC,QAAS,GAAO,EAC7C,CACJT,KAAMU,EACNR,UAAWS,EACXP,QAASQ,EACTN,MAAOO,EACPL,QAASM,GACPC,EAAuB,CAAEN,QAAS,GAAO,EAEvC,CACJT,KAAMgB,EACNZ,QAASa,EACTX,MAAOY,EACPC,WAAYC,GACVnC,EAA0Ba,iBAASuB,GAAI,CAAEZ,QAAS,CAAC,EAACX,WAASuB,IAAI,EAErEvC,YAAU,IAAM,CACVY,IACMc,IACWM,IACrB,EACC,CAACpB,CAAc,CAAC,EAEnB,MAAM4B,EAAcA,IAAM,CACxB3B,EAAsB,EAAK,EAC3BC,EAAe,IAAI,GAGfQ,EAAUC,GAAgBO,GAAsBK,EAChDf,EAAYC,GAAkBQ,GAAwBS,EACtDd,EAAQC,GAAcM,GAAoBK,EAEhD,aACGK,EACC,MAAM7B,EACN,YAAA4B,EACA,mBACGE,EACC,UAAAC,EAAA,IAACC,GAAW,QAAS,KAAO5B,WAAU,iBAAmB,gBAAgB,CAC3E,GAGF,SAAA2B,MAACE,GAAU,eAAgB,CAAEC,GAAI,CAAEC,SAAU,EAAGC,OAAQ,MAAO,GAC7D,SAACC,EAAA,KAAAP,EAAA,CAAM,QAAS,EAAG,EAAG,EACnBtB,mBAAc8B,MACd5B,GAAW,CAACF,GACXuB,MAACQ,EACC,cAAc3B,EACd,aAAc,+BACd,aAAc,IAAME,MAGvB,CAACJ,GAAW,CAACF,GAAaR,GACzB+B,MAACnC,EACC,mBAAmBW,EACnB,YAAAS,EACA,QAASM,EACT,UAAWM,KAGjB,EACF,CACF,EAEJ","names":["useFindSpeiAdminCompanyUsers","options","customError","setCustomError","useState","query","useQuery","SPEI_COMPANIES_KEYS","signal","getViaboSpeiAdminCompanyUsers","useEffect","errorMessage","getErrorAPI","useFindSpeiCompanyDetails","companyId","getViaboSpeiCompanyDetails","toast","getNotificationTypeByErrorCode","SpeiNewCompanyForm","Lodable","lazy","SpeiNewCompanyDrawer","openNewCompany","setOpenNewSpeiCompany","setSpeiCompany","useSpeiCompaniesStore","company","state","data","users","isLoading","isLoadingUsers","isError","isErrorUsers","error","errorUsers","refetch","enabled","costCenters","isLoadingCostCenters","isErrorCostCenters","errorCostCenters","refetchCostCenters","useFindSpeiCostCenters","companyDetails","isErrorDetails","errorDetails","isFetching","loadingDetails","id","handleClose","RightPanel","Stack","jsx","Typography","Scrollbar","sx","flexGrow","height","jsxs","RequestLoadingComponent","ErrorRequestPage"],"sources":["../../../../../frontend/src/app/business/viabo-spei/companies/hooks/useFindSpeiAdminCompanyUsers.js","../../../../../frontend/src/app/business/viabo-spei/companies/hooks/useFindSpeiCompanyDetails.js","../../../../../frontend/src/app/business/viabo-spei/companies/components/new-company/SpeiNewCompanyDrawer.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\r\n\r\nimport { useQuery } from '@tanstack/react-query'\r\n\r\nimport { SPEI_COMPANIES_KEYS } from '../adapters'\r\nimport { getViaboSpeiAdminCompanyUsers } from '../services'\r\n\r\nimport { getErrorAPI } from '@/shared/interceptors'\r\n\r\nexport const useFindSpeiAdminCompanyUsers = (options = {}) => {\r\n  const [customError, setCustomError] = useState(null)\r\n\r\n  const query = useQuery({\r\n    queryKey: [SPEI_COMPANIES_KEYS.USERS_ADMIN_COMPANY_LIST],\r\n    queryFn: ({ signal }) => getViaboSpeiAdminCompanyUsers(),\r\n    refetchOnWindowFocus: false,\r\n    retry: false,\r\n    staleTime: 300000,\r\n    ...options\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (query?.isError) {\r\n      const errorMessage = getErrorAPI(\r\n        query.error,\r\n        'No se puede obtener la lista de usuarios. Intente nuevamente o reporte a sistemas'\r\n      )\r\n      setCustomError(errorMessage)\r\n    }\r\n  }, [query.isError, query.error])\r\n\r\n  return {\r\n    ...query,\r\n    error: customError || null\r\n  }\r\n}\r\n","import { useEffect, useState } from 'react'\r\n\r\nimport { useQuery } from '@tanstack/react-query'\r\nimport { toast } from 'react-toastify'\r\n\r\nimport { SPEI_COMPANIES_KEYS } from '../adapters'\r\nimport { getViaboSpeiCompanyDetails } from '../services'\r\n\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\n\r\nexport const useFindSpeiCompanyDetails = (companyId, options = {}) => {\r\n  const [customError, setCustomError] = useState(null)\r\n\r\n  const query = useQuery({\r\n    queryKey: [SPEI_COMPANIES_KEYS.COMPANY_DETAILS, companyId],\r\n    queryFn: () => getViaboSpeiCompanyDetails(companyId),\r\n    refetchOnWindowFocus: false,\r\n    retry: false,\r\n    staleTime: 300000,\r\n    ...options\r\n  })\r\n\r\n  useEffect(() => {\r\n    if (query?.isError) {\r\n      const errorMessage = getErrorAPI(\r\n        query.error,\r\n        'No se puede obtener la información de la empresa. Intente nuevamente o reporte a sistemas'\r\n      )\r\n      setCustomError(errorMessage)\r\n      toast.error(errorMessage, {\r\n        type: getNotificationTypeByErrorCode(query.error)\r\n      })\r\n    }\r\n  }, [query.isError, query.error])\r\n\r\n  return {\r\n    ...query,\r\n    error: customError || null\r\n  }\r\n}\r\n","import { lazy, useEffect } from 'react'\r\n\r\nimport { Stack, Typography } from '@mui/material'\r\n\r\nimport { useFindSpeiCostCenters } from '../../../cost-centers/hooks'\r\nimport { useFindSpeiAdminCompanyUsers, useFindSpeiCompanyDetails } from '../../hooks'\r\nimport { useSpeiCompaniesStore } from '../../store'\r\n\r\nimport { RightPanel } from '@/app/shared/components'\r\nimport { RequestLoadingComponent } from '@/shared/components/loadings'\r\nimport { Lodable } from '@/shared/components/lodables'\r\nimport { ErrorRequestPage } from '@/shared/components/notifications'\r\nimport { Scrollbar } from '@/shared/components/scroll'\r\n\r\nconst SpeiNewCompanyForm = Lodable(lazy(() => import('./SpeiNewCompanyForm')))\r\n\r\nconst SpeiNewCompanyDrawer = () => {\r\n  const { openNewCompany, setOpenNewSpeiCompany, setSpeiCompany } = useSpeiCompaniesStore()\r\n  const company = useSpeiCompaniesStore(state => state.company)\r\n\r\n  const {\r\n    data: users,\r\n    isLoading: isLoadingUsers,\r\n    isError: isErrorUsers,\r\n    error: errorUsers,\r\n    refetch\r\n  } = useFindSpeiAdminCompanyUsers({ enabled: false })\r\n  const {\r\n    data: costCenters,\r\n    isLoading: isLoadingCostCenters,\r\n    isError: isErrorCostCenters,\r\n    error: errorCostCenters,\r\n    refetch: refetchCostCenters\r\n  } = useFindSpeiCostCenters({ enabled: false })\r\n\r\n  const {\r\n    data: companyDetails,\r\n    isError: isErrorDetails,\r\n    error: errorDetails,\r\n    isFetching: loadingDetails\r\n  } = useFindSpeiCompanyDetails(company?.id, { enabled: !!company?.id })\r\n\r\n  useEffect(() => {\r\n    if (openNewCompany) {\r\n      refetch()\r\n      refetchCostCenters()\r\n    }\r\n  }, [openNewCompany])\r\n\r\n  const handleClose = () => {\r\n    setOpenNewSpeiCompany(false)\r\n    setSpeiCompany(null)\r\n  }\r\n\r\n  const isError = isErrorUsers || isErrorCostCenters || isErrorDetails\r\n  const isLoading = isLoadingUsers || isLoadingCostCenters || loadingDetails\r\n  const error = errorUsers || errorCostCenters || errorDetails\r\n\r\n  return (\r\n    <RightPanel\r\n      open={openNewCompany}\r\n      handleClose={handleClose}\r\n      titleElement={\r\n        <Stack>\r\n          <Typography variant={'h6'}>{company ? 'Editar Empresa' : 'Nueva Empresa'}</Typography>\r\n        </Stack>\r\n      }\r\n    >\r\n      <Scrollbar containerProps={{ sx: { flexGrow: 0, height: 'auto' } }}>\r\n        <Stack spacing={3} p={3}>\r\n          {isLoading && <RequestLoadingComponent />}\r\n          {isError && !isLoading && (\r\n            <ErrorRequestPage\r\n              errorMessage={error}\r\n              titleMessage={'Error al obtener información'}\r\n              handleButton={() => refetch()}\r\n            />\r\n          )}\r\n          {!isError && !isLoading && openNewCompany && (\r\n            <SpeiNewCompanyForm\r\n              adminCompanyUsers={users}\r\n              costCenters={costCenters}\r\n              company={companyDetails}\r\n              onSuccess={handleClose}\r\n            />\r\n          )}\r\n        </Stack>\r\n      </Scrollbar>\r\n    </RightPanel>\r\n  )\r\n}\r\n\r\nexport default SpeiNewCompanyDrawer\r\n"],"file":"assets/js/SpeiNewCompanyDrawer-Bq9HE9is.js"}