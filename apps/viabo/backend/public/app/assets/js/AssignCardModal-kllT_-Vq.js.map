{"version":3,"file":"AssignCardModal-kllT_-Vq.js","sources":["../../../../../frontend/src/app/management/stock-cards/adapters/assignCardsAdapter.js","../../../../../frontend/src/app/management/stock-cards/hooks/useAssignCards.js"],"sourcesContent":["export const AssignCardsAdapter = cards => {\r\n  const commerceId = cards?.commerce?.value || ''\r\n  if (cards?.cardId) {\r\n    return {\r\n      cardId: cards?.cardId,\r\n      commerceId\r\n    }\r\n  }\r\n\r\n  return {\r\n    amount: cards?.numberOfCards.toString(),\r\n    paymentProcessorId: cards?.cardType?.value || '',\r\n    commerceId\r\n  }\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { useMutation, useQueryClient } from '@tanstack/react-query'\r\nimport { useSnackbar } from 'notistack'\r\n\r\nimport { MANAGEMENT_STOCK_CARDS_KEYS } from '@/app/management/stock-cards/adapters'\r\nimport { assignCards } from '@/app/management/stock-cards/services'\r\nimport { getErrorAPI, getNotificationTypeByErrorCode } from '@/shared/interceptors'\r\n\r\nexport const useAssignCards = (options = {}) => {\r\n  const { enqueueSnackbar } = useSnackbar()\r\n  const [customError, setCustomError] = useState(null)\r\n  const client = useQueryClient()\r\n\r\n  const register = useMutation(assignCards, {\r\n    onSuccess: () => {\r\n      setCustomError(null)\r\n      client.invalidateQueries([MANAGEMENT_STOCK_CARDS_KEYS.STOCK_CARDS_LIST])\r\n      enqueueSnackbar('Se asignaron las tarjetas al comercio', {\r\n        variant: 'success',\r\n        autoHideDuration: 5000\r\n      })\r\n    },\r\n    onError: error => {\r\n      client.invalidateQueries([MANAGEMENT_STOCK_CARDS_KEYS.STOCK_CARDS_LIST])\r\n      const errorFormatted = getErrorAPI(error, 'No se puede asignar las tarjetas al comercio')\r\n      enqueueSnackbar(errorFormatted, {\r\n        variant: getNotificationTypeByErrorCode(error),\r\n        autoHideDuration: 5000\r\n      })\r\n      setCustomError(errorFormatted)\r\n    },\r\n    ...options\r\n  })\r\n\r\n  return {\r\n    ...register,\r\n    error: customError || null\r\n  }\r\n}\r\n"],"names":["AssignCardsAdapter","cards","commerceId","_a","_b","useAssignCards","options","enqueueSnackbar","useSnackbar","customError","setCustomError","useState","client","useQueryClient","useMutation","assignCards","MANAGEMENT_STOCK_CARDS_KEYS","error","errorFormatted","getErrorAPI","getNotificationTypeByErrorCode"],"mappings":"g0BAAO,MAAMA,EAAqBC,GAAS,SACzC,MAAMC,IAAaC,EAAAF,GAAA,YAAAA,EAAO,WAAP,YAAAE,EAAiB,QAAS,GAC7C,OAAIF,GAAA,MAAAA,EAAO,OACF,CACL,OAAQA,GAAA,YAAAA,EAAO,OACf,WAAAC,CACD,EAGI,CACL,OAAQD,GAAA,YAAAA,EAAO,cAAc,WAC7B,qBAAoBG,EAAAH,GAAA,YAAAA,EAAO,WAAP,YAAAG,EAAiB,QAAS,GAC9C,WAAAF,CACD,CACH,ECLaG,EAAiB,CAACC,EAAU,KAAO,CAC9C,KAAM,CAAE,gBAAAC,CAAiB,EAAGC,EAAa,EACnC,CAACC,EAAaC,CAAc,EAAIC,EAAAA,SAAS,IAAI,EAC7CC,EAASC,EAAgB,EAuB/B,MAAO,CACL,GAtBeC,EAAYC,EAAa,CACxC,UAAW,IAAM,CACfL,EAAe,IAAI,EACnBE,EAAO,kBAAkB,CAACI,EAA4B,gBAAgB,CAAC,EACvET,EAAgB,wCAAyC,CACvD,QAAS,UACT,iBAAkB,GAC1B,CAAO,CACF,EACD,QAASU,GAAS,CAChBL,EAAO,kBAAkB,CAACI,EAA4B,gBAAgB,CAAC,EACvE,MAAME,EAAiBC,EAAYF,EAAO,8CAA8C,EACxFV,EAAgBW,EAAgB,CAC9B,QAASE,EAA+BH,CAAK,EAC7C,iBAAkB,GAC1B,CAAO,EACDP,EAAeQ,CAAc,CAC9B,EACD,GAAGZ,CACP,CAAG,EAIC,MAAOG,GAAe,IACvB,CACH"}