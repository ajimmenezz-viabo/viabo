import{r as u,u as L,A as y,a as F,s as g,g as E,b as S,c as A,d as T,e as C,j as e,I as P,m as k,T as p,M,S as o,f,h as W,L as H,i as R,k as B,P as U,F as q,B as I,l as z}from"./index-23408dd2.js";import{F as N,u as O}from"./build-0d19139b.js";import{c as _,a as w}from"./build-84a54290.js";import{u as D}from"./build-9b1f8f5b.js";import{A as G}from"./build-149f6cab.js";import{A as Q,v as j}from"./build-68d1d76d.js";import{F as $}from"./build-99db375a.js";import{P as V,a as Y}from"./build-aa1f0437.js";import{T as K,I as b}from"./build-70633a7e.js";import{I as X}from"./build-54e0e54c.js";import{R as J}from"./build-53b28d89.js";import{L as Z}from"./build-f2ae8137.js";import"./build-bee6630b.js";import"./build-a1ec3a2c.js";import"./build-c875c593.js";import"./build-2876f46a.js";import"./build-9cdd5450.js";import"./build-e79ac7d8.js";const ee=(a={})=>{const[i,t]=u.useState(null),[c,l]=u.useState(!1),{login:d}=L(),r=D([y.USER_MODULES]),n=F(A,{onSuccess:s=>{t(null),g(s==null?void 0:s.token),l(!0)},onError:s=>{l(!1),g(null),t({message:E(s,"Ocurrio un error inesperado. Intente nuevamente o reportelo al área de sistemas"),code:S(s)})},...a}),m=T([y.USER_MODULES],C,{onSuccess:s=>{d(),t(null),l(!1)},onError:s=>{l(!1),g(null),t({message:E(s,"Ocurrio un error inesperado. Intente nuevamente o reportelo al área de sistemas"),code:S(s)})},enabled:!!c,retry:!1});return{...n,setCustomError:t,isError:n.isError||m.isError,isSuccess:n.isSuccess&&m.isSuccess,isLoading:n.isLoading||r===1,error:i??null}};function se({name:a,InputProps:i,...t}){const[c,l]=u.useState(!1);return e.jsx(N,{name:a,children:({field:d,meta:r})=>e.jsx(K,{...d,...t,type:c?"text":"password",InputProps:{...i,endAdornment:e.jsx(X,{position:"end",sx:{mr:.5},children:e.jsx(P,{size:"small",edge:"end",onClick:()=>l(n=>!n),children:c?e.jsx(V,{}):e.jsx(Y,{})})})},error:!!(r.touched&&r.error),helperText:r.touched&&r.error})})}const ie=({text:a,variant:i,loop:t,...c})=>{const[l,d]=u.useState(""),[r,n]=u.useState(0);return u.useEffect(()=>{const m=setInterval(()=>{r<a.length?(d(s=>s+a[r]),n(s=>s+1)):t&&(d(""),n(0))},100);return()=>clearInterval(m)},[r,a,t]),e.jsx(Q,{children:e.jsx(k.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{minHeight:"15px"},children:e.jsx(p,{variant:i,...c,children:l})})})};function te(){const{mutate:a,error:i,isError:t,isLoading:c,isSuccess:l,setCustomError:d}=ee(),r=_().shape({email:w().email("Ingrese un correo valido").required("El correo es requerido"),password:w().required("La contraseña es requerida")}),n=O({initialValues:{email:"",password:""},validationSchema:r,onSubmit:(h,{setSubmitting:ne})=>{d(null);const v={username:h==null?void 0:h.email,password:h==null?void 0:h.password};a(v)}}),{isSubmitting:m,setSubmitting:s}=n,x=c||m;return u.useEffect(()=>{(l||t)&&s(!1)},[t,l]),e.jsx(M,{children:e.jsxs(o,{spacing:3,p:4,justifyContent:"center",height:1,children:[e.jsxs(o,{children:[e.jsx(f.div,{variants:j().inRight,children:e.jsx(p,{align:"center",variant:"h3",sx:{color:"primary.main",fontWeight:"fontWeightMedium"},children:"Aquí Comienza"})}),e.jsx(f.div,{variants:j().inRight,children:e.jsx(p,{align:"center",variant:"h3",sx:{color:"primary.light",fontWeight:"fontWeightMedium"},children:"tu agilidad en pagos"})})]}),e.jsx(ie,{color:"common",text:"¡Es tiempo de transformar tu negocio!",variant:"h6",align:"center"}),i&&e.jsxs(G,{listenElement:i,sx:{mt:3,textAlign:"initial"},severity:i==null?void 0:i.code,children:[e.jsx(W,{sx:{textAlign:"initial"},children:"Inicio de Sesión"}),i==null?void 0:i.message]}),e.jsx(f.div,{...j().in,children:e.jsx($,{formik:n,children:e.jsxs(o,{spacing:2,flex:1,children:[e.jsxs(o,{spacing:1,children:[e.jsx(b,{children:"Email"}),e.jsx(J,{disabled:x,name:"email",placeholder:"usuario@dominio.com",type:"email",fullWidth:!0,InputLabelProps:{shrink:!0}})]}),e.jsxs(o,{spacing:1,children:[e.jsx(b,{children:"Contraseña"}),e.jsx(se,{InputLabelProps:{shrink:!0},disabled:x,name:"password",placeholder:"********",fullWidth:!0})]}),e.jsx(o,{pt:1,children:e.jsx(H,{loading:x,variant:"contained",color:"primary",fullWidth:!0,type:"submit",size:"large",disabled:m,children:"Accesar a mi cuenta"})}),e.jsxs(p,{variant:"body2",fontWeight:600,align:"center",sx:{color:"text.secondary"},children:["¿No tienes una cuenta?  ",e.jsx(Z,{color:"primary",component:R,to:"/registro",children:"Inscribete."})]})]})})})]})})}const re="/react/assets/webp/build-4b7ba5b7.webp",be=()=>{const a=B();return u.useEffect(()=>{a.removeQueries()},[]),e.jsx(U,{title:"Inicio de Sesión",children:e.jsx(o,{alignItems:"center",justifyContent:"center",minHeight:"100vH",children:e.jsxs(o,{px:{sm:10,xl:20},width:1,height:1,direction:"row",children:[e.jsxs(o,{flexGrow:1,width:1,height:1,minHeight:"70vh",maxHeight:"90vH",position:"relative",sx:{overflowX:"hidden",overflowY:"auto"},justifyContent:"space-between",children:[e.jsxs(o,{direction:"row",spacing:1,alignItems:"center",px:{xs:5,sm:0},children:[e.jsx(q,{sx:{width:100}}),e.jsx(p,{fontWeight:"600",variant:"subtitle1",children:"Agilidad en pagos"})]}),e.jsx(I,{flexGrow:1}),e.jsx(o,{flex:1,px:{xs:0,sm:5,xl:15},children:e.jsx(te,{})})]}),e.jsx(o,{width:1,justifyContent:"center",height:1,flexGrow:1,sx:{display:{xs:"none",sm:"none",lg:"flex"}},children:e.jsx(I,{component:z.LazyLoadImage,placeholderSrc:"https://zone-assets-api.vercel.app/assets/img_placeholder.svg",wrapperClassName:"wrapper",effect:"blur",height:1,maxHeight:"90vH",sx:{objectFit:"fill"},borderRadius:4,src:re})})]})})})};export{be as default};
